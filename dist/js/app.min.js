!function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){var n=e[o][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){function i(){u=!1,a.length?l=a.concat(l):h=-1,l.length&&r()}function r(){if(!u){var t=setTimeout(i);u=!0;for(var e=l.length;e;){for(a=l,l=[];++h<e;)a&&a[h].run();h=-1,e=l.length}a=null,u=!1,clearTimeout(t)}}function s(t,e){this.fun=t,this.array=e}function o(){}var a,c=e.exports={},l=[],u=!1,h=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new s(t,e)),1!==l.length||u||setTimeout(r,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=o,c.addListener=o,c.once=o,c.off=o,c.removeListener=o,c.removeAllListeners=o,c.emit=o,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],2:[function(t,e,n){var i=t("./lib/xhr"),r=t("./lib/jsonp"),s=t("./lib/promise");e.exports=function(t){function e(s,c){var l;return t.isPlainObject(s)&&(c=s,s=""),c=t.extend({url:s},c),c=t.extend(!0,{},e.options,this.options,c),null===c.crossOrigin&&(c.crossOrigin=a(c.url)),c.method=c.method.toUpperCase(),c.headers=t.extend({},e.headers.common,c.crossOrigin?{}:e.headers.custom,e.headers[c.method.toLowerCase()],c.headers),t.isPlainObject(c.data)&&/^(GET|JSONP)$/i.test(c.method)&&(t.extend(c.params,c.data),delete c.data),c.emulateHTTP&&!c.crossOrigin&&/^(PUT|PATCH|DELETE)$/i.test(c.method)&&(c.headers["X-HTTP-Method-Override"]=c.method,c.method="POST"),c.emulateJSON&&t.isPlainObject(c.data)&&(c.headers["Content-Type"]="application/x-www-form-urlencoded",c.data=t.url.params(c.data)),t.isObject(c.data)&&/FormData/i.test(c.data.toString())&&delete c.headers["Content-Type"],t.isPlainObject(c.data)&&(c.data=JSON.stringify(c.data)),l=("JSONP"==c.method?r:i).call(this.vm,t,c),l=n(l.then(o,o),this.vm),c.success&&(l=l.success(c.success)),c.error&&(l=l.error(c.error)),l}function n(t,e){return t.success=function(i){return n(t.then(function(t){return i.call(e,t.data,t.status,t)||t}),e)},t.error=function(i){return n(t.then(void 0,function(t){return i.call(e,t.data,t.status,t)||t}),e)},t.always=function(i){var r=function(t){return i.call(e,t.data,t.status,t)||t};return n(t.then(r,r),e)},t}function o(t){try{t.data=JSON.parse(t.responseText)}catch(e){t.data=t.responseText}return t.ok?t:s.reject(t)}function a(e){var n=t.url.parse(e);return n.protocol!==c.protocol||n.host!==c.host}var c=t.url.parse(location.href),l={"Content-Type":"application/json;charset=utf-8"};return e.options={method:"get",params:{},data:"",xhr:null,jsonp:"callback",beforeSend:null,crossOrigin:null,emulateHTTP:!1,emulateJSON:!1},e.headers={put:l,post:l,patch:l,"delete":l,common:{Accept:"application/json, text/plain, */*"},custom:{"X-Requested-With":"XMLHttpRequest"}},["get","put","post","patch","delete","jsonp"].forEach(function(n){e[n]=function(e,i,r,s){return t.isFunction(i)&&(s=r,r=i,i=void 0),this(e,t.extend({method:n,data:i,success:r},s))}}),t.http=e}},{"./lib/jsonp":4,"./lib/promise":5,"./lib/xhr":7}],3:[function(t,e,n){function i(e){var n=t("./lib/util")(e);e.url=t("./url")(n),e.http=t("./http")(n),e.resource=t("./resource")(n),Object.defineProperties(e.prototype,{$url:{get:function(){return n.options(e.url,this,this.$options.url)}},$http:{get:function(){return n.options(e.http,this,this.$options.http)}},$resource:{get:function(){return e.resource.bind(this)}}})}window.Vue&&Vue.use(i),e.exports=i},{"./http":2,"./lib/util":6,"./resource":8,"./url":9}],4:[function(t,e,n){var i=t("./promise");e.exports=function(t,e){var n,r,s="_jsonp"+Math.random().toString(36).substr(2),o={};return e.params[e.jsonp]=s,t.isFunction(e.beforeSend)&&e.beforeSend.call(this,{},e),new i(function(i,a){n=document.createElement("script"),n.src=t.url(e),n.type="text/javascript",n.async=!0,window[s]=function(t){r=t};var c=function(t){delete window[s],document.body.removeChild(n),"load"!==t.type||r||(t.type="error"),o.ok="error"!==t.type,o.status=o.ok?200:404,o.responseText=r?r:t.type,(o.ok?i:a)(o)};n.onload=c,n.onerror=c,document.body.appendChild(n)})}},{"./promise":5}],5:[function(t,e,n){function i(t){this.state=o,this.value=void 0,this.deferred=[];var e=this;try{t(function(t){e.resolve(t)},function(t){e.reject(t)})}catch(n){e.reject(n)}}var r=0,s=1,o=2;i.reject=function(t){return new i(function(e,n){n(t)})},i.resolve=function(t){return new i(function(e,n){e(t)})},i.all=function(t){return new i(function(e,n){function i(n){return function(i){s[n]=i,r+=1,r===t.length&&e(s)}}var r=0,s=[];0===t.length&&e(s);for(var o=0;o<t.length;o+=1)t[o].then(i(o),n)})},i.race=function(t){return new i(function(e,n){for(var i=0;i<t.length;i+=1)t[i].then(e,n)})};var a=i.prototype;a.resolve=function(t){var e=this;if(e.state===o){if(t===e)throw new TypeError("Promise settled with itself.");var n=!1;try{var i=t&&t.then;if(null!==t&&"object"==typeof t&&"function"==typeof i)return void i.call(t,function(t){n||e.resolve(t),n=!0},function(t){n||e.reject(t),n=!0})}catch(s){return void(n||e.reject(s))}e.state=r,e.value=t,e.notify()}},a.reject=function(t){var e=this;if(e.state===o){if(t===e)throw new TypeError("Promise settled with itself.");e.state=s,e.value=t,e.notify()}},a.notify=function(){var t=this;l(function(){if(t.state!==o)for(;t.deferred.length;){var e=t.deferred.shift(),n=e[0],i=e[1],a=e[2],c=e[3];try{t.state===r?a("function"==typeof n?n.call(void 0,t.value):t.value):t.state===s&&("function"==typeof i?a(i.call(void 0,t.value)):c(t.value))}catch(l){c(l)}}})},a["catch"]=function(t){return this.then(void 0,t)},a.then=function(t,e){var n=this;return new i(function(i,r){n.deferred.push([t,e,i,r]),n.notify()})};var c=[],l=function(t){c.push(t),1===c.length&&l.async()};if(l.run=function(){for(;c.length;)c[0](),c.shift()},window.MutationObserver){var u=document.createElement("div"),h=new MutationObserver(l.run);h.observe(u,{attributes:!0}),l.async=function(){u.setAttribute("x",0)}}else l.async=function(){setTimeout(l.run)};e.exports=window.Promise||i},{}],6:[function(t,e,n){e.exports=function(t){function e(t,i,r){for(var s in i)r&&(n.isPlainObject(i[s])||n.isArray(i[s]))?(n.isPlainObject(i[s])&&!n.isPlainObject(t[s])&&(t[s]={}),n.isArray(i[s])&&!n.isArray(t[s])&&(t[s]=[]),e(t[s],i[s],r)):void 0!==i[s]&&(t[s]=i[s])}var n=t.util.extend({},t.util);return n.isString=function(t){return"string"==typeof t},n.isFunction=function(t){return"function"==typeof t},n.options=function(t,e,i){return i=i||{},n.isFunction(i)&&(i=i.call(e)),n.extend(t.bind({vm:e,options:i}),t,{options:i})},n.each=function(t,e){var i,r;if("number"==typeof t.length)for(i=0;i<t.length;i++)e.call(t[i],t[i],i);else if(n.isObject(t))for(r in t)t.hasOwnProperty(r)&&e.call(t[r],t[r],r);return t},n.extend=function(t){var n,i=[],r=i.slice.call(arguments,1);return"boolean"==typeof t&&(n=t,t=r.shift()),r.forEach(function(i){e(t,i,n)}),t},n}},{}],7:[function(t,e,n){var i=t("./promise"),r=window.XDomainRequest;e.exports=function(t,e){var n,s=new XMLHttpRequest;return r&&e.crossOrigin&&(s=new XDomainRequest,e.headers={}),t.isPlainObject(e.xhr)&&t.extend(s,e.xhr),t.isFunction(e.beforeSend)&&e.beforeSend.call(this,s,e),n=new i(function(n,i){s.open(e.method,t.url(e),!0),t.each(e.headers,function(t,e){s.setRequestHeader(e,t)});var r=function(t){s.ok="load"===t.type,s.ok&&s.status&&(s.ok=s.status>=200&&s.status<300),(s.ok?n:i)(s)};s.onload=r,s.onabort=r,s.onerror=r,s.send(e.data)})}},{"./promise":5}],8:[function(t,e,n){e.exports=function(t){function e(i,r,s,o){var a=this,c={};return s=t.extend({},e.actions,s),t.each(s,function(e,s){e=t.extend(!0,{url:i,params:r||{}},o,e),c[s]=function(){return(a.$http||t.http)(n(e,arguments))}}),c}function n(e,n){var i,r,s,o=t.extend({},e),a={};switch(n.length){case 4:s=n[3],r=n[2];case 3:case 2:if(!t.isFunction(n[1])){a=n[0],i=n[1],r=n[2];break}if(t.isFunction(n[0])){r=n[0],s=n[1];break}r=n[1],s=n[2];case 1:t.isFunction(n[0])?r=n[0]:/^(POST|PUT|PATCH)$/i.test(o.method)?i=n[0]:a=n[0];break;case 0:break;default:throw"Expected up to 4 arguments [params, data, success, error], got "+n.length+" arguments"}return o.data=i,o.params=t.extend({},o.params,a),r&&(o.success=r),s&&(o.error=s),o}return e.actions={get:{method:"GET"},save:{method:"POST"},query:{method:"GET"},update:{method:"PUT"},remove:{method:"DELETE"},"delete":{method:"DELETE"}},t.resource=e}},{}],9:[function(t,e,n){var i=document.documentMode,r=document.createElement("a");e.exports=function(t){function e(n,i){var r,o={},a={},c=n;return t.isPlainObject(c)||(c={url:n,params:i}),c=t.extend(!0,{},e.options,this.options,c),n=c.url.replace(/(\/?):([a-z]\w*)/gi,function(t,e,n){return c.params[n]?(o[n]=!0,e+s(c.params[n])):""}),t.isString(c.root)&&!n.match(/^(https?:)?\//)&&(n=c.root+"/"+n),t.each(c.params,function(t,e){o[e]||(a[e]=t)}),r=e.params(a),r&&(n+=(-1==n.indexOf("?")?"?":"&")+r),n}function n(e,i,r){var s,o=t.isArray(i),a=t.isPlainObject(i);t.each(i,function(i,c){s=t.isObject(i)||t.isArray(i),r&&(c=r+"["+(a||s?c:"")+"]"),!r&&o?e.add(i.name,i.value):s?n(e,i,c):e.add(c,i)})}function s(t){return o(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function o(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")}return e.options={url:"",root:null,params:{}},e.params=function(e){var i=[];return i.add=function(e,n){t.isFunction(n)&&(n=n()),null===n&&(n=""),this.push(s(e)+"="+s(n))},n(i,e),i.join("&")},e.parse=function(t){return i&&(r.href=t,t=r.href),r.href=t,{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",port:r.port,host:r.host,hostname:r.hostname,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):""}},t.url=e}},{}],10:[function(t,e,n){function i(t){return JSON.parse(JSON.stringify(t))}var r=t("../util"),s=t("../watcher"),o=t("../parsers/path"),a=t("../parsers/text"),c=t("../parsers/directive"),l=t("../parsers/expression"),u=/[^|]\|[^|]/;n.$get=function(t,e){var n=l.parse(t);if(n){if(e&&!l.isSimplePath(t)){var i=this;return function(){n.get.call(i,i)}}try{return n.get.call(this,this)}catch(r){}}},n.$set=function(t,e){var n=l.parse(t,!0);n&&n.set&&n.set.call(this,this,e)},n.$delete=function(t){r["delete"](this._data,t)},n.$watch=function(t,e,n){var i,r=this;"string"==typeof t&&(i=c.parse(t),t=i.expression);var o=new s(r,t,e,{deep:n&&n.deep,filters:i&&i.filters});return n&&n.immediate&&e.call(r,o.value),function(){o.teardown()}},n.$eval=function(t,e){if(u.test(t)){var n=c.parse(t),i=this.$get(n.expression,e);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(t,e)},n.$interpolate=function(t){var e=a.parse(t),n=this;return e?1===e.length?n.$eval(e[0].value)+"":e.map(function(t){return t.tag?n.$eval(t.value):t.value}).join(""):t},n.$log=function(t){var e=t?o.get(this._data,t):this._data;if(e&&(e=i(e)),!t)for(var n in this.$options.computed)e[n]=i(this[n]);console.log(e)}},{"../parsers/directive":60,"../parsers/expression":61,"../parsers/path":62,"../parsers/text":64,"../util":72,"../watcher":76}],11:[function(t,e,n){function i(t,e,n,i,s,o){e=r(e);var a=!c.inDoc(e),l=i===!1||a?s:o,u=!a&&!t._isAttached&&!c.inDoc(t.$el);return t._isFragment?(c.mapNodeRange(t._fragmentStart,t._fragmentEnd,function(n){l(n,e,t)}),n&&n()):l(t.$el,e,t,n),u&&t._callHook("attached"),t}function r(t){return"string"==typeof t?document.querySelector(t):t}function s(t,e,n,i){e.appendChild(t),i&&i()}function o(t,e,n,i){c.before(t,e),i&&i()}function a(t,e,n){c.remove(t),n&&n()}var c=t("../util"),l=t("../transition");n.$nextTick=function(t){c.nextTick(t,this)},n.$appendTo=function(t,e,n){return i(this,t,e,n,s,l.append)},n.$prependTo=function(t,e,n){return t=r(t),t.hasChildNodes()?this.$before(t.firstChild,e,n):this.$appendTo(t,e,n),this},n.$before=function(t,e,n){return i(this,t,e,n,o,l.before)},n.$after=function(t,e,n){return t=r(t),t.nextSibling?this.$before(t.nextSibling,e,n):this.$appendTo(t.parentNode,e,n),this},n.$remove=function(t,e){if(!this.$el.parentNode)return t&&t();var n=this._isAttached&&c.inDoc(this.$el);n||(e=!1);var i=this,r=function(){n&&i._callHook("detached"),t&&t()};if(this._isFragment)c.removeNodeRange(this._fragmentStart,this._fragmentEnd,this,this._fragment,r);else{var s=e===!1?a:l.remove;s(this.$el,this,r)}return this}},{"../transition":65,"../util":72}],12:[function(t,e,n){function i(t,e,n){var i=t.$parent;if(i&&n&&!s.test(e))for(;i;)i._eventsCount[e]=(i._eventsCount[e]||0)+n,i=i.$parent}var r=t("../util");n.$on=function(t,e){return(this._events[t]||(this._events[t]=[])).push(e),i(this,t,1),this},n.$once=function(t,e){function n(){i.$off(t,n),e.apply(this,arguments)}var i=this;return n.fn=e,this.$on(t,n),this},n.$off=function(t,e){var n;if(!arguments.length){if(this.$parent)for(t in this._events)n=this._events[t],n&&i(this,t,-n.length);return this._events={},this}if(n=this._events[t],!n)return this;if(1===arguments.length)return i(this,t,-n.length),this._events[t]=null,this;for(var r,s=n.length;s--;)if(r=n[s],r===e||r.fn===e){i(this,t,-1),n.splice(s,1);break}return this},n.$emit=function(t){var e=this._events[t];if(this._shouldPropagate=!e,e){e=e.length>1?r.toArray(e):e;for(var n=r.toArray(arguments,1),i=0,s=e.length;s>i;i++){var o=e[i].apply(this,n);o===!0&&(this._shouldPropagate=!0)}}return this},n.$broadcast=function(t){if(this._eventsCount[t]){for(var e=this.$children,n=0,i=e.length;i>n;n++){var r=e[n];r.$emit.apply(r,arguments),r._shouldPropagate&&r.$broadcast.apply(r,arguments)}return this}},n.$dispatch=function(){this.$emit.apply(this,arguments);for(var t=this.$parent;t;)t.$emit.apply(t,arguments),t=t._shouldPropagate?t.$parent:null;return this};var s=/^hook:/},{"../util":72}],13:[function(t,e,n){(function(e){function i(t){return new Function("return function "+r.classify(t)+" (options) { this._init(options) }")()}var r=t("../util"),s=t("../config");n.util=r,n.config=s,n.set=r.set,n["delete"]=r["delete"],n.nextTick=r.nextTick,n.compiler=t("../compiler"),n.FragmentFactory=t("../fragment/factory"),n.internalDirectives=t("../directives/internal"),n.parsers={path:t("../parsers/path"),text:t("../parsers/text"),template:t("../parsers/template"),directive:t("../parsers/directive"),expression:t("../parsers/expression")},n.cid=0;var o=1;n.extend=function(t){t=t||{};var e=this,n=0===e.cid;if(n&&t._Ctor)return t._Ctor;var a=t.name||e.options.name,c=i(a||"VueComponent");return c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.cid=o++,c.options=r.mergeOptions(e.options,t),c["super"]=e,c.extend=e.extend,s._assetTypes.forEach(function(t){c[t]=e[t]}),a&&(c.options.components[a]=c),n&&(t._Ctor=c),c},n.use=function(t){if(!t.installed){var e=r.toArray(arguments,1);return e.unshift(this),"function"==typeof t.install?t.install.apply(t,e):t.apply(null,e),t.installed=!0,this}},n.mixin=function(t){var e=r.Vue;e.options=r.mergeOptions(e.options,t)},s._assetTypes.forEach(function(t){n[t]=function(n,i){return i?("production"!==e.env.NODE_ENV&&"component"===t&&r.commonTagRE.test(n)&&r.warn("Do not use built-in HTML elements as component id: "+n),"component"===t&&r.isPlainObject(i)&&(i.name=n,i=r.Vue.extend(i)),this.options[t+"s"][n]=i,i):this.options[t+"s"][n]}})}).call(this,t("_process"))},{"../compiler":19,"../config":21,"../directives/internal":28,"../fragment/factory":50,"../parsers/directive":60,"../parsers/expression":61,"../parsers/path":62,"../parsers/template":63,"../parsers/text":64,"../util":72,_process:1}],14:[function(t,e,n){(function(e){function i(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}var r=t("../util"),s=t("../compiler");n.$mount=function(t){return this._isCompiled?void("production"!==e.env.NODE_ENV&&r.warn("$mount() should be called only once.")):(t=r.query(t),t||(t=document.createElement("div")),this._compile(t),this._initDOMHooks(),r.inDoc(this.$el)?(this._callHook("attached"),i.call(this)):this.$once("hook:attached",i),this)},n.$destroy=function(t,e){this._destroy(t,e)},n.$compile=function(t,e,n,i){return s.compile(t,this.$options,!0)(this,t,e,n,i)}}).call(this,t("_process"))},{"../compiler":19,"../util":72,_process:1}],15:[function(t,e,n){(function(e){function i(){c=[],l=[],u={},h={},p=f=!1}function r(){s(c),f=!0,s(l),"production"!==e.env.NODE_ENV&&o.inBrowser&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__.emit("flush"),i()}function s(t){for(var n=0;n<t.length;n++){var i=t[n],r=i.id;u[r]=null,i.run(),"production"!==e.env.NODE_ENV&&null!=u[r]&&(h[r]=(h[r]||0)+1,h[r]>a._maxUpdateCount&&(t.splice(u[r],1),o.warn("You may have an infinite update loop for watcher with expression: "+i.expression)))}}var o=t("./util"),a=t("./config"),c=[],l=[],u={},h={},p=!1,f=!1;n.push=function(t){var e=t.id;if(null==u[e]){if(f&&!t.user)return void t.run();var n=t.user?l:c;u[e]=n.length,n.push(t),p||(p=!0,o.nextTick(r))}}}).call(this,t("_process"))},{"./config":21,"./util":72,_process:1}],16:[function(t,e,n){function i(t){this.size=0,this.limit=t,this.head=this.tail=void 0,this._keymap=Object.create(null)}var r=i.prototype;r.put=function(t,e){var n={key:t,value:e};return this._keymap[t]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit?this.shift():void this.size++},r.shift=function(){var t=this.head;return t&&(this.head=this.head.newer,this.head.older=void 0,t.newer=t.older=void 0,this._keymap[t.key]=void 0),t},r.get=function(t,e){var n=this._keymap[t];if(void 0!==n)return n===this.tail?e?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,e?n:n.value)},e.exports=i},{}],17:[function(t,e,n){(function(n){function i(t){return function(e,i){e._props={};for(var o,l,u,h,p,f=t.length;f--;)if(o=t[f],p=o.raw,l=o.path,u=o.options,e._props[l]=o,null===p)s.initProp(e,o,r(e,u));else if(o.dynamic)e._context?o.mode===c.ONE_TIME?(h=(i||e._context).$get(o.parentPath),s.initProp(e,o,h)):e._bindDir({name:"prop",def:a,prop:o},null,null,i):"production"!==n.env.NODE_ENV&&s.warn("Cannot bind dynamic prop on a root instance with no parent: "+o.name+'="'+p+'"');else if(o.optimizedLiteral){var d=s.stripQuotes(p);h=d===p?s.toBoolean(s.toNumber(p)):d,s.initProp(e,o,h)}else h=u.type===Boolean&&""===p?!0:p,s.initProp(e,o,h)}}function r(t,e){if(!e.hasOwnProperty("default"))return e.type===Boolean?!1:void 0;var i=e["default"];return s.isObject(i)&&"production"!==n.env.NODE_ENV&&s.warn("Object/Array as default prop values will be shared across multiple instances. Use a factory function to return the default value instead."),"function"==typeof i&&e.type!==Function?i.call(t):i}var s=t("../util"),o=t("../parsers/directive"),a=t("../directives/internal/prop"),c=t("../config")._propBindingModes,l={},u=t("../parsers/path").identRE,h=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/;e.exports=function(t,e){for(var r,a,p,f,d,v,m,g=[],_=Object.keys(e),b=_.length;b--;)a=_[b],r=e[a]||l,"production"===n.env.NODE_ENV||"$data"!==a?(d=s.camelize(a),u.test(d)?(m={name:a,path:d,options:r,mode:c.ONE_WAY,raw:null},p=s.hyphenate(a),null===(f=s.getBindAttr(t,p))&&(null!==(f=s.getBindAttr(t,p+".sync"))?m.mode=c.TWO_WAY:null!==(f=s.getBindAttr(t,p+".once"))&&(m.mode=c.ONE_TIME)),null!==f?(m.raw=f,v=o.parse(f),f=v.expression,m.filters=v.filters,s.isLiteral(f)?m.optimizedLiteral=!0:(m.dynamic=!0,"production"===n.env.NODE_ENV||m.mode!==c.TWO_WAY||h.test(f)||(m.mode=c.ONE_WAY,s.warn("Cannot bind two-way prop with non-settable parent path: "+f))),m.parentPath=f,"production"!==n.env.NODE_ENV&&r.twoWay&&m.mode!==c.TWO_WAY&&s.warn('Prop "'+a+'" expects a two-way binding type.')):null!==(f=s.attr(t,p))?m.raw=f:r.required&&"production"!==n.env.NODE_ENV&&s.warn("Missing required prop: "+a),g.push(m)):"production"!==n.env.NODE_ENV&&s.warn('Invalid prop key: "'+a+'". Prop keys must be valid identifiers.')):s.warn("Do not use $data as prop.");return i(g)}}).call(this,t("_process"))},{"../config":21,"../directives/internal/prop":29,"../parsers/directive":60,"../parsers/path":62,"../util":72,_process:1}],18:[function(t,e,n){(function(e){function i(t,e){var n=e._directives.length;t();var i=e._directives.slice(n);i.sort(r);for(var s=0,o=i.length;o>s;s++)i[s]._bind();return i}function r(t,e){return t=t.descriptor.def.priority||R,e=e.descriptor.def.priority||R,t>e?-1:t===e?0:1}function s(t,e,n,i){return function(r){o(t,e,r),n&&i&&o(n,i)}}function o(t,e,n){for(var i=e.length;i--;)e[i]._teardown(),n||t._directives.$remove(e[i])}function a(t,e){var n=t.nodeType;return 1===n&&"SCRIPT"!==t.tagName?c(t,e):3===n&&t.data.trim()?l(t,e):null}function c(t,e){if("TEXTAREA"===t.tagName){var n=k.parse(t.value);n&&(t.setAttribute(":value",k.tokensToExp(n)),t.value="")}var i,r=t.hasAttributes();return r&&(i=g(t,e)),i||(i=v(t,e)),i||(i=m(t,e)),!i&&r&&(i=y(t.attributes,e)),i}function l(t,e){if(t._skip)return u;var n=k.parse(t.wholeText);if(!n)return null;for(var i=t.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var r,s,o=document.createDocumentFragment(),a=0,c=n.length;c>a;a++)s=n[a],r=s.tag?h(s,e):document.createTextNode(s.value),o.appendChild(r);return p(n,o,e)}function u(t,e){E.remove(e)}function h(t,e){function n(e){if(!t.descriptor){var n=$.parse(t.value);t.descriptor={name:e,def:O[e],expression:n.expression,filters:n.filters}}}var i;return t.oneTime?i=document.createTextNode(t.value):t.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function p(t,e){return function(n,i,r,s){for(var o,a,c,l=e.cloneNode(!0),u=E.toArray(l.childNodes),h=0,p=t.length;p>h;h++)o=t[h],a=o.value,o.tag&&(c=u[h],o.oneTime?(a=(s||n).$eval(a),o.html?E.replace(c,A.parse(a,!0)):c.data=a):n._bindDir(o.descriptor,c,r,s));E.replace(i,l)}}function f(t,e){for(var n,i,r,s=[],o=0,c=t.length;c>o;o++)r=t[o],n=a(r,e),i=n&&n.terminal||"SCRIPT"===r.tagName||!r.hasChildNodes()?null:f(r.childNodes,e),s.push(n,i);return s.length?d(s):null}function d(t){return function(e,n,i,r,s){for(var o,a,c,l=0,u=0,h=t.length;h>l;u++){o=n[u],a=t[l++],c=t[l++];var p=E.toArray(o.childNodes);a&&a(e,o,i,r,s),c&&c(e,p,i,r,s)}}}function v(t,e){var n=t.tagName.toLowerCase();if(!E.commonTagRE.test(n)){var i=D(e,"elementDirectives",n);return i?b(t,n,"",e,i):void 0}}function m(t,e){var n=E.checkComponent(t,e);if(n){var i=E.findRef(t),r={name:"component",ref:i,expression:n.id,def:C.component,modifiers:{literal:!n.dynamic}},s=function(t,e,n,s,o){i&&E.defineReactive((s||t).$refs,i,null),t._bindDir(r,e,n,s,o)};return s.terminal=!0,s}}function g(t,e){if(null!==E.attr(t,"v-pre"))return _;if(t.hasAttribute("v-else")){var n=t.previousElementSibling;if(n&&n.hasAttribute("v-if"))return _}for(var i,r,s=0,o=F.length;o>s;s++)if(r=F[s],i=t.getAttribute("v-"+r))return b(t,r,i,e)}function _(){}function b(t,e,n,i,r){var s=$.parse(n),o={name:e,expression:s.expression,filters:s.filters,raw:n,def:r||O[e]};("for"===e||"router-view"===e)&&(o.ref=E.findRef(t));var a=function(t,e,n,i,r){o.ref&&E.defineReactive((i||t).$refs,o.ref,null),t._bindDir(o,e,n,i,r)};return a.terminal=!0,a}function y(t,n){function i(t,e,n){var i=$.parse(o);v.push({name:t,attr:a,raw:c,def:e,arg:u,modifiers:h,expression:i.expression,filters:i.filters,interp:n})}for(var r,s,o,a,c,l,u,h,p,f,d=t.length,v=[];d--;)if(r=t[d],s=a=r.name,o=c=r.value,f=k.parse(o),u=null,h=w(s),s=s.replace(V,""),f)o=k.tokensToExp(f),u=s,i("bind",O.bind,!0),"production"!==e.env.NODE_ENV&&"class"===s&&Array.prototype.some.call(t,function(t){return":class"===t.name||"v-bind:class"===t.name})&&E.warn('class="'+c+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.');else if(S.test(s))h.literal=!T.test(s),i("transition",C.transition);else if(j.test(s))u=s.replace(j,""),i("on",O.on);else if(T.test(s))l=s.replace(T,""),"style"===l||"class"===l?i(l,C[l]):(u=l,i("bind",O.bind));else if(0===s.indexOf("v-")){if(u=(u=s.match(P))&&u[1],u&&(s=s.replace(P,"")),l=s.slice(2),"else"===l)continue;p=D(n,"directives",l),"production"!==e.env.NODE_ENV&&E.assertAsset(p,"directive",l),p&&i(l,p)}return v.length?x(v):void 0}function w(t){var e=Object.create(null),n=t.match(V);if(n)for(var i=n.length;i--;)e[n[i].slice(1)]=!0;return e}function x(t){return function(e,n,i,r,s){for(var o=t.length;o--;)e._bindDir(t[o],n,i,r,s)}}var E=t("../util"),O=t("../directives/public"),C=t("../directives/internal"),N=t("./compile-props"),k=t("../parsers/text"),$=t("../parsers/directive"),A=t("../parsers/template"),D=E.resolveAsset,T=/^v-bind:|^:/,j=/^v-on:|^@/,P=/:(.*)$/,V=/\.[^\.]+/g,S=/^(v-bind:|:)?transition$/,F=["for","if"],R=1e3;n.compile=function(t,e,n){var r=n||!e._asComponent?a(t,e):null,o=r&&r.terminal||"SCRIPT"===t.tagName||!t.hasChildNodes()?null:f(t.childNodes,e);return function(t,e,n,a,c){var l=E.toArray(e.childNodes),u=i(function(){r&&r(t,e,n,a,c),o&&o(t,l,n,a,c)},t);return s(t,u)}},n.compileAndLinkProps=function(t,e,n,r){var o=N(e,n),a=i(function(){o(t,r)},t);return s(t,a)},n.compileRoot=function(t,n,r){var o,a,c=n._containerAttrs,l=n._replacerAttrs;if(11!==t.nodeType)n._asComponent?(c&&r&&(o=y(c,r)),l&&(a=y(l,n))):a=y(t.attributes,n);else if("production"!==e.env.NODE_ENV&&c){var u=c.filter(function(t){return t.name.indexOf("_v-")<0&&!j.test(t.name)&&"slot"!==t.name}).map(function(t){return'"'+t.name+'"'});if(u.length){var h=u.length>1;E.warn("Attribute"+(h?"s ":" ")+u.join(", ")+(h?" are":" is")+" ignored on component <"+n.el.tagName.toLowerCase()+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment_Instance")}}return function(t,e,n){var r,c=t._context;c&&o&&(r=i(function(){o(c,e,null,n)},c));var l=i(function(){a&&a(t,e)},t);return s(t,l,c,r)}},_.terminal=!0}).call(this,t("_process"))},{"../directives/internal":28,"../directives/public":38,"../parsers/directive":60,"../parsers/template":63,"../parsers/text":64,"../util":72,"./compile-props":17,_process:1}],19:[function(t,e,n){var i=t("../util");i.extend(n,t("./compile")),i.extend(n,t("./transclude"))},{"../util":72,"./compile":18,"./transclude":20}],20:[function(t,e,n){(function(e){function i(t,n){var i=n.template,c=a.parse(i,!0);if(c){var l=c.firstChild,u=l.tagName&&l.tagName.toLowerCase();return n.replace?(t===document.body&&"production"!==e.env.NODE_ENV&&o.warn("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),c.childNodes.length>1||1!==l.nodeType||"component"===u||o.resolveAsset(n,"components",u)||l.hasAttribute("is")||l.hasAttribute(":is")||l.hasAttribute("v-bind:is")||o.resolveAsset(n,"elementDirectives",u)||l.hasAttribute("v-for")||l.hasAttribute("v-if")?c:(n._replacerAttrs=r(l),s(t,l),l)):(t.appendChild(c),t)}"production"!==e.env.NODE_ENV&&o.warn("Invalid template option: "+i)}function r(t){return 1===t.nodeType&&t.hasAttributes()?o.toArray(t.attributes):void 0}function s(t,e){for(var n,i,r=t.attributes,s=r.length;s--;)n=r[s].name,i=r[s].value,e.hasAttribute(n)||c.test(n)?"class"===n&&(i=e.getAttribute(n)+" "+i,e.setAttribute(n,i)):e.setAttribute(n,i)}var o=t("../util"),a=t("../parsers/template"),c=/[^\w\-:\.]/;n.transclude=function(t,e){return e&&(e._containerAttrs=r(t)),o.isTemplate(t)&&(t=a.parse(t)),e&&(e._asComponent&&!e.template&&(e.template="<slot></slot>"),e.template&&(e._content=o.extractContent(t),t=i(t,e))),t instanceof DocumentFragment&&(o.prepend(o.createAnchor("v-start",!0),t),t.appendChild(o.createAnchor("v-end",!0))),t}}).call(this,t("_process"))},{"../parsers/template":63,"../util":72,_process:1}],21:[function(t,e,n){e.exports={debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,convertAllProperties:!1,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100};var i=["{{","}}"],r=["{{{","}}}"],s=t("./parsers/text");Object.defineProperty(e.exports,"delimiters",{get:function(){return i},set:function(t){i=t,s.compileRegex()}}),Object.defineProperty(e.exports,"unsafeDelimiters",{get:function(){return r},set:function(t){r=t,s.compileRegex()}})},{"./parsers/text":64}],22:[function(t,e,n){(function(n){function i(){}function r(t,e,i,r,s,o){this.vm=e,this.el=i,this.descriptor=t,this.name=t.name,this.expression=t.expression,this.arg=t.arg,this.modifiers=t.modifiers,this.filters=t.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=r,this._scope=s,this._frag=o,"production"!==n.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}var s=t("./util"),o=t("./watcher"),a=t("./parsers/expression");r.prototype._bind=function(){var t=this.name,e=this.descriptor;if(("cloak"!==t||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=e.attr||"v-"+t;this.el.removeAttribute(n)}var r=e.def;if("function"==typeof r?this.update=r:s.extend(this,r),this._setupParams(),this.bind&&this.bind(),this.literal)this.update&&this.update(e.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var a=this;this.update?this._update=function(t,e){a._locked||a.update(t,e)}:this._update=i;var c=this._preProcess?s.bind(this._preProcess,this):null,l=this._postProcess?s.bind(this._postProcess,this):null,u=this._watcher=new o(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:c,postProcess:l,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(u.value)}this._bound=!0},r.prototype._setupParams=function(){if(this.params){var t=this.params;this.params=Object.create(null);for(var e,n,i,r=t.length;r--;)e=t[r],i=s.camelize(e),n=s.getBindAttr(this.el,e),null!=n?this._setupParamWatcher(i,n):(n=s.attr(this.el,e),null!=n&&(this.params[i]=""===n?!0:n))}},r.prototype._setupParamWatcher=function(t,e){var n=this,i=!1,r=(this._scope||this.vm).$watch(e,function(e,r){if(n.params[t]=e,i){var s=n.paramWatchers&&n.paramWatchers[t];s&&s.call(n,e,r)}else i=!0},{immediate:!0});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(r)},r.prototype._checkStatement=function(){var t=this.expression;if(t&&this.acceptStatement&&!a.isSimplePath(t)){var e=a.parse(t).get,n=this._scope||this.vm,i=function(t){n.$event=t,e.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},r.prototype.set=function(t){this.twoWay?this._withLock(function(){this._watcher.set(t)}):"production"!==n.env.NODE_ENV&&s.warn("Directive.set() can only be used inside twoWaydirectives.")},r.prototype._withLock=function(t){var e=this;e._locked=!0,t.call(e),s.nextTick(function(){e._locked=!1})},r.prototype.on=function(t,e){s.on(this.el,t,e),(this._listeners||(this._listeners=[])).push([t,e])},r.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var t,e=this._listeners;if(e)for(t=e.length;t--;)s.off(this.el,e[t][0],e[t][1]);var i=this._paramUnwatchFns;if(i)for(t=i.length;t--;)i[t]();"production"!==n.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}},e.exports=r}).call(this,t("_process"))},{"./parsers/expression":61,"./util":72,"./watcher":76,_process:1}],23:[function(t,e,n){n.slot=t("./slot"),n.partial=t("./partial")},{"./partial":24,
"./slot":25}],24:[function(t,e,n){(function(n){var i=t("../../util"),r=t("../public/if"),s=t("../../fragment/factory");e.exports={priority:1750,params:["name"],paramWatchers:{name:function(t){r.remove.call(this),t&&this.insert(t)}},bind:function(){this.anchor=i.createAnchor("v-partial"),i.replace(this.el,this.anchor),this.insert(this.params.name)},insert:function(t){var e=i.resolveAsset(this.vm.$options,"partials",t);"production"!==n.env.NODE_ENV&&i.assertAsset(e,"partial",t),e&&(this.factory=new s(this.vm,e),r.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}}}).call(this,t("_process"))},{"../../fragment/factory":50,"../../util":72,"../public/if":37,_process:1}],25:[function(t,e,n){function i(t,e,n){function i(t){!r.isTemplate(t)||t.hasAttribute("v-if")||t.hasAttribute("v-for")||(t=s.parse(t)),t=s.clone(t),o.appendChild(t)}for(var o=document.createDocumentFragment(),a=0,c=t.length;c>a;a++){var l=t[a];n&&!l.__v_selected?i(l):n||l.parentNode!==e||(l.__v_selected=!0,i(l))}return o}var r=t("../../util"),s=t("../../parsers/template");e.exports={priority:1750,params:["name"],bind:function(){var t,e=this.vm,n=e.$options._content;if(!n)return void this.fallback();var r=e._context,s=this.params.name;if(s){var o='[slot="'+s+'"]',a=n.querySelectorAll(o);a.length?(t=i(a,n),t.hasChildNodes()?this.compile(t,r,e):this.fallback()):this.fallback()}else{var c=this,l=function(){c.compile(i(n.childNodes,n,!0),r,e)};e._isCompiled?l():e.$once("hook:compiled",l)}},fallback:function(){this.compile(r.extractContent(this.el,!0),this.vm)},compile:function(t,e,n){if(t&&e){var i=n?n._scope:this._scope;this.unlink=e.$compile(t,n,i,this._frag)}t?r.replace(this.el,t):r.remove(this.el)},unbind:function(){this.unlink&&this.unlink()}}},{"../../parsers/template":63,"../../util":72}],26:[function(t,e,n){function i(t){for(var e={},n=t.trim().split(/\s+/),i=n.length;i--;)e[n[i]]=!0;return e}function r(t,e){return s.isArray(t)?t.indexOf(e)>-1:t.hasOwnProperty(e)}var s=t("../../util"),o=s.addClass,a=s.removeClass;e.exports={deep:!0,update:function(t){t&&"string"==typeof t?this.handleObject(i(t)):s.isPlainObject(t)?this.handleObject(t):s.isArray(t)?this.handleArray(t):this.cleanup()},handleObject:function(t){this.cleanup(t);for(var e=this.prevKeys=Object.keys(t),n=0,i=e.length;i>n;n++){var r=e[n];t[r]?o(this.el,r):a(this.el,r)}},handleArray:function(t){this.cleanup(t);for(var e=0,n=t.length;n>e;e++)t[e]&&o(this.el,t[e]);this.prevKeys=t.slice()},cleanup:function(t){if(this.prevKeys)for(var e=this.prevKeys.length;e--;){var n=this.prevKeys[e];!n||t&&r(t,n)||a(this.el,n)}}}},{"../../util":72}],27:[function(t,e,n){(function(n){var i=t("../../util"),r=t("../../parsers/template");e.exports={priority:1500,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==n.env.NODE_ENV&&i.warn('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=i.extractContent(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=i.createAnchor("v-component"),i.replace(this.el,this.anchor),this.el.removeAttribute("is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+i.hyphenate(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(t){this.literal||this.setComponent(t)},setComponent:function(t,e){if(this.invalidatePending(),t){var n=this;this.resolveComponent(t,function(){n.mountComponent(e)})}else this.unbuild(!0),this.remove(this.childVM,e),this.childVM=null},resolveComponent:function(t,e){var n=this;this.pendingComponentCb=i.cancellable(function(i){n.ComponentName=i.options.name||t,n.Component=i,e()}),this.vm._resolveComponent(t,this.pendingComponentCb)},mountComponent:function(t){this.unbuild(!0);var e=this,n=this.Component.options.activate,i=this.getCached(),r=this.build();n&&!i?(this.waitingFor=r,n.call(r,function(){e.waitingFor=null,e.transition(r,t)})):(i&&r._updateRef(),this.transition(r,t))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(t){var e=this.getCached();if(e)return e;if(this.Component){var s={name:this.ComponentName,el:r.clone(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};t&&i.extend(s,t);var o=new this.Component(s);return this.keepAlive&&(this.cache[this.Component.cid]=o),"production"!==n.env.NODE_ENV&&this.el.hasAttribute("transition")&&o._isFragment&&i.warn("Transitions will not work on a fragment instance. Template: "+o.$options.template),o}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(t){this.waitingFor&&(this.waitingFor.$destroy(),this.waitingFor=null);var e=this.childVM;return!e||this.keepAlive?void(e&&e._updateRef(!0)):void e.$destroy(!1,t)},remove:function(t,e){var n=this.keepAlive;if(t){this.pendingRemovals++,this.pendingRemovalCb=e;var i=this;t.$remove(function(){i.pendingRemovals--,n||t._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else e&&e()},transition:function(t,e){var i=this,r=this.childVM;switch("production"!==n.env.NODE_ENV&&(r&&(r._inactive=!0),t._inactive=!1),this.childVM=t,i.params.transitionMode){case"in-out":t.$before(i.anchor,function(){i.remove(r,e)});break;case"out-in":i.remove(r,function(){t.$before(i.anchor,e)});break;default:i.remove(r),t.$before(i.anchor,e)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var t in this.cache)this.cache[t].$destroy();this.cache=null}}}}).call(this,t("_process"))},{"../../parsers/template":63,"../../util":72,_process:1}],28:[function(t,e,n){n.style=t("./style"),n["class"]=t("./class"),n.component=t("./component"),n.prop=t("./prop"),n.transition=t("./transition")},{"./class":26,"./component":27,"./prop":29,"./style":30,"./transition":31}],29:[function(t,e,n){var i=t("../../util"),r=t("../../watcher"),s=t("../../config")._propBindingModes;e.exports={bind:function(){var t=this.vm,e=t._context,n=this.descriptor.prop,o=n.path,a=n.parentPath,c=n.mode===s.TWO_WAY,l=this.parentWatcher=new r(e,a,function(e){i.assertProp(n,e)&&(t[o]=e)},{twoWay:c,filters:n.filters,scope:this._scope});if(i.initProp(t,n,l.value),c){var u=this;t.$once("hook:created",function(){u.childWatcher=new r(t,o,function(t){l.set(t)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}}},{"../../config":21,"../../util":72,"../../watcher":76}],30:[function(t,e,n){function i(t){if(u[t])return u[t];var e=r(t);return u[t]=u[e]=e,e}function r(t){t=s.hyphenate(t);var e=s.camelize(t),n=e.charAt(0).toUpperCase()+e.slice(1);if(l||(l=document.createElement("div")),e in l.style)return t;for(var i,r=o.length;r--;)if(i=a[r]+n,i in l.style)return o[r]+t}var s=t("../../util"),o=["-webkit-","-moz-","-ms-"],a=["Webkit","Moz","ms"],c=/!important;?$/,l=null,u={};e.exports={deep:!0,update:function(t){"string"==typeof t?this.el.style.cssText=t:s.isArray(t)?this.handleObject(t.reduce(s.extend,{})):this.handleObject(t||{})},handleObject:function(t){var e,n,i=this.cache||(this.cache={});for(e in i)e in t||(this.handleSingle(e,null),delete i[e]);for(e in t)n=t[e],n!==i[e]&&(i[e]=n,this.handleSingle(e,n))},handleSingle:function(t,e){if(t=i(t))if(null!=e&&(e+=""),e){var n=c.test(e)?"important":"";n&&(e=e.replace(c,"").trim()),this.el.style.setProperty(t,e,n)}else this.el.style.removeProperty(t)}}},{"../../util":72}],31:[function(t,e,n){var i=t("../../util"),r=t("../../transition/transition");e.exports={priority:1100,update:function(t,e){var n=this.el,s=i.resolveAsset(this.vm.$options,"transitions",t);t=t||"v",n.__v_trans=new r(n,t,s,this.el.__vue__||this.vm),e&&i.removeClass(n,e+"-transition"),i.addClass(n,t+"-transition")}}},{"../../transition/transition":67,"../../util":72}],32:[function(t,e,n){(function(n){var i=t("../../util"),r="http://www.w3.org/1999/xlink",s=/^xlink:/,o={value:1,checked:1,selected:1},a={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},c=/^v-|^:|^@|^(is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/;e.exports={priority:850,bind:function(){var t=this.arg,e=this.el.tagName;if(t||(this.deep=!0),this.descriptor.interp&&((c.test(t)||"name"===t&&("PARTIAL"===e||"SLOT"===e))&&("production"!==n.env.NODE_ENV&&i.warn(t+'="'+this.descriptor.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.'),this.el.removeAttribute(t),this.invalid=!0),"production"!==n.env.NODE_ENV)){var r=t+'="'+this.descriptor.raw+'": ';"src"===t&&i.warn(r+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.'),"style"===t&&i.warn(r+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.')}},update:function(t){if(!this.invalid){var e=this.arg;this.arg?this.handleSingle(e,t):this.handleObject(t||{})}},handleObject:t("../internal/style").handleObject,handleSingle:function(t,e){o[t]&&t in this.el&&(this.el[t]="value"===t?e||"":e);var n=a[t];if(n){this.el[n]=e;var i=this.el.__v_model;i&&i.listener()}return"value"===t&&"TEXTAREA"===this.el.tagName?void this.el.removeAttribute(t):void(null!=e&&e!==!1?s.test(t)?this.el.setAttributeNS(r,t,e):this.el.setAttribute(t,e):this.el.removeAttribute(t))}}}).call(this,t("_process"))},{"../../util":72,"../internal/style":30,_process:1}],33:[function(t,e,n){e.exports={bind:function(){var t=this.el;this.vm.$once("hook:compiled",function(){t.removeAttribute("v-cloak")})}}},{}],34:[function(t,e,n){var i=t("../../util");e.exports={priority:1500,bind:function(){if(this.arg){var t=this.id=i.camelize(this.arg),e=(this._scope||this.vm).$els;e.hasOwnProperty(t)?e[t]=this.el:i.defineReactive(e,t,this.el)}},unbind:function(){var t=(this._scope||this.vm).$els;t[this.id]===this.el&&(t[this.id]=null)}}},{"../../util":72}],35:[function(t,e,n){(function(n){function i(t,e,n){var i=t.node.previousSibling;if(i){for(t=i.__vfrag__;!(t&&t.forId===n&&t.inserted||i===e);){if(i=i.previousSibling,!i)return;t=i.__vfrag__}return t}}function r(t){return t.node.__vue__||t.node.nextSibling.__vue__}function s(t){for(var e=-1,n=new Array(t);++e<t;)n[e]=e;return n}var o=t("../../util"),a=t("../../fragment/factory"),c=o.isObject,l=0;e.exports={priority:2e3,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var t=this.expression.match(/(.*) in (.*)/);if(t){var e=t[1].match(/\((.*),(.*)\)/);e?(this.iterator=e[1].trim(),this.alias=e[2].trim()):this.alias=t[1].trim(),this.expression=t[2]}if(!this.alias)return void("production"!==n.env.NODE_ENV&&o.warn("Alias is required in v-for."));this.id="__v-for__"+ ++l;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=o.createAnchor("v-for-start"),this.end=o.createAnchor("v-for-end"),o.replace(this.el,this.end),o.before(this.start,this.end),this.cache=Object.create(null),this.factory=new a(this.vm,this.el)},update:function(t){this.diff(t),this.updateRef(),this.updateModel()},diff:function(t){var e,n,r,s,a,l,u=t[0],h=this.fromObject=c(u)&&u.hasOwnProperty("$key")&&u.hasOwnProperty("$value"),p=this.params.trackBy,f=this.frags,d=this.frags=new Array(t.length),v=this.alias,m=this.iterator,g=this.start,_=this.end,b=o.inDoc(g),y=!f;for(e=0,n=t.length;n>e;e++)u=t[e],s=h?u.$key:null,a=h?u.$value:u,l=!c(a),r=!y&&this.getCachedFrag(a,e,s),r?(r.reused=!0,r.scope.$index=e,s&&(r.scope.$key=s),m&&(r.scope[m]=null!==s?s:e),(p||h||l)&&(r.scope[v]=a)):(r=this.create(a,v,e,s),r.fresh=!y),d[e]=r,y&&r.before(_);if(!y){var w=0,x=f.length-d.length;for(e=0,n=f.length;n>e;e++)r=f[e],r.reused||(this.deleteCachedFrag(r),this.remove(r,w++,x,b));var E,O,C,N=0;for(e=0,n=d.length;n>e;e++)r=d[e],E=d[e-1],O=E?E.staggerCb?E.staggerAnchor:E.end||E.node:g,r.reused&&!r.staggerCb?(C=i(r,g,this.id),C!==E&&this.move(r,O)):this.insert(r,N++,O,b),r.reused=r.fresh=!1}},create:function(t,e,n,i){var r=this._host,s=this._scope||this.vm,a=Object.create(s);a.$refs=Object.create(s.$refs),a.$els=Object.create(s.$els),a.$parent=s,a.$forContext=this,o.defineReactive(a,e,t),o.defineReactive(a,"$index",n),i?o.defineReactive(a,"$key",i):a.$key&&o.define(a,"$key",null),this.iterator&&o.defineReactive(a,this.iterator,null!==i?i:n);var c=this.factory.create(r,a,this._frag);return c.forId=this.id,this.cacheFrag(t,c,n,i),c},updateRef:function(){var t=this.descriptor.ref;if(t){var e,n=(this._scope||this.vm).$refs;this.fromObject?(e={},this.frags.forEach(function(t){e[t.scope.$key]=r(t)})):e=this.frags.map(r),n[t]=e}},updateModel:function(){if(this.isOption){var t=this.start.parentNode,e=t&&t.__v_model;e&&e.forceUpdate()}},insert:function(t,e,n,i){t.staggerCb&&(t.staggerCb.cancel(),t.staggerCb=null);var r=this.getStagger(t,e,null,"enter");if(i&&r){var s=t.staggerAnchor;s||(s=t.staggerAnchor=o.createAnchor("stagger-anchor"),s.__vfrag__=t),o.after(s,n);var a=t.staggerCb=o.cancellable(function(){t.staggerCb=null,t.before(s),o.remove(s)});setTimeout(a,r)}else t.before(n.nextSibling)},remove:function(t,e,n,i){if(t.staggerCb)return t.staggerCb.cancel(),void(t.staggerCb=null);var r=this.getStagger(t,e,n,"leave");if(i&&r){var s=t.staggerCb=o.cancellable(function(){t.staggerCb=null,t.remove()});setTimeout(s,r)}else t.remove()},move:function(t,e){t.before(e.nextSibling,!1)},cacheFrag:function(t,e,i,r){var s,a=this.params.trackBy,l=this.cache,u=!c(t);r||a||u?(s=a?"$index"===a?i:t[a]:r||t,l[s]?"$index"!==a&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(t):l[s]=e):(s=this.id,t.hasOwnProperty(s)?null===t[s]?t[s]=e:"production"!==n.env.NODE_ENV&&this.warnDuplicate(t):o.define(t,s,e)),e.raw=t},getCachedFrag:function(t,e,i){var r,s=this.params.trackBy,o=!c(t);if(i||s||o){var a=s?"$index"===s?e:t[s]:i||t;r=this.cache[a]}else r=t[this.id];return r&&(r.reused||r.fresh)&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(t),r},deleteCachedFrag:function(t){var e=t.raw,n=this.params.trackBy,i=t.scope,r=i.$index,s=i.hasOwnProperty("$key")&&i.$key,o=!c(e);if(n||s||o){var a=n?"$index"===n?r:e[n]:s||e;this.cache[a]=null}else e[this.id]=null,t.raw=null},getStagger:function(t,e,n,i){i+="Stagger";var r=t.node.__v_trans,s=r&&r.hooks,o=s&&(s[i]||s.stagger);return o?o.call(t,e,n):e*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(t){return this.rawValue=t,t},_postProcess:function(t){if(o.isArray(t))return t;if(o.isPlainObject(t)){for(var e,n=Object.keys(t),i=n.length,r=new Array(i);i--;)e=n[i],r[i]={$key:e,$value:t[e]};return r}return"number"==typeof t&&(t=s(t)),t||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var t,e=this.frags.length;e--;)t=this.frags[e],this.deleteCachedFrag(t),t.destroy()}},"production"!==n.env.NODE_ENV&&(e.exports.warnDuplicate=function(t){o.warn('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(t)+'. Use track-by="$index" if you are expecting duplicate values.')})}).call(this,t("_process"))},{"../../fragment/factory":50,"../../util":72,_process:1}],36:[function(t,e,n){var i=t("../../util"),r=t("../../parsers/template");e.exports={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=i.createAnchor("v-html"),i.replace(this.el,this.anchor))},update:function(t){t=i.toString(t),this.nodes?this.swap(t):this.el.innerHTML=t},swap:function(t){for(var e=this.nodes.length;e--;)i.remove(this.nodes[e]);var n=r.parse(t,!0,!0);this.nodes=i.toArray(n.childNodes),i.before(n,this.anchor)}}},{"../../parsers/template":63,"../../util":72}],37:[function(t,e,n){(function(n){var i=t("../../util"),r=t("../../fragment/factory");e.exports={priority:2e3,bind:function(){var t=this.el;if(t.__vue__)"production"!==n.env.NODE_ENV&&i.warn('v-if="'+this.expression+'" cannot be used on an instance root element.'),this.invalid=!0;else{var e=t.nextElementSibling;e&&null!==i.attr(e,"v-else")&&(i.remove(e),this.elseFactory=new r(this.vm,e)),this.anchor=i.createAnchor("v-if"),i.replace(t,this.anchor),this.factory=new r(this.vm,t)}},update:function(t){this.invalid||(t?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseFactory&&!this.elseFrag&&(this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy()}}}).call(this,t("_process"))},{"../../fragment/factory":50,"../../util":72,_process:1}],38:[function(t,e,n){n.text=t("./text"),n.html=t("./html"),n["for"]=t("./for"),n["if"]=t("./if"),n.show=t("./show"),n.model=t("./model"),n.on=t("./on"),n.bind=t("./bind"),n.el=t("./el"),n.ref=t("./ref"),n.cloak=t("./cloak")},{"./bind":32,"./cloak":33,"./el":34,"./for":35,"./html":36,"./if":37,"./model":40,"./on":44,"./ref":45,"./show":46,"./text":47}],39:[function(t,e,n){var i=t("../../../util");e.exports={bind:function(){function t(){var t=n.checked;return t&&n.hasOwnProperty("_trueValue")?n._trueValue:!t&&n.hasOwnProperty("_falseValue")?n._falseValue:t}var e=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:e.params.number?i.toNumber(n.value):n.value},this.listener=function(){var r=e._watcher.value;if(i.isArray(r)){var s=e.getValue();n.checked?i.indexOf(r,s)<0&&r.push(s):r.$remove(s)}else e.set(t())},this.on("change",this.listener),n.checked&&(this.afterBind=this.listener)},update:function(t){var e=this.el;i.isArray(t)?e.checked=i.indexOf(t,this.getValue())>-1:e.hasOwnProperty("_trueValue")?e.checked=i.looseEqual(t,e._trueValue):e.checked=!!t}}},{"../../../util":72}],40:[function(t,e,n){(function(n){var i=t("../../../util"),r={text:t("./text"),radio:t("./radio"),select:t("./select"),checkbox:t("./checkbox")};e.exports={priority:800,twoWay:!0,handlers:r,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==n.env.NODE_ENV&&i.warn("It seems you are using a read-only filter with v-model. You might want to use a two-way filter to ensure correct behavior.");var t,e=this.el,s=e.tagName;if("INPUT"===s)t=r[e.type]||r.text;else if("SELECT"===s)t=r.select;else{if("TEXTAREA"!==s)return void("production"!==n.env.NODE_ENV&&i.warn("v-model does not support element type: "+s));t=r.text}e.__v_model=this,t.bind.call(this),this.update=t.update,this._unbind=t.unbind},checkFilters:function(){var t=this.filters;if(t)for(var e=t.length;e--;){var n=i.resolveAsset(this.vm.$options,"filters",t[e].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}}}).call(this,t("_process"))},{"../../../util":72,"./checkbox":39,"./radio":41,"./select":42,"./text":43,_process:1}],41:[function(t,e,n){var i=t("../../../util");e.exports={bind:function(){var t=this,e=this.el;this.getValue=function(){if(e.hasOwnProperty("_value"))return e._value;var n=e.value;return t.params.number&&(n=i.toNumber(n)),n},this.listener=function(){t.set(t.getValue())},this.on("change",this.listener),e.checked&&(this.afterBind=this.listener)},update:function(t){this.el.checked=i.looseEqual(t,this.getValue())}}},{"../../../util":72}],42:[function(t,e,n){function i(t,e,n){for(var i,r,s,o=e?[]:null,a=0,c=t.options.length;c>a;a++)if(i=t.options[a],s=n?i.hasAttribute("selected"):i.selected){if(r=i.hasOwnProperty("_value")?i._value:i.value,!e)return r;o.push(r)}return o}function r(t,e){for(var n=t.length;n--;)if(s.looseEqual(t[n],e))return n;return-1}var s=t("../../../util");e.exports={bind:function(){var t=this,e=this.el;this.forceUpdate=function(){t._watcher&&t.update(t._watcher.get())};var n=this.multiple=e.hasAttribute("multiple");this.listener=function(){var r=i(e,n);r=t.params.number?s.isArray(r)?r.map(s.toNumber):s.toNumber(r):r,t.set(r)},this.on("change",this.listener);var r=i(e,n,!0);(n&&r.length||!n&&null!==r)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",this.forceUpdate)},update:function(t){var e=this.el;e.selectedIndex=-1;for(var n,i,o=this.multiple&&s.isArray(t),a=e.options,c=a.length;c--;)n=a[c],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=o?r(t,i)>-1:s.looseEqual(t,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}}},{"../../../util":72}],43:[function(t,e,n){var i=t("../../../util");e.exports={bind:function(){var t=this,e=this.el,n="range"===e.type,r=this.params.lazy,s=this.params.number,o=this.params.debounce,a=!1;i.isAndroid||n||(this.on("compositionstart",function(){a=!0}),this.on("compositionend",function(){a=!1,r||t.listener()})),this.focused=!1,n||(this.on("focus",function(){t.focused=!0}),this.on("blur",function(){t.focused=!1,t.listener()})),this.listener=function(){if(!a){var r=s||n?i.toNumber(e.value):e.value;t.set(r),i.nextTick(function(){t._bound&&!t.focused&&t.update(t._watcher.value)})}},o&&(this.listener=i.debounce(this.listener,o)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery?(jQuery(e).on("change",this.listener),r||jQuery(e).on("input",this.listener)):(this.on("change",this.listener),r||this.on("input",this.listener)),!r&&i.isIE9&&(this.on("cut",function(){i.nextTick(t.listener)}),this.on("keyup",function(e){(46===e.keyCode||8===e.keyCode)&&t.listener()})),(e.hasAttribute("value")||"TEXTAREA"===e.tagName&&e.value.trim())&&(this.afterBind=this.listener)},update:function(t){this.el.value=i.toString(t)},unbind:function(){var t=this.el;this.hasjQuery&&(jQuery(t).off("change",this.listener),jQuery(t).off("input",this.listener))}}},{"../../../util":72}],44:[function(t,e,n){(function(n){function i(t,e){var n=e.map(function(t){var e=t.charCodeAt(0);return e>47&&58>e?parseInt(t,10):1===t.length&&(e=t.toUpperCase().charCodeAt(0),e>64&&91>e)?e:a[t]});return function(e){return n.indexOf(e.keyCode)>-1?t.call(this,e):void 0}}function r(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function s(t){return function(e){return e.preventDefault(),t.call(this,e)}}var o=t("../../util"),a={esc:27,tab:9,enter:13,space:32,"delete":46,up:38,left:37,right:39,down:40};e.exports={acceptStatement:!0,priority:700,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var t=this;this.iframeBind=function(){o.on(t.el.contentWindow,t.arg,t.handler)},this.on("load",this.iframeBind)}},update:function(t){if(this.descriptor.raw||(t=function(){}),"function"!=typeof t)return void("production"!==n.env.NODE_ENV&&o.warn("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+t));this.modifiers.stop&&(t=r(t)),this.modifiers.prevent&&(t=s(t));var e=Object.keys(this.modifiers).filter(function(t){return"stop"!==t&&"prevent"!==t});e.length&&(t=i(t,e)),this.reset(),this.handler=t,this.iframeBind?this.iframeBind():o.on(this.el,this.arg,this.handler)},reset:function(){var t=this.iframeBind?this.el.contentWindow:this.el;this.handler&&o.off(t,this.arg,this.handler)},unbind:function(){this.reset()}}}).call(this,t("_process"))},{"../../util":72,_process:1}],45:[function(t,e,n){(function(n){"production"!==n.env.NODE_ENV&&(e.exports={bind:function(){t("../../util").warn("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.")}})}).call(this,t("_process"))},{"../../util":72,_process:1}],46:[function(t,e,n){var i=t("../../util"),r=t("../../transition");e.exports={bind:function(){var t=this.el.nextElementSibling;t&&null!==i.attr(t,"v-else")&&(this.elseEl=t)},update:function(t){this.apply(this.el,t),this.elseEl&&this.apply(this.elseEl,!t)},apply:function(t,e){r.apply(t,e?1:-1,function(){t.style.display=e?"":"none"},this.vm)}}},{"../../transition":65,"../../util":72}],47:[function(t,e,n){var i=t("../../util");e.exports={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(t){this.el[this.attr]=i.toString(t)}}},{"../../util":72}],48:[function(t,e,n){function i(t,e){var n;if(r.isPlainObject(t)){var s=Object.keys(t);for(n=s.length;n--;)if(i(t[s[n]],e))return!0}else if(r.isArray(t)){for(n=t.length;n--;)if(i(t[n],e))return!0}else if(null!=t)return t.toString().toLowerCase().indexOf(e)>-1}var r=t("../util"),s=t("../parsers/path"),o=t("../directives/public/for")._postProcess;n.limitBy=function(t,e,n){return n=n?parseInt(n,10):0,"number"==typeof e?t.slice(n,n+e):t},n.filterBy=function(t,e,n){if(t=o(t),null==e)return t;if("function"==typeof e)return t.filter(e);e=(""+e).toLowerCase();for(var a,c,l,u,h="in"===n?3:2,p=r.toArray(arguments,h).reduce(function(t,e){return t.concat(e)},[]),f=[],d=0,v=t.length;v>d;d++)if(a=t[d],l=a&&a.$value||a,u=p.length){for(;u--;)if(c=p[u],"$key"===c&&i(a.$key,e)||i(s.get(l,c),e)){f.push(a);break}}else i(a,e)&&f.push(a);return f},n.orderBy=function(t,e,n){if(t=o(t),!e)return t;var i=n&&0>n?-1:1;return t.slice().sort(function(t,n){return"$key"!==e&&(r.isObject(t)&&"$value"in t&&(t=t.$value),r.isObject(n)&&"$value"in n&&(n=n.$value)),t=r.isObject(t)?s.get(t,e):t,n=r.isObject(n)?s.get(n,e):n,t===n?0:t>n?i:-i})}},{"../directives/public/for":35,"../parsers/path":62,"../util":72}],49:[function(t,e,n){var i=t("../util");n.json={read:function(t,e){return"string"==typeof t?t:JSON.stringify(t,null,Number(e)||2)},write:function(t){try{return JSON.parse(t)}catch(e){return t}}},n.capitalize=function(t){return t||0===t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""},n.uppercase=function(t){return t||0===t?t.toString().toUpperCase():""},n.lowercase=function(t){return t||0===t?t.toString().toLowerCase():""};var r=/(\d{3})(?=\d)/g;n.currency=function(t,e){if(t=parseFloat(t),!isFinite(t)||!t&&0!==t)return"";e=null!=e?e:"$";var n=Math.abs(t).toFixed(2),i=n.slice(0,-3),s=i.length%3,o=s>0?i.slice(0,s)+(i.length>3?",":""):"",a=n.slice(-3),c=0>t?"-":"";return e+c+o+i.slice(s).replace(r,"$1,")+a},n.pluralize=function(t){var e=i.toArray(arguments,1);return e.length>1?e[t%10-1]||e[e.length-1]:e[0]+(1===t?"":"s")},n.debounce=function(t,e){return t?(e||(e=300),i.debounce(t,e)):void 0},i.extend(n,t("./array-filters"))},{"../util":72,"./array-filters":48}],50:[function(t,e,n){function i(t,e){this.vm=t;var n,i="string"==typeof e;i||r.isTemplate(e)?n=o.parse(e,!0):(n=document.createDocumentFragment(),n.appendChild(e)),this.template=n;var a,c=t.constructor.cid;if(c>0){var u=c+(i?e:e.outerHTML);a=l.get(u),a||(a=s.compile(n,t.$options,!0),l.put(u,a))}else a=s.compile(n,t.$options,!0);this.linker=a}var r=t("../util"),s=t("../compiler"),o=t("../parsers/template"),a=t("./fragment"),c=t("../cache"),l=new c(5e3);i.prototype.create=function(t,e,n){var i=o.clone(this.template);return new a(this.linker,this.vm,i,t,e,n)},e.exports=i},{"../cache":16,"../compiler":19,"../parsers/template":63,"../util":72,"./fragment":51}],51:[function(t,e,n){function i(t,e,n,i,c,l){this.children=[],this.childFrags=[],this.vm=e,this.scope=c,this.inserted=!1,this.parentFrag=l,l&&l.childFrags.push(this),this.unlink=t(e,n,i,c,this);var u=this.single=1===n.childNodes.length&&!n.childNodes[0].__vue_anchor;u?(this.node=n.childNodes[0],this.before=r,this.remove=s):(this.node=h.createAnchor("fragment-start"),this.end=h.createAnchor("fragment-end"),this.frag=n,h.prepend(this.node,n),n.appendChild(this.end),this.before=o,this.remove=a),this.node.__vfrag__=this}function r(t,e){this.inserted=!0;var n=e!==!1?p.before:h.before;n(this.node,t,this.vm),h.inDoc(this.node)&&this.callHook(c)}function s(){this.inserted=!1;var t=h.inDoc(this.node),e=this;e.callHook(l),p.remove(this.node,this.vm,function(){t&&e.callHook(u),e.destroy()})}function o(t,e){this.inserted=!0;var n=this.vm,i=e!==!1?p.before:h.before;h.mapNodeRange(this.node,this.end,function(e){i(e,t,n)}),h.inDoc(this.node)&&this.callHook(c)}function a(){this.inserted=!1;var t=this,e=h.inDoc(this.node);t.callHook(l),h.removeNodeRange(this.node,this.end,this.vm,this.frag,function(){e&&t.callHook(u),t.destroy()})}function c(t){t._isAttached||t._callHook("attached")}function l(t){t.$destroy(!1,!0)}function u(t){t._isAttached&&t._callHook("detached")}var h=t("../util"),p=t("../transition");i.prototype.callHook=function(t){var e,n;for(e=0,n=this.children.length;n>e;e++)t(this.children[e]);for(e=0,n=this.childFrags.length;n>e;e++)this.childFrags[e].callHook(t)},i.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.unlink()},e.exports=i},{"../transition":65,"../util":72}],52:[function(t,e,n){(function(e){function i(t,e){for(var n,i,r=e.attributes,s=0,o=r.length;o>s;s++)n=r[s].name,p.test(n)&&(n=n.replace(p,""),i=(t._scope||t._context).$eval(r[s].value,!0),t.$on(n.replace(p),i))}function r(t,e,n){if(n){var i,r,o,a;for(r in n)if(i=n[r],u.isArray(i))for(o=0,a=i.length;a>o;o++)s(t,e,r,i[o]);else s(t,e,r,i)}}function s(t,n,i,r,o){var a=typeof r;if("function"===a)t[n](i,r,o);else if("string"===a){var c=t.$options.methods,l=c&&c[r];l?t[n](i,l,o):"production"!==e.env.NODE_ENV&&u.warn('Unknown method: "'+r+'" when registering callback for '+n+': "'+i+'".')}else r&&"object"===a&&s(t,n,i,r.handler,r)}function o(){this._isAttached||(this._isAttached=!0,this.$children.forEach(a))}function a(t){!t._isAttached&&h(t.$el)&&t._callHook("attached")}function c(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(l))}function l(t){t._isAttached&&!h(t.$el)&&t._callHook("detached")}var u=t("../util"),h=u.inDoc,p=/^v-on:|^@/;n._initEvents=function(){var t=this.$options;t._asComponent&&i(this,t.el),r(this,"$on",t.events),r(this,"$watch",t.watch)},n._initDOMHooks=function(){this.$on("hook:attached",o),this.$on("hook:detached",c)},n._callHook=function(t){var e=this.$options[t];if(e)for(var n=0,i=e.length;i>n;n++)e[n].call(this);this.$emit("hook:"+t)}}).call(this,t("_process"))},{"../util":72,_process:1}],53:[function(t,e,n){var i=t("../util").mergeOptions,r=0;n._init=function(t){t=t||{},this.$el=null,this.$parent=t.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=r++,this._isVue=!0,this._events={},this._eventsCount={},this._shouldPropagate=!1,this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=!1,this._unlinkFn=null,this._context=t._context||this.$parent,this._scope=t._scope,this._frag=t._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),t=this.$options=i(this.constructor.options,t,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),t.el&&this.$mount(t.el)}},{"../util":72}],54:[function(t,e,n){var i=t("../util"),r=t("../directive"),s=t("../compiler");n._updateRef=function(t){var e=this.$options._ref;if(e){var n=(this._scope||this._context).$refs;t?n[e]===this&&(n[e]=null):n[e]=this}},n._compile=function(t){var e=this.$options,n=t;t=s.transclude(t,e),this._initElement(t);var r,o=this._context&&this._context.$options,a=s.compileRoot(t,e,o),c=this.constructor;e._linkerCachable&&(r=c.linker,r||(r=c.linker=s.compile(t,e)));var l=a(this,t,this._scope),u=r?r(this,t):s.compile(t,e)(this,t);return this._unlinkFn=function(){l(),u(!0)},e.replace&&i.replace(n,t),this._isCompiled=!0,this._callHook("compiled"),t},n._initElement=function(t){t instanceof DocumentFragment?(this._isFragment=!0,this.$el=this._fragmentStart=t.firstChild,this._fragmentEnd=t.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=t):this.$el=t,this.$el.__vue__=this,this._callHook("beforeCompile")},n._bindDir=function(t,e,n,i,s){
this._directives.push(new r(t,this,e,n,i,s))},n._destroy=function(t,e){if(this._isBeingDestroyed)return void(e||this._cleanup());this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var n,i=this.$parent;for(i&&!i._isBeingDestroyed&&(i.$children.$remove(this),this._updateRef(!0)),n=this.$children.length;n--;)this.$children[n].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),n=this._watchers.length;n--;)this._watchers[n].teardown();this.$el&&(this.$el.__vue__=null);var r=this;t&&this.$el?this.$remove(function(){r._cleanup()}):e||this._cleanup()},n._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}},{"../compiler":19,"../directive":22,"../util":72}],55:[function(t,e,n){(function(e){var i=t("../util");n._applyFilters=function(t,n,r,s){var o,a,c,l,u,h,p,f,d;for(h=0,p=r.length;p>h;h++)if(o=r[h],a=i.resolveAsset(this.$options,"filters",o.name),"production"!==e.env.NODE_ENV&&i.assertAsset(a,"filter",o.name),a&&(a=s?a.write:a.read||a,"function"==typeof a)){if(c=s?[t,n]:[t],u=s?2:1,o.args)for(f=0,d=o.args.length;d>f;f++)l=o.args[f],c[f+u]=l.dynamic?this.$get(l.value):l.value;t=a.apply(this,c)}return t},n._resolveComponent=function(t,n){var r=i.resolveAsset(this.$options,"components",t);if("production"!==e.env.NODE_ENV&&i.assertAsset(r,"component",t),r)if(r.options)n(r);else if(r.resolved)n(r.resolved);else if(r.requested)r.pendingCallbacks.push(n);else{r.requested=!0;var s=r.pendingCallbacks=[n];r(function(t){i.isPlainObject(t)&&(t=i.Vue.extend(t)),r.resolved=t;for(var e=0,n=s.length;n>e;e++)s[e](t)},function(n){"production"!==e.env.NODE_ENV&&i.warn("Failed to resolve async component: "+t+". "+(n?"\nReason: "+n:""))})}}}).call(this,t("_process"))},{"../util":72,_process:1}],56:[function(t,e,n){(function(e){function i(){}function r(t,e){var n=new l(e,t,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),c.target&&n.depend(),n.value}}var s=t("../util"),o=t("../compiler"),a=t("../observer"),c=t("../observer/dep"),l=t("../watcher");n._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},n._initProps=function(){var t=this.$options,n=t.el,i=t.props;i&&!n&&"production"!==e.env.NODE_ENV&&s.warn("Props will not be compiled if no `el` option is provided at instantiation."),n=t.el=s.query(n),this._propsUnlinkFn=n&&1===n.nodeType&&i?o.compileAndLinkProps(this,n,i,this._scope):null},n._initData=function(){var t=this._data,n=this.$options.data,i=n&&n();if(i){this._data=i;for(var r in t)"production"!==e.env.NODE_ENV&&i.hasOwnProperty(r)&&s.warn('Data field "'+r+'" is already defined as a prop. Use prop default value instead.'),null===this._props[r].raw&&i.hasOwnProperty(r)||s.set(i,r,t[r])}var o,c,l=this._data,u=Object.keys(l);for(o=u.length;o--;)c=u[o],this._proxy(c);a.create(l,this)},n._setData=function(t){t=t||{};var e=this._data;this._data=t;var n,i,r;for(n=Object.keys(e),r=n.length;r--;)i=n[r],i in t||this._unproxy(i);for(n=Object.keys(t),r=n.length;r--;)i=n[r],this.hasOwnProperty(i)||this._proxy(i);e.__ob__.removeVm(this),a.create(t,this),this._digest()},n._proxy=function(t){if(!s.isReserved(t)){var e=this;Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e._data[t]},set:function(n){e._data[t]=n}})}},n._unproxy=function(t){s.isReserved(t)||delete this[t]},n._digest=function(){for(var t=0,e=this._watchers.length;e>t;t++)this._watchers[t].update(!0)},n._initComputed=function(){var t=this.$options.computed;if(t)for(var e in t){var n=t[e],o={enumerable:!0,configurable:!0};"function"==typeof n?(o.get=r(n,this),o.set=i):(o.get=n.get?n.cache!==!1?r(n.get,this):s.bind(n.get,this):i,o.set=n.set?s.bind(n.set,this):i),Object.defineProperty(this,e,o)}},n._initMethods=function(){var t=this.$options.methods;if(t)for(var e in t)this[e]=s.bind(t[e],this)},n._initMeta=function(){var t=this.$options._meta;if(t)for(var e in t)s.defineReactive(this,e,t[e])}}).call(this,t("_process"))},{"../compiler":19,"../observer":59,"../observer/dep":58,"../util":72,"../watcher":76,_process:1}],57:[function(t,e,n){var i=t("../util"),r=Array.prototype,s=Object.create(r);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=r[t];i.define(s,t,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var r,s=e.apply(this,i),o=this.__ob__;switch(t){case"push":r=i;break;case"unshift":r=i;break;case"splice":r=i.slice(2)}return r&&o.observeArray(r),o.dep.notify(),s})}),i.define(r,"$set",function(t,e){return t>=this.length&&(this.length=t+1),this.splice(t,1,e)[0]}),i.define(r,"$remove",function(t){if(this.length){var e=i.indexOf(this,t);return e>-1?this.splice(e,1):void 0}}),e.exports=s},{"../util":72}],58:[function(t,e,n){function i(){this.id=s++,this.subs=[]}var r=t("../util"),s=0;i.target=null,i.prototype.addSub=function(t){this.subs.push(t)},i.prototype.removeSub=function(t){this.subs.$remove(t)},i.prototype.depend=function(){i.target.addDep(this)},i.prototype.notify=function(){for(var t=r.toArray(this.subs),e=0,n=t.length;n>e;e++)t[e].update()},e.exports=i},{"../util":72}],59:[function(t,e,n){function i(t){if(this.value=t,this.dep=new l,a.define(t,"__ob__",this),a.isArray(t)){var e=a.hasProto?r:s;e(t,u,h),this.observeArray(t)}else this.walk(t)}function r(t,e){t.__proto__=e}function s(t,e,n){for(var i,r=n.length;r--;)i=n[r],a.define(t,i,e[i])}function o(t,e,n){var r,s,o=new l;if(c.convertAllProperties){var u=Object.getOwnPropertyDescriptor(t,e);if(u&&u.configurable===!1)return;r=u&&u.get,s=u&&u.set}var h=i.create(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=r?r.call(t):n;if(l.target&&(o.depend(),h&&h.dep.depend(),a.isArray(e)))for(var i,s=0,c=e.length;c>s;s++)i=e[s],i&&i.__ob__&&i.__ob__.dep.depend();return e},set:function(e){var a=r?r.call(t):n;e!==a&&(s?s.call(t,e):n=e,h=i.create(e),o.notify())}})}var a=t("../util"),c=t("../config"),l=t("./dep"),u=t("./array"),h=Object.getOwnPropertyNames(u);i.create=function(t,e){if(t&&"object"==typeof t){var n;return Object.prototype.hasOwnProperty.call(t,"__ob__")&&t.__ob__ instanceof i?n=t.__ob__:!a.isArray(t)&&!a.isPlainObject(t)||Object.isFrozen(t)||t._isVue||(n=new i(t)),n&&e&&n.addVm(e),n}},i.prototype.walk=function(t){for(var e=Object.keys(t),n=e.length;n--;)this.convert(e[n],t[e[n]])},i.prototype.observeArray=function(t){for(var e=t.length;e--;)i.create(t[e])},i.prototype.convert=function(t,e){o(this.value,t,e)},i.prototype.addVm=function(t){(this.vms||(this.vms=[])).push(t)},i.prototype.removeVm=function(t){this.vms.$remove(t)},a.defineReactive=o,e.exports=i},{"../config":21,"../util":72,"./array":57,"./dep":58}],60:[function(t,e,n){function i(){var t,e=s.slice(u,c).trim();if(e){t={};var n=e.match(b);t.name=n[0],n.length>1&&(t.args=n.slice(1).map(r))}t&&(o.filters=o.filters||[]).push(t),u=c+1}function r(t){if(y.test(t))return{value:m.toNumber(t),dynamic:!1};var e=m.stripQuotes(t),n=e===t;return{value:n?t:e,dynamic:n}}var s,o,a,c,l,u,h,p,f,d,v,m=t("../util"),g=t("../cache"),_=new g(1e3),b=/[^\s'"]+|'[^']*'|"[^"]*"/g,y=/^in$|^-?\d+/;n.parse=function(t){var e=_.get(t);if(e)return e;for(s=t,h=p=!1,f=d=v=0,u=0,o={},c=0,l=s.length;l>c;c++)if(a=s.charCodeAt(c),h)39===a&&(h=!h);else if(p)34===a&&(p=!p);else if(124===a&&124!==s.charCodeAt(c+1)&&124!==s.charCodeAt(c-1))null==o.expression?(u=c+1,o.expression=s.slice(0,c).trim()):i();else switch(a){case 34:p=!0;break;case 39:h=!0;break;case 40:v++;break;case 41:v--;break;case 91:d++;break;case 93:d--;break;case 123:f++;break;case 125:f--}return null==o.expression?o.expression=s.slice(0,c).trim():0!==u&&i(),_.put(t,o),o}},{"../cache":16,"../util":72}],61:[function(t,e,n){(function(e){function i(t,e){var n=N.length;return N[n]=e?t.replace(y,"\\n"):t,'"'+n+'"'}function r(t){var e=t.charAt(0),n=t.slice(1);return m.test(n)?t:(n=n.indexOf('"')>-1?n.replace(x,s):n,e+"scope."+n)}function s(t,e){return N[e]}function o(t,n){_.test(t)&&"production"!==e.env.NODE_ENV&&h.warn("Avoid using reserved keywords in expression: "+t),N.length=0;var o=t.replace(w,i).replace(b,"");o=(" "+o).replace(O,r).replace(x,s);var a=c(o);return a?{get:a,body:o,set:n?l(o):null}:void 0}function a(t){var e,n;return t.indexOf("[")<0?(n=t.split("."),n.raw=t,e=p.compileGetter(n)):(n=p.parse(t),e=n.get),{get:e,set:function(t,e){p.set(t,n,e)}}}function c(t){try{return new Function("scope","return "+t+";")}catch(n){"production"!==e.env.NODE_ENV&&h.warn("Invalid expression. Generated function body: "+t)}}function l(t){try{return new Function("scope","value",t+"=value;")}catch(n){"production"!==e.env.NODE_ENV&&h.warn("Invalid setter function body: "+t)}}function u(t){t.set||(t.set=l(t.body))}var h=t("../util"),p=t("./path"),f=t("../cache"),d=new f(1e3),v="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",m=new RegExp("^("+v.replace(/,/g,"\\b|")+"\\b)"),g="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,proctected,static,interface,private,public",_=new RegExp("^("+g.replace(/,/g,"\\b|")+"\\b)"),b=/\s/g,y=/\n/g,w=/[\{,]\s*[\w\$_]+\s*:|('[^']*'|"[^"]*")|new |typeof |void /g,x=/"(\d+)"/g,E=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,O=/[^\w$\.]([A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\])*)/g,C=/^(true|false)$/,N=[];n.parse=function(t,e){t=t.trim();var i=d.get(t);if(i)return e&&u(i),i;var r=n.isSimplePath(t)?a(t):o(t,e);return d.put(t,r),r},n.isSimplePath=function(t){return E.test(t)&&!C.test(t)&&"Math."!==t.slice(0,5)}}).call(this,t("_process"))},{"../cache":16,"../util":72,"./path":62,_process:1}],62:[function(t,e,n){(function(e){function i(t){if(void 0===t)return"eof";var e=t.charCodeAt(0);switch(e){case 91:case 93:case 46:case 34:case 39:case 48:return t;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return e>=97&&122>=e||e>=65&&90>=e?"ident":e>=49&&57>=e?"number":"else"}function r(t){function e(){var e=t[d+1];return v===b&&"'"===e||v===y&&'"'===e?(d++,r=e,m[u](),!0):void 0}var n,r,s,o,a,c,l,f=[],d=-1,v=p,m=[];for(m[h]=function(){void 0!==s&&(f.push(s),s=void 0)},m[u]=function(){void 0===s?s=r:s+=r};null!=v;)if(d++,n=t[d],"\\"!==n||!e()){if(o=i(n),l=C[v],a=l[o]||l["else"]||O,a===O)return;if(v=a[0],c=m[a[1]],c&&(r=a[2],r=void 0===r?n:"*"===r?r+n:r,c()),v===E)return f.raw=t,f}}function s(t){return l.test(t)?"."+t:+t===t>>>0?"["+t+"]":"*"===t.charAt(0)?"[o"+s(t.slice(1))+"]":'["'+t.replace(/"/g,'\\"')+'"]'}var o=t("../util"),a=t("../cache"),c=new a(1e3),l=n.identRE=/^[$_a-zA-Z]+[\w$]*$/,u=0,h=1,p=0,f=1,d=2,v=3,m=4,g=5,_=6,b=7,y=8,w=9,x=10,E=11,O=12,C=[];C[p]={ws:[p],ident:[v,u],"[":[m],eof:[E]},C[f]={ws:[f],".":[d],"[":[m],eof:[E]},C[d]={ws:[d],ident:[v,u]},C[v]={ident:[v,u],0:[v,u],number:[v,u],ws:[f,h],".":[d,h],"[":[m,h],eof:[E,h]},C[m]={ws:[m],0:[g,u],number:[_,u],"'":[b,u,""],'"':[y,u,""],ident:[w,u,"*"]},C[g]={ws:[x,h],"]":[f,h]},C[_]={0:[_,u],number:[_,u],ws:[x],"]":[f,h]},C[b]={"'":[x],eof:O,"else":[b,u]},C[y]={'"':[x],eof:O,"else":[y,u]},C[w]={ident:[w,u],0:[w,u],number:[w,u],ws:[x],"]":[f,h]},C[x]={ws:[x],"]":[f,h]},n.compileGetter=function(t){var e="return o"+t.map(s).join("");return new Function("o",e)},n.parse=function(t){var e=c.get(t);return e||(e=r(t),e&&(e.get=n.compileGetter(e),c.put(t,e))),e},n.get=function(t,e){return e=n.parse(e),e?e.get(t):void 0};var N;"production"!==e.env.NODE_ENV&&(N=function(t){o.warn('You are setting a non-existent path "'+t.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.')}),n.set=function(t,i,r){var s=t;if("string"==typeof i&&(i=n.parse(i)),!i||!o.isObject(t))return!1;for(var a,c,l=0,u=i.length;u>l;l++)a=t,c=i[l],"*"===c.charAt(0)&&(c=s[c.slice(1)]),u-1>l?(t=t[c],o.isObject(t)||(t={},"production"!==e.env.NODE_ENV&&a._isVue&&N(i),o.set(a,c,t))):o.isArray(t)?t.$set(c,r):c in t?t[c]=r:("production"!==e.env.NODE_ENV&&t._isVue&&N(i),o.set(t,c,r));return!0}}).call(this,t("_process"))},{"../cache":16,"../util":72,_process:1}],63:[function(t,e,n){function i(t){return o.isTemplate(t)&&t.content instanceof DocumentFragment}function r(t){var e=c.get(t);if(e)return e;var n=document.createDocumentFragment(),i=t.match(h),r=p.test(t);if(i||r){var s=i&&i[1],o=u[s]||u._default,a=o[0],l=o[1],f=o[2],d=document.createElement("div");for(d.innerHTML=l+t.trim()+f;a--;)d=d.lastChild;for(var v;v=d.firstChild;)n.appendChild(v)}else n.appendChild(document.createTextNode(t));return c.put(t,n),n}function s(t){if(i(t))return o.trimNode(t.content),t.content;if("SCRIPT"===t.tagName)return r(t.textContent);for(var e,s=n.clone(t),a=document.createDocumentFragment();e=s.firstChild;)a.appendChild(e);return o.trimNode(a),a}var o=t("../util"),a=t("../cache"),c=new a(1e3),l=new a(1e3),u={_default:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};u.td=u.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],u.option=u.optgroup=[1,'<select multiple="multiple">',"</select>"],u.thead=u.tbody=u.colgroup=u.caption=u.tfoot=[1,"<table>","</table>"],u.g=u.defs=u.symbol=u.use=u.image=u.text=u.circle=u.ellipse=u.line=u.path=u.polygon=u.polyline=u.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var h=/<([\w:]+)/,p=/&\w+;|&#\d+;|&#x[\dA-F]+;/,f=function(){if(o.inBrowser){var t=document.createElement("div");return t.innerHTML="<template>1</template>",!t.cloneNode(!0).firstChild.innerHTML}return!1}(),d=function(){if(o.inBrowser){var t=document.createElement("textarea");return t.placeholder="t","t"===t.cloneNode(!0).value}return!1}();n.clone=function(t){if(!t.querySelectorAll)return t.cloneNode();var e,r,s,o=t.cloneNode(!0);if(f){var a=o;if(i(t)&&(t=t.content,a=o.content),r=t.querySelectorAll("template"),r.length)for(s=a.querySelectorAll("template"),e=s.length;e--;)s[e].parentNode.replaceChild(n.clone(r[e]),s[e])}if(d)if("TEXTAREA"===t.tagName)o.value=t.value;else if(r=t.querySelectorAll("textarea"),r.length)for(s=o.querySelectorAll("textarea"),e=s.length;e--;)s[e].value=r[e].value;return o},n.parse=function(t,e,i){var a,c;return t instanceof DocumentFragment?(o.trimNode(t),e?n.clone(t):t):("string"==typeof t?i||"#"!==t.charAt(0)?c=r(t):(c=l.get(t),c||(a=document.getElementById(t.slice(1)),a&&(c=s(a),l.put(t,c)))):t.nodeType&&(c=s(t)),c&&e?n.clone(c):c)}},{"../cache":16,"../util":72}],64:[function(t,e,n){function i(t){return t.replace(p,"\\$&")}function r(t,e){return t.tag?s(t.value,e):'"'+t.value+'"'}function s(t,e){if(f.test(t)){var n=h.parse(t);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+t+")"}return e?t:"("+t+")"}var o,a,c,l=t("../cache"),u=t("../config"),h=t("./directive"),p=/[-.*+?^${}()|[\]\/\\]/g;n.compileRegex=function(){var t=i(u.delimiters[0]),e=i(u.delimiters[1]),n=i(u.unsafeDelimiters[0]),r=i(u.unsafeDelimiters[1]);a=new RegExp(n+"(.+?)"+r+"|"+t+"(.+?)"+e,"g"),c=new RegExp("^"+n+".*"+r+"$"),o=new l(1e3)},n.parse=function(t){o||n.compileRegex();var e=o.get(t);if(e)return e;if(t=t.replace(/\n/g,""),!a.test(t))return null;for(var i,r,s,l,u,h,p=[],f=a.lastIndex=0;i=a.exec(t);)r=i.index,r>f&&p.push({value:t.slice(f,r)}),s=c.test(i[0]),l=s?i[1]:i[2],u=l.charCodeAt(0),h=42===u,l=h?l.slice(1):l,p.push({tag:!0,value:l.trim(),html:s,oneTime:h}),f=r+i[0].length;return f<t.length&&p.push({value:t.slice(f)}),o.put(t,p),p},n.tokensToExp=function(t){return t.length>1?t.map(function(t){return r(t)}).join("+"):r(t[0],!0)};var f=/[^|]\|[^|]/},{"../cache":16,"../config":21,"./directive":60}],65:[function(t,e,n){var i=t("../util");n.append=function(t,e,n,i){r(t,1,function(){e.appendChild(t)},n,i)},n.before=function(t,e,n,s){r(t,1,function(){i.before(t,e)},n,s)},n.remove=function(t,e,n){r(t,-1,function(){i.remove(t)},e,n)};var r=n.apply=function(t,e,n,r,s){var o=t.__v_trans;if(!o||!o.hooks&&!i.transitionEndEvent||!r._isCompiled||r.$parent&&!r.$parent._isCompiled)return n(),void(s&&s());var a=e>0?"enter":"leave";o[a](n,s)}},{"../util":72}],66:[function(t,e,n){function i(){for(var t=document.documentElement.offsetHeight,e=0;e<s.length;e++)s[e]();return s=[],o=!1,t}var r=t("../util"),s=[],o=!1;n.push=function(t){s.push(t),o||(o=!0,r.nextTick(i))}},{"../util":72}],67:[function(t,e,n){function i(t,e,n,i){this.id=e,this.el=t,this.enterClass=e+"-enter",this.leaveClass=e+"-leave",this.hooks=n,this.vm=i,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={};var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(t){r[t]=s.bind(r[t],r)})}function r(t){return!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}var s=t("../util"),o=t("./queue"),a=s.addClass,c=s.removeClass,l=s.transitionEndEvent,u=s.animationEndEvent,h=s.transitionProp+"Duration",p=s.animationProp+"Duration",f=1,d=2,v=i.prototype;v.enter=function(t,e){this.cancelPending(),this.callHook("beforeEnter"),this.cb=e,a(this.el,this.enterClass),t(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,o.push(this.enterNextTick))},v.enterNextTick=function(){this.justEntered=!0;var t=this;setTimeout(function(){t.justEntered=!1},17);var e=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===f&&c(this.el,this.enterClass):n===f?(c(this.el,this.enterClass),this.setupCssCb(l,e)):n===d?this.setupCssCb(u,e):e()},v.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,c(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},v.leave=function(t,e){this.cancelPending(),this.callHook("beforeLeave"),this.op=t,this.cb=e,a(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():o.push(this.leaveNextTick)))},v.leaveNextTick=function(){var t=this.getCssTransitionType(this.leaveClass);if(t){var e=t===f?l:u;this.setupCssCb(e,this.leaveDone)}else this.leaveDone()},v.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),c(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},v.cancelPending=function(){this.op=this.cb=null;var t=!1;this.pendingCssCb&&(t=!0,s.off(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(t=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),t&&(c(this.el,this.enterClass),c(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},v.callHook=function(t){this.hooks&&this.hooks[t]&&this.hooks[t].call(this.vm,this.el)},v.callHookWithCb=function(t){var e=this.hooks&&this.hooks[t];e&&(e.length>1&&(this.pendingJsCb=s.cancellable(this[t+"Done"])),e.call(this.vm,this.el,this.pendingJsCb))},v.getCssTransitionType=function(t){if(!(!l||document.hidden||this.hooks&&this.hooks.css===!1||r(this.el))){var e=this.typeCache[t];if(e)return e;var n=this.el.style,i=window.getComputedStyle(this.el),s=n[h]||i[h];if(s&&"0s"!==s)e=f;else{var o=n[p]||i[p];o&&"0s"!==o&&(e=d)}return e&&(this.typeCache[t]=e),e}},v.setupCssCb=function(t,e){this.pendingCssEvent=t;var n=this,i=this.el,r=this.pendingCssCb=function(o){o.target===i&&(s.off(i,t,r),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&e&&e())};s.on(i,t,r)},e.exports=i},{"../util":72,"./queue":66}],68:[function(t,e,n){(function(e){function i(t){var e=o.attr(t,"is");return null!=e?{id:e}:(e=o.getBindAttr(t,"is"),null!=e?{id:e,dynamic:!0}:void 0)}function r(t){return t?t.charAt(0).toUpperCase()+t.slice(1):"custom type"}function s(t){return Object.prototype.toString.call(t).slice(8,-1)}var o=t("./index");n.commonTagRE=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/,n.checkComponent=function(t,r){var s=t.tagName.toLowerCase(),a=t.hasAttributes();if(n.commonTagRE.test(s)||"component"===s){if(a)return i(t)}else{if(o.resolveAsset(r,"components",s))return{id:s};var c=a&&i(t);if(c)return c;"production"!==e.env.NODE_ENV&&(s.indexOf("-")>-1||/HTMLUnknownElement/.test(t.toString())&&!/^(data|time|rtc|rb)$/.test(s))&&o.warn("Unknown custom element: <"+s+"> - did you register the component correctly?")}},n.initProp=function(t,e,i){if(n.assertProp(e,i)){var r=e.path;t[r]=t._data[r]=i}},n.assertProp=function(t,n){if(null===t.raw&&!t.required)return!0;var i,a=t.options,c=a.type,l=!0;if(c&&(c===String?(i="string",l=typeof n===i):c===Number?(i="number",l="number"==typeof n):c===Boolean?(i="boolean",l="boolean"==typeof n):c===Function?(i="function",l="function"==typeof n):c===Object?(i="object",l=o.isPlainObject(n)):c===Array?(i="array",l=o.isArray(n)):l=n instanceof c),!l)return"production"!==e.env.NODE_ENV&&o.warn("Invalid prop: type check failed for "+t.path+'="'+t.raw+'". Expected '+r(i)+", got "+s(n)+"."),!1;var u=a.validator;return u&&!u.call(null,n)?("production"!==e.env.NODE_ENV&&o.warn("Invalid prop: custom validator check failed for "+t.path+'="'+t.raw+'"'),!1):!0}}).call(this,t("_process"))},{"./index":72,_process:1}],69:[function(t,e,n){(function(e){if("production"!==e.env.NODE_ENV){var i=t("../config"),r="undefined"!=typeof console;n.log=function(t){r&&i.debug&&console.log("[Vue info]: "+t)},n.warn=function(t,e){!r||i.silent&&!i.debug||(console.warn("[Vue warn]: "+t),i.debug&&console.warn((e||new Error("Warning Stack Trace")).stack))},n.assertAsset=function(t,e,i){t||n.warn("Failed to resolve "+e+": "+i)}}}).call(this,t("_process"))},{"../config":21,_process:1}],70:[function(t,e,n){(function(e){function i(t,e){e&&3===e.nodeType&&!e.data.trim()&&t.removeChild(e)}var r=t("./index"),s=t("../config"),o=t("../transition");n.query=function(t){if("string"==typeof t){var n=t;t=document.querySelector(t),t||"production"!==e.env.NODE_ENV&&r.warn("Cannot find element: "+n)}return t},n.inDoc=function(t){var e=document.documentElement,n=t&&t.parentNode;return e===t||e===n||!(!n||1!==n.nodeType||!e.contains(n))},n.attr=function(t,e){var n=t.getAttribute(e);return null!==n&&t.removeAttribute(e),n},n.getBindAttr=function(t,e){var i=n.attr(t,":"+e);return null===i&&(i=n.attr(t,"v-bind:"+e)),i},n.before=function(t,e){e.parentNode.insertBefore(t,e)},n.after=function(t,e){e.nextSibling?n.before(t,e.nextSibling):e.parentNode.appendChild(t)},n.remove=function(t){t.parentNode.removeChild(t)},n.prepend=function(t,e){e.firstChild?n.before(t,e.firstChild):e.appendChild(t)},n.replace=function(t,e){var n=t.parentNode;n&&n.replaceChild(e,t)},n.on=function(t,e,n){t.addEventListener(e,n)},n.off=function(t,e,n){t.removeEventListener(e,n)},n.addClass=function(t,e){if(t.classList)t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}},n.removeClass=function(t,e){if(t.classList)t.classList.remove(e);else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");t.setAttribute("class",n.trim())}t.className||t.removeAttribute("class")},n.extractContent=function(t,e){var i,r;if(n.isTemplate(t)&&t.content instanceof DocumentFragment&&(t=t.content),t.hasChildNodes())for(n.trimNode(t),r=e?document.createDocumentFragment():document.createElement("div");i=t.firstChild;)r.appendChild(i);return r},n.trimNode=function(t){i(t,t.firstChild),i(t,t.lastChild)},n.isTemplate=function(t){return t.tagName&&"template"===t.tagName.toLowerCase()},n.createAnchor=function(t,e){var n=s.debug?document.createComment(t):document.createTextNode(e?" ":"");return n.__vue_anchor=!0,n};var a=/^v-ref:/;n.findRef=function(t){if(t.hasAttributes())for(var e=t.attributes,n=0,i=e.length;i>n;n++){var s=e[n].name;if(a.test(s))return r.camelize(s.replace(a,""))}},n.mapNodeRange=function(t,e,n){for(var i;t!==e;)i=t.nextSibling,n(t),t=i;n(e)},n.removeNodeRange=function(t,e,i,r,s){function a(){if(l++,c&&l>=u.length){for(var t=0;t<u.length;t++)r.appendChild(u[t]);s&&s()}}var c=!1,l=0,u=[];n.mapNodeRange(t,e,function(t){t===e&&(c=!0),u.push(t),o.remove(t,i,a)})}}).call(this,t("_process"))},{"../config":21,"../transition":65,"./index":72,_process:1}],71:[function(t,e,n){n.hasProto="__proto__"in{};var i=n.inBrowser="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window);if(n.isIE9=i&&navigator.userAgent.toLowerCase().indexOf("msie 9.0")>0,n.isAndroid=i&&navigator.userAgent.toLowerCase().indexOf("android")>0,i&&!n.isIE9){var r=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,s=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;n.transitionProp=r?"WebkitTransition":"transition",n.transitionEndEvent=r?"webkitTransitionEnd":"transitionend",n.animationProp=s?"WebkitAnimation":"animation",n.animationEndEvent=s?"webkitAnimationEnd":"animationend"}n.nextTick=function(){function t(){i=!1;var t=n.slice(0);n=[];for(var e=0;e<t.length;e++)t[e]()}var e,n=[],i=!1;if("undefined"!=typeof MutationObserver){var r=1,s=new MutationObserver(t),o=document.createTextNode(r);s.observe(o,{characterData:!0}),e=function(){r=(r+1)%2,o.data=r}}else e=setTimeout;return function(r,s){var o=s?function(){r.call(s)}:r;n.push(o),i||(i=!0,e(t,0))}}()},{}],72:[function(t,e,n){var i=t("./lang"),r=i.extend;r(n,i),r(n,t("./env")),r(n,t("./dom")),r(n,t("./options")),r(n,t("./component")),r(n,t("./debug"))},{"./component":68,"./debug":69,"./dom":70,"./env":71,"./lang":73,"./options":74}],73:[function(t,e,n){function i(t,e){return e?e.toUpperCase():""}n.set=function u(t,e,n){if(t.hasOwnProperty(e))return void(t[e]=n);if(t._isVue)return void u(t._data,e,n);var i=t.__ob__;if(!i)return void(t[e]=n);if(i.convert(e,n),i.dep.notify(),i.vms)for(var r=i.vms.length;r--;){var s=i.vms[r];s._proxy(e),s._digest()}},n["delete"]=function(t,e){if(t.hasOwnProperty(e)){delete t[e];var n=t.__ob__;if(n&&(n.dep.notify(),n.vms))for(var i=n.vms.length;i--;){var r=n.vms[i];r._unproxy(e),r._digest()}}};var r=/^\s?(true|false|[\d\.]+|'[^']*'|"[^"]*")\s?$/;n.isLiteral=function(t){return r.test(t)},n.isReserved=function(t){var e=(t+"").charCodeAt(0);return 36===e||95===e},n.toString=function(t){return null==t?"":t.toString()},n.toNumber=function(t){if("string"!=typeof t)return t;var e=Number(t);return isNaN(e)?t:e},n.toBoolean=function(t){return"true"===t?!0:"false"===t?!1:t},n.stripQuotes=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e!==n||34!==e&&39!==e?t:t.slice(1,-1)};var s=/-(\w)/g;n.camelize=function(t){return t.replace(s,i)};var o=/([a-z\d])([A-Z])/g;n.hyphenate=function(t){return t.replace(o,"$1-$2").toLowerCase()};var a=/(?:^|[-_\/])(\w)/g;n.classify=function(t){return t.replace(a,i)},n.bind=function(t,e){return function(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}},n.toArray=function(t,e){e=e||0;for(var n=t.length-e,i=new Array(n);n--;)i[n]=t[n+e];return i},n.extend=function(t,e){for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t},n.isObject=function(t){return null!==t&&"object"==typeof t};var c=Object.prototype.toString,l="[object Object]";n.isPlainObject=function(t){return c.call(t)===l},n.isArray=Array.isArray,n.define=function(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})},n.debounce=function(t,e){var n,i,r,s,o,a=function(){var c=Date.now()-s;e>c&&c>=0?n=setTimeout(a,e-c):(n=null,o=t.apply(r,i),n||(r=i=null))};return function(){return r=this,i=arguments,s=Date.now(),n||(n=setTimeout(a,e)),o}},n.indexOf=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1},n.cancellable=function(t){var e=function(){return e.cancelled?void 0:t.apply(this,arguments)};return e.cancel=function(){e.cancelled=!0},e},n.looseEqual=function(t,e){return t==e||(n.isObject(t)&&n.isObject(e)?JSON.stringify(t)===JSON.stringify(e):!1)}},{}],74:[function(t,e,n){(function(e){function i(t,e){var n,r,s;for(n in e)r=t[n],s=e[n],t.hasOwnProperty(n)?c.isObject(r)&&c.isObject(s)&&i(r,s):c.set(t,n,s);return t}function r(t,e){var n=Object.create(t);return e?u(n,a(e)):n}function s(t){if(t.components)for(var n,i=t.components=a(t.components),r=Object.keys(i),s=0,o=r.length;o>s;s++){var l=r[s];c.commonTagRE.test(l)?"production"!==e.env.NODE_ENV&&c.warn("Do not use built-in HTML elements as component id: "+l):(n=i[l],c.isPlainObject(n)&&(i[l]=c.Vue.extend(n)))}}function o(t){var e,n,i=t.props;if(c.isArray(i))for(t.props={},e=i.length;e--;)n=i[e],"string"==typeof n?t.props[n]=null:n.name&&(t.props[n.name]=n);else if(c.isPlainObject(i)){var r=Object.keys(i);for(e=r.length;e--;)n=i[r[e]],"function"==typeof n&&(i[r[e]]={type:n})}}function a(t){if(c.isArray(t)){for(var n,i={},r=t.length;r--;){n=t[r];var s="function"==typeof n?n.options&&n.options.name||n.id:n.name||n.id;s?i[s]=n:"production"!==e.env.NODE_ENV&&c.warn('Array-syntax assets must provide a "name" or "id" field.')}return i}return t}var c=t("./index"),l=t("../config"),u=c.extend,h=l.optionMergeStrategies=Object.create(null);h.data=function(t,n,r){return r?t||n?function(){var e="function"==typeof n?n.call(r):n,s="function"==typeof t?t.call(r):void 0;return e?i(e,s):s}:void 0:n?"function"!=typeof n?("production"!==e.env.NODE_ENV&&c.warn('The "data" option should be a function that returns a per-instance value in component definitions.'),t):t?function(){return i(n.call(this),t.call(this))}:n:t},h.el=function(t,n,i){if(!i&&n&&"function"!=typeof n)return void("production"!==e.env.NODE_ENV&&c.warn('The "el" option should be a function that returns a per-instance value in component definitions.'));var r=n||t;return i&&"function"==typeof r?r.call(i):r},h.init=h.created=h.ready=h.attached=h.detached=h.beforeCompile=h.compiled=h.beforeDestroy=h.destroyed=function(t,e){return e?t?t.concat(e):c.isArray(e)?e:[e]:t},h.paramAttributes=function(){"production"!==e.env.NODE_ENV&&c.warn('"paramAttributes" option has been deprecated in 0.12. Use "props" instead.')},l._assetTypes.forEach(function(t){h[t+"s"]=r}),h.watch=h.events=function(t,e){if(!e)return t;if(!t)return e;var n={};u(n,t);for(var i in e){var r=n[i],s=e[i];r&&!c.isArray(r)&&(r=[r]),n[i]=r?r.concat(s):[s]}return n},h.props=h.methods=h.computed=function(t,e){if(!e)return t;if(!t)return e;var n=Object.create(null);return u(n,t),u(n,e),n};var p=function(t,e){return void 0===e?t:e};n.mergeOptions=function f(t,e,n){function i(i){var r=h[i]||p;a[i]=r(t[i],e[i],n,i)}s(e),o(e);var r,a={};if(e.mixins)for(var c=0,l=e.mixins.length;l>c;c++)t=f(t,e.mixins[c],n);for(r in t)i(r);for(r in e)t.hasOwnProperty(r)||i(r);return a},n.resolveAsset=function(t,e,n){var i,r=t[e];return r[n]||r[i=c.camelize(n)]||r[i.charAt(0).toUpperCase()+i.slice(1)]}}).call(this,t("_process"))},{"../config":21,"./index":72,_process:1}],75:[function(t,e,n){(function(n){function i(t){this._init(t)}var r=t("./util"),s=r.extend;s(i,t("./api/global")),i.options={replace:!0,directives:t("./directives/public"),elementDirectives:t("./directives/element"),filters:t("./filters"),transitions:{},components:{},partials:{}};var o=i.prototype;Object.defineProperty(o,"$data",{get:function(){return this._data},set:function(t){t!==this._data&&this._setData(t)}}),s(o,t("./instance/init")),s(o,t("./instance/events")),s(o,t("./instance/state")),s(o,t("./instance/lifecycle")),s(o,t("./instance/misc")),s(o,t("./api/data")),s(o,t("./api/dom")),
s(o,t("./api/events")),s(o,t("./api/lifecycle")),i.version="1.0.8",e.exports=r.Vue=i,"production"!==n.env.NODE_ENV&&r.inBrowser&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__.emit("init",i)}).call(this,t("_process"))},{"./api/data":10,"./api/dom":11,"./api/events":12,"./api/global":13,"./api/lifecycle":14,"./directives/element":23,"./directives/public":38,"./filters":49,"./instance/events":52,"./instance/init":53,"./instance/lifecycle":54,"./instance/misc":55,"./instance/state":56,"./util":72,_process:1}],76:[function(t,e,n){(function(n){function i(t,e,n,i){i&&s.extend(this,i);var r="function"==typeof e;if(this.vm=t,t._watchers.push(this),this.expression=r?e.toString():e,this.cb=n,this.id=++u,this.active=!0,this.dirty=this.lazy,this.deps=Object.create(null),this.newDeps=null,this.prevError=null,r)this.getter=e,this.setter=void 0;else{var o=c.parse(e,this.twoWay);this.getter=o.get,this.setter=o.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function r(t){var e,n;if(s.isArray(t))for(e=t.length;e--;)r(t[e]);else if(s.isObject(t))for(n=Object.keys(t),e=n.length;e--;)r(t[n[e]])}var s=t("./util"),o=t("./config"),a=t("./observer/dep"),c=t("./parsers/expression"),l=t("./batcher"),u=0;i.prototype.addDep=function(t){var e=t.id;this.newDeps[e]||(this.newDeps[e]=t,this.deps[e]||(this.deps[e]=t,t.addSub(this)))},i.prototype.get=function(){this.beforeGet();var t,e=this.scope||this.vm;try{t=this.getter.call(e,e)}catch(i){"production"!==n.env.NODE_ENV&&o.warnExpressionErrors&&s.warn('Error when evaluating expression "'+this.expression+'". '+(o.debug?"":"Turn on debug mode to see stack trace."),i)}return this.deep&&r(t),this.preProcess&&(t=this.preProcess(t)),this.filters&&(t=e._applyFilters(t,null,this.filters,!1)),this.postProcess&&(t=this.postProcess(t)),this.afterGet(),t},i.prototype.set=function(t){var e=this.scope||this.vm;this.filters&&(t=e._applyFilters(t,this.value,this.filters,!0));try{this.setter.call(e,e,t)}catch(i){"production"!==n.env.NODE_ENV&&o.warnExpressionErrors&&s.warn('Error when evaluating setter "'+this.expression+'"',i)}var r=e.$forContext;if(r&&r.alias===this.expression){if(r.filters)return void("production"!==n.env.NODE_ENV&&s.warn("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead."));r._withLock(function(){e.$key?r.rawValue[e.$key]=t:r.rawValue.$set(e.$index,t)})}},i.prototype.beforeGet=function(){a.target=this,this.newDeps=Object.create(null)},i.prototype.afterGet=function(){a.target=null;for(var t=Object.keys(this.deps),e=t.length;e--;){var n=t[e];this.newDeps[n]||this.deps[n].removeSub(this)}this.deps=this.newDeps},i.prototype.update=function(t){this.lazy?this.dirty=!0:this.sync||!o.async?this.run():(this.shallow=this.queued?t?this.shallow:!1:!!t,this.queued=!0,"production"!==n.env.NODE_ENV&&o.debug&&(this.prevError=new Error("[vue] async stack trace")),l.push(this))},i.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||(s.isArray(t)||this.deep)&&!this.shallow){var e=this.value;this.value=t;var i=this.prevError;if("production"!==n.env.NODE_ENV&&o.debug&&i){this.prevError=null;try{this.cb.call(this.vm,t,e)}catch(r){throw s.nextTick(function(){throw i},0),r}}else this.cb.call(this.vm,t,e)}this.queued=this.shallow=!1}},i.prototype.evaluate=function(){var t=a.target;this.value=this.get(),this.dirty=!1,a.target=t},i.prototype.depend=function(){for(var t=Object.keys(this.deps),e=t.length;e--;)this.deps[t[e]].depend()},i.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._watchers.$remove(this);for(var t=Object.keys(this.deps),e=t.length;e--;)this.deps[t[e]].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}},e.exports=i}).call(this,t("_process"))},{"./batcher":15,"./config":21,"./observer/dep":58,"./parsers/expression":61,"./util":72,_process:1}],77:[function(t,e,n){var i=t("vue");i.config.debug=!0,i.use(t("vue-resource")),new i({el:"#container",data:{fullRepoName:"",username:"",repo:""},methods:{changeRepo:function(){var t=this.fullRepoName.split("/");this.username=t[0],this.repo=t[1],console.group("Vue Data"),console.log("fullRepoName:",this.fullRepoName),console.log("username:",this.username),console.log("repo:",this.repo),console.groupEnd("Vue Data")}},components:{githubFileExplorer:t("./components/github-file-explorer")}})},{"./components/github-file-explorer":78,vue:75,"vue-resource":3}],78:[function(t,e,n){e.exports={template:t("./template.html"),data:function(){return{path:"/",files:[]}},props:{username:{type:String,required:!0},repo:{type:String,required:!0}},created:function(){this.username&&this.repo&&this.getFiles()},methods:{getFiles:function(){this.$http.get("https://api.github.com/repos/"+this.fullRepoUrl+"/contents"+this.path,function(t){this.files=t})}},computed:{fullRepoUrl:function(){return this.username+"/"+this.repo}}}},{"./template.html":79}],79:[function(t,e,n){e.exports='<div class="row">\n	<div class="col-md-12">\n		<table class="table">\n			<caption> {{path}} </caption>\n		</table>\n	</div>\n</div>'},{}]},{},[77]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwiYXBwLm1pbi5qcyIsIm5vZGVfbW9kdWxlcy92dWUtcmVzb3VyY2Uvc3JjL2h0dHAuanMiLCJub2RlX21vZHVsZXMvdnVlLXJlc291cmNlL3NyYy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy92dWUtcmVzb3VyY2Uvc3JjL2xpYi9qc29ucC5qcyIsIm5vZGVfbW9kdWxlcy92dWUtcmVzb3VyY2Uvc3JjL2xpYi9wcm9taXNlLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS1yZXNvdXJjZS9zcmMvbGliL3V0aWwuanMiLCJub2RlX21vZHVsZXMvdnVlLXJlc291cmNlL3NyYy9saWIveGhyLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS1yZXNvdXJjZS9zcmMvcmVzb3VyY2UuanMiLCJub2RlX21vZHVsZXMvdnVlLXJlc291cmNlL3NyYy91cmwuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9hcGkvZGF0YS5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2FwaS9kb20uanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9hcGkvZXZlbnRzLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvYXBpL2dsb2JhbC5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2FwaS9saWZlY3ljbGUuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9iYXRjaGVyLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvY2FjaGUuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9jb21waWxlci9jb21waWxlLXByb3BzLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvY29tcGlsZXIvY29tcGlsZS5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2NvbXBpbGVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvY29tcGlsZXIvdHJhbnNjbHVkZS5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2NvbmZpZy5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2RpcmVjdGl2ZS5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2RpcmVjdGl2ZXMvZWxlbWVudC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2RpcmVjdGl2ZXMvZWxlbWVudC9wYXJ0aWFsLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvZGlyZWN0aXZlcy9lbGVtZW50L3Nsb3QuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9kaXJlY3RpdmVzL2ludGVybmFsL2NsYXNzLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvZGlyZWN0aXZlcy9pbnRlcm5hbC9jb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9kaXJlY3RpdmVzL2ludGVybmFsL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvZGlyZWN0aXZlcy9pbnRlcm5hbC9wcm9wLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvZGlyZWN0aXZlcy9pbnRlcm5hbC9zdHlsZS5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2RpcmVjdGl2ZXMvaW50ZXJuYWwvdHJhbnNpdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2RpcmVjdGl2ZXMvcHVibGljL2JpbmQuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9kaXJlY3RpdmVzL3B1YmxpYy9jbG9hay5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2RpcmVjdGl2ZXMvcHVibGljL2VsLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvZGlyZWN0aXZlcy9wdWJsaWMvZm9yLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvZGlyZWN0aXZlcy9wdWJsaWMvaHRtbC5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2RpcmVjdGl2ZXMvcHVibGljL2lmLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvZGlyZWN0aXZlcy9wdWJsaWMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9kaXJlY3RpdmVzL3B1YmxpYy9tb2RlbC9jaGVja2JveC5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2RpcmVjdGl2ZXMvcHVibGljL21vZGVsL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvZGlyZWN0aXZlcy9wdWJsaWMvbW9kZWwvcmFkaW8uanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9kaXJlY3RpdmVzL3B1YmxpYy9tb2RlbC9zZWxlY3QuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9kaXJlY3RpdmVzL3B1YmxpYy9tb2RlbC90ZXh0LmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvZGlyZWN0aXZlcy9wdWJsaWMvb24uanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9kaXJlY3RpdmVzL3B1YmxpYy9yZWYuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9kaXJlY3RpdmVzL3B1YmxpYy9zaG93LmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvZGlyZWN0aXZlcy9wdWJsaWMvdGV4dC5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2ZpbHRlcnMvYXJyYXktZmlsdGVycy5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2ZpbHRlcnMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9mcmFnbWVudC9mYWN0b3J5LmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvZnJhZ21lbnQvZnJhZ21lbnQuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9pbnN0YW5jZS9ldmVudHMuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9pbnN0YW5jZS9pbml0LmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvaW5zdGFuY2UvbGlmZWN5Y2xlLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvaW5zdGFuY2UvbWlzYy5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL2luc3RhbmNlL3N0YXRlLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvb2JzZXJ2ZXIvYXJyYXkuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9vYnNlcnZlci9kZXAuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy9vYnNlcnZlci9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL3BhcnNlcnMvZGlyZWN0aXZlLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvcGFyc2Vycy9leHByZXNzaW9uLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvcGFyc2Vycy9wYXRoLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvcGFyc2Vycy90ZW1wbGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL3BhcnNlcnMvdGV4dC5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL3RyYW5zaXRpb24vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy90cmFuc2l0aW9uL3F1ZXVlLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvdHJhbnNpdGlvbi90cmFuc2l0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvdXRpbC9jb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy91dGlsL2RlYnVnLmpzIiwibm9kZV9tb2R1bGVzL3Z1ZS9zcmMvdXRpbC9kb20uanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy91dGlsL2Vudi5qcyIsIm5vZGVfbW9kdWxlcy92dWUvc3JjL3V0aWwvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy91dGlsL2xhbmcuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy91dGlsL29wdGlvbnMuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy92dWUuanMiLCJub2RlX21vZHVsZXMvdnVlL3NyYy93YXRjaGVyLmpzIiwic3JjL2pzL2FwcC5qcyIsInNyYy9qcy9jb21wb25lbnRzL2dpdGh1Yi1maWxlLWV4cGxvcmVyL2luZGV4LmpzIiwic3JjL2pzL2NvbXBvbmVudHMvZ2l0aHViLWZpbGUtZXhwbG9yZXIvdGVtcGxhdGUuaHRtbCJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsMSwibW9kdWxlIiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImNvbmNhdCIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJsZW4iLCJydW4iLCJjbGVhclRpbWVvdXQiLCJJdGVtIiwiZnVuIiwiYXJyYXkiLCJ0aGlzIiwibm9vcCIsInByb2Nlc3MiLCJuZXh0VGljayIsImFyZ3MiLCJBcnJheSIsImFyZ3VtZW50cyIsInB1c2giLCJwcm90b3R5cGUiLCJhcHBseSIsInRpdGxlIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsImJpbmRpbmciLCJuYW1lIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsMiwieGhyIiwianNvbnAiLCJQcm9taXNlIiwiXyIsIkh0dHAiLCJ1cmwiLCJvcHRpb25zIiwicHJvbWlzZSIsImlzUGxhaW5PYmplY3QiLCJleHRlbmQiLCJjcm9zc09yaWdpbiIsIm1ldGhvZCIsInRvVXBwZXJDYXNlIiwiaGVhZGVycyIsImNvbW1vbiIsImN1c3RvbSIsInRvTG93ZXJDYXNlIiwiZGF0YSIsInRlc3QiLCJwYXJhbXMiLCJlbXVsYXRlSFRUUCIsImVtdWxhdGVKU09OIiwiaXNPYmplY3QiLCJ0b1N0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ2bSIsImV4dGVuZFByb21pc2UiLCJ0aGVuIiwidHJhbnNmb3JtUmVzcG9uc2UiLCJzdWNjZXNzIiwiZXJyb3IiLCJmbiIsInJlc3BvbnNlIiwic3RhdHVzIiwidW5kZWZpbmVkIiwiYWx3YXlzIiwiY2IiLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsIm9rIiwicmVqZWN0IiwicmVxdWVzdFVybCIsInByb3RvY29sIiwib3JpZ2luVXJsIiwiaG9zdCIsImxvY2F0aW9uIiwiaHJlZiIsImpzb25UeXBlIiwiQ29udGVudC1UeXBlIiwiYmVmb3JlU2VuZCIsInB1dCIsInBvc3QiLCJwYXRjaCIsImRlbGV0ZSIsIkFjY2VwdCIsIlgtUmVxdWVzdGVkLVdpdGgiLCJmb3JFYWNoIiwiaXNGdW5jdGlvbiIsImh0dHAiLCIuL2xpYi9qc29ucCIsIi4vbGliL3Byb21pc2UiLCIuL2xpYi94aHIiLDMsImluc3RhbGwiLCJWdWUiLCJyZXNvdXJjZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnRpZXMiLCIkdXJsIiwiZ2V0IiwiJG9wdGlvbnMiLCIkaHR0cCIsIiRyZXNvdXJjZSIsImJpbmQiLCJ3aW5kb3ciLCJ1c2UiLCIuL2h0dHAiLCIuL2xpYi91dGlsIiwiLi9yZXNvdXJjZSIsIi4vdXJsIiw0LCJzY3JpcHQiLCJib2R5IiwiY2FsbGJhY2siLCJNYXRoIiwicmFuZG9tIiwic3Vic3RyIiwicmVzb2x2ZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNyYyIsInR5cGUiLCJhc3luYyIsImhhbmRsZXIiLCJldmVudCIsInJlbW92ZUNoaWxkIiwib25sb2FkIiwib25lcnJvciIsImFwcGVuZENoaWxkIiwiLi9wcm9taXNlIiw1LCJleGVjdXRvciIsInN0YXRlIiwiUEVORElORyIsInZhbHVlIiwiZGVmZXJyZWQiLCJ4IiwiUkVTT0xWRUQiLCJSRUpFQ1RFRCIsImFsbCIsIml0ZXJhYmxlIiwicmVzb2x2ZXIiLCJyZXN1bHQiLCJjb3VudCIsInJhY2UiLCJwIiwiVHlwZUVycm9yIiwiY2FsbGVkIiwibm90aWZ5IiwicmVhc29uIiwic2hpZnQiLCJvblJlc29sdmVkIiwib25SZWplY3RlZCIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJlbCIsIm1vIiwib2JzZXJ2ZSIsImF0dHJpYnV0ZXMiLCJzZXRBdHRyaWJ1dGUiLDYsInRhcmdldCIsInNvdXJjZSIsImRlZXAiLCJrZXkiLCJpc0FycmF5IiwidXRpbCIsImlzU3RyaW5nIiwib2JqIiwiZWFjaCIsIml0ZXJhdG9yIiwiaGFzT3duUHJvcGVydHkiLCJzbGljZSIsImFyZyIsNywiWERvbWFpbiIsIlhEb21haW5SZXF1ZXN0IiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsImhlYWRlciIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmFib3J0Iiwic2VuZCIsOCwiUmVzb3VyY2UiLCJhY3Rpb25zIiwic2VsZiIsImFjdGlvbiIsIm9wdHMiLCJzYXZlIiwicXVlcnkiLCJ1cGRhdGUiLCJyZW1vdmUiLDksImllIiwiZG9jdW1lbnRNb2RlIiwiVXJsIiwidXJsUGFyYW1zIiwicXVlcnlQYXJhbXMiLCJyZXBsYWNlIiwibWF0Y2giLCJzbGFzaCIsImVuY29kZVVyaVNlZ21lbnQiLCJyb290IiwiaW5kZXhPZiIsInNlcmlhbGl6ZSIsInNjb3BlIiwiaGFzaCIsInBsYWluIiwiYWRkIiwiZW5jb2RlVXJpUXVlcnkiLCJzcGFjZXMiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwicG9ydCIsImhvc3RuYW1lIiwicGF0aG5hbWUiLCJjaGFyQXQiLCJzZWFyY2giLDEwLCJjbGVhbiIsIldhdGNoZXIiLCJQYXRoIiwidGV4dFBhcnNlciIsImRpclBhcnNlciIsImV4cFBhcnNlciIsImZpbHRlclJFIiwiJGdldCIsImV4cCIsImFzU3RhdGVtZW50IiwicmVzIiwiaXNTaW1wbGVQYXRoIiwiJHNldCIsInZhbCIsInNldCIsIiRkZWxldGUiLCJfZGF0YSIsIiR3YXRjaCIsImV4cE9yRm4iLCJwYXJzZWQiLCJleHByZXNzaW9uIiwid2F0Y2hlciIsImZpbHRlcnMiLCJpbW1lZGlhdGUiLCJ0ZWFyZG93biIsIiRldmFsIiwidGV4dCIsIl9hcHBseUZpbHRlcnMiLCIkaW50ZXJwb2xhdGUiLCJ0b2tlbnMiLCJtYXAiLCJ0b2tlbiIsInRhZyIsIiRsb2ciLCJwYXRoIiwiY29tcHV0ZWQiLCJjb25zb2xlIiwibG9nIiwiLi4vcGFyc2Vycy9kaXJlY3RpdmUiLCIuLi9wYXJzZXJzL2V4cHJlc3Npb24iLCIuLi9wYXJzZXJzL3BhdGgiLCIuLi9wYXJzZXJzL3RleHQiLCIuLi91dGlsIiwiLi4vd2F0Y2hlciIsMTEsImluc2VydCIsIndpdGhUcmFuc2l0aW9uIiwib3AxIiwib3AyIiwidGFyZ2V0SXNEZXRhY2hlZCIsImluRG9jIiwib3AiLCJzaG91bGRDYWxsSG9vayIsIl9pc0F0dGFjaGVkIiwiJGVsIiwiX2lzRnJhZ21lbnQiLCJtYXBOb2RlUmFuZ2UiLCJfZnJhZ21lbnRTdGFydCIsIl9mcmFnbWVudEVuZCIsIm5vZGUiLCJfY2FsbEhvb2siLCJxdWVyeVNlbGVjdG9yIiwiYXBwZW5kIiwiYmVmb3JlIiwidHJhbnNpdGlvbiIsIiRuZXh0VGljayIsIiRhcHBlbmRUbyIsIiRwcmVwZW5kVG8iLCJoYXNDaGlsZE5vZGVzIiwiJGJlZm9yZSIsImZpcnN0Q2hpbGQiLCIkYWZ0ZXIiLCJuZXh0U2libGluZyIsInBhcmVudE5vZGUiLCIkcmVtb3ZlIiwicmVhbENiIiwicmVtb3ZlTm9kZVJhbmdlIiwiX2ZyYWdtZW50IiwiLi4vdHJhbnNpdGlvbiIsMTIsIm1vZGlmeUxpc3RlbmVyQ291bnQiLCJwYXJlbnQiLCIkcGFyZW50IiwiaG9va1JFIiwiX2V2ZW50c0NvdW50IiwiJG9uIiwiX2V2ZW50cyIsIiRvbmNlIiwiJG9mZiIsImNicyIsInNwbGljZSIsIiRlbWl0IiwiX3Nob3VsZFByb3BhZ2F0ZSIsInRvQXJyYXkiLCIkYnJvYWRjYXN0IiwiY2hpbGRyZW4iLCIkY2hpbGRyZW4iLCJjaGlsZCIsIiRkaXNwYXRjaCIsMTMsImNyZWF0ZUNsYXNzIiwiRnVuY3Rpb24iLCJjbGFzc2lmeSIsImNvbmZpZyIsImNvbXBpbGVyIiwiRnJhZ21lbnRGYWN0b3J5IiwiaW50ZXJuYWxEaXJlY3RpdmVzIiwicGFyc2VycyIsInRlbXBsYXRlIiwiZGlyZWN0aXZlIiwiY2lkIiwiZXh0ZW5kT3B0aW9ucyIsIlN1cGVyIiwiaXNGaXJzdEV4dGVuZCIsIl9DdG9yIiwiU3ViIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJtZXJnZU9wdGlvbnMiLCJfYXNzZXRUeXBlcyIsImNvbXBvbmVudHMiLCJwbHVnaW4iLCJpbnN0YWxsZWQiLCJ1bnNoaWZ0IiwibWl4aW4iLCJpZCIsImRlZmluaXRpb24iLCJOT0RFX0VOViIsImNvbW1vblRhZ1JFIiwid2FybiIsIi4uL2NvbXBpbGVyIiwiLi4vY29uZmlnIiwiLi4vZGlyZWN0aXZlcy9pbnRlcm5hbCIsIi4uL2ZyYWdtZW50L2ZhY3RvcnkiLCIuLi9wYXJzZXJzL3RlbXBsYXRlIiwiX3Byb2Nlc3MiLDE0LCJyZWFkeSIsIl9pc1JlYWR5IiwiJG1vdW50IiwiX2lzQ29tcGlsZWQiLCJfY29tcGlsZSIsIl9pbml0RE9NSG9va3MiLCIkZGVzdHJveSIsImRlZmVyQ2xlYW51cCIsIl9kZXN0cm95IiwiJGNvbXBpbGUiLCJmcmFnIiwiY29tcGlsZSIsMTUsInJlc2V0QmF0Y2hlclN0YXRlIiwidXNlclF1ZXVlIiwiaGFzIiwiY2lyY3VsYXIiLCJ3YWl0aW5nIiwiaW50ZXJuYWxRdWV1ZURlcGxldGVkIiwiZmx1c2hCYXRjaGVyUXVldWUiLCJydW5CYXRjaGVyUXVldWUiLCJpbkJyb3dzZXIiLCJfX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fIiwiX21heFVwZGF0ZUNvdW50IiwidXNlciIsInEiLCIuL2NvbmZpZyIsIi4vdXRpbCIsMTYsIkNhY2hlIiwibGltaXQiLCJzaXplIiwiaGVhZCIsInRhaWwiLCJfa2V5bWFwIiwiZW50cnkiLCJuZXdlciIsIm9sZGVyIiwicmV0dXJuRW50cnkiLDE3LCJtYWtlUHJvcHNMaW5rRm4iLCJwcm9wcyIsIl9wcm9wcyIsInByb3AiLCJyYXciLCJpbml0UHJvcCIsImdldERlZmF1bHQiLCJkeW5hbWljIiwiX2NvbnRleHQiLCJtb2RlIiwicHJvcEJpbmRpbmdNb2RlcyIsIk9ORV9USU1FIiwicGFyZW50UGF0aCIsIl9iaW5kRGlyIiwiZGVmIiwicHJvcERlZiIsIm9wdGltaXplZExpdGVyYWwiLCJzdHJpcHBlZCIsInN0cmlwUXVvdGVzIiwidG9Cb29sZWFuIiwidG9OdW1iZXIiLCJCb29sZWFuIiwiX3Byb3BCaW5kaW5nTW9kZXMiLCJlbXB0eSIsImlkZW50UkUiLCJzZXR0YWJsZVBhdGhSRSIsInByb3BPcHRpb25zIiwiYXR0ciIsIm5hbWVzIiwia2V5cyIsImNhbWVsaXplIiwiT05FX1dBWSIsImh5cGhlbmF0ZSIsImdldEJpbmRBdHRyIiwiVFdPX1dBWSIsImlzTGl0ZXJhbCIsInR3b1dheSIsInJlcXVpcmVkIiwiLi4vZGlyZWN0aXZlcy9pbnRlcm5hbC9wcm9wIiwxOCwibGlua0FuZENhcHR1cmUiLCJsaW5rZXIiLCJvcmlnaW5hbERpckNvdW50IiwiX2RpcmVjdGl2ZXMiLCJkaXJzIiwic29ydCIsImRpcmVjdGl2ZUNvbXBhcmF0b3IiLCJfYmluZCIsImIiLCJkZXNjcmlwdG9yIiwicHJpb3JpdHkiLCJERUZBVUxUX1BSSU9SSVRZIiwibWFrZVVubGlua0ZuIiwiY29udGV4dCIsImNvbnRleHREaXJzIiwiZGVzdHJveWluZyIsInRlYXJkb3duRGlycyIsIl90ZWFyZG93biIsImNvbXBpbGVOb2RlIiwibm9kZVR5cGUiLCJ0YWdOYW1lIiwiY29tcGlsZUVsZW1lbnQiLCJ0cmltIiwiY29tcGlsZVRleHROb2RlIiwidG9rZW5zVG9FeHAiLCJsaW5rRm4iLCJoYXNBdHRycyIsImhhc0F0dHJpYnV0ZXMiLCJjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyIsImNoZWNrRWxlbWVudERpcmVjdGl2ZXMiLCJjaGVja0NvbXBvbmVudCIsImNvbXBpbGVEaXJlY3RpdmVzIiwiX3NraXAiLCJyZW1vdmVUZXh0Iiwid2hvbGVUZXh0IiwibmV4dCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJwcm9jZXNzVGV4dFRva2VuIiwiY3JlYXRlVGV4dE5vZGUiLCJtYWtlVGV4dE5vZGVMaW5rRm4iLCJzZXRUb2tlblR5cGUiLCJwdWJsaWNEaXJlY3RpdmVzIiwib25lVGltZSIsImh0bWwiLCJjcmVhdGVDb21tZW50IiwiZnJhZ0Nsb25lIiwiY2xvbmVOb2RlIiwiY2hpbGROb2RlcyIsInRlbXBsYXRlUGFyc2VyIiwiY29tcGlsZU5vZGVMaXN0Iiwibm9kZUxpc3QiLCJub2RlTGlua0ZuIiwiY2hpbGRMaW5rRm4iLCJsaW5rRm5zIiwidGVybWluYWwiLCJtYWtlQ2hpbGRMaW5rRm4iLCJub2RlcyIsImNoaWxkcmVuTGlua0ZuIiwicmVzb2x2ZUFzc2V0IiwibWFrZVRlcm1pbmFsTm9kZUxpbmtGbiIsImNvbXBvbmVudCIsInJlZiIsImZpbmRSZWYiLCJtb2RpZmllcnMiLCJsaXRlcmFsIiwiY29tcG9uZW50TGlua0ZuIiwiZGVmaW5lUmVhY3RpdmUiLCIkcmVmcyIsInNraXAiLCJoYXNBdHRyaWJ1dGUiLCJwcmV2IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImRpck5hbWUiLCJ0ZXJtaW5hbERpcmVjdGl2ZXMiLCJnZXRBdHRyaWJ1dGUiLCJhdHRycyIsInB1c2hEaXIiLCJpbnRlcnAiLCJyYXdOYW1lIiwicmF3VmFsdWUiLCJkaXJEZWYiLCJwYXJzZU1vZGlmaWVycyIsIm1vZGlmaWVyUkUiLCJzb21lIiwidHJhbnNpdGlvblJFIiwiYmluZFJFIiwib25SRSIsImFyZ1JFIiwiYXNzZXJ0QXNzZXQiLCJtYWtlTm9kZUxpbmtGbiIsImRpcmVjdGl2ZXMiLCJjb21waWxlUHJvcHMiLCJwYXJ0aWFsIiwiX2FzQ29tcG9uZW50IiwiY29tcGlsZUFuZExpbmtQcm9wcyIsInByb3BzTGlua0ZuIiwicHJvcERpcnMiLCJjb21waWxlUm9vdCIsImNvbnRleHRPcHRpb25zIiwiY29udGV4dExpbmtGbiIsInJlcGxhY2VyTGlua0ZuIiwiY29udGFpbmVyQXR0cnMiLCJfY29udGFpbmVyQXR0cnMiLCJyZXBsYWNlckF0dHJzIiwiX3JlcGxhY2VyQXR0cnMiLCJmaWx0ZXIiLCJwbHVyYWwiLCJzZWxmRGlycyIsIi4uL2RpcmVjdGl2ZXMvcHVibGljIiwiLi9jb21waWxlLXByb3BzIiwxOSwiLi9jb21waWxlIiwiLi90cmFuc2NsdWRlIiwyMCwidHJhbnNjbHVkZVRlbXBsYXRlIiwicmVwbGFjZXIiLCJleHRyYWN0QXR0cnMiLCJtZXJnZUF0dHJzIiwiZnJvbSIsInRvIiwic3BlY2lhbENoYXJSRSIsInRyYW5zY2x1ZGUiLCJpc1RlbXBsYXRlIiwiX2NvbnRlbnQiLCJleHRyYWN0Q29udGVudCIsIkRvY3VtZW50RnJhZ21lbnQiLCJwcmVwZW5kIiwiY3JlYXRlQW5jaG9yIiwyMSwiZGVidWciLCJzaWxlbnQiLCJ3YXJuRXhwcmVzc2lvbkVycm9ycyIsImNvbnZlcnRBbGxQcm9wZXJ0aWVzIiwiX2RlbGltaXRlcnNDaGFuZ2VkIiwiZGVsaW1pdGVycyIsInVuc2FmZURlbGltaXRlcnMiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbXBpbGVSZWdleCIsIi4vcGFyc2Vycy90ZXh0IiwyMiwiRGlyZWN0aXZlIiwiX2xvY2tlZCIsIl9ib3VuZCIsIl9saXN0ZW5lcnMiLCJfaG9zdCIsIl9zY29wZSIsIl9mcmFnIiwiX3Z1ZV9kaXJlY3RpdmVzIiwicmVtb3ZlQXR0cmlidXRlIiwiX3NldHVwUGFyYW1zIiwiX2NoZWNrU3RhdGVtZW50IiwiX3VwZGF0ZSIsIm9sZFZhbCIsInByZVByb2Nlc3MiLCJfcHJlUHJvY2VzcyIsInBvc3RQcm9jZXNzIiwiX3Bvc3RQcm9jZXNzIiwiX3dhdGNoZXIiLCJhZnRlckJpbmQiLCJtYXBwZWRLZXkiLCJfc2V0dXBQYXJhbVdhdGNoZXIiLCJ1bndhdGNoIiwicGFyYW1XYXRjaGVycyIsIl9wYXJhbVVud2F0Y2hGbnMiLCJhY2NlcHRTdGF0ZW1lbnQiLCIkZXZlbnQiLCJfd2l0aExvY2siLCJ1bmJpbmQiLCJsaXN0ZW5lcnMiLCJ1bndhdGNoRm5zIiwiLi9wYXJzZXJzL2V4cHJlc3Npb24iLCIuL3dhdGNoZXIiLDIzLCJzbG90IiwiLi9wYXJ0aWFsIiwiLi9zbG90IiwyNCwidklmIiwiYW5jaG9yIiwiZmFjdG9yeSIsImRlc3Ryb3kiLCIuLi8uLi9mcmFnbWVudC9mYWN0b3J5IiwiLi4vLi4vdXRpbCIsIi4uL3B1YmxpYy9pZiIsMjUsImV4dHJhY3RGcmFnbWVudCIsIm1haW4iLCJjbG9uZSIsIl9fdl9zZWxlY3RlZCIsImNvbnRlbnQiLCJmYWxsYmFjayIsInNsb3ROYW1lIiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29tcGlsZURlZmF1bHRDb250ZW50IiwidW5saW5rIiwiLi4vLi4vcGFyc2Vycy90ZW1wbGF0ZSIsMjYsInN0cmluZ1RvT2JqZWN0Iiwic3BsaXQiLCJjb250YWlucyIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJoYW5kbGVPYmplY3QiLCJoYW5kbGVBcnJheSIsImNsZWFudXAiLCJwcmV2S2V5cyIsMjcsIl9fdnVlX18iLCJrZWVwQWxpdmUiLCJjYWNoZSIsImlubGluZVRlbXBsYXRlIiwicGVuZGluZ0NvbXBvbmVudENiIiwiQ29tcG9uZW50IiwicGVuZGluZ1JlbW92YWxzIiwicGVuZGluZ1JlbW92YWxDYiIsInNldENvbXBvbmVudCIsImludmFsaWRhdGVQZW5kaW5nIiwicmVzb2x2ZUNvbXBvbmVudCIsIm1vdW50Q29tcG9uZW50IiwidW5idWlsZCIsImNoaWxkVk0iLCJjYW5jZWxsYWJsZSIsIkNvbXBvbmVudE5hbWUiLCJfcmVzb2x2ZUNvbXBvbmVudCIsImFjdGl2YXRlSG9vayIsImFjdGl2YXRlIiwiY2FjaGVkIiwiZ2V0Q2FjaGVkIiwibmV3Q29tcG9uZW50IiwiYnVpbGQiLCJ3YWl0aW5nRm9yIiwiX3VwZGF0ZVJlZiIsImNhbmNlbCIsImV4dHJhT3B0aW9ucyIsIl9saW5rZXJDYWNoYWJsZSIsIl9yZWYiLCJfaXNSb3V0ZXJWaWV3IiwiZGVmZXIiLCJfY2xlYW51cCIsImN1cnJlbnQiLCJfaW5hY3RpdmUiLCJ0cmFuc2l0aW9uTW9kZSIsMjgsInN0eWxlIiwiLi9jbGFzcyIsIi4vY29tcG9uZW50IiwiLi9wcm9wIiwiLi9zdHlsZSIsIi4vdHJhbnNpdGlvbiIsMjksImJpbmRpbmdNb2RlcyIsImNoaWxkS2V5IiwicGFyZW50S2V5IiwicGFyZW50V2F0Y2hlciIsImFzc2VydFByb3AiLCJjaGlsZFdhdGNoZXIiLCJzeW5jIiwiLi4vLi4vY29uZmlnIiwiLi4vLi4vd2F0Y2hlciIsMzAsIm5vcm1hbGl6ZSIsInByb3BDYWNoZSIsInByZWZpeCIsImNhbWVsIiwidXBwZXIiLCJ0ZXN0RWwiLCJwcmVmaXhlZCIsInByZWZpeGVzIiwiY2FtZWxQcmVmaXhlcyIsImltcG9ydGFudFJFIiwiY3NzVGV4dCIsInJlZHVjZSIsImhhbmRsZVNpbmdsZSIsImlzSW1wb3J0YW50Iiwic2V0UHJvcGVydHkiLCJyZW1vdmVQcm9wZXJ0eSIsMzEsIlRyYW5zaXRpb24iLCJvbGRJZCIsImhvb2tzIiwiX192X3RyYW5zIiwiLi4vLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uIiwzMiwieGxpbmtOUyIsInhsaW5rUkUiLCJpbnB1dFByb3BzIiwiY2hlY2tlZCIsInNlbGVjdGVkIiwibW9kZWxQcm9wcyIsInRydWUtdmFsdWUiLCJmYWxzZS12YWx1ZSIsImRpc2FsbG93ZWRJbnRlcnBBdHRyUkUiLCJpbnZhbGlkIiwibW9kZWxQcm9wIiwibW9kZWwiLCJfX3ZfbW9kZWwiLCJsaXN0ZW5lciIsInNldEF0dHJpYnV0ZU5TIiwiLi4vaW50ZXJuYWwvc3R5bGUiLDMzLDM0LCJyZWZzIiwiJGVscyIsMzUsImZpbmRQcmV2RnJhZyIsInByZXZpb3VzU2libGluZyIsIl9fdmZyYWdfXyIsImZvcklkIiwiaW5zZXJ0ZWQiLCJmaW5kVm1Gcm9tRnJhZyIsInJhbmdlIiwicmV0IiwidWlkIiwiaW5NYXRjaCIsIml0TWF0Y2giLCJhbGlhcyIsImlzT3B0aW9uIiwic3RhcnQiLCJlbmQiLCJkaWZmIiwidXBkYXRlUmVmIiwidXBkYXRlTW9kZWwiLCJwcmltaXRpdmUiLCJpdGVtIiwiY29udmVydGVkRnJvbU9iamVjdCIsImZyb21PYmplY3QiLCJ0cmFja0J5S2V5IiwidHJhY2tCeSIsIm9sZEZyYWdzIiwiZnJhZ3MiLCJpbml0IiwiJGtleSIsIiR2YWx1ZSIsImdldENhY2hlZEZyYWciLCJyZXVzZWQiLCIkaW5kZXgiLCJmcmVzaCIsInJlbW92YWxJbmRleCIsInRvdGFsUmVtb3ZlZCIsImRlbGV0ZUNhY2hlZEZyYWciLCJ0YXJnZXRQcmV2IiwicHJldkVsIiwiY3VycmVudFByZXYiLCJpbnNlcnRpb25JbmRleCIsInN0YWdnZXJDYiIsInN0YWdnZXJBbmNob3IiLCJtb3ZlIiwiaW5kZXgiLCJwYXJlbnRTY29wZSIsIiRmb3JDb250ZXh0IiwiZGVmaW5lIiwiY2FjaGVGcmFnIiwiZm9yY2VVcGRhdGUiLCJzdGFnZ2VyQW1vdW50IiwiZ2V0U3RhZ2dlciIsImFmdGVyIiwidG90YWwiLCJ3YXJuRHVwbGljYXRlIiwidHJhbnMiLCJob29rIiwic3RhZ2dlciIsInBhcnNlSW50IiwzNiwic3dhcCIsImlubmVySFRNTCIsMzcsIm5leHRFbGVtZW50U2libGluZyIsImVsc2VGYWN0b3J5IiwiZWxzZUZyYWciLDM4LCJzaG93IiwiY2xvYWsiLCIuL2JpbmQiLCIuL2Nsb2FrIiwiLi9lbCIsIi4vZm9yIiwiLi9odG1sIiwiLi9pZiIsIi4vbW9kZWwiLCIuL29uIiwiLi9yZWYiLCIuL3Nob3ciLCIuL3RleHQiLDM5LCJnZXRCb29sZWFuVmFsdWUiLCJfdHJ1ZVZhbHVlIiwiX2ZhbHNlVmFsdWUiLCJnZXRWYWx1ZSIsIl92YWx1ZSIsIm51bWJlciIsImxvb3NlRXF1YWwiLCIuLi8uLi8uLi91dGlsIiw0MCwiaGFuZGxlcnMiLCJyYWRpbyIsInNlbGVjdCIsImNoZWNrYm94IiwiY2hlY2tGaWx0ZXJzIiwiaGFzUmVhZCIsImhhc1dyaXRlIiwiX3VuYmluZCIsInJlYWQiLCJ3cml0ZSIsIi4vY2hlY2tib3giLCIuL3JhZGlvIiwiLi9zZWxlY3QiLDQxLDQyLCJtdWx0aSIsImFyciIsIm11bHRpcGxlIiwiaW5pdFZhbHVlIiwic2VsZWN0ZWRJbmRleCIsNDMsImlzUmFuZ2UiLCJsYXp5IiwiZGVib3VuY2UiLCJjb21wb3NpbmciLCJpc0FuZHJvaWQiLCJmb2N1c2VkIiwiaGFzalF1ZXJ5IiwialF1ZXJ5IiwiaXNJRTkiLCJrZXlDb2RlIiw0NCwia2V5RmlsdGVyIiwiY29kZXMiLCJjaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJrZXlDb2RlcyIsInN0b3BGaWx0ZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RmlsdGVyIiwicHJldmVudERlZmF1bHQiLCJlc2MiLCJ0YWIiLCJlbnRlciIsInNwYWNlIiwidXAiLCJsZWZ0IiwicmlnaHQiLCJkb3duIiwiaWZyYW1lQmluZCIsImNvbnRlbnRXaW5kb3ciLCJzdG9wIiwicHJldmVudCIsInJlc2V0Iiw0NSw0NiwiZWxzZUVsIiwiZGlzcGxheSIsIi4uLy4uL3RyYW5zaXRpb24iLDQ3LDQ4LCJsaW1pdEJ5Iiwib2Zmc2V0IiwiZmlsdGVyQnkiLCJkZWxpbWl0ZXIiLCJqIiwiY3VyIiwib3JkZXJCeSIsInNvcnRLZXkiLCJyZXZlcnNlIiwib3JkZXIiLCIuLi9kaXJlY3RpdmVzL3B1YmxpYy9mb3IiLDQ5LCJqc29uIiwiaW5kZW50IiwiTnVtYmVyIiwiY2FwaXRhbGl6ZSIsInVwcGVyY2FzZSIsImxvd2VyY2FzZSIsImRpZ2l0c1JFIiwiY3VycmVuY3kiLCJwYXJzZUZsb2F0IiwiaXNGaW5pdGUiLCJzdHJpbmdpZmllZCIsImFicyIsInRvRml4ZWQiLCJfaW50IiwiX2Zsb2F0Iiwic2lnbiIsInBsdXJhbGl6ZSIsImRlbGF5IiwiLi9hcnJheS1maWx0ZXJzIiw1MCwiY2FjaGVJZCIsIm91dGVySFRNTCIsImxpbmtlckNhY2hlIiwiRnJhZ21lbnQiLCJwYXJlbnRGcmFnIiwiLi4vY2FjaGUiLCIuL2ZyYWdtZW50Iiw1MSwiY2hpbGRGcmFncyIsInNpbmdsZSIsInNpbmdsZUJlZm9yZSIsInNpbmdsZVJlbW92ZSIsIm11bHRpQmVmb3JlIiwibXVsdGlSZW1vdmUiLCJjYWxsSG9vayIsImF0dGFjaCIsInNob3VsZENhbGxSZW1vdmUiLCJkZXN0cm95Q2hpbGQiLCJkZXRhY2giLDUyLCJyZWdpc3RlckNvbXBvbmVudEV2ZW50cyIsImV2ZW50UkUiLCJyZWdpc3RlckNhbGxiYWNrcyIsInJlZ2lzdGVyIiwibWV0aG9kcyIsIm9uQXR0YWNoZWQiLCJjYWxsQXR0YWNoIiwib25EZXRhY2hlZCIsImNhbGxEZXRhY2giLCJfaW5pdEV2ZW50cyIsImV2ZW50cyIsIndhdGNoIiw1MywiX2luaXQiLCIkcm9vdCIsIl93YXRjaGVycyIsIl91aWQiLCJfaXNWdWUiLCJfaXNEZXN0cm95ZWQiLCJfaXNCZWluZ0Rlc3Ryb3llZCIsIl91bmxpbmtGbiIsIl9pbml0U3RhdGUiLDU0LCJvcmlnaW5hbCIsIl9pbml0RWxlbWVudCIsImNvbnRlbnRMaW5rRm4iLCJyb290TGlua2VyIiwiY3RvciIsInJvb3RVbmxpbmtGbiIsImNvbnRlbnRVbmxpbmtGbiIsImxhc3RDaGlsZCIsIl9wcm9wc1VubGlua0ZuIiwiX19vYl9fIiwicmVtb3ZlVm0iLCIuLi9kaXJlY3RpdmUiLDU1LCJvbGRWYWx1ZSIsImsiLCJyZXNvbHZlZCIsInJlcXVlc3RlZCIsInBlbmRpbmdDYWxsYmFja3MiLDU2LCJtYWtlQ29tcHV0ZWRHZXR0ZXIiLCJnZXR0ZXIiLCJvd25lciIsImRpcnR5IiwiZXZhbHVhdGUiLCJEZXAiLCJkZXBlbmQiLCJPYnNlcnZlciIsIl9pbml0UHJvcHMiLCJfaW5pdE1ldGEiLCJfaW5pdE1ldGhvZHMiLCJfaW5pdERhdGEiLCJfaW5pdENvbXB1dGVkIiwicHJvcHNEYXRhIiwib3B0aW9uc0RhdGFGbiIsIm9wdGlvbnNEYXRhIiwiX3Byb3h5IiwiX3NldERhdGEiLCJuZXdEYXRhIiwib2xkRGF0YSIsIl91bnByb3h5IiwiX2RpZ2VzdCIsImlzUmVzZXJ2ZWQiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwidXNlckRlZiIsIm1ldGFzIiwiX21ldGEiLCIuLi9vYnNlcnZlciIsIi4uL29ic2VydmVyL2RlcCIsNTcsImFycmF5UHJvdG8iLCJhcnJheU1ldGhvZHMiLCJvYiIsIm9ic2VydmVBcnJheSIsImRlcCIsNTgsInN1YnMiLCJhZGRTdWIiLCJzdWIiLCJyZW1vdmVTdWIiLCJhZGREZXAiLDU5LCJhdWdtZW50IiwiaGFzUHJvdG8iLCJwcm90b0F1Z21lbnQiLCJjb3B5QXVnbWVudCIsImFycmF5S2V5cyIsIndhbGsiLCJfX3Byb3RvX18iLCJzZXR0ZXIiLCJwcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImNoaWxkT2IiLCJuZXdWYWwiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiaXNGcm96ZW4iLCJhZGRWbSIsImNvbnZlcnQiLCJpdGVtcyIsInZtcyIsIi4vYXJyYXkiLCIuL2RlcCIsNjAsInB1c2hGaWx0ZXIiLCJzdHIiLCJsYXN0RmlsdGVySW5kZXgiLCJmaWx0ZXJUb2tlblJFIiwicHJvY2Vzc0ZpbHRlckFyZyIsInJlc2VydmVkQXJnUkUiLCJjIiwiaW5TaW5nbGUiLCJpbkRvdWJsZSIsImN1cmx5Iiwic3F1YXJlIiwicGFyZW4iLCJoaXQiLDYxLCJzYXZlZCIsIm5ld2xpbmVSRSIsInJld3JpdGUiLCJhbGxvd2VkS2V5d29yZHNSRSIsInJlc3RvcmVSRSIsInJlc3RvcmUiLCJjb21waWxlRXhwRm5zIiwibmVlZFNldCIsImltcHJvcGVyS2V5d29yZHNSRSIsInNhdmVSRSIsIndzUkUiLCJwYXRoUmVwbGFjZVJFIiwibWFrZUdldHRlciIsIm1ha2VTZXR0ZXIiLCJjb21waWxlUGF0aEZucyIsImNvbXBpbGVHZXR0ZXIiLCJjaGVja1NldHRlciIsImV4cHJlc3Npb25DYWNoZSIsImFsbG93ZWRLZXl3b3JkcyIsIlJlZ0V4cCIsImltcHJvcGVyS2V5d29yZHMiLCJwYXRoVGVzdFJFIiwiYm9vbGVhbkxpdGVyYWxSRSIsIi4vcGF0aCIsNjIsImdldFBhdGhDaGFyVHlwZSIsImNoIiwicGFyc2VQYXRoIiwibWF5YmVVbmVzY2FwZVF1b3RlIiwibmV4dENoYXIiLCJJTl9TSU5HTEVfUVVPVEUiLCJJTl9ET1VCTEVfUVVPVEUiLCJuZXdDaGFyIiwiQVBQRU5EIiwidHlwZU1hcCIsIkJFRk9SRV9QQVRIIiwiUFVTSCIsInBhdGhTdGF0ZU1hY2hpbmUiLCJFUlJPUiIsIkFGVEVSX1BBVEgiLCJmb3JtYXRBY2Nlc3NvciIsInBhdGhDYWNoZSIsIklOX1BBVEgiLCJCRUZPUkVfSURFTlQiLCJJTl9JREVOVCIsIkJFRk9SRV9FTEVNRU5UIiwiQUZURVJfWkVSTyIsIklOX0lOREVYIiwiSU5fU1VCX1BBVEgiLCJBRlRFUl9FTEVNRU5UIiwid3MiLCJpZGVudCIsIlsiLCJlb2YiLCIuIiwiMCIsIiciLCJcIiIsIl0iLCJlbHNlIiwid2Fybk5vbkV4aXN0ZW50IiwibGFzdCIsNjMsImlzUmVhbFRlbXBsYXRlIiwic3RyaW5nVG9GcmFnbWVudCIsInRlbXBsYXRlU3RyaW5nIiwidGVtcGxhdGVDYWNoZSIsInRhZ01hdGNoIiwidGFnUkUiLCJlbnRpdHlNYXRjaCIsImVudGl0eVJFIiwid3JhcCIsIl9kZWZhdWx0IiwiZGVwdGgiLCJzdWZmaXgiLCJub2RlVG9GcmFnbWVudCIsInRyaW1Ob2RlIiwidGV4dENvbnRlbnQiLCJpZFNlbGVjdG9yQ2FjaGUiLCJsZWdlbmQiLCJ0ciIsImNvbCIsInRkIiwidGgiLCJvcHRpb24iLCJvcHRncm91cCIsInRoZWFkIiwidGJvZHkiLCJjb2xncm91cCIsImNhcHRpb24iLCJ0Zm9vdCIsImciLCJkZWZzIiwic3ltYm9sIiwiaW1hZ2UiLCJjaXJjbGUiLCJlbGxpcHNlIiwibGluZSIsInBvbHlnb24iLCJwb2x5bGluZSIsInJlY3QiLCJoYXNCcm9rZW5UZW1wbGF0ZSIsImhhc1RleHRhcmVhQ2xvbmVCdWciLCJwbGFjZWhvbGRlciIsImNsb25lZCIsInJlcGxhY2VDaGlsZCIsIm5vU2VsZWN0b3IiLCJnZXRFbGVtZW50QnlJZCIsNjQsImVzY2FwZVJlZ2V4IiwicmVnZXhFc2NhcGVSRSIsImZvcm1hdFRva2VuIiwiaW5saW5lRmlsdGVycyIsImh0bWxSRSIsImNsb3NlIiwidW5zYWZlT3BlbiIsInVuc2FmZUNsb3NlIiwiZmlyc3QiLCJsYXN0SW5kZXgiLCJleGVjIiwiLi9kaXJlY3RpdmUiLDY1LCJkaXJlY3Rpb24iLCJ0cmFuc2l0aW9uRW5kRXZlbnQiLDY2LCJmbHVzaCIsImRvY3VtZW50RWxlbWVudCIsIm9mZnNldEhlaWdodCIsInF1ZXVlZCIsImpvYiIsNjcsImVudGVyQ2xhc3MiLCJsZWF2ZUNsYXNzIiwicGVuZGluZ0Nzc0V2ZW50IiwicGVuZGluZ0Nzc0NiIiwicGVuZGluZ0pzQ2IiLCJqdXN0RW50ZXJlZCIsImVudGVyZWQiLCJ0eXBlQ2FjaGUiLCJtIiwiaXNIaWRkZW4iLCJvZmZzZXRXaWR0aCIsImdldENsaWVudFJlY3RzIiwiYW5pbWF0aW9uRW5kRXZlbnQiLCJ0cmFuc0R1cmF0aW9uUHJvcCIsInRyYW5zaXRpb25Qcm9wIiwiYW5pbUR1cmF0aW9uUHJvcCIsImFuaW1hdGlvblByb3AiLCJUWVBFX1RSQU5TSVRJT04iLCJUWVBFX0FOSU1BVElPTiIsImNhbmNlbFBlbmRpbmciLCJjYWxsSG9va1dpdGhDYiIsImVudGVyQ2FuY2VsbGVkIiwiZW50ZXJOZXh0VGljayIsImVudGVyRG9uZSIsImdldENzc1RyYW5zaXRpb25UeXBlIiwic2V0dXBDc3NDYiIsImxlYXZlIiwibGVhdmVDYW5jZWxsZWQiLCJsZWF2ZURvbmUiLCJsZWF2ZU5leHRUaWNrIiwiaGFzUGVuZGluZyIsImNsYXNzTmFtZSIsImhpZGRlbiIsImNzcyIsImlubGluZVN0eWxlcyIsImNvbXB1dGVkU3R5bGVzIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInRyYW5zRHVyYXRpb24iLCJhbmltRHVyYXRpb24iLCJvbkVuZCIsIi4vcXVldWUiLDY4LCJnZXRJc0JpbmRpbmciLCJmb3JtYXRUeXBlIiwiZm9ybWF0VmFsdWUiLCJpcyIsImV4cGVjdGVkVHlwZSIsInZhbGlkIiwiU3RyaW5nIiwidmFsaWRhdG9yIiwiLi9pbmRleCIsNjksImhhc0NvbnNvbGUiLCJtc2ciLCJzdGFjayIsNzAsImRvYyIsImluc2VydEJlZm9yZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xzIiwiY2xhc3NMaXN0IiwidGFyIiwiYXNGcmFnbWVudCIsInJhd0NvbnRlbnQiLCJwZXJzaXN0IiwiX192dWVfYW5jaG9yIiwicmVmUkUiLCJvblJlbW92ZWQiLCJyZW1vdmVkIiwiZG9uZSIsNzEsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImlzV2Via2l0VHJhbnMiLCJvbnRyYW5zaXRpb25lbmQiLCJvbndlYmtpdHRyYW5zaXRpb25lbmQiLCJpc1dlYmtpdEFuaW0iLCJvbmFuaW1hdGlvbmVuZCIsIm9ud2Via2l0YW5pbWF0aW9uZW5kIiwibmV4dFRpY2tIYW5kbGVyIiwicGVuZGluZyIsImNvcGllcyIsImNhbGxiYWNrcyIsInRpbWVyRnVuYyIsImNvdW50ZXIiLCJvYnNlcnZlciIsInRleHROb2RlIiwiY2hhcmFjdGVyRGF0YSIsImN0eCIsImZ1bmMiLDcyLCJsYW5nIiwiLi9kZWJ1ZyIsIi4vZG9tIiwiLi9lbnYiLCIuL2xhbmciLCIuL29wdGlvbnMiLDczLCJ0b1VwcGVyIiwibGl0ZXJhbFZhbHVlUkUiLCJpc05hTiIsImNhbWVsaXplUkUiLCJoeXBoZW5hdGVSRSIsImNsYXNzaWZ5UkUiLCJsaXN0IiwiT0JKRUNUX1NUUklORyIsIndyaXRhYmxlIiwid2FpdCIsInRpbWVzdGFtcCIsImxhdGVyIiwiRGF0ZSIsIm5vdyIsImNhbmNlbGxlZCIsNzQsIm1lcmdlRGF0YSIsInRvVmFsIiwiZnJvbVZhbCIsIm1lcmdlQXNzZXRzIiwicGFyZW50VmFsIiwiY2hpbGRWYWwiLCJndWFyZEFycmF5QXNzZXRzIiwiZ3VhcmRDb21wb25lbnRzIiwiaWRzIiwiZ3VhcmRQcm9wcyIsImFzc2V0cyIsImFzc2V0Iiwic3RyYXRzIiwib3B0aW9uTWVyZ2VTdHJhdGVnaWVzIiwiaW5zdGFuY2VEYXRhIiwiZGVmYXVsdERhdGEiLCJjcmVhdGVkIiwiYXR0YWNoZWQiLCJkZXRhY2hlZCIsImJlZm9yZUNvbXBpbGUiLCJjb21waWxlZCIsImJlZm9yZURlc3Ryb3kiLCJkZXN0cm95ZWQiLCJwYXJhbUF0dHJpYnV0ZXMiLCJkZWZhdWx0U3RyYXQiLCJtZXJnZSIsIm1lcmdlRmllbGQiLCJzdHJhdCIsIm1peGlucyIsImNhbWVsaXplZElkIiw3NSwiZWxlbWVudERpcmVjdGl2ZXMiLCJ0cmFuc2l0aW9ucyIsInBhcnRpYWxzIiwiLi9hcGkvZGF0YSIsIi4vYXBpL2RvbSIsIi4vYXBpL2V2ZW50cyIsIi4vYXBpL2dsb2JhbCIsIi4vYXBpL2xpZmVjeWNsZSIsIi4vZGlyZWN0aXZlcy9lbGVtZW50IiwiLi9kaXJlY3RpdmVzL3B1YmxpYyIsIi4vZmlsdGVycyIsIi4vaW5zdGFuY2UvZXZlbnRzIiwiLi9pbnN0YW5jZS9pbml0IiwiLi9pbnN0YW5jZS9saWZlY3ljbGUiLCIuL2luc3RhbmNlL21pc2MiLCIuL2luc3RhbmNlL3N0YXRlIiw3NiwiaXNGbiIsImFjdGl2ZSIsImRlcHMiLCJuZXdEZXBzIiwicHJldkVycm9yIiwic2hhbGxvdyIsInRyYXZlcnNlIiwiYmF0Y2hlciIsImJlZm9yZUdldCIsImFmdGVyR2V0IiwiZm9yQ29udGV4dCIsImRlcElkcyIsIi4vYmF0Y2hlciIsIi4vb2JzZXJ2ZXIvZGVwIiw3NywiZnVsbFJlcG9OYW1lIiwidXNlcm5hbWUiLCJyZXBvIiwiY2hhbmdlUmVwbyIsInNwbGl0RGF0YSIsImdyb3VwIiwiZ3JvdXBFbmQiLCJnaXRodWJGaWxlRXhwbG9yZXIiLCIuL2NvbXBvbmVudHMvZ2l0aHViLWZpbGUtZXhwbG9yZXIiLCJ2dWUiLCJ2dWUtcmVzb3VyY2UiLDc4LCJmaWxlcyIsImdldEZpbGVzIiwiZnVsbFJlcG9VcmwiLCIuL3RlbXBsYXRlLmh0bWwiLDc5XSwibWFwcGluZ3MiOiJDQUFBLFFBQUFBLEdBQUFDLEVBQUFDLEVBQUFDLEdBQUEsUUFBQUMsR0FBQUMsRUFBQUMsR0FBQSxJQUFBSixFQUFBRyxHQUFBLENBQUEsSUFBQUosRUFBQUksR0FBQSxDQUFBLEdBQUFFLEdBQUEsa0JBQUFDLFVBQUFBLE9BQUEsS0FBQUYsR0FBQUMsRUFBQSxNQUFBQSxHQUFBRixHQUFBLEVBQUEsSUFBQUksRUFBQSxNQUFBQSxHQUFBSixHQUFBLEVBQUEs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QixNQUFBKzFDLFNBQUFHLEVBQUEsR0FDQWwyQyxLQUFBZzJDLEtBQUFFLEVBQUEsR0FFQWptQyxRQUFBa21DLE1BQUEsWUFDQWxtQyxRQUFBQyxJQUFBLGdCQUFBbFEsS0FBQTgxQyxjQUNBN2xDLFFBQUFDLElBQUEsWUFBQWxRLEtBQUErMUMsVUFDQTlsQyxRQUFBQyxJQUFBLFFBQUFsUSxLQUFBZzJDLE1BQ0EvbEMsUUFBQW1tQyxTQUFBLGNBR0EvZ0MsWUFDQWdoQyxtQkFBQS8zQyxFQUFBLDBDNUV5OVZHZzRDLG9DQUFvQyxHQUFHQyxJQUFNLEdBQUdDLGVBQWUsSUFBSUMsSUFBSSxTQUFTbjRDLEVBQVFVLEVBQU9KLEc2RWwvVmxHSSxFQUFBSixTQUNBNlYsU0FBQW5XLEVBQUEsbUJBQ0F5RSxLQUFBLFdBQ0EsT0FDQWdOLEtBQUEsSUFDQTJtQyxXQUlBMzlCLE9BQ0FnOUIsVUFDQXJ1QyxLQUFBa21DLE9BQ0F6eUIsVUFBQSxHQUdBNjZCLE1BQ0F0dUMsS0FBQWttQyxPQUNBenlCLFVBQUEsSUFJQTQzQixRQUFBLFdBQ0EveUMsS0FBQSsxQyxVQUFBLzFDLEtBQUFnMkMsTUFDQWgyQyxLQUFBMjJDLFlBSUF0YixTQUNBc2IsU0FBQSxXQUNBMzJDLEtBQUFzRyxNQUFBRixJQUFBLGdDQUNBcEcsS0FBQTQyQyxZQUFBLFlBQUE1MkMsS0FBQStQLEtBQ0EsU0FBQWhOLEdBQ0EvQyxLQUFBMDJDLE1BQUEzekMsTUFLQWlOLFVBQ0E0bUMsWUFBQSxXQUNBLE1BQUE1MkMsTUFBQSsxQyxTQUFBLElBQUEvMUMsS0FBQWcyQyxVN0V1L1ZHYSxrQkFBa0IsS0FBS0MsSUFBSSxTQUFTeDRDLEVBQVFVLEVBQU9KLEc4RTloV3RESSxFQUFBSixRQUFBLGdKOUVnaVdXIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cbn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLyoqXG4gKiBTZXJ2aWNlIGZvciBzZW5kaW5nIG5ldHdvcmsgcmVxdWVzdHMuXG4gKi9cblxudmFyIHhociA9IHJlcXVpcmUoJy4vbGliL3hocicpO1xudmFyIGpzb25wID0gcmVxdWlyZSgnLi9saWIvanNvbnAnKTtcbnZhciBQcm9taXNlID0gcmVxdWlyZSgnLi9saWIvcHJvbWlzZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChfKSB7XG5cbiAgICB2YXIgb3JpZ2luVXJsID0gXy51cmwucGFyc2UobG9jYXRpb24uaHJlZik7XG4gICAgdmFyIGpzb25UeXBlID0geydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04J307XG5cbiAgICBmdW5jdGlvbiBIdHRwKHVybCwgb3B0aW9ucykge1xuXG4gICAgICAgIHZhciBwcm9taXNlO1xuXG4gICAgICAgIGlmIChfLmlzUGxhaW5PYmplY3QodXJsKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHVybDtcbiAgICAgICAgICAgIHVybCA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHt1cmw6IHVybH0sIG9wdGlvbnMpO1xuICAgICAgICBvcHRpb25zID0gXy5leHRlbmQodHJ1ZSwge30sXG4gICAgICAgICAgICBIdHRwLm9wdGlvbnMsIHRoaXMub3B0aW9ucywgb3B0aW9uc1xuICAgICAgICApO1xuXG4gICAgICAgIGlmIChvcHRpb25zLmNyb3NzT3JpZ2luID09PSBudWxsKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW4ob3B0aW9ucy51cmwpO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucy5tZXRob2QgPSBvcHRpb25zLm1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBvcHRpb25zLmhlYWRlcnMgPSBfLmV4dGVuZCh7fSwgSHR0cC5oZWFkZXJzLmNvbW1vbixcbiAgICAgICAgICAgICFvcHRpb25zLmNyb3NzT3JpZ2luID8gSHR0cC5oZWFkZXJzLmN1c3RvbSA6IHt9LFxuICAgICAgICAgICAgSHR0cC5oZWFkZXJzW29wdGlvbnMubWV0aG9kLnRvTG93ZXJDYXNlKCldLFxuICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKF8uaXNQbGFpbk9iamVjdChvcHRpb25zLmRhdGEpICYmIC9eKEdFVHxKU09OUCkkL2kudGVzdChvcHRpb25zLm1ldGhvZCkpIHtcbiAgICAgICAgICAgIF8uZXh0ZW5kKG9wdGlvbnMucGFyYW1zLCBvcHRpb25zLmRhdGEpO1xuICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmVtdWxhdGVIVFRQICYmICFvcHRpb25zLmNyb3NzT3JpZ2luICYmIC9eKFBVVHxQQVRDSHxERUxFVEUpJC9pLnRlc3Qob3B0aW9ucy5tZXRob2QpKSB7XG4gICAgICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ1gtSFRUUC1NZXRob2QtT3ZlcnJpZGUnXSA9IG9wdGlvbnMubWV0aG9kO1xuICAgICAgICAgICAgb3B0aW9ucy5tZXRob2QgPSAnUE9TVCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5lbXVsYXRlSlNPTiAmJiBfLmlzUGxhaW5PYmplY3Qob3B0aW9ucy5kYXRhKSkge1xuICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnO1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gXy51cmwucGFyYW1zKG9wdGlvbnMuZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXy5pc09iamVjdChvcHRpb25zLmRhdGEpICYmIC9Gb3JtRGF0YS9pLnRlc3Qob3B0aW9ucy5kYXRhLnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLmlzUGxhaW5PYmplY3Qob3B0aW9ucy5kYXRhKSkge1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5kYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb21pc2UgPSAob3B0aW9ucy5tZXRob2QgPT0gJ0pTT05QJyA/IGpzb25wIDogeGhyKS5jYWxsKHRoaXMudm0sIF8sIG9wdGlvbnMpO1xuICAgICAgICBwcm9taXNlID0gZXh0ZW5kUHJvbWlzZShwcm9taXNlLnRoZW4odHJhbnNmb3JtUmVzcG9uc2UsIHRyYW5zZm9ybVJlc3BvbnNlKSwgdGhpcy52bSk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2Uuc3VjY2VzcyhvcHRpb25zLnN1Y2Nlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuZXJyb3IpIHtcbiAgICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlLmVycm9yKG9wdGlvbnMuZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXh0ZW5kUHJvbWlzZShwcm9taXNlLCB2bSkge1xuXG4gICAgICAgIHByb21pc2Uuc3VjY2VzcyA9IGZ1bmN0aW9uIChmbikge1xuXG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kUHJvbWlzZShwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodm0sIHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UpIHx8IHJlc3BvbnNlO1xuICAgICAgICAgICAgfSksIHZtKTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHByb21pc2UuZXJyb3IgPSBmdW5jdGlvbiAoZm4pIHtcblxuICAgICAgICAgICAgcmV0dXJuIGV4dGVuZFByb21pc2UocHJvbWlzZS50aGVuKHVuZGVmaW5lZCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodm0sIHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UpIHx8IHJlc3BvbnNlO1xuICAgICAgICAgICAgfSksIHZtKTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHByb21pc2UuYWx3YXlzID0gZnVuY3Rpb24gKGZuKSB7XG5cbiAgICAgICAgICAgIHZhciBjYiA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHZtLCByZXNwb25zZS5kYXRhLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlKSB8fCByZXNwb25zZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBleHRlbmRQcm9taXNlKHByb21pc2UudGhlbihjYiwgY2IpLCB2bSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UocmVzcG9uc2UpIHtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9IHJlc3BvbnNlLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNwb25zZS5vayA/IHJlc3BvbnNlIDogUHJvbWlzZS5yZWplY3QocmVzcG9uc2UpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyb3NzT3JpZ2luKHVybCkge1xuXG4gICAgICAgIHZhciByZXF1ZXN0VXJsID0gXy51cmwucGFyc2UodXJsKTtcblxuICAgICAgICByZXR1cm4gKHJlcXVlc3RVcmwucHJvdG9jb2wgIT09IG9yaWdpblVybC5wcm90b2NvbCB8fCByZXF1ZXN0VXJsLmhvc3QgIT09IG9yaWdpblVybC5ob3N0KTtcbiAgICB9XG5cbiAgICBIdHRwLm9wdGlvbnMgPSB7XG4gICAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICAgIHBhcmFtczoge30sXG4gICAgICAgIGRhdGE6ICcnLFxuICAgICAgICB4aHI6IG51bGwsXG4gICAgICAgIGpzb25wOiAnY2FsbGJhY2snLFxuICAgICAgICBiZWZvcmVTZW5kOiBudWxsLFxuICAgICAgICBjcm9zc09yaWdpbjogbnVsbCxcbiAgICAgICAgZW11bGF0ZUhUVFA6IGZhbHNlLFxuICAgICAgICBlbXVsYXRlSlNPTjogZmFsc2VcbiAgICB9O1xuXG4gICAgSHR0cC5oZWFkZXJzID0ge1xuICAgICAgICBwdXQ6IGpzb25UeXBlLFxuICAgICAgICBwb3N0OiBqc29uVHlwZSxcbiAgICAgICAgcGF0Y2g6IGpzb25UeXBlLFxuICAgICAgICBkZWxldGU6IGpzb25UeXBlLFxuICAgICAgICBjb21tb246IHsnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKid9LFxuICAgICAgICBjdXN0b206IHsnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdYTUxIdHRwUmVxdWVzdCd9XG4gICAgfTtcblxuICAgIFsnZ2V0JywgJ3B1dCcsICdwb3N0JywgJ3BhdGNoJywgJ2RlbGV0ZScsICdqc29ucCddLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuXG4gICAgICAgIEh0dHBbbWV0aG9kXSA9IGZ1bmN0aW9uICh1cmwsIGRhdGEsIHN1Y2Nlc3MsIG9wdGlvbnMpIHtcblxuICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihkYXRhKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBzdWNjZXNzO1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBkYXRhO1xuICAgICAgICAgICAgICAgIGRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzKHVybCwgXy5leHRlbmQoe21ldGhvZDogbWV0aG9kLCBkYXRhOiBkYXRhLCBzdWNjZXNzOiBzdWNjZXNzfSwgb3B0aW9ucykpO1xuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIF8uaHR0cCA9IEh0dHA7XG59O1xuXG59LHtcIi4vbGliL2pzb25wXCI6NCxcIi4vbGliL3Byb21pc2VcIjo1LFwiLi9saWIveGhyXCI6N31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLyoqXG4gKiBJbnN0YWxsIHBsdWdpbi5cbiAqL1xuXG5mdW5jdGlvbiBpbnN0YWxsKFZ1ZSkge1xuXG4gICAgdmFyIF8gPSByZXF1aXJlKCcuL2xpYi91dGlsJykoVnVlKTtcblxuICAgIFZ1ZS51cmwgPSByZXF1aXJlKCcuL3VybCcpKF8pO1xuICAgIFZ1ZS5odHRwID0gcmVxdWlyZSgnLi9odHRwJykoXyk7XG4gICAgVnVlLnJlc291cmNlID0gcmVxdWlyZSgnLi9yZXNvdXJjZScpKF8pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVnVlLnByb3RvdHlwZSwge1xuXG4gICAgICAgICR1cmw6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLm9wdGlvbnMoVnVlLnVybCwgdGhpcywgdGhpcy4kb3B0aW9ucy51cmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgICRodHRwOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5vcHRpb25zKFZ1ZS5odHRwLCB0aGlzLCB0aGlzLiRvcHRpb25zLmh0dHApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgICRyZXNvdXJjZToge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFZ1ZS5yZXNvdXJjZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9KTtcbn1cblxuaWYgKHdpbmRvdy5WdWUpIHtcbiAgICBWdWUudXNlKGluc3RhbGwpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc3RhbGw7XG59LHtcIi4vaHR0cFwiOjIsXCIuL2xpYi91dGlsXCI6NixcIi4vcmVzb3VyY2VcIjo4LFwiLi91cmxcIjo5fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vKipcbiAqIEpTT05QIHJlcXVlc3QuXG4gKi9cblxudmFyIFByb21pc2UgPSByZXF1aXJlKCcuL3Byb21pc2UnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoXywgb3B0aW9ucykge1xuXG4gICAgdmFyIGNhbGxiYWNrID0gJ19qc29ucCcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiksIHJlc3BvbnNlID0ge30sIHNjcmlwdCwgYm9keTtcblxuICAgIG9wdGlvbnMucGFyYW1zW29wdGlvbnMuanNvbnBdID0gY2FsbGJhY2s7XG5cbiAgICBpZiAoXy5pc0Z1bmN0aW9uKG9wdGlvbnMuYmVmb3JlU2VuZCkpIHtcbiAgICAgICAgb3B0aW9ucy5iZWZvcmVTZW5kLmNhbGwodGhpcywge30sIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cbiAgICAgICAgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIHNjcmlwdC5zcmMgPSBfLnVybChvcHRpb25zKTtcbiAgICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcblxuICAgICAgICB3aW5kb3dbY2FsbGJhY2tdID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGJvZHkgPSBkYXRhO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cbiAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbY2FsbGJhY2tdO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnICYmICFib2R5KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQudHlwZSA9ICdlcnJvcic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3BvbnNlLm9rID0gZXZlbnQudHlwZSAhPT0gJ2Vycm9yJztcbiAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9IHJlc3BvbnNlLm9rID8gMjAwIDogNDA0O1xuICAgICAgICAgICAgcmVzcG9uc2UucmVzcG9uc2VUZXh0ID0gYm9keSA/IGJvZHkgOiBldmVudC50eXBlO1xuXG4gICAgICAgICAgICAocmVzcG9uc2Uub2sgPyByZXNvbHZlIDogcmVqZWN0KShyZXNwb25zZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGhhbmRsZXI7XG4gICAgICAgIHNjcmlwdC5vbmVycm9yID0gaGFuZGxlcjtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgfSk7XG5cbn07XG5cbn0se1wiLi9wcm9taXNlXCI6NX1dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLyoqXG4gKiBQcm9taXNlcy9BKyBwb2x5ZmlsbCB2MS4xLjAgKGh0dHBzOi8vZ2l0aHViLmNvbS9icmFtc3RlaW4vcHJvbWlzKVxuICovXG5cbnZhciBSRVNPTFZFRCA9IDA7XG52YXIgUkVKRUNURUQgPSAxO1xudmFyIFBFTkRJTkcgID0gMjtcblxuZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcikge1xuXG4gICAgdGhpcy5zdGF0ZSA9IFBFTkRJTkc7XG4gICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRlZmVycmVkID0gW107XG5cbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG5cbiAgICB0cnkge1xuICAgICAgICBleGVjdXRvcihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHgpO1xuICAgICAgICB9LCBmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgcHJvbWlzZS5yZWplY3Qocik7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcHJvbWlzZS5yZWplY3QoZSk7XG4gICAgfVxufVxuXG5Qcm9taXNlLnJlamVjdCA9IGZ1bmN0aW9uIChyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcmVqZWN0KHIpO1xuICAgIH0pO1xufTtcblxuUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByZXNvbHZlKHgpO1xuICAgIH0pO1xufTtcblxuUHJvbWlzZS5hbGwgPSBmdW5jdGlvbiBhbGwoaXRlcmFibGUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgY291bnQgPSAwLFxuICAgICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgICAgaWYgKGl0ZXJhYmxlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZXIoaSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2ldID0geDtcbiAgICAgICAgICAgICAgICBjb3VudCArPSAxO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID09PSBpdGVyYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZXJhYmxlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpdGVyYWJsZVtpXS50aGVuKHJlc29sdmVyKGkpLCByZWplY3QpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5Qcm9taXNlLnJhY2UgPSBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVyYWJsZS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaXRlcmFibGVbaV0udGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG52YXIgcCA9IFByb21pc2UucHJvdG90eXBlO1xuXG5wLnJlc29sdmUgPSBmdW5jdGlvbiByZXNvbHZlKHgpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG5cbiAgICBpZiAocHJvbWlzZS5zdGF0ZSA9PT0gUEVORElORykge1xuICAgICAgICBpZiAoeCA9PT0gcHJvbWlzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZSBzZXR0bGVkIHdpdGggaXRzZWxmLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdGhlbiA9IHggJiYgeFsndGhlbiddO1xuXG4gICAgICAgICAgICBpZiAoeCAhPT0gbnVsbCAmJiB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aGVuLmNhbGwoeCwgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZSh4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UucmVqZWN0KHIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgICAgICAgICAgIHByb21pc2UucmVqZWN0KGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHByb21pc2Uuc3RhdGUgPSBSRVNPTFZFRDtcbiAgICAgICAgcHJvbWlzZS52YWx1ZSA9IHg7XG4gICAgICAgIHByb21pc2Uubm90aWZ5KCk7XG4gICAgfVxufTtcblxucC5yZWplY3QgPSBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuXG4gICAgaWYgKHByb21pc2Uuc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICAgICAgaWYgKHJlYXNvbiA9PT0gcHJvbWlzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZSBzZXR0bGVkIHdpdGggaXRzZWxmLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvbWlzZS5zdGF0ZSA9IFJFSkVDVEVEO1xuICAgICAgICBwcm9taXNlLnZhbHVlID0gcmVhc29uO1xuICAgICAgICBwcm9taXNlLm5vdGlmeSgpO1xuICAgIH1cbn07XG5cbnAubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5KCkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcblxuICAgIGFzeW5jKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHByb21pc2Uuc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAgICAgICAgIHdoaWxlIChwcm9taXNlLmRlZmVycmVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9IHByb21pc2UuZGVmZXJyZWQuc2hpZnQoKSxcbiAgICAgICAgICAgICAgICAgICAgb25SZXNvbHZlZCA9IGRlZmVycmVkWzBdLFxuICAgICAgICAgICAgICAgICAgICBvblJlamVjdGVkID0gZGVmZXJyZWRbMV0sXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSBkZWZlcnJlZFsyXSxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0ID0gZGVmZXJyZWRbM107XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvbWlzZS5zdGF0ZSA9PT0gUkVTT0xWRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb25SZXNvbHZlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUob25SZXNvbHZlZC5jYWxsKHVuZGVmaW5lZCwgcHJvbWlzZS52YWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHByb21pc2UudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb21pc2Uuc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG9uUmVqZWN0ZWQuY2FsbCh1bmRlZmluZWQsIHByb21pc2UudmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5wLmNhdGNoID0gZnVuY3Rpb24gKG9uUmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCk7XG59O1xuXG5wLnRoZW4gPSBmdW5jdGlvbiB0aGVuKG9uUmVzb2x2ZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBwcm9taXNlLmRlZmVycmVkLnB1c2goW29uUmVzb2x2ZWQsIG9uUmVqZWN0ZWQsIHJlc29sdmUsIHJlamVjdF0pO1xuICAgICAgICBwcm9taXNlLm5vdGlmeSgpO1xuICAgIH0pO1xufTtcblxudmFyIHF1ZXVlID0gW107XG52YXIgYXN5bmMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICBxdWV1ZS5wdXNoKGNhbGxiYWNrKTtcblxuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgYXN5bmMuYXN5bmMoKTtcbiAgICB9XG59O1xuXG5hc3luYy5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZVswXSgpO1xuICAgICAgICBxdWV1ZS5zaGlmdCgpO1xuICAgIH1cbn07XG5cbmlmICh3aW5kb3cuTXV0YXRpb25PYnNlcnZlcikge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBtbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGFzeW5jLnJ1bik7XG5cbiAgICBtby5vYnNlcnZlKGVsLCB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IHRydWVcbiAgICB9KTtcblxuICAgIGFzeW5jLmFzeW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIDApO1xuICAgIH07XG59IGVsc2Uge1xuICAgIGFzeW5jLmFzeW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzZXRUaW1lb3V0KGFzeW5jLnJ1bik7XG4gICAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3aW5kb3cuUHJvbWlzZSB8fCBQcm9taXNlO1xuXG59LHt9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoVnVlKSB7XG5cbiAgICB2YXIgXyA9IFZ1ZS51dGlsLmV4dGVuZCh7fSwgVnVlLnV0aWwpO1xuXG4gICAgXy5pc1N0cmluZyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJztcbiAgICB9O1xuXG4gICAgXy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7XG4gICAgfTtcblxuICAgIF8ub3B0aW9ucyA9IGZ1bmN0aW9uIChmbiwgb2JqLCBvcHRpb25zKSB7XG5cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMuY2FsbChvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF8uZXh0ZW5kKGZuLmJpbmQoe3ZtOiBvYmosIG9wdGlvbnM6IG9wdGlvbnN9KSwgZm4sIHtvcHRpb25zOiBvcHRpb25zfSk7XG4gICAgfTtcblxuICAgIF8uZWFjaCA9IGZ1bmN0aW9uIChvYmosIGl0ZXJhdG9yKSB7XG5cbiAgICAgICAgdmFyIGksIGtleTtcblxuICAgICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRvci5jYWxsKG9ialtpXSwgb2JqW2ldLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChfLmlzT2JqZWN0KG9iaikpIHtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5jYWxsKG9ialtrZXldLCBvYmpba2V5XSwga2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG5cbiAgICBfLmV4dGVuZCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcblxuICAgICAgICB2YXIgYXJyYXkgPSBbXSwgYXJncyA9IGFycmF5LnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSwgZGVlcDtcblxuICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIGRlZXAgPSB0YXJnZXQ7XG4gICAgICAgICAgICB0YXJnZXQgPSBhcmdzLnNoaWZ0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBhcmdzLmZvckVhY2goZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgZXh0ZW5kKHRhcmdldCwgYXJnLCBkZWVwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCwgc291cmNlLCBkZWVwKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChkZWVwICYmIChfLmlzUGxhaW5PYmplY3Qoc291cmNlW2tleV0pIHx8IF8uaXNBcnJheShzb3VyY2Vba2V5XSkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKF8uaXNQbGFpbk9iamVjdChzb3VyY2Vba2V5XSkgJiYgIV8uaXNQbGFpbk9iamVjdCh0YXJnZXRba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF8uaXNBcnJheShzb3VyY2Vba2V5XSkgJiYgIV8uaXNBcnJheSh0YXJnZXRba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXh0ZW5kKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSwgZGVlcCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZVtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIF87XG59O1xuXG59LHt9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qKlxuICogWE1MSHR0cCByZXF1ZXN0LlxuICovXG5cbnZhciBQcm9taXNlID0gcmVxdWlyZSgnLi9wcm9taXNlJyk7XG52YXIgWERvbWFpbiA9IHdpbmRvdy5YRG9tYWluUmVxdWVzdDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoXywgb3B0aW9ucykge1xuXG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSwgcHJvbWlzZTtcblxuICAgIGlmIChYRG9tYWluICYmIG9wdGlvbnMuY3Jvc3NPcmlnaW4pIHtcbiAgICAgICAgcmVxdWVzdCA9IG5ldyBYRG9tYWluUmVxdWVzdCgpOyBvcHRpb25zLmhlYWRlcnMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoXy5pc1BsYWluT2JqZWN0KG9wdGlvbnMueGhyKSkge1xuICAgICAgICBfLmV4dGVuZChyZXF1ZXN0LCBvcHRpb25zLnhocik7XG4gICAgfVxuXG4gICAgaWYgKF8uaXNGdW5jdGlvbihvcHRpb25zLmJlZm9yZVNlbmQpKSB7XG4gICAgICAgIG9wdGlvbnMuYmVmb3JlU2VuZC5jYWxsKHRoaXMsIHJlcXVlc3QsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cbiAgICAgICAgcmVxdWVzdC5vcGVuKG9wdGlvbnMubWV0aG9kLCBfLnVybChvcHRpb25zKSwgdHJ1ZSk7XG5cbiAgICAgICAgXy5lYWNoKG9wdGlvbnMuaGVhZGVycywgZnVuY3Rpb24gKHZhbHVlLCBoZWFkZXIpIHtcbiAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihoZWFkZXIsIHZhbHVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblxuICAgICAgICAgICAgcmVxdWVzdC5vayA9IGV2ZW50LnR5cGUgPT09ICdsb2FkJztcblxuICAgICAgICAgICAgaWYgKHJlcXVlc3Qub2sgJiYgcmVxdWVzdC5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9rID0gcmVxdWVzdC5zdGF0dXMgPj0gMjAwICYmIHJlcXVlc3Quc3RhdHVzIDwgMzAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAocmVxdWVzdC5vayA/IHJlc29sdmUgOiByZWplY3QpKHJlcXVlc3QpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlcXVlc3Qub25sb2FkID0gaGFuZGxlcjtcbiAgICAgICAgcmVxdWVzdC5vbmFib3J0ID0gaGFuZGxlcjtcbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gaGFuZGxlcjtcblxuICAgICAgICByZXF1ZXN0LnNlbmQob3B0aW9ucy5kYXRhKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBwcm9taXNlO1xufTtcblxufSx7XCIuL3Byb21pc2VcIjo1fV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vKipcbiAqIFNlcnZpY2UgZm9yIGludGVyYWN0aW5nIHdpdGggUkVTVGZ1bCBzZXJ2aWNlcy5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChfKSB7XG5cbiAgICBmdW5jdGlvbiBSZXNvdXJjZSh1cmwsIHBhcmFtcywgYWN0aW9ucywgb3B0aW9ucykge1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcywgcmVzb3VyY2UgPSB7fTtcblxuICAgICAgICBhY3Rpb25zID0gXy5leHRlbmQoe30sXG4gICAgICAgICAgICBSZXNvdXJjZS5hY3Rpb25zLFxuICAgICAgICAgICAgYWN0aW9uc1xuICAgICAgICApO1xuXG4gICAgICAgIF8uZWFjaChhY3Rpb25zLCBmdW5jdGlvbiAoYWN0aW9uLCBuYW1lKSB7XG5cbiAgICAgICAgICAgIGFjdGlvbiA9IF8uZXh0ZW5kKHRydWUsIHt1cmw6IHVybCwgcGFyYW1zOiBwYXJhbXMgfHwge319LCBvcHRpb25zLCBhY3Rpb24pO1xuXG4gICAgICAgICAgICByZXNvdXJjZVtuYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNlbGYuJGh0dHAgfHwgXy5odHRwKShvcHRzKGFjdGlvbiwgYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzb3VyY2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb3B0cyhhY3Rpb24sIGFyZ3MpIHtcblxuICAgICAgICB2YXIgb3B0aW9ucyA9IF8uZXh0ZW5kKHt9LCBhY3Rpb24pLCBwYXJhbXMgPSB7fSwgZGF0YSwgc3VjY2VzcywgZXJyb3I7XG5cbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuXG4gICAgICAgICAgICBjYXNlIDQ6XG5cbiAgICAgICAgICAgICAgICBlcnJvciA9IGFyZ3NbM107XG4gICAgICAgICAgICAgICAgc3VjY2VzcyA9IGFyZ3NbMl07XG5cbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhc2UgMjpcblxuICAgICAgICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24oYXJnc1sxXSkpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKGFyZ3NbMF0pKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBhcmdzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBhcmdzWzFdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBhcmdzWzFdO1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGFyZ3NbMl07XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IGFyZ3NbMF07XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBhcmdzWzFdO1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gYXJnc1syXTtcblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgMTpcblxuICAgICAgICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24oYXJnc1swXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IGFyZ3NbMF07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXihQT1NUfFBVVHxQQVRDSCkkL2kudGVzdChvcHRpb25zLm1ldGhvZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGFyZ3NbMF07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zID0gYXJnc1swXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAwOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG5cbiAgICAgICAgICAgICAgICB0aHJvdyAnRXhwZWN0ZWQgdXAgdG8gNCBhcmd1bWVudHMgW3BhcmFtcywgZGF0YSwgc3VjY2VzcywgZXJyb3JdLCBnb3QgJyArIGFyZ3MubGVuZ3RoICsgJyBhcmd1bWVudHMnO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucy5kYXRhID0gZGF0YTtcbiAgICAgICAgb3B0aW9ucy5wYXJhbXMgPSBfLmV4dGVuZCh7fSwgb3B0aW9ucy5wYXJhbXMsIHBhcmFtcyk7XG5cbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IHN1Y2Nlc3M7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cblxuICAgIFJlc291cmNlLmFjdGlvbnMgPSB7XG5cbiAgICAgICAgZ2V0OiB7bWV0aG9kOiAnR0VUJ30sXG4gICAgICAgIHNhdmU6IHttZXRob2Q6ICdQT1NUJ30sXG4gICAgICAgIHF1ZXJ5OiB7bWV0aG9kOiAnR0VUJ30sXG4gICAgICAgIHVwZGF0ZToge21ldGhvZDogJ1BVVCd9LFxuICAgICAgICByZW1vdmU6IHttZXRob2Q6ICdERUxFVEUnfSxcbiAgICAgICAgZGVsZXRlOiB7bWV0aG9kOiAnREVMRVRFJ31cblxuICAgIH07XG5cbiAgICByZXR1cm4gXy5yZXNvdXJjZSA9IFJlc291cmNlO1xufTtcblxufSx7fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vKipcbiAqIFNlcnZpY2UgZm9yIFVSTCB0ZW1wbGF0aW5nLlxuICovXG5cbnZhciBpZSA9IGRvY3VtZW50LmRvY3VtZW50TW9kZTtcbnZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoXykge1xuXG4gICAgZnVuY3Rpb24gVXJsKHVybCwgcGFyYW1zKSB7XG5cbiAgICAgICAgdmFyIHVybFBhcmFtcyA9IHt9LCBxdWVyeVBhcmFtcyA9IHt9LCBvcHRpb25zID0gdXJsLCBxdWVyeTtcblxuICAgICAgICBpZiAoIV8uaXNQbGFpbk9iamVjdChvcHRpb25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt1cmw6IHVybCwgcGFyYW1zOiBwYXJhbXN9O1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHRydWUsIHt9LFxuICAgICAgICAgICAgVXJsLm9wdGlvbnMsIHRoaXMub3B0aW9ucywgb3B0aW9uc1xuICAgICAgICApO1xuXG4gICAgICAgIHVybCA9IG9wdGlvbnMudXJsLnJlcGxhY2UoLyhcXC8/KTooW2Etel1cXHcqKS9naSwgZnVuY3Rpb24gKG1hdGNoLCBzbGFzaCwgbmFtZSkge1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wYXJhbXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbXNbbmFtZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBzbGFzaCArIGVuY29kZVVyaVNlZ21lbnQob3B0aW9ucy5wYXJhbXNbbmFtZV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChfLmlzU3RyaW5nKG9wdGlvbnMucm9vdCkgJiYgIXVybC5tYXRjaCgvXihodHRwcz86KT9cXC8vKSkge1xuICAgICAgICAgICAgdXJsID0gb3B0aW9ucy5yb290ICsgJy8nICsgdXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgXy5lYWNoKG9wdGlvbnMucGFyYW1zLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICAgICAgaWYgKCF1cmxQYXJhbXNba2V5XSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcXVlcnkgPSBVcmwucGFyYW1zKHF1ZXJ5UGFyYW1zKTtcblxuICAgICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PSAtMSA/ICc/JyA6ICcmJykgKyBxdWVyeTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXJsIG9wdGlvbnMuXG4gICAgICovXG5cbiAgICBVcmwub3B0aW9ucyA9IHtcbiAgICAgICAgdXJsOiAnJyxcbiAgICAgICAgcm9vdDogbnVsbCxcbiAgICAgICAgcGFyYW1zOiB7fVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIGEgVXJsIHBhcmFtZXRlciBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAgICovXG5cbiAgICBVcmwucGFyYW1zID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIHZhciBwYXJhbXMgPSBbXTtcblxuICAgICAgICBwYXJhbXMuYWRkID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblxuICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbiAodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnB1c2goZW5jb2RlVXJpU2VnbWVudChrZXkpICsgJz0nICsgZW5jb2RlVXJpU2VnbWVudCh2YWx1ZSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlcmlhbGl6ZShwYXJhbXMsIG9iaik7XG5cbiAgICAgICAgcmV0dXJuIHBhcmFtcy5qb2luKCcmJyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBhcnNlIGEgVVJMIGFuZCByZXR1cm4gaXRzIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gICAgICovXG5cbiAgICBVcmwucGFyc2UgPSBmdW5jdGlvbiAodXJsKSB7XG5cbiAgICAgICAgaWYgKGllKSB7XG4gICAgICAgICAgICBlbC5ocmVmID0gdXJsO1xuICAgICAgICAgICAgdXJsID0gZWwuaHJlZjtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsLmhyZWYgPSB1cmw7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhyZWY6IGVsLmhyZWYsXG4gICAgICAgICAgICBwcm90b2NvbDogZWwucHJvdG9jb2wgPyBlbC5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLFxuICAgICAgICAgICAgcG9ydDogZWwucG9ydCxcbiAgICAgICAgICAgIGhvc3Q6IGVsLmhvc3QsXG4gICAgICAgICAgICBob3N0bmFtZTogZWwuaG9zdG5hbWUsXG4gICAgICAgICAgICBwYXRobmFtZTogZWwucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycgPyBlbC5wYXRobmFtZSA6ICcvJyArIGVsLnBhdGhuYW1lLFxuICAgICAgICAgICAgc2VhcmNoOiBlbC5zZWFyY2ggPyBlbC5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgICAgICAgICAgaGFzaDogZWwuaGFzaCA/IGVsLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJ1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzZXJpYWxpemUocGFyYW1zLCBvYmosIHNjb3BlKSB7XG5cbiAgICAgICAgdmFyIGFycmF5ID0gXy5pc0FycmF5KG9iaiksIHBsYWluID0gXy5pc1BsYWluT2JqZWN0KG9iaiksIGhhc2g7XG5cbiAgICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcblxuICAgICAgICAgICAgaGFzaCA9IF8uaXNPYmplY3QodmFsdWUpIHx8IF8uaXNBcnJheSh2YWx1ZSk7XG5cbiAgICAgICAgICAgIGlmIChzY29wZSkge1xuICAgICAgICAgICAgICAgIGtleSA9IHNjb3BlICsgJ1snICsgKHBsYWluIHx8IGhhc2ggPyBrZXkgOiAnJykgKyAnXSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghc2NvcGUgJiYgYXJyYXkpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuYWRkKHZhbHVlLm5hbWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFzaCkge1xuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZShwYXJhbXMsIHZhbHVlLCBrZXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuYWRkKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmNvZGVVcmlTZWdtZW50KHZhbHVlKSB7XG5cbiAgICAgICAgcmV0dXJuIGVuY29kZVVyaVF1ZXJ5KHZhbHVlLCB0cnVlKS5cbiAgICAgICAgICAgIHJlcGxhY2UoLyUyNi9naSwgJyYnKS5cbiAgICAgICAgICAgIHJlcGxhY2UoLyUzRC9naSwgJz0nKS5cbiAgICAgICAgICAgIHJlcGxhY2UoLyUyQi9naSwgJysnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmNvZGVVcmlRdWVyeSh2YWx1ZSwgc3BhY2VzKSB7XG5cbiAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkuXG4gICAgICAgICAgICByZXBsYWNlKC8lNDAvZ2ksICdAJykuXG4gICAgICAgICAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgICAgICAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICAgICAgICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cbiAgICAgICAgICAgIHJlcGxhY2UoLyUyMC9nLCAoc3BhY2VzID8gJyUyMCcgOiAnKycpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gXy51cmwgPSBVcmw7XG59O1xuXG59LHt9XSwxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIFdhdGNoZXIgPSByZXF1aXJlKCcuLi93YXRjaGVyJylcbnZhciBQYXRoID0gcmVxdWlyZSgnLi4vcGFyc2Vycy9wYXRoJylcbnZhciB0ZXh0UGFyc2VyID0gcmVxdWlyZSgnLi4vcGFyc2Vycy90ZXh0JylcbnZhciBkaXJQYXJzZXIgPSByZXF1aXJlKCcuLi9wYXJzZXJzL2RpcmVjdGl2ZScpXG52YXIgZXhwUGFyc2VyID0gcmVxdWlyZSgnLi4vcGFyc2Vycy9leHByZXNzaW9uJylcbnZhciBmaWx0ZXJSRSA9IC9bXnxdXFx8W158XS9cblxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuICogQHJldHVybiB7Kn1cbiAqL1xuXG5leHBvcnRzLiRnZXQgPSBmdW5jdGlvbiAoZXhwLCBhc1N0YXRlbWVudCkge1xuICB2YXIgcmVzID0gZXhwUGFyc2VyLnBhcnNlKGV4cClcbiAgaWYgKHJlcykge1xuICAgIGlmIChhc1N0YXRlbWVudCAmJiAhZXhwUGFyc2VyLmlzU2ltcGxlUGF0aChleHApKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXNcbiAgICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZW1lbnRIYW5kbGVyICgpIHtcbiAgICAgICAgcmVzLmdldC5jYWxsKHNlbGYsIHNlbGYpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiByZXMuZ2V0LmNhbGwodGhpcywgdGhpcylcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cbiAqIFRoZSBleHByZXNzaW9uIG11c3QgYmUgYSB2YWxpZCBsZWZ0LWhhbmRcbiAqIGV4cHJlc3Npb24gaW4gYW4gYXNzaWdubWVudC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbmV4cG9ydHMuJHNldCA9IGZ1bmN0aW9uIChleHAsIHZhbCkge1xuICB2YXIgcmVzID0gZXhwUGFyc2VyLnBhcnNlKGV4cCwgdHJ1ZSlcbiAgaWYgKHJlcyAmJiByZXMuc2V0KSB7XG4gICAgcmVzLnNldC5jYWxsKHRoaXMsIHRoaXMsIHZhbClcbiAgfVxufVxuXG4vKipcbiAqIERlbGV0ZSBhIHByb3BlcnR5IG9uIHRoZSBWTVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqL1xuXG5leHBvcnRzLiRkZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIF8uZGVsZXRlKHRoaXMuX2RhdGEsIGtleSlcbn1cblxuLyoqXG4gKiBXYXRjaCBhbiBleHByZXNzaW9uLCB0cmlnZ2VyIGNhbGxiYWNrIHdoZW4gaXRzXG4gKiB2YWx1ZSBjaGFuZ2VzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBpbW1lZGlhdGVcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHVud2F0Y2hGblxuICovXG5cbmV4cG9ydHMuJHdhdGNoID0gZnVuY3Rpb24gKGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG4gIHZhciB2bSA9IHRoaXNcbiAgdmFyIHBhcnNlZFxuICBpZiAodHlwZW9mIGV4cE9yRm4gPT09ICdzdHJpbmcnKSB7XG4gICAgcGFyc2VkID0gZGlyUGFyc2VyLnBhcnNlKGV4cE9yRm4pXG4gICAgZXhwT3JGbiA9IHBhcnNlZC5leHByZXNzaW9uXG4gIH1cbiAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIHtcbiAgICBkZWVwOiBvcHRpb25zICYmIG9wdGlvbnMuZGVlcCxcbiAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnNcbiAgfSlcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbW1lZGlhdGUpIHtcbiAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKVxuICB9XG4gIHJldHVybiBmdW5jdGlvbiB1bndhdGNoRm4gKCkge1xuICAgIHdhdGNoZXIudGVhcmRvd24oKVxuICB9XG59XG5cbi8qKlxuICogRXZhbHVhdGUgYSB0ZXh0IGRpcmVjdGl2ZSwgaW5jbHVkaW5nIGZpbHRlcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmV4cG9ydHMuJGV2YWwgPSBmdW5jdGlvbiAodGV4dCwgYXNTdGF0ZW1lbnQpIHtcbiAgLy8gY2hlY2sgZm9yIGZpbHRlcnMuXG4gIGlmIChmaWx0ZXJSRS50ZXN0KHRleHQpKSB7XG4gICAgdmFyIGRpciA9IGRpclBhcnNlci5wYXJzZSh0ZXh0KVxuICAgIC8vIHRoZSBmaWx0ZXIgcmVnZXggY2hlY2sgbWlnaHQgZ2l2ZSBmYWxzZSBwb3NpdGl2ZVxuICAgIC8vIGZvciBwaXBlcyBpbnNpZGUgc3RyaW5ncywgc28gaXQncyBwb3NzaWJsZSB0aGF0XG4gICAgLy8gd2UgZG9uJ3QgZ2V0IGFueSBmaWx0ZXJzIGhlcmVcbiAgICB2YXIgdmFsID0gdGhpcy4kZ2V0KGRpci5leHByZXNzaW9uLCBhc1N0YXRlbWVudClcbiAgICByZXR1cm4gZGlyLmZpbHRlcnNcbiAgICAgID8gdGhpcy5fYXBwbHlGaWx0ZXJzKHZhbCwgbnVsbCwgZGlyLmZpbHRlcnMpXG4gICAgICA6IHZhbFxuICB9IGVsc2Uge1xuICAgIC8vIG5vIGZpbHRlclxuICAgIHJldHVybiB0aGlzLiRnZXQodGV4dCwgYXNTdGF0ZW1lbnQpXG4gIH1cbn1cblxuLyoqXG4gKiBJbnRlcnBvbGF0ZSBhIHBpZWNlIG9mIHRlbXBsYXRlIHRleHQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5leHBvcnRzLiRpbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gIHZhciB0b2tlbnMgPSB0ZXh0UGFyc2VyLnBhcnNlKHRleHQpXG4gIHZhciB2bSA9IHRoaXNcbiAgaWYgKHRva2Vucykge1xuICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gdm0uJGV2YWwodG9rZW5zWzBdLnZhbHVlKSArICcnXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICByZXR1cm4gdG9rZW4udGFnXG4gICAgICAgICAgPyB2bS4kZXZhbCh0b2tlbi52YWx1ZSlcbiAgICAgICAgICA6IHRva2VuLnZhbHVlXG4gICAgICB9KS5qb2luKCcnKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGV4dFxuICB9XG59XG5cbi8qKlxuICogTG9nIGluc3RhbmNlIGRhdGEgYXMgYSBwbGFpbiBKUyBvYmplY3RcbiAqIHNvIHRoYXQgaXQgaXMgZWFzaWVyIHRvIGluc3BlY3QgaW4gY29uc29sZS5cbiAqIFRoaXMgbWV0aG9kIGFzc3VtZXMgY29uc29sZSBpcyBhdmFpbGFibGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IFtwYXRoXVxuICovXG5cbmV4cG9ydHMuJGxvZyA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gIHZhciBkYXRhID0gcGF0aFxuICAgID8gUGF0aC5nZXQodGhpcy5fZGF0YSwgcGF0aClcbiAgICA6IHRoaXMuX2RhdGFcbiAgaWYgKGRhdGEpIHtcbiAgICBkYXRhID0gY2xlYW4oZGF0YSlcbiAgfVxuICAvLyBpbmNsdWRlIGNvbXB1dGVkIGZpZWxkc1xuICBpZiAoIXBhdGgpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy4kb3B0aW9ucy5jb21wdXRlZCkge1xuICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKVxuICAgIH1cbiAgfVxuICBjb25zb2xlLmxvZyhkYXRhKVxufVxuXG4vKipcbiAqIFwiY2xlYW5cIiBhIGdldHRlci9zZXR0ZXIgY29udmVydGVkIG9iamVjdCBpbnRvIGEgcGxhaW5cbiAqIG9iamVjdCBjb3B5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSAtIG9ialxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGNsZWFuIChvYmopIHtcbiAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSlcbn1cblxufSx7XCIuLi9wYXJzZXJzL2RpcmVjdGl2ZVwiOjYwLFwiLi4vcGFyc2Vycy9leHByZXNzaW9uXCI6NjEsXCIuLi9wYXJzZXJzL3BhdGhcIjo2MixcIi4uL3BhcnNlcnMvdGV4dFwiOjY0LFwiLi4vdXRpbFwiOjcyLFwiLi4vd2F0Y2hlclwiOjc2fV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciB0cmFuc2l0aW9uID0gcmVxdWlyZSgnLi4vdHJhbnNpdGlvbicpXG5cbi8qKlxuICogQ29udmVuaWVuY2Ugb24taW5zdGFuY2UgbmV4dFRpY2suIFRoZSBjYWxsYmFjayBpc1xuICogYXV0by1ib3VuZCB0byB0aGUgaW5zdGFuY2UsIGFuZCB0aGlzIGF2b2lkcyBjb21wb25lbnRcbiAqIG1vZHVsZXMgaGF2aW5nIHRvIHJlbHkgb24gdGhlIGdsb2JhbCBWdWUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5leHBvcnRzLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikge1xuICBfLm5leHRUaWNrKGZuLCB0aGlzKVxufVxuXG4vKipcbiAqIEFwcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICovXG5cbmV4cG9ydHMuJGFwcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIHJldHVybiBpbnNlcnQoXG4gICAgdGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sXG4gICAgYXBwZW5kLCB0cmFuc2l0aW9uLmFwcGVuZFxuICApXG59XG5cbi8qKlxuICogUHJlcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICovXG5cbmV4cG9ydHMuJHByZXBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpXG4gIGlmICh0YXJnZXQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgdGhpcy4kYmVmb3JlKHRhcmdldC5maXJzdENoaWxkLCBjYiwgd2l0aFRyYW5zaXRpb24pXG4gIH0gZWxzZSB7XG4gICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBJbnNlcnQgaW5zdGFuY2UgYmVmb3JlIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gKi9cblxuZXhwb3J0cy4kYmVmb3JlID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIHJldHVybiBpbnNlcnQoXG4gICAgdGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sXG4gICAgYmVmb3JlLCB0cmFuc2l0aW9uLmJlZm9yZVxuICApXG59XG5cbi8qKlxuICogSW5zZXJ0IGluc3RhbmNlIGFmdGVyIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gKi9cblxuZXhwb3J0cy4kYWZ0ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KVxuICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG4gICAgdGhpcy4kYmVmb3JlKHRhcmdldC5uZXh0U2libGluZywgY2IsIHdpdGhUcmFuc2l0aW9uKVxuICB9IGVsc2Uge1xuICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldC5wYXJlbnROb2RlLCBjYiwgd2l0aFRyYW5zaXRpb24pXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBSZW1vdmUgaW5zdGFuY2UgZnJvbSBET01cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gKi9cblxuZXhwb3J0cy4kcmVtb3ZlID0gZnVuY3Rpb24gKGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICBpZiAoIXRoaXMuJGVsLnBhcmVudE5vZGUpIHtcbiAgICByZXR1cm4gY2IgJiYgY2IoKVxuICB9XG4gIHZhciBpbkRvYyA9IHRoaXMuX2lzQXR0YWNoZWQgJiYgXy5pbkRvYyh0aGlzLiRlbClcbiAgLy8gaWYgd2UgYXJlIG5vdCBpbiBkb2N1bWVudCwgbm8gbmVlZCB0byBjaGVja1xuICAvLyBmb3IgdHJhbnNpdGlvbnNcbiAgaWYgKCFpbkRvYykgd2l0aFRyYW5zaXRpb24gPSBmYWxzZVxuICB2YXIgc2VsZiA9IHRoaXNcbiAgdmFyIHJlYWxDYiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaW5Eb2MpIHNlbGYuX2NhbGxIb29rKCdkZXRhY2hlZCcpXG4gICAgaWYgKGNiKSBjYigpXG4gIH1cbiAgaWYgKHRoaXMuX2lzRnJhZ21lbnQpIHtcbiAgICBfLnJlbW92ZU5vZGVSYW5nZShcbiAgICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQsXG4gICAgICB0aGlzLl9mcmFnbWVudEVuZCxcbiAgICAgIHRoaXMsIHRoaXMuX2ZyYWdtZW50LCByZWFsQ2JcbiAgICApXG4gIH0gZWxzZSB7XG4gICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlXG4gICAgICA/IHJlbW92ZVxuICAgICAgOiB0cmFuc2l0aW9uLnJlbW92ZVxuICAgIG9wKHRoaXMuJGVsLCB0aGlzLCByZWFsQ2IpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBTaGFyZWQgRE9NIGluc2VydGlvbiBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMSAtIG9wIGZvciBub24tdHJhbnNpdGlvbiBpbnNlcnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMiAtIG9wIGZvciB0cmFuc2l0aW9uIGluc2VydFxuICogQHJldHVybiB2bVxuICovXG5cbmZ1bmN0aW9uIGluc2VydCAodm0sIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBvcDEsIG9wMikge1xuICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpXG4gIHZhciB0YXJnZXRJc0RldGFjaGVkID0gIV8uaW5Eb2ModGFyZ2V0KVxuICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgfHwgdGFyZ2V0SXNEZXRhY2hlZFxuICAgICAgPyBvcDFcbiAgICAgIDogb3AyXG4gIHZhciBzaG91bGRDYWxsSG9vayA9XG4gICAgIXRhcmdldElzRGV0YWNoZWQgJiZcbiAgICAhdm0uX2lzQXR0YWNoZWQgJiZcbiAgICAhXy5pbkRvYyh2bS4kZWwpXG4gIGlmICh2bS5faXNGcmFnbWVudCkge1xuICAgIF8ubWFwTm9kZVJhbmdlKHZtLl9mcmFnbWVudFN0YXJ0LCB2bS5fZnJhZ21lbnRFbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBvcChub2RlLCB0YXJnZXQsIHZtKVxuICAgIH0pXG4gICAgY2IgJiYgY2IoKVxuICB9IGVsc2Uge1xuICAgIG9wKHZtLiRlbCwgdGFyZ2V0LCB2bSwgY2IpXG4gIH1cbiAgaWYgKHNob3VsZENhbGxIb29rKSB7XG4gICAgdm0uX2NhbGxIb29rKCdhdHRhY2hlZCcpXG4gIH1cbiAgcmV0dXJuIHZtXG59XG5cbi8qKlxuICogQ2hlY2sgZm9yIHNlbGVjdG9yc1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gcXVlcnkgKGVsKSB7XG4gIHJldHVybiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnXG4gICAgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKVxuICAgIDogZWxcbn1cblxuLyoqXG4gKiBBcHBlbmQgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IGVsXG4gKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYXBwZW5kIChlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKVxuICBpZiAoY2IpIGNiKClcbn1cblxuLyoqXG4gKiBJbnNlcnRCZWZvcmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IGVsXG4gKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYmVmb3JlIChlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgXy5iZWZvcmUoZWwsIHRhcmdldClcbiAgaWYgKGNiKSBjYigpXG59XG5cbi8qKlxuICogUmVtb3ZlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtOb2RlfSBlbFxuICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlIChlbCwgdm0sIGNiKSB7XG4gIF8ucmVtb3ZlKGVsKVxuICBpZiAoY2IpIGNiKClcbn1cblxufSx7XCIuLi90cmFuc2l0aW9uXCI6NjUsXCIuLi91dGlsXCI6NzJ9XSwxMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxuXG4vKipcbiAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbmV4cG9ydHMuJG9uID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAodGhpcy5fZXZlbnRzW2V2ZW50XSB8fCAodGhpcy5fZXZlbnRzW2V2ZW50XSA9IFtdKSlcbiAgICAucHVzaChmbilcbiAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgMSlcbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcbiAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbmV4cG9ydHMuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBmdW5jdGlvbiBvbiAoKSB7XG4gICAgc2VsZi4kb2ZmKGV2ZW50LCBvbilcbiAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gIH1cbiAgb24uZm4gPSBmblxuICB0aGlzLiRvbihldmVudCwgb24pXG4gIHJldHVybiB0aGlzXG59XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5leHBvcnRzLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gIHZhciBjYnNcbiAgLy8gYWxsXG4gIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcbiAgICAgIGZvciAoZXZlbnQgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF1cbiAgICAgICAgaWYgKGNicykge1xuICAgICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuICAvLyBzcGVjaWZpYyBldmVudFxuICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdXG4gIGlmICghY2JzKSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKVxuICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuICAvLyBzcGVjaWZpYyBoYW5kbGVyXG4gIHZhciBjYlxuICB2YXIgaSA9IGNicy5sZW5ndGhcbiAgd2hpbGUgKGktLSkge1xuICAgIGNiID0gY2JzW2ldXG4gICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcbiAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC0xKVxuICAgICAgY2JzLnNwbGljZShpLCAxKVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBUcmlnZ2VyIGFuIGV2ZW50IG9uIHNlbGYuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKi9cblxuZXhwb3J0cy4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICB2YXIgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XVxuICB0aGlzLl9zaG91bGRQcm9wYWdhdGUgPSAhY2JzXG4gIGlmIChjYnMpIHtcbiAgICBjYnMgPSBjYnMubGVuZ3RoID4gMVxuICAgICAgPyBfLnRvQXJyYXkoY2JzKVxuICAgICAgOiBjYnNcbiAgICB2YXIgYXJncyA9IF8udG9BcnJheShhcmd1bWVudHMsIDEpXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgcmVzID0gY2JzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpXG4gICAgICBpZiAocmVzID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuX3Nob3VsZFByb3BhZ2F0ZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBSZWN1cnNpdmVseSBicm9hZGNhc3QgYW4gZXZlbnQgdG8gYWxsIGNoaWxkcmVuIGluc3RhbmNlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAqL1xuXG5leHBvcnRzLiRicm9hZGNhc3QgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgLy8gaWYgbm8gY2hpbGQgaGFzIHJlZ2lzdGVyZWQgZm9yIHRoaXMgZXZlbnQsXG4gIC8vIHRoZW4gdGhlcmUncyBubyBuZWVkIHRvIGJyb2FkY2FzdC5cbiAgaWYgKCF0aGlzLl9ldmVudHNDb3VudFtldmVudF0pIHJldHVyblxuICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRjaGlsZHJlblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldXG4gICAgY2hpbGQuJGVtaXQuYXBwbHkoY2hpbGQsIGFyZ3VtZW50cylcbiAgICBpZiAoY2hpbGQuX3Nob3VsZFByb3BhZ2F0ZSkge1xuICAgICAgY2hpbGQuJGJyb2FkY2FzdC5hcHBseShjaGlsZCwgYXJndW1lbnRzKVxuICAgIH1cbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IHByb3BhZ2F0ZSBhbiBldmVudCB1cCB0aGUgcGFyZW50IGNoYWluLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuICovXG5cbmV4cG9ydHMuJGRpc3BhdGNoID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLiRlbWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudFxuICB3aGlsZSAocGFyZW50KSB7XG4gICAgcGFyZW50LiRlbWl0LmFwcGx5KHBhcmVudCwgYXJndW1lbnRzKVxuICAgIHBhcmVudCA9IHBhcmVudC5fc2hvdWxkUHJvcGFnYXRlXG4gICAgICA/IHBhcmVudC4kcGFyZW50XG4gICAgICA6IG51bGxcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIE1vZGlmeSB0aGUgbGlzdGVuZXIgY291bnRzIG9uIGFsbCBwYXJlbnRzLlxuICogVGhpcyBib29ra2VlcGluZyBhbGxvd3MgJGJyb2FkY2FzdCB0byByZXR1cm4gZWFybHkgd2hlblxuICogbm8gY2hpbGQgaGFzIGxpc3RlbmVkIHRvIGEgY2VydGFpbiBldmVudC5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50XG4gKi9cblxudmFyIGhvb2tSRSA9IC9eaG9vazovXG5mdW5jdGlvbiBtb2RpZnlMaXN0ZW5lckNvdW50ICh2bSwgZXZlbnQsIGNvdW50KSB7XG4gIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50XG4gIC8vIGhvb2tzIGRvIG5vdCBnZXQgYnJvYWRjYXN0ZWQgc28gbm8gbmVlZFxuICAvLyB0byBkbyBib29ra2VlcGluZyBmb3IgdGhlbVxuICBpZiAoIXBhcmVudCB8fCAhY291bnQgfHwgaG9va1JFLnRlc3QoZXZlbnQpKSByZXR1cm5cbiAgd2hpbGUgKHBhcmVudCkge1xuICAgIHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdID1cbiAgICAgIChwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSB8fCAwKSArIGNvdW50XG4gICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnRcbiAgfVxufVxuXG59LHtcIi4uL3V0aWxcIjo3Mn1dLDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4uL2NvbmZpZycpXG5cbi8qKlxuICogRXhwb3NlIHVzZWZ1bCBpbnRlcm5hbHNcbiAqL1xuXG5leHBvcnRzLnV0aWwgPSBfXG5leHBvcnRzLmNvbmZpZyA9IGNvbmZpZ1xuZXhwb3J0cy5zZXQgPSBfLnNldFxuZXhwb3J0cy5kZWxldGUgPSBfLmRlbGV0ZVxuZXhwb3J0cy5uZXh0VGljayA9IF8ubmV4dFRpY2tcblxuLyoqXG4gKiBUaGUgZm9sbG93aW5nIGFyZSBleHBvc2VkIGZvciBhZHZhbmNlZCB1c2FnZSAvIHBsdWdpbnNcbiAqL1xuXG5leHBvcnRzLmNvbXBpbGVyID0gcmVxdWlyZSgnLi4vY29tcGlsZXInKVxuZXhwb3J0cy5GcmFnbWVudEZhY3RvcnkgPSByZXF1aXJlKCcuLi9mcmFnbWVudC9mYWN0b3J5JylcbmV4cG9ydHMuaW50ZXJuYWxEaXJlY3RpdmVzID0gcmVxdWlyZSgnLi4vZGlyZWN0aXZlcy9pbnRlcm5hbCcpXG5leHBvcnRzLnBhcnNlcnMgPSB7XG4gIHBhdGg6IHJlcXVpcmUoJy4uL3BhcnNlcnMvcGF0aCcpLFxuICB0ZXh0OiByZXF1aXJlKCcuLi9wYXJzZXJzL3RleHQnKSxcbiAgdGVtcGxhdGU6IHJlcXVpcmUoJy4uL3BhcnNlcnMvdGVtcGxhdGUnKSxcbiAgZGlyZWN0aXZlOiByZXF1aXJlKCcuLi9wYXJzZXJzL2RpcmVjdGl2ZScpLFxuICBleHByZXNzaW9uOiByZXF1aXJlKCcuLi9wYXJzZXJzL2V4cHJlc3Npb24nKVxufVxuXG4vKipcbiAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuICogY2lkLiBUaGlzIGVuYWJsZXMgdXMgdG8gY3JlYXRlIHdyYXBwZWQgXCJjaGlsZFxuICogY29uc3RydWN0b3JzXCIgZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgYW5kIGNhY2hlIHRoZW0uXG4gKi9cblxuZXhwb3J0cy5jaWQgPSAwXG52YXIgY2lkID0gMVxuXG4vKipcbiAqIENsYXNzIGluaGVyaXRhbmNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGV4dGVuZE9wdGlvbnNcbiAqL1xuXG5leHBvcnRzLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7XG4gIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9XG4gIHZhciBTdXBlciA9IHRoaXNcbiAgdmFyIGlzRmlyc3RFeHRlbmQgPSBTdXBlci5jaWQgPT09IDBcbiAgaWYgKGlzRmlyc3RFeHRlbmQgJiYgZXh0ZW5kT3B0aW9ucy5fQ3Rvcikge1xuICAgIHJldHVybiBleHRlbmRPcHRpb25zLl9DdG9yXG4gIH1cbiAgdmFyIG5hbWUgPSBleHRlbmRPcHRpb25zLm5hbWUgfHwgU3VwZXIub3B0aW9ucy5uYW1lXG4gIHZhciBTdWIgPSBjcmVhdGVDbGFzcyhuYW1lIHx8ICdWdWVDb21wb25lbnQnKVxuICBTdWIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXBlci5wcm90b3R5cGUpXG4gIFN1Yi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWJcbiAgU3ViLmNpZCA9IGNpZCsrXG4gIFN1Yi5vcHRpb25zID0gXy5tZXJnZU9wdGlvbnMoXG4gICAgU3VwZXIub3B0aW9ucyxcbiAgICBleHRlbmRPcHRpb25zXG4gIClcbiAgU3ViWydzdXBlciddID0gU3VwZXJcbiAgLy8gYWxsb3cgZnVydGhlciBleHRlbnNpb25cbiAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZFxuICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzXG4gIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cbiAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXVxuICB9KVxuICAvLyBlbmFibGUgcmVjdXJzaXZlIHNlbGYtbG9va3VwXG4gIGlmIChuYW1lKSB7XG4gICAgU3ViLm9wdGlvbnMuY29tcG9uZW50c1tuYW1lXSA9IFN1YlxuICB9XG4gIC8vIGNhY2hlIGNvbnN0cnVjdG9yXG4gIGlmIChpc0ZpcnN0RXh0ZW5kKSB7XG4gICAgZXh0ZW5kT3B0aW9ucy5fQ3RvciA9IFN1YlxuICB9XG4gIHJldHVybiBTdWJcbn1cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN1Yi1jbGFzcyBjb25zdHJ1Y3RvciB3aXRoIHRoZVxuICogZ2l2ZW4gbmFtZS4gVGhpcyBnaXZlcyB1cyBtdWNoIG5pY2VyIG91dHB1dCB3aGVuXG4gKiBsb2dnaW5nIGluc3RhbmNlcyBpbiB0aGUgY29uc29sZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlQ2xhc3MgKG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBGdW5jdGlvbihcbiAgICAncmV0dXJuIGZ1bmN0aW9uICcgKyBfLmNsYXNzaWZ5KG5hbWUpICtcbiAgICAnIChvcHRpb25zKSB7IHRoaXMuX2luaXQob3B0aW9ucykgfSdcbiAgKSgpXG59XG5cbi8qKlxuICogUGx1Z2luIHN5c3RlbVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwbHVnaW5cbiAqL1xuXG5leHBvcnRzLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChwbHVnaW4uaW5zdGFsbGVkKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgLy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzXG4gIHZhciBhcmdzID0gXy50b0FycmF5KGFyZ3VtZW50cywgMSlcbiAgYXJncy51bnNoaWZ0KHRoaXMpXG4gIGlmICh0eXBlb2YgcGx1Z2luLmluc3RhbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpXG4gIH0gZWxzZSB7XG4gICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpXG4gIH1cbiAgcGx1Z2luLmluc3RhbGxlZCA9IHRydWVcbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBBcHBseSBhIGdsb2JhbCBtaXhpbiBieSBtZXJnaW5nIGl0IGludG8gdGhlIGRlZmF1bHRcbiAqIG9wdGlvbnMuXG4gKi9cblxuZXhwb3J0cy5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuICB2YXIgVnVlID0gXy5WdWVcbiAgVnVlLm9wdGlvbnMgPSBfLm1lcmdlT3B0aW9ucyhWdWUub3B0aW9ucywgbWl4aW4pXG59XG5cbi8qKlxuICogQ3JlYXRlIGFzc2V0IHJlZ2lzdHJhdGlvbiBtZXRob2RzIHdpdGggdGhlIGZvbGxvd2luZ1xuICogc2lnbmF0dXJlOlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHBhcmFtIHsqfSBkZWZpbml0aW9uXG4gKi9cblxuY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgZXhwb3J0c1t0eXBlXSA9IGZ1bmN0aW9uIChpZCwgZGVmaW5pdGlvbikge1xuICAgIGlmICghZGVmaW5pdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF1cbiAgICB9IGVsc2Uge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgXy5jb21tb25UYWdSRS50ZXN0KGlkKSkge1xuICAgICAgICAgIF8ud2FybihcbiAgICAgICAgICAgICdEbyBub3QgdXNlIGJ1aWx0LWluIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgK1xuICAgICAgICAgICAgJ2lkOiAnICsgaWRcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZSA9PT0gJ2NvbXBvbmVudCcgJiZcbiAgICAgICAgXy5pc1BsYWluT2JqZWN0KGRlZmluaXRpb24pXG4gICAgICApIHtcbiAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gaWRcbiAgICAgICAgZGVmaW5pdGlvbiA9IF8uVnVlLmV4dGVuZChkZWZpbml0aW9uKVxuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXSA9IGRlZmluaXRpb25cbiAgICAgIHJldHVybiBkZWZpbml0aW9uXG4gICAgfVxuICB9XG59KVxuXG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSlcblxufSx7XCIuLi9jb21waWxlclwiOjE5LFwiLi4vY29uZmlnXCI6MjEsXCIuLi9kaXJlY3RpdmVzL2ludGVybmFsXCI6MjgsXCIuLi9mcmFnbWVudC9mYWN0b3J5XCI6NTAsXCIuLi9wYXJzZXJzL2RpcmVjdGl2ZVwiOjYwLFwiLi4vcGFyc2Vycy9leHByZXNzaW9uXCI6NjEsXCIuLi9wYXJzZXJzL3BhdGhcIjo2MixcIi4uL3BhcnNlcnMvdGVtcGxhdGVcIjo2MyxcIi4uL3BhcnNlcnMvdGV4dFwiOjY0LFwiLi4vdXRpbFwiOjcyLFwiX3Byb2Nlc3NcIjoxfV0sMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgY29tcGlsZXIgPSByZXF1aXJlKCcuLi9jb21waWxlcicpXG5cbi8qKlxuICogU2V0IGluc3RhbmNlIHRhcmdldCBlbGVtZW50IGFuZCBraWNrIG9mZiB0aGUgY29tcGlsYXRpb25cbiAqIHByb2Nlc3MuIFRoZSBwYXNzZWQgaW4gYGVsYCBjYW4gYmUgYSBzZWxlY3RvciBzdHJpbmcsIGFuXG4gKiBleGlzdGluZyBFbGVtZW50LCBvciBhIERvY3VtZW50RnJhZ21lbnQgKGZvciBibG9ja1xuICogaW5zdGFuY2VzKS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudHxzdHJpbmd9IGVsXG4gKiBAcHVibGljXG4gKi9cblxuZXhwb3J0cy4kbW91bnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgaWYgKHRoaXMuX2lzQ29tcGlsZWQpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICckbW91bnQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nXG4gICAgKVxuICAgIHJldHVyblxuICB9XG4gIGVsID0gXy5xdWVyeShlbClcbiAgaWYgKCFlbCkge1xuICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgfVxuICB0aGlzLl9jb21waWxlKGVsKVxuICB0aGlzLl9pbml0RE9NSG9va3MoKVxuICBpZiAoXy5pbkRvYyh0aGlzLiRlbCkpIHtcbiAgICB0aGlzLl9jYWxsSG9vaygnYXR0YWNoZWQnKVxuICAgIHJlYWR5LmNhbGwodGhpcylcbiAgfSBlbHNlIHtcbiAgICB0aGlzLiRvbmNlKCdob29rOmF0dGFjaGVkJywgcmVhZHkpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBNYXJrIGFuIGluc3RhbmNlIGFzIHJlYWR5LlxuICovXG5cbmZ1bmN0aW9uIHJlYWR5ICgpIHtcbiAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWVcbiAgdGhpcy5faXNSZWFkeSA9IHRydWVcbiAgdGhpcy5fY2FsbEhvb2soJ3JlYWR5Jylcbn1cblxuLyoqXG4gKiBUZWFyZG93biB0aGUgaW5zdGFuY2UsIHNpbXBseSBkZWxlZ2F0ZSB0byB0aGUgaW50ZXJuYWxcbiAqIF9kZXN0cm95LlxuICovXG5cbmV4cG9ydHMuJGRlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcbiAgdGhpcy5fZGVzdHJveShyZW1vdmUsIGRlZmVyQ2xlYW51cClcbn1cblxuLyoqXG4gKiBQYXJ0aWFsbHkgY29tcGlsZSBhIHBpZWNlIG9mIERPTSBhbmQgcmV0dXJuIGFcbiAqIGRlY29tcGlsZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMuJGNvbXBpbGUgPSBmdW5jdGlvbiAoZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gIHJldHVybiBjb21waWxlci5jb21waWxlKGVsLCB0aGlzLiRvcHRpb25zLCB0cnVlKShcbiAgICB0aGlzLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWdcbiAgKVxufVxuXG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSlcblxufSx7XCIuLi9jb21waWxlclwiOjE5LFwiLi4vdXRpbFwiOjcyLFwiX3Byb2Nlc3NcIjoxfV0sMTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbnZhciBfID0gcmVxdWlyZSgnLi91dGlsJylcbnZhciBjb25maWcgPSByZXF1aXJlKCcuL2NvbmZpZycpXG5cbi8vIHdlIGhhdmUgdHdvIHNlcGFyYXRlIHF1ZXVlczogb25lIGZvciBkaXJlY3RpdmUgdXBkYXRlc1xuLy8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxuLy8gd2Ugd2FudCB0byBndWFyYW50ZWUgZGlyZWN0aXZlIHVwZGF0ZXMgdG8gYmUgY2FsbGVkXG4vLyBiZWZvcmUgdXNlciB3YXRjaGVycyBzbyB0aGF0IHdoZW4gdXNlciB3YXRjaGVycyBhcmVcbi8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXG4vLyBzdGF0ZS5cbnZhciBxdWV1ZSA9IFtdXG52YXIgdXNlclF1ZXVlID0gW11cbnZhciBoYXMgPSB7fVxudmFyIGNpcmN1bGFyID0ge31cbnZhciB3YWl0aW5nID0gZmFsc2VcbnZhciBpbnRlcm5hbFF1ZXVlRGVwbGV0ZWQgPSBmYWxzZVxuXG4vKipcbiAqIFJlc2V0IHRoZSBiYXRjaGVyJ3Mgc3RhdGUuXG4gKi9cblxuZnVuY3Rpb24gcmVzZXRCYXRjaGVyU3RhdGUgKCkge1xuICBxdWV1ZSA9IFtdXG4gIHVzZXJRdWV1ZSA9IFtdXG4gIGhhcyA9IHt9XG4gIGNpcmN1bGFyID0ge31cbiAgd2FpdGluZyA9IGludGVybmFsUXVldWVEZXBsZXRlZCA9IGZhbHNlXG59XG5cbi8qKlxuICogRmx1c2ggYm90aCBxdWV1ZXMgYW5kIHJ1biB0aGUgd2F0Y2hlcnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUgKCkge1xuICBydW5CYXRjaGVyUXVldWUocXVldWUpXG4gIGludGVybmFsUXVldWVEZXBsZXRlZCA9IHRydWVcbiAgcnVuQmF0Y2hlclF1ZXVlKHVzZXJRdWV1ZSlcbiAgLy8gZGV2IHRvb2wgaG9va1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoXy5pbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18pIHtcbiAgICAgIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fLmVtaXQoJ2ZsdXNoJylcbiAgICB9XG4gIH1cbiAgcmVzZXRCYXRjaGVyU3RhdGUoKVxufVxuXG4vKipcbiAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcXVldWVcbiAqL1xuXG5mdW5jdGlvbiBydW5CYXRjaGVyUXVldWUgKHF1ZXVlKSB7XG4gIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZFxuICAvLyBhcyB3ZSBydW4gZXhpc3Rpbmcgd2F0Y2hlcnNcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV1cbiAgICB2YXIgaWQgPSB3YXRjaGVyLmlkXG4gICAgaGFzW2lkXSA9IG51bGxcbiAgICB3YXRjaGVyLnJ1bigpXG4gICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDFcbiAgICAgIGlmIChjaXJjdWxhcltpZF0gPiBjb25maWcuX21heFVwZGF0ZUNvdW50KSB7XG4gICAgICAgIHF1ZXVlLnNwbGljZShoYXNbaWRdLCAxKVxuICAgICAgICBfLndhcm4oXG4gICAgICAgICAgJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCBmb3Igd2F0Y2hlciAnICtcbiAgICAgICAgICAnd2l0aCBleHByZXNzaW9uOiAnICsgd2F0Y2hlci5leHByZXNzaW9uXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLlxuICogSm9icyB3aXRoIGR1cGxpY2F0ZSBJRHMgd2lsbCBiZSBza2lwcGVkIHVubGVzcyBpdCdzXG4gKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC5cbiAqXG4gKiBAcGFyYW0ge1dhdGNoZXJ9IHdhdGNoZXJcbiAqICAgcHJvcGVydGllczpcbiAqICAgLSB7TnVtYmVyfSBpZFxuICogICAtIHtGdW5jdGlvbn0gcnVuXG4gKi9cblxuZXhwb3J0cy5wdXNoID0gZnVuY3Rpb24gKHdhdGNoZXIpIHtcbiAgdmFyIGlkID0gd2F0Y2hlci5pZFxuICBpZiAoaGFzW2lkXSA9PSBudWxsKSB7XG4gICAgLy8gaWYgYW4gaW50ZXJuYWwgd2F0Y2hlciBpcyBwdXNoZWQsIGJ1dCB0aGUgaW50ZXJuYWxcbiAgICAvLyBxdWV1ZSBpcyBhbHJlYWR5IGRlcGxldGVkLCB3ZSBydW4gaXQgaW1tZWRpYXRlbHkuXG4gICAgaWYgKGludGVybmFsUXVldWVEZXBsZXRlZCAmJiAhd2F0Y2hlci51c2VyKSB7XG4gICAgICB3YXRjaGVyLnJ1bigpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgLy8gcHVzaCB3YXRjaGVyIGludG8gYXBwcm9wcmlhdGUgcXVldWVcbiAgICB2YXIgcSA9IHdhdGNoZXIudXNlciA/IHVzZXJRdWV1ZSA6IHF1ZXVlXG4gICAgaGFzW2lkXSA9IHEubGVuZ3RoXG4gICAgcS5wdXNoKHdhdGNoZXIpXG4gICAgLy8gcXVldWUgdGhlIGZsdXNoXG4gICAgaWYgKCF3YWl0aW5nKSB7XG4gICAgICB3YWl0aW5nID0gdHJ1ZVxuICAgICAgXy5uZXh0VGljayhmbHVzaEJhdGNoZXJRdWV1ZSlcbiAgICB9XG4gIH1cbn1cblxufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpXG5cbn0se1wiLi9jb25maWdcIjoyMSxcIi4vdXRpbFwiOjcyLFwiX3Byb2Nlc3NcIjoxfV0sMTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLyoqXG4gKiBBIGRvdWJseSBsaW5rZWQgbGlzdC1iYXNlZCBMZWFzdCBSZWNlbnRseSBVc2VkIChMUlUpXG4gKiBjYWNoZS4gV2lsbCBrZWVwIG1vc3QgcmVjZW50bHkgdXNlZCBpdGVtcyB3aGlsZVxuICogZGlzY2FyZGluZyBsZWFzdCByZWNlbnRseSB1c2VkIGl0ZW1zIHdoZW4gaXRzIGxpbWl0IGlzXG4gKiByZWFjaGVkLiBUaGlzIGlzIGEgYmFyZS1ib25lIHZlcnNpb24gb2ZcbiAqIFJhc211cyBBbmRlcnNzb24ncyBqcy1scnU6XG4gKlxuICogICBodHRwczovL2dpdGh1Yi5jb20vcnNtcy9qcy1scnVcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbGltaXRcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIENhY2hlIChsaW1pdCkge1xuICB0aGlzLnNpemUgPSAwXG4gIHRoaXMubGltaXQgPSBsaW1pdFxuICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSB1bmRlZmluZWRcbiAgdGhpcy5fa2V5bWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKVxufVxuXG52YXIgcCA9IENhY2hlLnByb3RvdHlwZVxuXG4vKipcbiAqIFB1dCA8dmFsdWU+IGludG8gdGhlIGNhY2hlIGFzc29jaWF0ZWQgd2l0aCA8a2V5Pi5cbiAqIFJldHVybnMgdGhlIGVudHJ5IHdoaWNoIHdhcyByZW1vdmVkIHRvIG1ha2Ugcm9vbSBmb3JcbiAqIHRoZSBuZXcgZW50cnkuIE90aGVyd2lzZSB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG4gKiAoaS5lLiBpZiB0aGVyZSB3YXMgZW5vdWdoIHJvb20gYWxyZWFkeSkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7RW50cnl8dW5kZWZpbmVkfVxuICovXG5cbnAucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgdmFyIGVudHJ5ID0ge1xuICAgIGtleToga2V5LFxuICAgIHZhbHVlOiB2YWx1ZVxuICB9XG4gIHRoaXMuX2tleW1hcFtrZXldID0gZW50cnlcbiAgaWYgKHRoaXMudGFpbCkge1xuICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5XG4gICAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWxcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmhlYWQgPSBlbnRyeVxuICB9XG4gIHRoaXMudGFpbCA9IGVudHJ5XG4gIGlmICh0aGlzLnNpemUgPT09IHRoaXMubGltaXQpIHtcbiAgICByZXR1cm4gdGhpcy5zaGlmdCgpXG4gIH0gZWxzZSB7XG4gICAgdGhpcy5zaXplKytcbiAgfVxufVxuXG4vKipcbiAqIFB1cmdlIHRoZSBsZWFzdCByZWNlbnRseSB1c2VkIChvbGRlc3QpIGVudHJ5IGZyb20gdGhlXG4gKiBjYWNoZS4gUmV0dXJucyB0aGUgcmVtb3ZlZCBlbnRyeSBvciB1bmRlZmluZWQgaWYgdGhlXG4gKiBjYWNoZSB3YXMgZW1wdHkuXG4gKi9cblxucC5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGVudHJ5ID0gdGhpcy5oZWFkXG4gIGlmIChlbnRyeSkge1xuICAgIHRoaXMuaGVhZCA9IHRoaXMuaGVhZC5uZXdlclxuICAgIHRoaXMuaGVhZC5vbGRlciA9IHVuZGVmaW5lZFxuICAgIGVudHJ5Lm5ld2VyID0gZW50cnkub2xkZXIgPSB1bmRlZmluZWRcbiAgICB0aGlzLl9rZXltYXBbZW50cnkua2V5XSA9IHVuZGVmaW5lZFxuICB9XG4gIHJldHVybiBlbnRyeVxufVxuXG4vKipcbiAqIEdldCBhbmQgcmVnaXN0ZXIgcmVjZW50IHVzZSBvZiA8a2V5Pi4gUmV0dXJucyB0aGUgdmFsdWVcbiAqIGFzc29jaWF0ZWQgd2l0aCA8a2V5PiBvciB1bmRlZmluZWQgaWYgbm90IGluIGNhY2hlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmV0dXJuRW50cnlcbiAqIEByZXR1cm4ge0VudHJ5fCp9XG4gKi9cblxucC5nZXQgPSBmdW5jdGlvbiAoa2V5LCByZXR1cm5FbnRyeSkge1xuICB2YXIgZW50cnkgPSB0aGlzLl9rZXltYXBba2V5XVxuICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkgcmV0dXJuXG4gIGlmIChlbnRyeSA9PT0gdGhpcy50YWlsKSB7XG4gICAgcmV0dXJuIHJldHVybkVudHJ5XG4gICAgICA/IGVudHJ5XG4gICAgICA6IGVudHJ5LnZhbHVlXG4gIH1cbiAgLy8gSEVBRC0tLS0tLS0tLS0tLS0tVEFJTFxuICAvLyAgIDwub2xkZXIgICAubmV3ZXI+XG4gIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cbiAgLy8gICBBICBCICBDICA8RD4gIEVcbiAgaWYgKGVudHJ5Lm5ld2VyKSB7XG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpIHtcbiAgICAgIHRoaXMuaGVhZCA9IGVudHJ5Lm5ld2VyXG4gICAgfVxuICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXIgLy8gQyA8LS0gRS5cbiAgfVxuICBpZiAoZW50cnkub2xkZXIpIHtcbiAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyIC8vIEMuIC0tPiBFXG4gIH1cbiAgZW50cnkubmV3ZXIgPSB1bmRlZmluZWQgLy8gRCAtLXhcbiAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWwgLy8gRC4gLS0+IEVcbiAgaWYgKHRoaXMudGFpbCkge1xuICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5IC8vIEUuIDwtLSBEXG4gIH1cbiAgdGhpcy50YWlsID0gZW50cnlcbiAgcmV0dXJuIHJldHVybkVudHJ5XG4gICAgPyBlbnRyeVxuICAgIDogZW50cnkudmFsdWVcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDYWNoZVxuXG59LHt9XSwxNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xudmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciBkaXJQYXJzZXIgPSByZXF1aXJlKCcuLi9wYXJzZXJzL2RpcmVjdGl2ZScpXG52YXIgcHJvcERlZiA9IHJlcXVpcmUoJy4uL2RpcmVjdGl2ZXMvaW50ZXJuYWwvcHJvcCcpXG52YXIgcHJvcEJpbmRpbmdNb2RlcyA9IHJlcXVpcmUoJy4uL2NvbmZpZycpLl9wcm9wQmluZGluZ01vZGVzXG52YXIgZW1wdHkgPSB7fVxuXG4vLyByZWdleGVzXG52YXIgaWRlbnRSRSA9IHJlcXVpcmUoJy4uL3BhcnNlcnMvcGF0aCcpLmlkZW50UkVcbnZhciBzZXR0YWJsZVBhdGhSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooXFwuW0EtWmEtel8kXVtcXHckXSp8XFxbW15cXFtcXF1dK1xcXSkqJC9cblxuLyoqXG4gKiBDb21waWxlIHByb3BzIG9uIGEgcm9vdCBlbGVtZW50IGFuZCByZXR1cm5cbiAqIGEgcHJvcHMgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BPcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvbXBpbGVQcm9wcyAoZWwsIHByb3BPcHRpb25zKSB7XG4gIHZhciBwcm9wcyA9IFtdXG4gIHZhciBuYW1lcyA9IE9iamVjdC5rZXlzKHByb3BPcHRpb25zKVxuICB2YXIgaSA9IG5hbWVzLmxlbmd0aFxuICB2YXIgb3B0aW9ucywgbmFtZSwgYXR0ciwgdmFsdWUsIHBhdGgsIHBhcnNlZCwgcHJvcFxuICB3aGlsZSAoaS0tKSB7XG4gICAgbmFtZSA9IG5hbWVzW2ldXG4gICAgb3B0aW9ucyA9IHByb3BPcHRpb25zW25hbWVdIHx8IGVtcHR5XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lID09PSAnJGRhdGEnKSB7XG4gICAgICBfLndhcm4oJ0RvIG5vdCB1c2UgJGRhdGEgYXMgcHJvcC4nKVxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICAvLyBwcm9wcyBjb3VsZCBjb250YWluIGRhc2hlcywgd2hpY2ggd2lsbCBiZVxuICAgIC8vIGludGVycHJldGVkIGFzIG1pbnVzIGNhbGN1bGF0aW9ucyBieSB0aGUgcGFyc2VyXG4gICAgLy8gc28gd2UgbmVlZCB0byBjYW1lbGl6ZSB0aGUgcGF0aCBoZXJlXG4gICAgcGF0aCA9IF8uY2FtZWxpemUobmFtZSlcbiAgICBpZiAoIWlkZW50UkUudGVzdChwYXRoKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICdJbnZhbGlkIHByb3Aga2V5OiBcIicgKyBuYW1lICsgJ1wiLiBQcm9wIGtleXMgJyArXG4gICAgICAgICdtdXN0IGJlIHZhbGlkIGlkZW50aWZpZXJzLidcbiAgICAgIClcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgcHJvcCA9IHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgIG1vZGU6IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWSxcbiAgICAgIHJhdzogbnVsbFxuICAgIH1cblxuICAgIGF0dHIgPSBfLmh5cGhlbmF0ZShuYW1lKVxuICAgIC8vIGZpcnN0IGNoZWNrIGR5bmFtaWMgdmVyc2lvblxuICAgIGlmICgodmFsdWUgPSBfLmdldEJpbmRBdHRyKGVsLCBhdHRyKSkgPT09IG51bGwpIHtcbiAgICAgIGlmICgodmFsdWUgPSBfLmdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5zeW5jJykpICE9PSBudWxsKSB7XG4gICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWVxuICAgICAgfSBlbHNlIGlmICgodmFsdWUgPSBfLmdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5vbmNlJykpICE9PSBudWxsKSB7XG4gICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAvLyBoYXMgZHluYW1pYyBiaW5kaW5nIVxuICAgICAgcHJvcC5yYXcgPSB2YWx1ZVxuICAgICAgcGFyc2VkID0gZGlyUGFyc2VyLnBhcnNlKHZhbHVlKVxuICAgICAgdmFsdWUgPSBwYXJzZWQuZXhwcmVzc2lvblxuICAgICAgcHJvcC5maWx0ZXJzID0gcGFyc2VkLmZpbHRlcnNcbiAgICAgIC8vIGNoZWNrIGJpbmRpbmcgdHlwZVxuICAgICAgaWYgKF8uaXNMaXRlcmFsKHZhbHVlKSkge1xuICAgICAgICAvLyBmb3IgZXhwcmVzc2lvbnMgY29udGFpbmluZyBsaXRlcmFsIG51bWJlcnMgYW5kXG4gICAgICAgIC8vIGJvb2xlYW5zLCB0aGVyZSdzIG5vIG5lZWQgdG8gc2V0dXAgYSBwcm9wIGJpbmRpbmcsXG4gICAgICAgIC8vIHNvIHdlIGNhbiBvcHRpbWl6ZSB0aGVtIGFzIGEgb25lLXRpbWUgc2V0LlxuICAgICAgICBwcm9wLm9wdGltaXplZExpdGVyYWwgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9wLmR5bmFtaWMgPSB0cnVlXG4gICAgICAgIC8vIGNoZWNrIG5vbi1zZXR0YWJsZSBwYXRoIGZvciB0d28td2F5IGJpbmRpbmdzXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICAgICAgICBwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSAmJlxuICAgICAgICAgICAgIXNldHRhYmxlUGF0aFJFLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZXG4gICAgICAgICAgXy53YXJuKFxuICAgICAgICAgICAgJ0Nhbm5vdCBiaW5kIHR3by13YXkgcHJvcCB3aXRoIG5vbi1zZXR0YWJsZSAnICtcbiAgICAgICAgICAgICdwYXJlbnQgcGF0aDogJyArIHZhbHVlXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBwcm9wLnBhcmVudFBhdGggPSB2YWx1ZVxuXG4gICAgICAvLyB3YXJuIHJlcXVpcmVkIHR3by13YXlcbiAgICAgIGlmIChcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICBvcHRpb25zLnR3b1dheSAmJlxuICAgICAgICBwcm9wLm1vZGUgIT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWVxuICAgICAgKSB7XG4gICAgICAgIF8ud2FybihcbiAgICAgICAgICAnUHJvcCBcIicgKyBuYW1lICsgJ1wiIGV4cGVjdHMgYSB0d28td2F5IGJpbmRpbmcgdHlwZS4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IF8uYXR0cihlbCwgYXR0cikpICE9PSBudWxsKSB7XG4gICAgICAvLyBoYXMgbGl0ZXJhbCBiaW5kaW5nIVxuICAgICAgcHJvcC5yYXcgPSB2YWx1ZVxuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZXF1aXJlZCkge1xuICAgICAgLy8gd2FybiBtaXNzaW5nIHJlcXVpcmVkXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICAgJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogJyArIG5hbWVcbiAgICAgIClcbiAgICB9XG4gICAgLy8gcHVzaCBwcm9wXG4gICAgcHJvcHMucHVzaChwcm9wKVxuICB9XG4gIHJldHVybiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpXG59XG5cbi8qKlxuICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgcHJvcHMgdG8gYSB2bS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wc1xuICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZVByb3BzTGlua0ZuIChwcm9wcykge1xuICByZXR1cm4gZnVuY3Rpb24gcHJvcHNMaW5rRm4gKHZtLCBzY29wZSkge1xuICAgIC8vIHN0b3JlIHJlc29sdmVkIHByb3BzIGluZm9cbiAgICB2bS5fcHJvcHMgPSB7fVxuICAgIHZhciBpID0gcHJvcHMubGVuZ3RoXG4gICAgdmFyIHByb3AsIHBhdGgsIG9wdGlvbnMsIHZhbHVlLCByYXdcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBwcm9wID0gcHJvcHNbaV1cbiAgICAgIHJhdyA9IHByb3AucmF3XG4gICAgICBwYXRoID0gcHJvcC5wYXRoXG4gICAgICBvcHRpb25zID0gcHJvcC5vcHRpb25zXG4gICAgICB2bS5fcHJvcHNbcGF0aF0gPSBwcm9wXG4gICAgICBpZiAocmF3ID09PSBudWxsKSB7XG4gICAgICAgIC8vIGluaXRpYWxpemUgYWJzZW50IHByb3BcbiAgICAgICAgXy5pbml0UHJvcCh2bSwgcHJvcCwgZ2V0RGVmYXVsdCh2bSwgb3B0aW9ucykpXG4gICAgICB9IGVsc2UgaWYgKHByb3AuZHluYW1pYykge1xuICAgICAgICAvLyBkeW5hbWljIHByb3BcbiAgICAgICAgaWYgKHZtLl9jb250ZXh0KSB7XG4gICAgICAgICAgaWYgKHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRSkge1xuICAgICAgICAgICAgLy8gb25lIHRpbWUgYmluZGluZ1xuICAgICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0uX2NvbnRleHQpLiRnZXQocHJvcC5wYXJlbnRQYXRoKVxuICAgICAgICAgICAgXy5pbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGR5bmFtaWMgYmluZGluZ1xuICAgICAgICAgICAgdm0uX2JpbmREaXIoe1xuICAgICAgICAgICAgICBuYW1lOiAncHJvcCcsXG4gICAgICAgICAgICAgIGRlZjogcHJvcERlZixcbiAgICAgICAgICAgICAgcHJvcDogcHJvcFxuICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgc2NvcGUpIC8vIGVsLCBob3N0LCBzY29wZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICAgICAgICdDYW5ub3QgYmluZCBkeW5hbWljIHByb3Agb24gYSByb290IGluc3RhbmNlJyArXG4gICAgICAgICAgICAnIHdpdGggbm8gcGFyZW50OiAnICsgcHJvcC5uYW1lICsgJz1cIicgK1xuICAgICAgICAgICAgcmF3ICsgJ1wiJ1xuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwcm9wLm9wdGltaXplZExpdGVyYWwpIHtcbiAgICAgICAgLy8gb3B0aW1pemVkIGxpdGVyYWwsIGNhc3QgaXQgYW5kIGp1c3Qgc2V0IG9uY2VcbiAgICAgICAgdmFyIHN0cmlwcGVkID0gXy5zdHJpcFF1b3RlcyhyYXcpXG4gICAgICAgIHZhbHVlID0gc3RyaXBwZWQgPT09IHJhd1xuICAgICAgICAgID8gXy50b0Jvb2xlYW4oXy50b051bWJlcihyYXcpKVxuICAgICAgICAgIDogc3RyaXBwZWRcbiAgICAgICAgXy5pbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzdHJpbmcgbGl0ZXJhbCwgYnV0IHdlIG5lZWQgdG8gY2F0ZXIgZm9yXG4gICAgICAgIC8vIEJvb2xlYW4gcHJvcHMgd2l0aCBubyB2YWx1ZVxuICAgICAgICB2YWx1ZSA9IG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiAmJiByYXcgPT09ICcnXG4gICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgOiByYXdcbiAgICAgICAgXy5pbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR2V0IHRoZSBkZWZhdWx0IHZhbHVlIG9mIGEgcHJvcC5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cbmZ1bmN0aW9uIGdldERlZmF1bHQgKHZtLCBvcHRpb25zKSB7XG4gIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcbiAgaWYgKCFvcHRpb25zLmhhc093blByb3BlcnR5KCdkZWZhdWx0JykpIHtcbiAgICAvLyBhYnNlbnQgYm9vbGVhbiB2YWx1ZSBkZWZhdWx0cyB0byBmYWxzZVxuICAgIHJldHVybiBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW5cbiAgICAgID8gZmFsc2VcbiAgICAgIDogdW5kZWZpbmVkXG4gIH1cbiAgdmFyIGRlZiA9IG9wdGlvbnMuZGVmYXVsdFxuICAvLyB3YXJuIGFnYWluc3Qgbm9uLWZhY3RvcnkgZGVmYXVsdHMgZm9yIE9iamVjdCAmIEFycmF5XG4gIGlmIChfLmlzT2JqZWN0KGRlZikpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICdPYmplY3QvQXJyYXkgYXMgZGVmYXVsdCBwcm9wIHZhbHVlcyB3aWxsIGJlIHNoYXJlZCAnICtcbiAgICAgICdhY3Jvc3MgbXVsdGlwbGUgaW5zdGFuY2VzLiBVc2UgYSBmYWN0b3J5IGZ1bmN0aW9uICcgK1xuICAgICAgJ3RvIHJldHVybiB0aGUgZGVmYXVsdCB2YWx1ZSBpbnN0ZWFkLidcbiAgICApXG4gIH1cbiAgLy8gY2FsbCBmYWN0b3J5IGZ1bmN0aW9uIGZvciBub24tRnVuY3Rpb24gdHlwZXNcbiAgcmV0dXJuIHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgb3B0aW9ucy50eXBlICE9PSBGdW5jdGlvblxuICAgID8gZGVmLmNhbGwodm0pXG4gICAgOiBkZWZcbn1cblxufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpXG5cbn0se1wiLi4vY29uZmlnXCI6MjEsXCIuLi9kaXJlY3RpdmVzL2ludGVybmFsL3Byb3BcIjoyOSxcIi4uL3BhcnNlcnMvZGlyZWN0aXZlXCI6NjAsXCIuLi9wYXJzZXJzL3BhdGhcIjo2MixcIi4uL3V0aWxcIjo3MixcIl9wcm9jZXNzXCI6MX1dLDE4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIHB1YmxpY0RpcmVjdGl2ZXMgPSByZXF1aXJlKCcuLi9kaXJlY3RpdmVzL3B1YmxpYycpXG52YXIgaW50ZXJuYWxEaXJlY3RpdmVzID0gcmVxdWlyZSgnLi4vZGlyZWN0aXZlcy9pbnRlcm5hbCcpXG52YXIgY29tcGlsZVByb3BzID0gcmVxdWlyZSgnLi9jb21waWxlLXByb3BzJylcbnZhciB0ZXh0UGFyc2VyID0gcmVxdWlyZSgnLi4vcGFyc2Vycy90ZXh0JylcbnZhciBkaXJQYXJzZXIgPSByZXF1aXJlKCcuLi9wYXJzZXJzL2RpcmVjdGl2ZScpXG52YXIgdGVtcGxhdGVQYXJzZXIgPSByZXF1aXJlKCcuLi9wYXJzZXJzL3RlbXBsYXRlJylcbnZhciByZXNvbHZlQXNzZXQgPSBfLnJlc29sdmVBc3NldFxuXG4vLyBzcGVjaWFsIGJpbmRpbmcgcHJlZml4ZXNcbnZhciBiaW5kUkUgPSAvXnYtYmluZDp8XjovXG52YXIgb25SRSA9IC9edi1vbjp8XkAvXG52YXIgYXJnUkUgPSAvOiguKikkL1xudmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nXG52YXIgdHJhbnNpdGlvblJFID0gL14odi1iaW5kOnw6KT90cmFuc2l0aW9uJC9cblxuLy8gdGVybWluYWwgZGlyZWN0aXZlc1xudmFyIHRlcm1pbmFsRGlyZWN0aXZlcyA9IFtcbiAgJ2ZvcicsXG4gICdpZidcbl1cblxuLy8gZGVmYXVsdCBkaXJlY3RpdmUgcHJpb3JpdHlcbnZhciBERUZBVUxUX1BSSU9SSVRZID0gMTAwMFxuXG4vKipcbiAqIENvbXBpbGUgYSB0ZW1wbGF0ZSBhbmQgcmV0dXJuIGEgcmV1c2FibGUgY29tcG9zaXRlIGxpbmtcbiAqIGZ1bmN0aW9uLCB3aGljaCByZWN1cnNpdmVseSBjb250YWlucyBtb3JlIGxpbmsgZnVuY3Rpb25zXG4gKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcbiAqIGJlIGNhbGxlZCBvbiBpbnN0YW5jZSByb290IG5vZGVzLCBidXQgY2FuIGFsc28gYmUgdXNlZFxuICogZm9yIHBhcnRpYWwgY29tcGlsYXRpb24gaWYgdGhlIHBhcnRpYWwgYXJndW1lbnQgaXMgdHJ1ZS5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgY29tcG9zaXRlIGxpbmsgZnVuY3Rpb24sIHdoZW4gY2FsbGVkLCB3aWxsXG4gKiByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzXG4gKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHBhcnRpYWxcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMuY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgb3B0aW9ucywgcGFydGlhbCkge1xuICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSBpdHNlbGYuXG4gIHZhciBub2RlTGlua0ZuID0gcGFydGlhbCB8fCAhb3B0aW9ucy5fYXNDb21wb25lbnRcbiAgICA/IGNvbXBpbGVOb2RlKGVsLCBvcHRpb25zKVxuICAgIDogbnVsbFxuICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgY2hpbGROb2Rlc1xuICB2YXIgY2hpbGRMaW5rRm4gPVxuICAgICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJlxuICAgIGVsLnRhZ05hbWUgIT09ICdTQ1JJUFQnICYmXG4gICAgZWwuaGFzQ2hpbGROb2RlcygpXG4gICAgICA/IGNvbXBpbGVOb2RlTGlzdChlbC5jaGlsZE5vZGVzLCBvcHRpb25zKVxuICAgICAgOiBudWxsXG5cbiAgLyoqXG4gICAqIEEgY29tcG9zaXRlIGxpbmtlciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYSBhbHJlYWR5XG4gICAqIGNvbXBpbGVkIHBpZWNlIG9mIERPTSwgd2hpY2ggaW5zdGFudGlhdGVzIGFsbCBkaXJlY3RpdmVcbiAgICogaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSBob3N0IHZtIG9mIHRyYW5zY2x1ZGVkIGNvbnRlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBsaW5rIGNvbnRleHQgZnJhZ21lbnRcbiAgICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICAgKi9cblxuICByZXR1cm4gZnVuY3Rpb24gY29tcG9zaXRlTGlua0ZuICh2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBfLnRvQXJyYXkoZWwuY2hpbGROb2RlcylcbiAgICAvLyBsaW5rXG4gICAgdmFyIGRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiBjb21wb3NpdGVMaW5rQ2FwdHVyZXIgKCkge1xuICAgICAgaWYgKG5vZGVMaW5rRm4pIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZylcbiAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKVxuICAgIH0sIHZtKVxuICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIGRpcnMpXG4gIH1cbn1cblxuLyoqXG4gKiBBcHBseSBhIGxpbmtlciB0byBhIHZtL2VsZW1lbnQgcGFpciBhbmQgY2FwdHVyZSB0aGVcbiAqIGRpcmVjdGl2ZXMgY3JlYXRlZCBkdXJpbmcgdGhlIHByb2Nlc3MuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiBsaW5rQW5kQ2FwdHVyZSAobGlua2VyLCB2bSkge1xuICB2YXIgb3JpZ2luYWxEaXJDb3VudCA9IHZtLl9kaXJlY3RpdmVzLmxlbmd0aFxuICBsaW5rZXIoKVxuICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpXG4gIGRpcnMuc29ydChkaXJlY3RpdmVDb21wYXJhdG9yKVxuICBmb3IgKHZhciBpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZGlyc1tpXS5fYmluZCgpXG4gIH1cbiAgcmV0dXJuIGRpcnNcbn1cblxuLyoqXG4gKiBEaXJlY3RpdmUgcHJpb3JpdHkgc29ydCBjb21wYXJhdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFcbiAqIEBwYXJhbSB7T2JqZWN0fSBiXG4gKi9cblxuZnVuY3Rpb24gZGlyZWN0aXZlQ29tcGFyYXRvciAoYSwgYikge1xuICBhID0gYS5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZXG4gIGIgPSBiLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFlcbiAgcmV0dXJuIGEgPiBiID8gLTEgOiBhID09PSBiID8gMCA6IDFcbn1cblxuLyoqXG4gKiBMaW5rZXIgZnVuY3Rpb25zIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdFxuICogdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzIGluc3RhbmNlcyBnZW5lcmF0ZWQgZHVyaW5nXG4gKiB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBXZSBjcmVhdGUgdW5saW5rIGZ1bmN0aW9ucyB3aXRoIG9ubHkgdGhlIG5lY2Vzc2FyeVxuICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJzXG4gKiBAcGFyYW0ge1Z1ZX0gW2NvbnRleHRdXG4gKiBAcGFyYW0ge0FycmF5fSBbY29udGV4dERpcnNdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlVW5saW5rRm4gKHZtLCBkaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycykge1xuICByZXR1cm4gZnVuY3Rpb24gdW5saW5rIChkZXN0cm95aW5nKSB7XG4gICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKVxuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHREaXJzKSB7XG4gICAgICB0ZWFyZG93bkRpcnMoY29udGV4dCwgY29udGV4dERpcnMpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVGVhcmRvd24gcGFydGlhbCBsaW5rZWQgZGlyZWN0aXZlcy5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVzdHJveWluZ1xuICovXG5cbmZ1bmN0aW9uIHRlYXJkb3duRGlycyAodm0sIGRpcnMsIGRlc3Ryb3lpbmcpIHtcbiAgdmFyIGkgPSBkaXJzLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgZGlyc1tpXS5fdGVhcmRvd24oKVxuICAgIGlmICghZGVzdHJveWluZykge1xuICAgICAgdm0uX2RpcmVjdGl2ZXMuJHJlbW92ZShkaXJzW2ldKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgbGluayBwcm9wcyBvbiBhbiBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMuY29tcGlsZUFuZExpbmtQcm9wcyA9IGZ1bmN0aW9uICh2bSwgZWwsIHByb3BzLCBzY29wZSkge1xuICB2YXIgcHJvcHNMaW5rRm4gPSBjb21waWxlUHJvcHMoZWwsIHByb3BzKVxuICB2YXIgcHJvcERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgcHJvcHNMaW5rRm4odm0sIHNjb3BlKVxuICB9LCB2bSlcbiAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgcHJvcERpcnMpXG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgcm9vdCBlbGVtZW50IG9mIGFuIGluc3RhbmNlLlxuICpcbiAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuICogMi4gYXR0cnMgb24gdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSByb290IG5vZGUsIGlmXG4gKiAgICByZXBsYWNlOnRydWUgKGNoaWxkIHNjb3BlKVxuICpcbiAqIElmIHRoaXMgaXMgYSBmcmFnbWVudCBpbnN0YW5jZSwgd2Ugb25seSBuZWVkIHRvIGNvbXBpbGUgMS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dE9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMuY29tcGlsZVJvb3QgPSBmdW5jdGlvbiAoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKSB7XG4gIHZhciBjb250YWluZXJBdHRycyA9IG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzXG4gIHZhciByZXBsYWNlckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRyc1xuICB2YXIgY29udGV4dExpbmtGbiwgcmVwbGFjZXJMaW5rRm5cblxuICAvLyBvbmx5IG5lZWQgdG8gY29tcGlsZSBvdGhlciBhdHRyaWJ1dGVzIGZvclxuICAvLyBub24tZnJhZ21lbnQgaW5zdGFuY2VzXG4gIGlmIChlbC5ub2RlVHlwZSAhPT0gMTEpIHtcbiAgICAvLyBmb3IgY29tcG9uZW50cywgY29udGFpbmVyIGFuZCByZXBsYWNlciBuZWVkIHRvIGJlXG4gICAgLy8gY29tcGlsZWQgc2VwYXJhdGVseSBhbmQgbGlua2VkIGluIGRpZmZlcmVudCBzY29wZXMuXG4gICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG4gICAgICAvLyAyLiBjb250YWluZXIgYXR0cmlidXRlc1xuICAgICAgaWYgKGNvbnRhaW5lckF0dHJzICYmIGNvbnRleHRPcHRpb25zKSB7XG4gICAgICAgIGNvbnRleHRMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhjb250YWluZXJBdHRycywgY29udGV4dE9wdGlvbnMpXG4gICAgICB9XG4gICAgICBpZiAocmVwbGFjZXJBdHRycykge1xuICAgICAgICAvLyAzLiByZXBsYWNlciBhdHRyaWJ1dGVzXG4gICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9uLWNvbXBvbmVudCwganVzdCBjb21waWxlIGFzIGEgbm9ybWFsIGVsZW1lbnQuXG4gICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGVsLmF0dHJpYnV0ZXMsIG9wdGlvbnMpXG4gICAgfVxuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29udGFpbmVyQXR0cnMpIHtcbiAgICAvLyB3YXJuIGNvbnRhaW5lciBkaXJlY3RpdmVzIGZvciBmcmFnbWVudCBpbnN0YW5jZXNcbiAgICB2YXIgbmFtZXMgPSBjb250YWluZXJBdHRyc1xuICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYXR0cikge1xuICAgICAgICAvLyBhbGxvdyB2dWUtbG9hZGVyL3Z1ZWlmeSBzY29wZWQgY3NzIGF0dHJpYnV0ZXNcbiAgICAgICAgcmV0dXJuIGF0dHIubmFtZS5pbmRleE9mKCdfdi0nKSA8IDAgJiZcbiAgICAgICAgICAvLyBhbGxvdyBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgICAhb25SRS50ZXN0KGF0dHIubmFtZSkgJiZcbiAgICAgICAgICAvLyBhbGxvdyBzbG90c1xuICAgICAgICAgIGF0dHIubmFtZSAhPT0gJ3Nsb3QnXG4gICAgICB9KVxuICAgICAgLm1hcChmdW5jdGlvbiAoYXR0cikge1xuICAgICAgICByZXR1cm4gJ1wiJyArIGF0dHIubmFtZSArICdcIidcbiAgICAgIH0pXG4gICAgaWYgKG5hbWVzLmxlbmd0aCkge1xuICAgICAgdmFyIHBsdXJhbCA9IG5hbWVzLmxlbmd0aCA+IDFcbiAgICAgIF8ud2FybihcbiAgICAgICAgJ0F0dHJpYnV0ZScgKyAocGx1cmFsID8gJ3MgJyA6ICcgJykgKyBuYW1lcy5qb2luKCcsICcpICtcbiAgICAgICAgKHBsdXJhbCA/ICcgYXJlJyA6ICcgaXMnKSArICcgaWdub3JlZCBvbiBjb21wb25lbnQgJyArXG4gICAgICAgICc8JyArIG9wdGlvbnMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4gYmVjYXVzZSAnICtcbiAgICAgICAgJ3RoZSBjb21wb25lbnQgaXMgYSBmcmFnbWVudCBpbnN0YW5jZTogJyArXG4gICAgICAgICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNGcmFnbWVudF9JbnN0YW5jZSdcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gcm9vdExpbmtGbiAodm0sIGVsLCBzY29wZSkge1xuICAgIC8vIGxpbmsgY29udGV4dCBzY29wZSBkaXJzXG4gICAgdmFyIGNvbnRleHQgPSB2bS5fY29udGV4dFxuICAgIHZhciBjb250ZXh0RGlyc1xuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHRMaW5rRm4pIHtcbiAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0TGlua0ZuKGNvbnRleHQsIGVsLCBudWxsLCBzY29wZSlcbiAgICAgIH0sIGNvbnRleHQpXG4gICAgfVxuXG4gICAgLy8gbGluayBzZWxmXG4gICAgdmFyIHNlbGZEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHJlcGxhY2VyTGlua0ZuKSByZXBsYWNlckxpbmtGbih2bSwgZWwpXG4gICAgfSwgdm0pXG5cbiAgICAvLyByZXR1cm4gdGhlIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBjb250ZXh0XG4gICAgLy8gY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgc2VsZkRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKVxuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4gYmFzZWQgb24gdGhlXG4gKiBub2RlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlTm9kZSAobm9kZSwgb3B0aW9ucykge1xuICB2YXIgdHlwZSA9IG5vZGUubm9kZVR5cGVcbiAgaWYgKHR5cGUgPT09IDEgJiYgbm9kZS50YWdOYW1lICE9PSAnU0NSSVBUJykge1xuICAgIHJldHVybiBjb21waWxlRWxlbWVudChub2RlLCBvcHRpb25zKVxuICB9IGVsc2UgaWYgKHR5cGUgPT09IDMgJiYgbm9kZS5kYXRhLnRyaW0oKSkge1xuICAgIHJldHVybiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucylcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVFbGVtZW50IChlbCwgb3B0aW9ucykge1xuICAvLyBwcmVwcm9jZXNzIHRleHRhcmVhcy5cbiAgLy8gdGV4dGFyZWEgdHJlYXRzIGl0cyB0ZXh0IGNvbnRlbnQgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG4gIC8vIGp1c3QgYmluZCBpdCBhcyBhbiBhdHRyIGRpcmVjdGl2ZSBmb3IgdmFsdWUuXG4gIGlmIChlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgdmFyIHRva2VucyA9IHRleHRQYXJzZXIucGFyc2UoZWwudmFsdWUpXG4gICAgaWYgKHRva2Vucykge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCc6dmFsdWUnLCB0ZXh0UGFyc2VyLnRva2Vuc1RvRXhwKHRva2VucykpXG4gICAgICBlbC52YWx1ZSA9ICcnXG4gICAgfVxuICB9XG4gIHZhciBsaW5rRm5cbiAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpXG4gIC8vIGNoZWNrIHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGZvciAmIGlmKVxuICBpZiAoaGFzQXR0cnMpIHtcbiAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgb3B0aW9ucylcbiAgfVxuICAvLyBjaGVjayBlbGVtZW50IGRpcmVjdGl2ZXNcbiAgaWYgKCFsaW5rRm4pIHtcbiAgICBsaW5rRm4gPSBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKVxuICB9XG4gIC8vIGNoZWNrIGNvbXBvbmVudFxuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKVxuICB9XG4gIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gIGlmICghbGlua0ZuICYmIGhhc0F0dHJzKSB7XG4gICAgbGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoZWwuYXR0cmlidXRlcywgb3B0aW9ucylcbiAgfVxuICByZXR1cm4gbGlua0ZuXG59XG5cbi8qKlxuICogQ29tcGlsZSBhIHRleHROb2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7VGV4dE5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfSB0ZXh0Tm9kZUxpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVUZXh0Tm9kZSAobm9kZSwgb3B0aW9ucykge1xuICAvLyBza2lwIG1hcmtlZCB0ZXh0IG5vZGVzXG4gIGlmIChub2RlLl9za2lwKSB7XG4gICAgcmV0dXJuIHJlbW92ZVRleHRcbiAgfVxuXG4gIHZhciB0b2tlbnMgPSB0ZXh0UGFyc2VyLnBhcnNlKG5vZGUud2hvbGVUZXh0KVxuICBpZiAoIXRva2Vucykge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvLyBtYXJrIGFkamFjZW50IHRleHQgbm9kZXMgYXMgc2tpcHBlZCxcbiAgLy8gYmVjYXVzZSB3ZSBhcmUgdXNpbmcgbm9kZS53aG9sZVRleHQgdG8gY29tcGlsZVxuICAvLyBhbGwgYWRqYWNlbnQgdGV4dCBub2RlcyB0b2dldGhlci4gVGhpcyBmaXhlc1xuICAvLyBpc3N1ZXMgaW4gSUUgd2hlcmUgc29tZXRpbWVzIGl0IHNwbGl0cyB1cCBhIHNpbmdsZVxuICAvLyB0ZXh0IG5vZGUgaW50byBtdWx0aXBsZSBvbmVzLlxuICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmdcbiAgd2hpbGUgKG5leHQgJiYgbmV4dC5ub2RlVHlwZSA9PT0gMykge1xuICAgIG5leHQuX3NraXAgPSB0cnVlXG4gICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmdcbiAgfVxuXG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG4gIHZhciBlbCwgdG9rZW5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdG9rZW4gPSB0b2tlbnNbaV1cbiAgICBlbCA9IHRva2VuLnRhZ1xuICAgICAgPyBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKVxuICAgICAgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSlcbiAgICBmcmFnLmFwcGVuZENoaWxkKGVsKVxuICB9XG4gIHJldHVybiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnLCBvcHRpb25zKVxufVxuXG4vKipcbiAqIExpbmtlciBmb3IgYW4gc2tpcHBlZCB0ZXh0IG5vZGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1RleHR9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVUZXh0ICh2bSwgbm9kZSkge1xuICBfLnJlbW92ZShub2RlKVxufVxuXG4vKipcbiAqIFByb2Nlc3MgYSBzaW5nbGUgdGV4dCB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtOb2RlfVxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NUZXh0VG9rZW4gKHRva2VuLCBvcHRpb25zKSB7XG4gIHZhciBlbFxuICBpZiAodG9rZW4ub25lVGltZSkge1xuICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpXG4gIH0gZWxzZSB7XG4gICAgaWYgKHRva2VuLmh0bWwpIHtcbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgndi1odG1sJylcbiAgICAgIHNldFRva2VuVHlwZSgnaHRtbCcpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElFIHdpbGwgY2xlYW4gdXAgZW1wdHkgdGV4dE5vZGVzIGR1cmluZ1xuICAgICAgLy8gZnJhZy5jbG9uZU5vZGUodHJ1ZSksIHNvIHdlIGhhdmUgdG8gZ2l2ZSBpdFxuICAgICAgLy8gc29tZXRoaW5nIGhlcmUuLi5cbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyAnKVxuICAgICAgc2V0VG9rZW5UeXBlKCd0ZXh0JylcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gc2V0VG9rZW5UeXBlICh0eXBlKSB7XG4gICAgaWYgKHRva2VuLmRlc2NyaXB0b3IpIHJldHVyblxuICAgIHZhciBwYXJzZWQgPSBkaXJQYXJzZXIucGFyc2UodG9rZW4udmFsdWUpXG4gICAgdG9rZW4uZGVzY3JpcHRvciA9IHtcbiAgICAgIG5hbWU6IHR5cGUsXG4gICAgICBkZWY6IHB1YmxpY0RpcmVjdGl2ZXNbdHlwZV0sXG4gICAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXG4gICAgfVxuICB9XG4gIHJldHVybiBlbFxufVxuXG4vKipcbiAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBwcm9jZXNzZXMgYSB0ZXh0Tm9kZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHRva2Vuc1xuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKi9cblxuZnVuY3Rpb24gbWFrZVRleHROb2RlTGlua0ZuICh0b2tlbnMsIGZyYWcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHRleHROb2RlTGlua0ZuICh2bSwgZWwsIGhvc3QsIHNjb3BlKSB7XG4gICAgdmFyIGZyYWdDbG9uZSA9IGZyYWcuY2xvbmVOb2RlKHRydWUpXG4gICAgdmFyIGNoaWxkTm9kZXMgPSBfLnRvQXJyYXkoZnJhZ0Nsb25lLmNoaWxkTm9kZXMpXG4gICAgdmFyIHRva2VuLCB2YWx1ZSwgbm9kZVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdG9rZW4gPSB0b2tlbnNbaV1cbiAgICAgIHZhbHVlID0gdG9rZW4udmFsdWVcbiAgICAgIGlmICh0b2tlbi50YWcpIHtcbiAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV1cbiAgICAgICAgaWYgKHRva2VuLm9uZVRpbWUpIHtcbiAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bSkuJGV2YWwodmFsdWUpXG4gICAgICAgICAgaWYgKHRva2VuLmh0bWwpIHtcbiAgICAgICAgICAgIF8ucmVwbGFjZShub2RlLCB0ZW1wbGF0ZVBhcnNlci5wYXJzZSh2YWx1ZSwgdHJ1ZSkpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IHZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIF8ucmVwbGFjZShlbCwgZnJhZ0Nsb25lKVxuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgbGlzdCBhbmQgcmV0dXJuIGEgY2hpbGRMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZUxpc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZU5vZGVMaXN0IChub2RlTGlzdCwgb3B0aW9ucykge1xuICB2YXIgbGlua0ZucyA9IFtdXG4gIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZVxuICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG5vZGUgPSBub2RlTGlzdFtpXVxuICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKVxuICAgIGNoaWxkTGlua0ZuID1cbiAgICAgICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJlxuICAgICAgbm9kZS50YWdOYW1lICE9PSAnU0NSSVBUJyAmJlxuICAgICAgbm9kZS5oYXNDaGlsZE5vZGVzKClcbiAgICAgICAgPyBjb21waWxlTm9kZUxpc3Qobm9kZS5jaGlsZE5vZGVzLCBvcHRpb25zKVxuICAgICAgICA6IG51bGxcbiAgICBsaW5rRm5zLnB1c2gobm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pXG4gIH1cbiAgcmV0dXJuIGxpbmtGbnMubGVuZ3RoXG4gICAgPyBtYWtlQ2hpbGRMaW5rRm4obGlua0ZucylcbiAgICA6IG51bGxcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2hpbGQgbGluayBmdW5jdGlvbiBmb3IgYSBub2RlJ3MgY2hpbGROb2Rlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gbGlua0Zuc1xuICogQHJldHVybiB7RnVuY3Rpb259IGNoaWxkTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuIChsaW5rRm5zKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjaGlsZExpbmtGbiAodm0sIG5vZGVzLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIHZhciBub2RlLCBub2RlTGlua0ZuLCBjaGlsZHJlbkxpbmtGblxuICAgIGZvciAodmFyIGkgPSAwLCBuID0gMCwgbCA9IGxpbmtGbnMubGVuZ3RoOyBpIDwgbDsgbisrKSB7XG4gICAgICBub2RlID0gbm9kZXNbbl1cbiAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK11cbiAgICAgIGNoaWxkcmVuTGlua0ZuID0gbGlua0Zuc1tpKytdXG4gICAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcbiAgICAgIHZhciBjaGlsZE5vZGVzID0gXy50b0FycmF5KG5vZGUuY2hpbGROb2RlcylcbiAgICAgIGlmIChub2RlTGlua0ZuKSB7XG4gICAgICAgIG5vZGVMaW5rRm4odm0sIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKVxuICAgICAgfVxuICAgICAgaWYgKGNoaWxkcmVuTGlua0ZuKSB7XG4gICAgICAgIGNoaWxkcmVuTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZylcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBmb3IgZWxlbWVudCBkaXJlY3RpdmVzIChjdXN0b20gZWxlbWVudHMgdGhhdCBzaG91bGRcbiAqIGJlIHJlc292bGVkIGFzIHRlcm1pbmFsIGRpcmVjdGl2ZXMpLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyAoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKVxuICBpZiAoXy5jb21tb25UYWdSRS50ZXN0KHRhZykpIHJldHVyblxuICB2YXIgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZylcbiAgaWYgKGRlZikge1xuICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCB0YWcsICcnLCBvcHRpb25zLCBkZWYpXG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LiBJZiB5ZXMsIHJldHVyblxuICogYSBjb21wb25lbnQgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50IChlbCwgb3B0aW9ucykge1xuICB2YXIgY29tcG9uZW50ID0gXy5jaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucylcbiAgaWYgKGNvbXBvbmVudCkge1xuICAgIHZhciByZWYgPSBfLmZpbmRSZWYoZWwpXG4gICAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgICBuYW1lOiAnY29tcG9uZW50JyxcbiAgICAgIHJlZjogcmVmLFxuICAgICAgZXhwcmVzc2lvbjogY29tcG9uZW50LmlkLFxuICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuICAgICAgbW9kaWZpZXJzOiB7XG4gICAgICAgIGxpdGVyYWw6ICFjb21wb25lbnQuZHluYW1pY1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgY29tcG9uZW50TGlua0ZuID0gZnVuY3Rpb24gKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAgIGlmIChyZWYpIHtcbiAgICAgICAgXy5kZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCByZWYsIG51bGwpXG4gICAgICB9XG4gICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpXG4gICAgfVxuICAgIGNvbXBvbmVudExpbmtGbi50ZXJtaW5hbCA9IHRydWVcbiAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuXG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBhbiBlbGVtZW50IGZvciB0ZXJtaW5hbCBkaXJlY3RpdmVzIGluIGZpeGVkIG9yZGVyLlxuICogSWYgaXQgZmluZHMgb25lLCByZXR1cm4gYSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyAoZWwsIG9wdGlvbnMpIHtcbiAgLy8gc2tpcCB2LXByZVxuICBpZiAoXy5hdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuICAgIHJldHVybiBza2lwXG4gIH1cbiAgLy8gc2tpcCB2LWVsc2UgYmxvY2ssIGJ1dCBvbmx5IGlmIGZvbGxvd2luZyB2LWlmXG4gIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3YtZWxzZScpKSB7XG4gICAgdmFyIHByZXYgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXG4gICAgaWYgKHByZXYgJiYgcHJldi5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgcmV0dXJuIHNraXBcbiAgICB9XG4gIH1cbiAgdmFyIHZhbHVlLCBkaXJOYW1lXG4gIGZvciAodmFyIGkgPSAwLCBsID0gdGVybWluYWxEaXJlY3RpdmVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGRpck5hbWUgPSB0ZXJtaW5hbERpcmVjdGl2ZXNbaV1cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGlmICh2YWx1ZSA9IGVsLmdldEF0dHJpYnV0ZSgndi0nICsgZGlyTmFtZSkpIHtcbiAgICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucylcbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICB9XG59XG5cbmZ1bmN0aW9uIHNraXAgKCkge31cbnNraXAudGVybWluYWwgPSB0cnVlXG5cbi8qKlxuICogQnVpbGQgYSBub2RlIGxpbmsgZnVuY3Rpb24gZm9yIGEgdGVybWluYWwgZGlyZWN0aXZlLlxuICogQSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uIHRlcm1pbmF0ZXMgdGhlIGN1cnJlbnRcbiAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcbiAqIHN1YnRyZWUgaW4gdGhlIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IFtkZWZdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlVGVybWluYWxOb2RlTGlua0ZuIChlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIGRlZikge1xuICB2YXIgcGFyc2VkID0gZGlyUGFyc2VyLnBhcnNlKHZhbHVlKVxuICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICBuYW1lOiBkaXJOYW1lLFxuICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzLFxuICAgIHJhdzogdmFsdWUsXG4gICAgLy8gZWl0aGVyIGFuIGVsZW1lbnQgZGlyZWN0aXZlLCBvciBpZi9mb3JcbiAgICBkZWY6IGRlZiB8fCBwdWJsaWNEaXJlY3RpdmVzW2Rpck5hbWVdXG4gIH1cbiAgLy8gY2hlY2sgcmVmIGZvciB2LWZvciBhbmQgcm91dGVyLXZpZXdcbiAgaWYgKGRpck5hbWUgPT09ICdmb3InIHx8IGRpck5hbWUgPT09ICdyb3V0ZXItdmlldycpIHtcbiAgICBkZXNjcmlwdG9yLnJlZiA9IF8uZmluZFJlZihlbClcbiAgfVxuICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4gKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICBpZiAoZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgIF8uZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgZGVzY3JpcHRvci5yZWYsIG51bGwpXG4gICAgfVxuICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZylcbiAgfVxuICBmbi50ZXJtaW5hbCA9IHRydWVcbiAgcmV0dXJuIGZuXG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgZGlyZWN0aXZlcyBvbiBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBsaW5rZXIuXG4gKlxuICogQHBhcmFtIHtBcnJheXxOYW1lZE5vZGVNYXB9IGF0dHJzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZURpcmVjdGl2ZXMgKGF0dHJzLCBvcHRpb25zKSB7XG4gIHZhciBpID0gYXR0cnMubGVuZ3RoXG4gIHZhciBkaXJzID0gW11cbiAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zXG4gIHdoaWxlIChpLS0pIHtcbiAgICBhdHRyID0gYXR0cnNbaV1cbiAgICBuYW1lID0gcmF3TmFtZSA9IGF0dHIubmFtZVxuICAgIHZhbHVlID0gcmF3VmFsdWUgPSBhdHRyLnZhbHVlXG4gICAgdG9rZW5zID0gdGV4dFBhcnNlci5wYXJzZSh2YWx1ZSlcbiAgICAvLyByZXNldCBhcmdcbiAgICBhcmcgPSBudWxsXG4gICAgLy8gY2hlY2sgbW9kaWZpZXJzXG4gICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMobmFtZSlcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKVxuXG4gICAgLy8gYXR0cmlidXRlIGludGVycG9sYXRpb25zXG4gICAgaWYgKHRva2Vucykge1xuICAgICAgdmFsdWUgPSB0ZXh0UGFyc2VyLnRva2Vuc1RvRXhwKHRva2VucylcbiAgICAgIGFyZyA9IG5hbWVcbiAgICAgIHB1c2hEaXIoJ2JpbmQnLCBwdWJsaWNEaXJlY3RpdmVzLmJpbmQsIHRydWUpXG4gICAgICAvLyB3YXJuIGFnYWluc3QgbWl4aW5nIG11c3RhY2hlcyB3aXRoIHYtYmluZFxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgICAgICByZXR1cm4gYXR0ci5uYW1lID09PSAnOmNsYXNzJyB8fCBhdHRyLm5hbWUgPT09ICd2LWJpbmQ6Y2xhc3MnXG4gICAgICAgIH0pKSB7XG4gICAgICAgICAgXy53YXJuKFxuICAgICAgICAgICAgJ2NsYXNzPVwiJyArIHJhd1ZhbHVlICsgJ1wiOiBEbyBub3QgbWl4IG11c3RhY2hlIGludGVycG9sYXRpb24gJyArXG4gICAgICAgICAgICAnYW5kIHYtYmluZCBmb3IgXCJjbGFzc1wiIG9uIHRoZSBzYW1lIGVsZW1lbnQuIFVzZSBvbmUgb3IgdGhlIG90aGVyLidcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2VcblxuICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXG4gICAgaWYgKHRyYW5zaXRpb25SRS50ZXN0KG5hbWUpKSB7XG4gICAgICBtb2RpZmllcnMubGl0ZXJhbCA9ICFiaW5kUkUudGVzdChuYW1lKVxuICAgICAgcHVzaERpcigndHJhbnNpdGlvbicsIGludGVybmFsRGlyZWN0aXZlcy50cmFuc2l0aW9uKVxuICAgIH0gZWxzZVxuXG4gICAgLy8gZXZlbnQgaGFuZGxlcnNcbiAgICBpZiAob25SRS50ZXN0KG5hbWUpKSB7XG4gICAgICBhcmcgPSBuYW1lLnJlcGxhY2Uob25SRSwgJycpXG4gICAgICBwdXNoRGlyKCdvbicsIHB1YmxpY0RpcmVjdGl2ZXMub24pXG4gICAgfSBlbHNlXG5cbiAgICAvLyBhdHRyaWJ1dGUgYmluZGluZ3NcbiAgICBpZiAoYmluZFJFLnRlc3QobmFtZSkpIHtcbiAgICAgIGRpck5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJylcbiAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgICAgcHVzaERpcihkaXJOYW1lLCBpbnRlcm5hbERpcmVjdGl2ZXNbZGlyTmFtZV0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmcgPSBkaXJOYW1lXG4gICAgICAgIHB1c2hEaXIoJ2JpbmQnLCBwdWJsaWNEaXJlY3RpdmVzLmJpbmQpXG4gICAgICB9XG4gICAgfSBlbHNlXG5cbiAgICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuICAgIGlmIChuYW1lLmluZGV4T2YoJ3YtJykgPT09IDApIHtcbiAgICAgIC8vIGNoZWNrIGFyZ1xuICAgICAgYXJnID0gKGFyZyA9IG5hbWUubWF0Y2goYXJnUkUpKSAmJiBhcmdbMV1cbiAgICAgIGlmIChhcmcpIHtcbiAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShhcmdSRSwgJycpXG4gICAgICB9XG4gICAgICAvLyBleHRyYWN0IGRpcmVjdGl2ZSBuYW1lXG4gICAgICBkaXJOYW1lID0gbmFtZS5zbGljZSgyKVxuXG4gICAgICAvLyBza2lwIHYtZWxzZSAod2hlbiB1c2VkIHdpdGggdi1zaG93KVxuICAgICAgaWYgKGRpck5hbWUgPT09ICdlbHNlJykge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lKVxuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBfLmFzc2VydEFzc2V0KGRpckRlZiwgJ2RpcmVjdGl2ZScsIGRpck5hbWUpXG4gICAgICB9XG5cbiAgICAgIGlmIChkaXJEZWYpIHtcbiAgICAgICAgcHVzaERpcihkaXJOYW1lLCBkaXJEZWYpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFB1c2ggYSBkaXJlY3RpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBkZWZcbiAgICogQHBhcmFtIHtCb29sZWFufSBbaW50ZXJwXVxuICAgKi9cblxuICBmdW5jdGlvbiBwdXNoRGlyIChkaXJOYW1lLCBkZWYsIGludGVycCkge1xuICAgIHZhciBwYXJzZWQgPSBkaXJQYXJzZXIucGFyc2UodmFsdWUpXG4gICAgZGlycy5wdXNoKHtcbiAgICAgIG5hbWU6IGRpck5hbWUsXG4gICAgICBhdHRyOiByYXdOYW1lLFxuICAgICAgcmF3OiByYXdWYWx1ZSxcbiAgICAgIGRlZjogZGVmLFxuICAgICAgYXJnOiBhcmcsXG4gICAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcbiAgICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuICAgICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnMsXG4gICAgICBpbnRlcnA6IGludGVycFxuICAgIH0pXG4gIH1cblxuICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycylcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIG1vZGlmaWVycyBmcm9tIGRpcmVjdGl2ZSBhdHRyaWJ1dGUgbmFtZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlTW9kaWZpZXJzIChuYW1lKSB7XG4gIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpXG4gIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSlcbiAgaWYgKG1hdGNoKSB7XG4gICAgdmFyIGkgPSBtYXRjaC5sZW5ndGhcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qKlxuICogQnVpbGQgYSBsaW5rIGZ1bmN0aW9uIGZvciBhbGwgZGlyZWN0aXZlcyBvbiBhIHNpbmdsZSBub2RlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBkaXJlY3RpdmVzTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZU5vZGVMaW5rRm4gKGRpcmVjdGl2ZXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVMaW5rRm4gKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAvLyByZXZlcnNlIGFwcGx5IGJlY2F1c2UgaXQncyBzb3J0ZWQgbG93IHRvIGhpZ2hcbiAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdm0uX2JpbmREaXIoZGlyZWN0aXZlc1tpXSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKVxuICAgIH1cbiAgfVxufVxuXG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSlcblxufSx7XCIuLi9kaXJlY3RpdmVzL2ludGVybmFsXCI6MjgsXCIuLi9kaXJlY3RpdmVzL3B1YmxpY1wiOjM4LFwiLi4vcGFyc2Vycy9kaXJlY3RpdmVcIjo2MCxcIi4uL3BhcnNlcnMvdGVtcGxhdGVcIjo2MyxcIi4uL3BhcnNlcnMvdGV4dFwiOjY0LFwiLi4vdXRpbFwiOjcyLFwiLi9jb21waWxlLXByb3BzXCI6MTcsXCJfcHJvY2Vzc1wiOjF9XSwxOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxuXG5fLmV4dGVuZChleHBvcnRzLCByZXF1aXJlKCcuL2NvbXBpbGUnKSlcbl8uZXh0ZW5kKGV4cG9ydHMsIHJlcXVpcmUoJy4vdHJhbnNjbHVkZScpKVxuXG59LHtcIi4uL3V0aWxcIjo3MixcIi4vY29tcGlsZVwiOjE4LFwiLi90cmFuc2NsdWRlXCI6MjB9XSwyMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xudmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciB0ZW1wbGF0ZVBhcnNlciA9IHJlcXVpcmUoJy4uL3BhcnNlcnMvdGVtcGxhdGUnKVxudmFyIHNwZWNpYWxDaGFyUkUgPSAvW15cXHdcXC06XFwuXS9cblxuLyoqXG4gKiBQcm9jZXNzIGFuIGVsZW1lbnQgb3IgYSBEb2N1bWVudEZyYWdtZW50IGJhc2VkIG9uIGFcbiAqIGluc3RhbmNlIG9wdGlvbiBvYmplY3QuIFRoaXMgYWxsb3dzIHVzIHRvIHRyYW5zY2x1ZGVcbiAqIGEgdGVtcGxhdGUgbm9kZS9mcmFnbWVudCBiZWZvcmUgdGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQsXG4gKiBzbyB0aGUgcHJvY2Vzc2VkIGZyYWdtZW50IGNhbiB0aGVuIGJlIGNsb25lZCBhbmQgcmV1c2VkXG4gKiBpbiB2LWZvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmV4cG9ydHMudHJhbnNjbHVkZSA9IGZ1bmN0aW9uIChlbCwgb3B0aW9ucykge1xuICAvLyBleHRyYWN0IGNvbnRhaW5lciBhdHRyaWJ1dGVzIHRvIHBhc3MgdGhlbSBkb3duXG4gIC8vIHRvIGNvbXBpbGVyLCBiZWNhdXNlIHRoZXkgbmVlZCB0byBiZSBjb21waWxlZCBpblxuICAvLyBwYXJlbnQgc2NvcGUuIHdlIGFyZSBtdXRhdGluZyB0aGUgb3B0aW9ucyBvYmplY3QgaGVyZVxuICAvLyBhc3N1bWluZyB0aGUgc2FtZSBvYmplY3Qgd2lsbCBiZSB1c2VkIGZvciBjb21waWxlXG4gIC8vIHJpZ2h0IGFmdGVyIHRoaXMuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBleHRyYWN0QXR0cnMoZWwpXG4gIH1cbiAgLy8gZm9yIHRlbXBsYXRlIHRhZ3MsIHdoYXQgd2Ugd2FudCBpcyBpdHMgY29udGVudCBhc1xuICAvLyBhIGRvY3VtZW50RnJhZ21lbnQgKGZvciBmcmFnbWVudCBpbnN0YW5jZXMpXG4gIGlmIChfLmlzVGVtcGxhdGUoZWwpKSB7XG4gICAgZWwgPSB0ZW1wbGF0ZVBhcnNlci5wYXJzZShlbClcbiAgfVxuICBpZiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCAmJiAhb3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9ICc8c2xvdD48L3Nsb3Q+J1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgb3B0aW9ucy5fY29udGVudCA9IF8uZXh0cmFjdENvbnRlbnQoZWwpXG4gICAgICBlbCA9IHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucylcbiAgICB9XG4gIH1cbiAgaWYgKGVsIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCkge1xuICAgIC8vIGFuY2hvcnMgZm9yIGZyYWdtZW50IGluc3RhbmNlXG4gICAgLy8gcGFzc2luZyBpbiBgcGVyc2lzdDogdHJ1ZWAgdG8gYXZvaWQgdGhlbSBiZWluZ1xuICAgIC8vIGRpc2NhcmRlZCBieSBJRSBkdXJpbmcgdGVtcGxhdGUgY2xvbmluZ1xuICAgIF8ucHJlcGVuZChfLmNyZWF0ZUFuY2hvcigndi1zdGFydCcsIHRydWUpLCBlbClcbiAgICBlbC5hcHBlbmRDaGlsZChfLmNyZWF0ZUFuY2hvcigndi1lbmQnLCB0cnVlKSlcbiAgfVxuICByZXR1cm4gZWxcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24uXG4gKiBJZiB0aGUgcmVwbGFjZSBvcHRpb24gaXMgdHJ1ZSB0aGlzIHdpbGwgc3dhcCB0aGUgJGVsLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gdHJhbnNjbHVkZVRlbXBsYXRlIChlbCwgb3B0aW9ucykge1xuICB2YXIgdGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlXG4gIHZhciBmcmFnID0gdGVtcGxhdGVQYXJzZXIucGFyc2UodGVtcGxhdGUsIHRydWUpXG4gIGlmIChmcmFnKSB7XG4gICAgdmFyIHJlcGxhY2VyID0gZnJhZy5maXJzdENoaWxkXG4gICAgdmFyIHRhZyA9IHJlcGxhY2VyLnRhZ05hbWUgJiYgcmVwbGFjZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICAgJ1lvdSBhcmUgbW91bnRpbmcgYW4gaW5zdGFuY2Ugd2l0aCBhIHRlbXBsYXRlIHRvICcgK1xuICAgICAgICAgICc8Ym9keT4uIFRoaXMgd2lsbCByZXBsYWNlIDxib2R5PiBlbnRpcmVseS4gWW91ICcgK1xuICAgICAgICAgICdzaG91bGQgcHJvYmFibHkgdXNlIGByZXBsYWNlOiBmYWxzZWAgaGVyZS4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIC8vIHRoZXJlIGFyZSBtYW55IGNhc2VzIHdoZXJlIHRoZSBpbnN0YW5jZSBtdXN0XG4gICAgICAvLyBiZWNvbWUgYSBmcmFnbWVudCBpbnN0YW5jZTogYmFzaWNhbGx5IGFueXRoaW5nIHRoYXRcbiAgICAgIC8vIGNhbiBjcmVhdGUgbW9yZSB0aGFuIDEgcm9vdCBub2Rlcy5cbiAgICAgIGlmIChcbiAgICAgICAgLy8gbXVsdGktY2hpbGRyZW4gdGVtcGxhdGVcbiAgICAgICAgZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA+IDEgfHxcbiAgICAgICAgLy8gbm9uLWVsZW1lbnQgdGVtcGxhdGVcbiAgICAgICAgcmVwbGFjZXIubm9kZVR5cGUgIT09IDEgfHxcbiAgICAgICAgLy8gc2luZ2xlIG5lc3RlZCBjb21wb25lbnRcbiAgICAgICAgdGFnID09PSAnY29tcG9uZW50JyB8fFxuICAgICAgICBfLnJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykgfHxcbiAgICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCdpcycpIHx8XG4gICAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgnOmlzJykgfHxcbiAgICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWJpbmQ6aXMnKSB8fFxuICAgICAgICAvLyBlbGVtZW50IGRpcmVjdGl2ZVxuICAgICAgICBfLnJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpIHx8XG4gICAgICAgIC8vIGZvciBibG9ja1xuICAgICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykgfHxcbiAgICAgICAgLy8gaWYgYmxvY2tcbiAgICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWlmJylcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZnJhZ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IGV4dHJhY3RBdHRycyhyZXBsYWNlcilcbiAgICAgICAgbWVyZ2VBdHRycyhlbCwgcmVwbGFjZXIpXG4gICAgICAgIHJldHVybiByZXBsYWNlclxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbC5hcHBlbmRDaGlsZChmcmFnKVxuICAgICAgcmV0dXJuIGVsXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgJ0ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOiAnICsgdGVtcGxhdGVcbiAgICApXG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZXh0cmFjdCBhIGNvbXBvbmVudCBjb250YWluZXIncyBhdHRyaWJ1dGVzXG4gKiBpbnRvIGEgcGxhaW4gb2JqZWN0IGFycmF5LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbmZ1bmN0aW9uIGV4dHJhY3RBdHRycyAoZWwpIHtcbiAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgIHJldHVybiBfLnRvQXJyYXkoZWwuYXR0cmlidXRlcylcbiAgfVxufVxuXG4vKipcbiAqIE1lcmdlIHRoZSBhdHRyaWJ1dGVzIG9mIHR3byBlbGVtZW50cywgYW5kIG1ha2Ugc3VyZVxuICogdGhlIGNsYXNzIG5hbWVzIGFyZSBtZXJnZWQgcHJvcGVybHkuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBmcm9tXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRvXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VBdHRycyAoZnJvbSwgdG8pIHtcbiAgdmFyIGF0dHJzID0gZnJvbS5hdHRyaWJ1dGVzXG4gIHZhciBpID0gYXR0cnMubGVuZ3RoXG4gIHZhciBuYW1lLCB2YWx1ZVxuICB3aGlsZSAoaS0tKSB7XG4gICAgbmFtZSA9IGF0dHJzW2ldLm5hbWVcbiAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlXG4gICAgaWYgKCF0by5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIXNwZWNpYWxDaGFyUkUudGVzdChuYW1lKSkge1xuICAgICAgdG8uc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKVxuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJykge1xuICAgICAgdmFsdWUgPSB0by5nZXRBdHRyaWJ1dGUobmFtZSkgKyAnICcgKyB2YWx1ZVxuICAgICAgdG8uc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKVxuICAgIH1cbiAgfVxufVxuXG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSlcblxufSx7XCIuLi9wYXJzZXJzL3RlbXBsYXRlXCI6NjMsXCIuLi91dGlsXCI6NzIsXCJfcHJvY2Vzc1wiOjF9XSwyMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICAvKipcbiAgICogV2hldGhlciB0byBwcmludCBkZWJ1ZyBtZXNzYWdlcy5cbiAgICogQWxzbyBlbmFibGVzIHN0YWNrIHRyYWNlIGZvciB3YXJuaW5ncy5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIGRlYnVnOiBmYWxzZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byBzdXBwcmVzcyB3YXJuaW5ncy5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIHNpbGVudDogZmFsc2UsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gdXNlIGFzeW5jIHJlbmRlcmluZy5cbiAgICovXG5cbiAgYXN5bmM6IHRydWUsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gd2FybiBhZ2FpbnN0IGVycm9ycyBjYXVnaHQgd2hlbiBldmFsdWF0aW5nXG4gICAqIGV4cHJlc3Npb25zLlxuICAgKi9cblxuICB3YXJuRXhwcmVzc2lvbkVycm9yczogdHJ1ZSxcblxuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdG8gaGFuZGxlIGZ1bGx5IG9iamVjdCBwcm9wZXJ0aWVzIHdoaWNoXG4gICAqIGFyZSBhbHJlYWR5IGJhY2tlZCBieSBnZXR0ZXJzIGFuZCBzZXRlcnMuIERlcGVuZGluZyBvblxuICAgKiB1c2UgY2FzZSBhbmQgZW52aXJvbm1lbnQsIHRoaXMgbWlnaHQgaW50cm9kdWNlIG5vbi1uZWdsaWJsZVxuICAgKiBwZXJmb3JtYW5jZSBwZW5hbHRpZXMuXG4gICAqL1xuICBjb252ZXJ0QWxsUHJvcGVydGllczogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEludGVybmFsIGZsYWcgdG8gaW5kaWNhdGUgdGhlIGRlbGltaXRlcnMgaGF2ZSBiZWVuXG4gICAqIGNoYW5nZWQuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cblxuICBfZGVsaW1pdGVyc0NoYW5nZWQ6IHRydWUsXG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgYXNzZXQgdHlwZXMgdGhhdCBhIGNvbXBvbmVudCBjYW4gb3duLlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXl9XG4gICAqL1xuXG4gIF9hc3NldFR5cGVzOiBbXG4gICAgJ2NvbXBvbmVudCcsXG4gICAgJ2RpcmVjdGl2ZScsXG4gICAgJ2VsZW1lbnREaXJlY3RpdmUnLFxuICAgICdmaWx0ZXInLFxuICAgICd0cmFuc2l0aW9uJyxcbiAgICAncGFydGlhbCdcbiAgXSxcblxuICAvKipcbiAgICogcHJvcCBiaW5kaW5nIG1vZGVzXG4gICAqL1xuXG4gIF9wcm9wQmluZGluZ01vZGVzOiB7XG4gICAgT05FX1dBWTogMCxcbiAgICBUV09fV0FZOiAxLFxuICAgIE9ORV9USU1FOiAyXG4gIH0sXG5cbiAgLyoqXG4gICAqIE1heCBjaXJjdWxhciB1cGRhdGVzIGFsbG93ZWQgaW4gYSBiYXRjaGVyIGZsdXNoIGN5Y2xlLlxuICAgKi9cblxuICBfbWF4VXBkYXRlQ291bnQ6IDEwMFxuXG59XG5cbi8qKlxuICogSW50ZXJwb2xhdGlvbiBkZWxpbWl0ZXJzLiBDaGFuZ2luZyB0aGVzZSB3b3VsZCB0cmlnZ2VyXG4gKiB0aGUgdGV4dCBwYXJzZXIgdG8gcmUtY29tcGlsZSB0aGUgcmVndWxhciBleHByZXNzaW9ucy5cbiAqXG4gKiBAdHlwZSB7QXJyYXk8U3RyaW5nPn1cbiAqL1xuXG52YXIgZGVsaW1pdGVycyA9IFsne3snLCAnfX0nXVxudmFyIHVuc2FmZURlbGltaXRlcnMgPSBbJ3t7eycsICd9fX0nXVxudmFyIHRleHRQYXJzZXIgPSByZXF1aXJlKCcuL3BhcnNlcnMvdGV4dCcpXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgJ2RlbGltaXRlcnMnLCB7XG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkZWxpbWl0ZXJzXG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgIGRlbGltaXRlcnMgPSB2YWxcbiAgICB0ZXh0UGFyc2VyLmNvbXBpbGVSZWdleCgpXG4gIH1cbn0pXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgJ3Vuc2FmZURlbGltaXRlcnMnLCB7XG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB1bnNhZmVEZWxpbWl0ZXJzXG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgIHVuc2FmZURlbGltaXRlcnMgPSB2YWxcbiAgICB0ZXh0UGFyc2VyLmNvbXBpbGVSZWdleCgpXG4gIH1cbn0pXG5cbn0se1wiLi9wYXJzZXJzL3RleHRcIjo2NH1dLDIyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG52YXIgXyA9IHJlcXVpcmUoJy4vdXRpbCcpXG52YXIgV2F0Y2hlciA9IHJlcXVpcmUoJy4vd2F0Y2hlcicpXG52YXIgZXhwUGFyc2VyID0gcmVxdWlyZSgnLi9wYXJzZXJzL2V4cHJlc3Npb24nKVxuZnVuY3Rpb24gbm9vcCAoKSB7fVxuXG4vKipcbiAqIEEgZGlyZWN0aXZlIGxpbmtzIGEgRE9NIGVsZW1lbnQgd2l0aCBhIHBpZWNlIG9mIGRhdGEsXG4gKiB3aGljaCBpcyB0aGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgYW4gZXhwcmVzc2lvbi5cbiAqIEl0IHJlZ2lzdGVycyBhIHdhdGNoZXIgd2l0aCB0aGUgZXhwcmVzc2lvbiBhbmQgY2FsbHNcbiAqIHRoZSBET00gdXBkYXRlIGZ1bmN0aW9uIHdoZW4gYSBjaGFuZ2UgaXMgdHJpZ2dlcmVkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge05vZGV9IGVsXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBuYW1lXG4gKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBkZWZcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGV4cHJlc3Npb25cbiAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbZmlsdGVyc11cbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsaXRlcmFsXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhdHRyXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSByYXdcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWYgLSBkaXJlY3RpdmUgZGVmaW5pdGlvbiBvYmplY3RcbiAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuXG5mdW5jdGlvbiBEaXJlY3RpdmUgKGRlc2NyaXB0b3IsIHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgdGhpcy52bSA9IHZtXG4gIHRoaXMuZWwgPSBlbFxuICAvLyBjb3B5IGRlc2NyaXB0b3IgcHJvcGVydGllc1xuICB0aGlzLmRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yXG4gIHRoaXMubmFtZSA9IGRlc2NyaXB0b3IubmFtZVxuICB0aGlzLmV4cHJlc3Npb24gPSBkZXNjcmlwdG9yLmV4cHJlc3Npb25cbiAgdGhpcy5hcmcgPSBkZXNjcmlwdG9yLmFyZ1xuICB0aGlzLm1vZGlmaWVycyA9IGRlc2NyaXB0b3IubW9kaWZpZXJzXG4gIHRoaXMuZmlsdGVycyA9IGRlc2NyaXB0b3IuZmlsdGVyc1xuICB0aGlzLmxpdGVyYWwgPSB0aGlzLm1vZGlmaWVycyAmJiB0aGlzLm1vZGlmaWVycy5saXRlcmFsXG4gIC8vIHByaXZhdGVcbiAgdGhpcy5fbG9ja2VkID0gZmFsc2VcbiAgdGhpcy5fYm91bmQgPSBmYWxzZVxuICB0aGlzLl9saXN0ZW5lcnMgPSBudWxsXG4gIC8vIGxpbmsgY29udGV4dFxuICB0aGlzLl9ob3N0ID0gaG9zdFxuICB0aGlzLl9zY29wZSA9IHNjb3BlXG4gIHRoaXMuX2ZyYWcgPSBmcmFnXG4gIC8vIHN0b3JlIGRpcmVjdGl2ZXMgb24gbm9kZSBpbiBkZXYgbW9kZVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG4gICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgPSB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyB8fCBbXVxuICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLnB1c2godGhpcylcbiAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGRpcmVjdGl2ZSwgbWl4aW4gZGVmaW5pdGlvbiBwcm9wZXJ0aWVzLFxuICogc2V0dXAgdGhlIHdhdGNoZXIsIGNhbGwgZGVmaW5pdGlvbiBiaW5kKCkgYW5kIHVwZGF0ZSgpXG4gKiBpZiBwcmVzZW50LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZcbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9iaW5kID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbmFtZSA9IHRoaXMubmFtZVxuICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvclxuXG4gIC8vIHJlbW92ZSBhdHRyaWJ1dGVcbiAgaWYgKFxuICAgIChuYW1lICE9PSAnY2xvYWsnIHx8IHRoaXMudm0uX2lzQ29tcGlsZWQpICYmXG4gICAgdGhpcy5lbCAmJiB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZVxuICApIHtcbiAgICB2YXIgYXR0ciA9IGRlc2NyaXB0b3IuYXR0ciB8fCAoJ3YtJyArIG5hbWUpXG4gICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cilcbiAgfVxuXG4gIC8vIGNvcHkgZGVmIHByb3BlcnRpZXNcbiAgdmFyIGRlZiA9IGRlc2NyaXB0b3IuZGVmXG4gIGlmICh0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhpcy51cGRhdGUgPSBkZWZcbiAgfSBlbHNlIHtcbiAgICBfLmV4dGVuZCh0aGlzLCBkZWYpXG4gIH1cblxuICAvLyBzZXR1cCBkaXJlY3RpdmUgcGFyYW1zXG4gIHRoaXMuX3NldHVwUGFyYW1zKClcblxuICAvLyBpbml0aWFsIGJpbmRcbiAgaWYgKHRoaXMuYmluZCkge1xuICAgIHRoaXMuYmluZCgpXG4gIH1cblxuICBpZiAodGhpcy5saXRlcmFsKSB7XG4gICAgdGhpcy51cGRhdGUgJiYgdGhpcy51cGRhdGUoZGVzY3JpcHRvci5yYXcpXG4gIH0gZWxzZSBpZiAoXG4gICAgKHRoaXMuZXhwcmVzc2lvbiB8fCB0aGlzLm1vZGlmaWVycykgJiZcbiAgICAodGhpcy51cGRhdGUgfHwgdGhpcy50d29XYXkpICYmXG4gICAgIXRoaXMuX2NoZWNrU3RhdGVtZW50KClcbiAgKSB7XG4gICAgLy8gd3JhcHBlZCB1cGRhdGVyIGZvciBjb250ZXh0XG4gICAgdmFyIGRpciA9IHRoaXNcbiAgICBpZiAodGhpcy51cGRhdGUpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuICAgICAgICBpZiAoIWRpci5fbG9ja2VkKSB7XG4gICAgICAgICAgZGlyLnVwZGF0ZSh2YWwsIG9sZFZhbClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl91cGRhdGUgPSBub29wXG4gICAgfVxuICAgIHZhciBwcmVQcm9jZXNzID0gdGhpcy5fcHJlUHJvY2Vzc1xuICAgICAgPyBfLmJpbmQodGhpcy5fcHJlUHJvY2VzcywgdGhpcylcbiAgICAgIDogbnVsbFxuICAgIHZhciBwb3N0UHJvY2VzcyA9IHRoaXMuX3Bvc3RQcm9jZXNzXG4gICAgICA/IF8uYmluZCh0aGlzLl9wb3N0UHJvY2VzcywgdGhpcylcbiAgICAgIDogbnVsbFxuICAgIHZhciB3YXRjaGVyID0gdGhpcy5fd2F0Y2hlciA9IG5ldyBXYXRjaGVyKFxuICAgICAgdGhpcy52bSxcbiAgICAgIHRoaXMuZXhwcmVzc2lvbixcbiAgICAgIHRoaXMuX3VwZGF0ZSwgLy8gY2FsbGJhY2tcbiAgICAgIHtcbiAgICAgICAgZmlsdGVyczogdGhpcy5maWx0ZXJzLFxuICAgICAgICB0d29XYXk6IHRoaXMudHdvV2F5LFxuICAgICAgICBkZWVwOiB0aGlzLmRlZXAsXG4gICAgICAgIHByZVByb2Nlc3M6IHByZVByb2Nlc3MsXG4gICAgICAgIHBvc3RQcm9jZXNzOiBwb3N0UHJvY2VzcyxcbiAgICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG4gICAgICB9XG4gICAgKVxuICAgIC8vIHYtbW9kZWwgd2l0aCBpbml0YWwgaW5saW5lIHZhbHVlIG5lZWQgdG8gc3luYyBiYWNrIHRvXG4gICAgLy8gbW9kZWwgaW5zdGVhZCBvZiB1cGRhdGUgdG8gRE9NIG9uIGluaXQuIFRoZXkgd291bGRcbiAgICAvLyBzZXQgdGhlIGFmdGVyQmluZCBob29rIHRvIGluZGljYXRlIHRoYXQuXG4gICAgaWYgKHRoaXMuYWZ0ZXJCaW5kKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCgpXG4gICAgfSBlbHNlIGlmICh0aGlzLnVwZGF0ZSkge1xuICAgICAgdGhpcy51cGRhdGUod2F0Y2hlci52YWx1ZSlcbiAgICB9XG4gIH1cbiAgdGhpcy5fYm91bmQgPSB0cnVlXG59XG5cbi8qKlxuICogU2V0dXAgYWxsIHBhcmFtIGF0dHJpYnV0ZXMsIGUuZy4gdHJhY2stYnksXG4gKiB0cmFuc2l0aW9uLW1vZGUsIGV0Yy4uLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMucGFyYW1zKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIHBhcmFtcyA9IHRoaXMucGFyYW1zXG4gIC8vIHN3YXAgdGhlIHBhcmFtcyBhcnJheSB3aXRoIGEgZnJlc2ggb2JqZWN0LlxuICB0aGlzLnBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgdmFyIGkgPSBwYXJhbXMubGVuZ3RoXG4gIHZhciBrZXksIHZhbCwgbWFwcGVkS2V5XG4gIHdoaWxlIChpLS0pIHtcbiAgICBrZXkgPSBwYXJhbXNbaV1cbiAgICBtYXBwZWRLZXkgPSBfLmNhbWVsaXplKGtleSlcbiAgICB2YWwgPSBfLmdldEJpbmRBdHRyKHRoaXMuZWwsIGtleSlcbiAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgIC8vIGR5bmFtaWNcbiAgICAgIHRoaXMuX3NldHVwUGFyYW1XYXRjaGVyKG1hcHBlZEtleSwgdmFsKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzdGF0aWNcbiAgICAgIHZhbCA9IF8uYXR0cih0aGlzLmVsLCBrZXkpXG4gICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXJhbXNbbWFwcGVkS2V5XSA9IHZhbCA9PT0gJycgPyB0cnVlIDogdmFsXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2V0dXAgYSB3YXRjaGVyIGZvciBhIGR5bmFtaWMgcGFyYW0uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtTdHJpbmd9IGV4cHJlc3Npb25cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtV2F0Y2hlciA9IGZ1bmN0aW9uIChrZXksIGV4cHJlc3Npb24pIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHZhciBjYWxsZWQgPSBmYWxzZVxuICB2YXIgdW53YXRjaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kd2F0Y2goZXhwcmVzc2lvbiwgZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG4gICAgc2VsZi5wYXJhbXNba2V5XSA9IHZhbFxuICAgIC8vIHNpbmNlIHdlIGFyZSBpbiBpbW1lZGlhdGUgbW9kZSxcbiAgICAvLyBvbmx5IGNhbGwgdGhlIHBhcmFtIGNoYW5nZSBjYWxsYmFja3MgaWYgdGhpcyBpcyBub3QgdGhlIGZpcnN0IHVwZGF0ZS5cbiAgICBpZiAoY2FsbGVkKSB7XG4gICAgICB2YXIgY2IgPSBzZWxmLnBhcmFtV2F0Y2hlcnMgJiYgc2VsZi5wYXJhbVdhdGNoZXJzW2tleV1cbiAgICAgIGlmIChjYikge1xuICAgICAgICBjYi5jYWxsKHNlbGYsIHZhbCwgb2xkVmFsKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsZWQgPSB0cnVlXG4gICAgfVxuICB9LCB7XG4gICAgaW1tZWRpYXRlOiB0cnVlXG4gIH0pXG4gIDsodGhpcy5fcGFyYW1VbndhdGNoRm5zIHx8ICh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgPSBbXSkpLnB1c2godW53YXRjaClcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZGlyZWN0aXZlIGlzIGEgZnVuY3Rpb24gY2FsbGVyXG4gKiBhbmQgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBjYWxsYWJsZSBvbmUuIElmIGJvdGggdHJ1ZSxcbiAqIHdlIHdyYXAgdXAgdGhlIGV4cHJlc3Npb24gYW5kIHVzZSBpdCBhcyB0aGUgZXZlbnRcbiAqIGhhbmRsZXIuXG4gKlxuICogZS5nLiBvbi1jbGljaz1cImErK1wiXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9jaGVja1N0YXRlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmV4cHJlc3Npb25cbiAgaWYgKFxuICAgIGV4cHJlc3Npb24gJiYgdGhpcy5hY2NlcHRTdGF0ZW1lbnQgJiZcbiAgICAhZXhwUGFyc2VyLmlzU2ltcGxlUGF0aChleHByZXNzaW9uKVxuICApIHtcbiAgICB2YXIgZm4gPSBleHBQYXJzZXIucGFyc2UoZXhwcmVzc2lvbikuZ2V0XG4gICAgdmFyIHNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bVxuICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHNjb3BlLiRldmVudCA9IGVcbiAgICAgIGZuLmNhbGwoc2NvcGUsIHNjb3BlKVxuICAgICAgc2NvcGUuJGV2ZW50ID0gbnVsbFxuICAgIH1cbiAgICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgICBoYW5kbGVyID0gc2NvcGUuX2FwcGx5RmlsdGVycyhoYW5kbGVyLCBudWxsLCB0aGlzLmZpbHRlcnMpXG4gICAgfVxuICAgIHRoaXMudXBkYXRlKGhhbmRsZXIpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG4vKipcbiAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG4gKiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdHdvLXdheSBkaXJlY3RpdmVzXG4gKiBlLmcuIHYtbW9kZWwuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHB1YmxpY1xuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmICh0aGlzLnR3b1dheSkge1xuICAgIHRoaXMuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3dhdGNoZXIuc2V0KHZhbHVlKVxuICAgIH0pXG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIF8ud2FybihcbiAgICAgICdEaXJlY3RpdmUuc2V0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgdHdvV2F5JyArXG4gICAgICAnZGlyZWN0aXZlcy4nXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogRXhlY3V0ZSBhIGZ1bmN0aW9uIHdoaWxlIHByZXZlbnRpbmcgdGhhdCBmdW5jdGlvbiBmcm9tXG4gKiB0cmlnZ2VyaW5nIHVwZGF0ZXMgb24gdGhpcyBkaXJlY3RpdmUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl93aXRoTG9jayA9IGZ1bmN0aW9uIChmbikge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgc2VsZi5fbG9ja2VkID0gdHJ1ZVxuICBmbi5jYWxsKHNlbGYpXG4gIF8ubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgIHNlbGYuX2xvY2tlZCA9IGZhbHNlXG4gIH0pXG59XG5cbi8qKlxuICogQ29udmVuaWVuY2UgbWV0aG9kIHRoYXQgYXR0YWNoZXMgYSBET00gZXZlbnQgbGlzdGVuZXJcbiAqIHRvIHRoZSBkaXJlY3RpdmUgZWxlbWVudCBhbmQgYXV0b21ldGljYWxseSB0ZWFycyBpdCBkb3duXG4gKiBkdXJpbmcgdW5iaW5kLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIpIHtcbiAgXy5vbih0aGlzLmVsLCBldmVudCwgaGFuZGxlcilcbiAgOyh0aGlzLl9saXN0ZW5lcnMgfHwgKHRoaXMuX2xpc3RlbmVycyA9IFtdKSlcbiAgICAucHVzaChbZXZlbnQsIGhhbmRsZXJdKVxufVxuXG4vKipcbiAqIFRlYXJkb3duIHRoZSB3YXRjaGVyIGFuZCBjYWxsIHVuYmluZC5cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl90ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuX2JvdW5kKSB7XG4gICAgdGhpcy5fYm91bmQgPSBmYWxzZVxuICAgIGlmICh0aGlzLnVuYmluZCkge1xuICAgICAgdGhpcy51bmJpbmQoKVxuICAgIH1cbiAgICBpZiAodGhpcy5fd2F0Y2hlcikge1xuICAgICAgdGhpcy5fd2F0Y2hlci50ZWFyZG93bigpXG4gICAgfVxuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNcbiAgICB2YXIgaVxuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGkgPSBsaXN0ZW5lcnMubGVuZ3RoXG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIF8ub2ZmKHRoaXMuZWwsIGxpc3RlbmVyc1tpXVswXSwgbGlzdGVuZXJzW2ldWzFdKVxuICAgICAgfVxuICAgIH1cbiAgICB2YXIgdW53YXRjaEZucyA9IHRoaXMuX3BhcmFtVW53YXRjaEZuc1xuICAgIGlmICh1bndhdGNoRm5zKSB7XG4gICAgICBpID0gdW53YXRjaEZucy5sZW5ndGhcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdW53YXRjaEZuc1tpXSgpXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcbiAgICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLiRyZW1vdmUodGhpcylcbiAgICB9XG4gICAgdGhpcy52bSA9IHRoaXMuZWwgPSB0aGlzLl93YXRjaGVyID0gdGhpcy5fbGlzdGVuZXJzID0gbnVsbFxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRGlyZWN0aXZlXG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4vcGFyc2Vycy9leHByZXNzaW9uXCI6NjEsXCIuL3V0aWxcIjo3MixcIi4vd2F0Y2hlclwiOjc2LFwiX3Byb2Nlc3NcIjoxfV0sMjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuZXhwb3J0cy5zbG90ID0gcmVxdWlyZSgnLi9zbG90JylcbmV4cG9ydHMucGFydGlhbCA9IHJlcXVpcmUoJy4vcGFydGlhbCcpXG5cbn0se1wiLi9wYXJ0aWFsXCI6MjQsXCIuL3Nsb3RcIjoyNX1dLDI0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxudmFyIHZJZiA9IHJlcXVpcmUoJy4uL3B1YmxpYy9pZicpXG52YXIgRnJhZ21lbnRGYWN0b3J5ID0gcmVxdWlyZSgnLi4vLi4vZnJhZ21lbnQvZmFjdG9yeScpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIHByaW9yaXR5OiAxNzUwLFxuXG4gIHBhcmFtczogWyduYW1lJ10sXG5cbiAgLy8gd2F0Y2ggY2hhbmdlcyB0byBuYW1lIGZvciBkeW5hbWljIHBhcnRpYWxzXG4gIHBhcmFtV2F0Y2hlcnM6IHtcbiAgICBuYW1lOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHZJZi5yZW1vdmUuY2FsbCh0aGlzKVxuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0KHZhbHVlKVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hbmNob3IgPSBfLmNyZWF0ZUFuY2hvcigndi1wYXJ0aWFsJylcbiAgICBfLnJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpXG4gICAgdGhpcy5pbnNlcnQodGhpcy5wYXJhbXMubmFtZSlcbiAgfSxcblxuICBpbnNlcnQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIHZhciBwYXJ0aWFsID0gXy5yZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3BhcnRpYWxzJywgaWQpXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIF8uYXNzZXJ0QXNzZXQocGFydGlhbCwgJ3BhcnRpYWwnLCBpZClcbiAgICB9XG4gICAgaWYgKHBhcnRpYWwpIHtcbiAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgcGFydGlhbClcbiAgICAgIHZJZi5pbnNlcnQuY2FsbCh0aGlzKVxuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcuZGVzdHJveSgpXG4gICAgfVxuICB9XG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4uLy4uL2ZyYWdtZW50L2ZhY3RvcnlcIjo1MCxcIi4uLy4uL3V0aWxcIjo3MixcIi4uL3B1YmxpYy9pZlwiOjM3LFwiX3Byb2Nlc3NcIjoxfV0sMjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIF8gPSByZXF1aXJlKCcuLi8uLi91dGlsJylcbnZhciB0ZW1wbGF0ZVBhcnNlciA9IHJlcXVpcmUoJy4uLy4uL3BhcnNlcnMvdGVtcGxhdGUnKVxuXG4vLyBUaGlzIGlzIHRoZSBlbGVtZW50RGlyZWN0aXZlIHRoYXQgaGFuZGxlcyA8Y29udGVudD5cbi8vIHRyYW5zY2x1c2lvbnMuIEl0IHJlbGllcyBvbiB0aGUgcmF3IGNvbnRlbnQgb2YgYW5cbi8vIGluc3RhbmNlIGJlaW5nIHN0b3JlZCBhcyBgJG9wdGlvbnMuX2NvbnRlbnRgIGR1cmluZ1xuLy8gdGhlIHRyYW5zY2x1ZGUgcGhhc2UuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIHByaW9yaXR5OiAxNzUwLFxuXG4gIHBhcmFtczogWyduYW1lJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBob3N0ID0gdGhpcy52bVxuICAgIHZhciByYXcgPSBob3N0LiRvcHRpb25zLl9jb250ZW50XG4gICAgdmFyIGNvbnRlbnRcbiAgICBpZiAoIXJhdykge1xuICAgICAgdGhpcy5mYWxsYmFjaygpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdmFyIGNvbnRleHQgPSBob3N0Ll9jb250ZXh0XG4gICAgdmFyIHNsb3ROYW1lID0gdGhpcy5wYXJhbXMubmFtZVxuICAgIGlmICghc2xvdE5hbWUpIHtcbiAgICAgIC8vIERlZmF1bHQgY29udGVudFxuICAgICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgICB2YXIgY29tcGlsZURlZmF1bHRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmNvbXBpbGUoXG4gICAgICAgICAgZXh0cmFjdEZyYWdtZW50KHJhdy5jaGlsZE5vZGVzLCByYXcsIHRydWUpLFxuICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgaG9zdFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoIWhvc3QuX2lzQ29tcGlsZWQpIHtcbiAgICAgICAgLy8gZGVmZXIgdW50aWwgdGhlIGVuZCBvZiBpbnN0YW5jZSBjb21waWxhdGlvbixcbiAgICAgICAgLy8gYmVjYXVzZSB0aGUgZGVmYXVsdCBvdXRsZXQgbXVzdCB3YWl0IHVudGlsIGFsbFxuICAgICAgICAvLyBvdGhlciBwb3NzaWJsZSBvdXRsZXRzIHdpdGggc2VsZWN0b3JzIGhhdmUgcGlja2VkXG4gICAgICAgIC8vIG91dCB0aGVpciBjb250ZW50cy5cbiAgICAgICAgaG9zdC4kb25jZSgnaG9vazpjb21waWxlZCcsIGNvbXBpbGVEZWZhdWx0Q29udGVudClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBpbGVEZWZhdWx0Q29udGVudCgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzZWxlY3RvciA9ICdbc2xvdD1cIicgKyBzbG90TmFtZSArICdcIl0nXG4gICAgICB2YXIgbm9kZXMgPSByYXcucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcilcbiAgICAgIGlmIChub2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgY29udGVudCA9IGV4dHJhY3RGcmFnbWVudChub2RlcywgcmF3KVxuICAgICAgICBpZiAoY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICB0aGlzLmNvbXBpbGUoY29udGVudCwgY29udGV4dCwgaG9zdClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmZhbGxiYWNrKClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mYWxsYmFjaygpXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGZhbGxiYWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jb21waWxlKF8uZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSksIHRoaXMudm0pXG4gIH0sXG5cbiAgY29tcGlsZTogZnVuY3Rpb24gKGNvbnRlbnQsIGNvbnRleHQsIGhvc3QpIHtcbiAgICBpZiAoY29udGVudCAmJiBjb250ZXh0KSB7XG4gICAgICB2YXIgc2NvcGUgPSBob3N0XG4gICAgICAgID8gaG9zdC5fc2NvcGVcbiAgICAgICAgOiB0aGlzLl9zY29wZVxuICAgICAgdGhpcy51bmxpbmsgPSBjb250ZXh0LiRjb21waWxlKFxuICAgICAgICBjb250ZW50LCBob3N0LCBzY29wZSwgdGhpcy5fZnJhZ1xuICAgICAgKVxuICAgIH1cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgXy5yZXBsYWNlKHRoaXMuZWwsIGNvbnRlbnQpXG4gICAgfSBlbHNlIHtcbiAgICAgIF8ucmVtb3ZlKHRoaXMuZWwpXG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnVubGluaykge1xuICAgICAgdGhpcy51bmxpbmsoKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgcXVhbGlmaWVkIGNvbnRlbnQgbm9kZXMgZnJvbSBhIG5vZGUgbGlzdC5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fSBub2Rlc1xuICogQHBhcmFtIHtFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbWFpblxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQgKG5vZGVzLCBwYXJlbnQsIG1haW4pIHtcbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgbm9kZSA9IG5vZGVzW2ldXG4gICAgLy8gaWYgdGhpcyBpcyB0aGUgbWFpbiBvdXRsZXQsIHdlIHdhbnQgdG8gc2tpcCBhbGxcbiAgICAvLyBwcmV2aW91c2x5IHNlbGVjdGVkIG5vZGVzO1xuICAgIC8vIG90aGVyd2lzZSwgd2Ugd2FudCB0byBtYXJrIHRoZSBub2RlIGFzIHNlbGVjdGVkLlxuICAgIC8vIGNsb25lIHRoZSBub2RlIHNvIHRoZSBvcmlnaW5hbCByYXcgY29udGVudCByZW1haW5zXG4gICAgLy8gaW50YWN0LiB0aGlzIGVuc3VyZXMgcHJvcGVyIHJlLWNvbXBpbGF0aW9uIGluIGNhc2VzXG4gICAgLy8gd2hlcmUgdGhlIG91dGxldCBpcyBpbnNpZGUgYSBjb25kaXRpb25hbCBibG9ja1xuICAgIGlmIChtYWluICYmICFub2RlLl9fdl9zZWxlY3RlZCkge1xuICAgICAgYXBwZW5kKG5vZGUpXG4gICAgfSBlbHNlIGlmICghbWFpbiAmJiBub2RlLnBhcmVudE5vZGUgPT09IHBhcmVudCkge1xuICAgICAgbm9kZS5fX3Zfc2VsZWN0ZWQgPSB0cnVlXG4gICAgICBhcHBlbmQobm9kZSlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZyYWdcblxuICBmdW5jdGlvbiBhcHBlbmQgKG5vZGUpIHtcbiAgICBpZiAoXy5pc1RlbXBsYXRlKG5vZGUpICYmXG4gICAgICAgICFub2RlLmhhc0F0dHJpYnV0ZSgndi1pZicpICYmXG4gICAgICAgICFub2RlLmhhc0F0dHJpYnV0ZSgndi1mb3InKSkge1xuICAgICAgbm9kZSA9IHRlbXBsYXRlUGFyc2VyLnBhcnNlKG5vZGUpXG4gICAgfVxuICAgIG5vZGUgPSB0ZW1wbGF0ZVBhcnNlci5jbG9uZShub2RlKVxuICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSlcbiAgfVxufVxuXG59LHtcIi4uLy4uL3BhcnNlcnMvdGVtcGxhdGVcIjo2MyxcIi4uLy4uL3V0aWxcIjo3Mn1dLDI2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpXG52YXIgYWRkQ2xhc3MgPSBfLmFkZENsYXNzXG52YXIgcmVtb3ZlQ2xhc3MgPSBfLnJlbW92ZUNsYXNzXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIGRlZXA6IHRydWUsXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3Qoc3RyaW5nVG9PYmplY3QodmFsdWUpKVxuICAgIH0gZWxzZSBpZiAoXy5pc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUpXG4gICAgfSBlbHNlIGlmIChfLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB0aGlzLmhhbmRsZUFycmF5KHZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsZWFudXAoKVxuICAgIH1cbiAgfSxcblxuICBoYW5kbGVPYmplY3Q6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHRoaXMuY2xlYW51cCh2YWx1ZSlcbiAgICB2YXIga2V5cyA9IHRoaXMucHJldktleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSlcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXVxuICAgICAgaWYgKHZhbHVlW2tleV0pIHtcbiAgICAgICAgYWRkQ2xhc3ModGhpcy5lbCwga2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwga2V5KVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBoYW5kbGVBcnJheTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5jbGVhbnVwKHZhbHVlKVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpZiAodmFsdWVbaV0pIHtcbiAgICAgICAgYWRkQ2xhc3ModGhpcy5lbCwgdmFsdWVbaV0pXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucHJldktleXMgPSB2YWx1ZS5zbGljZSgpXG4gIH0sXG5cbiAgY2xlYW51cDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMucHJldktleXMpIHtcbiAgICAgIHZhciBpID0gdGhpcy5wcmV2S2V5cy5sZW5ndGhcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdmFyIGtleSA9IHRoaXMucHJldktleXNbaV1cbiAgICAgICAgaWYgKGtleSAmJiAoIXZhbHVlIHx8ICFjb250YWlucyh2YWx1ZSwga2V5KSkpIHtcbiAgICAgICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCBrZXkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RyaW5nVG9PYmplY3QgKHZhbHVlKSB7XG4gIHZhciByZXMgPSB7fVxuICB2YXIga2V5cyA9IHZhbHVlLnRyaW0oKS5zcGxpdCgvXFxzKy8pXG4gIHZhciBpID0ga2V5cy5sZW5ndGhcbiAgd2hpbGUgKGktLSkge1xuICAgIHJlc1trZXlzW2ldXSA9IHRydWVcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGNvbnRhaW5zICh2YWx1ZSwga2V5KSB7XG4gIHJldHVybiBfLmlzQXJyYXkodmFsdWUpXG4gICAgPyB2YWx1ZS5pbmRleE9mKGtleSkgPiAtMVxuICAgIDogdmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KVxufVxuXG59LHtcIi4uLy4uL3V0aWxcIjo3Mn1dLDI3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxudmFyIHRlbXBsYXRlUGFyc2VyID0gcmVxdWlyZSgnLi4vLi4vcGFyc2Vycy90ZW1wbGF0ZScpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIHByaW9yaXR5OiAxNTAwLFxuXG4gIHBhcmFtczogW1xuICAgICdrZWVwLWFsaXZlJyxcbiAgICAndHJhbnNpdGlvbi1tb2RlJyxcbiAgICAnaW5saW5lLXRlbXBsYXRlJ1xuICBdLFxuXG4gIC8qKlxuICAgKiBTZXR1cC4gVHdvIHBvc3NpYmxlIHVzYWdlczpcbiAgICpcbiAgICogLSBzdGF0aWM6XG4gICAqICAgPGNvbXA+IG9yIDxkaXYgdi1jb21wb25lbnQ9XCJjb21wXCI+XG4gICAqXG4gICAqIC0gZHluYW1pYzpcbiAgICogICA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cbiAgICovXG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5lbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXG4gICAgICB0aGlzLmtlZXBBbGl2ZSA9IHRoaXMucGFyYW1zLmtlZXBBbGl2ZVxuICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSB7fVxuICAgICAgfVxuICAgICAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlXG4gICAgICBpZiAodGhpcy5wYXJhbXMuaW5saW5lVGVtcGxhdGUpIHtcbiAgICAgICAgLy8gZXh0cmFjdCBpbmxpbmUgdGVtcGxhdGUgYXMgYSBEb2N1bWVudEZyYWdtZW50XG4gICAgICAgIHRoaXMuaW5saW5lVGVtcGxhdGUgPSBfLmV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpXG4gICAgICB9XG4gICAgICAvLyBjb21wb25lbnQgcmVzb2x1dGlvbiByZWxhdGVkIHN0YXRlXG4gICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9XG4gICAgICB0aGlzLkNvbXBvbmVudCA9IG51bGxcbiAgICAgIC8vIHRyYW5zaXRpb24gcmVsYXRlZCBzdGF0ZVxuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMgPSAwXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsXG4gICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXG4gICAgICB0aGlzLmFuY2hvciA9IF8uY3JlYXRlQW5jaG9yKCd2LWNvbXBvbmVudCcpXG4gICAgICBfLnJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpXG4gICAgICAvLyByZW1vdmUgaXMgYXR0cmlidXRlLlxuICAgICAgLy8gdGhpcyBpcyByZW1vdmVkIGR1cmluZyBjb21waWxhdGlvbiwgYnV0IGJlY2F1c2UgY29tcGlsYXRpb24gaXNcbiAgICAgIC8vIGNhY2hlZCwgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVzZWQgZWxzZXdoZXJlIHRoaXMgYXR0cmlidXRlXG4gICAgICAvLyB3aWxsIHJlbWFpbiBhdCBsaW5rIHRpbWUuXG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKVxuICAgICAgLy8gcmVtb3ZlIHJlZiwgc2FtZSBhcyBhYm92ZVxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtcmVmOicgKyBfLmh5cGhlbmF0ZSh0aGlzLmRlc2NyaXB0b3IucmVmKSlcbiAgICAgIH1cbiAgICAgIC8vIGlmIHN0YXRpYywgYnVpbGQgcmlnaHQgbm93LlxuICAgICAgaWYgKHRoaXMubGl0ZXJhbCkge1xuICAgICAgICB0aGlzLnNldENvbXBvbmVudCh0aGlzLmV4cHJlc3Npb24pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAnY2Fubm90IG1vdW50IGNvbXBvbmVudCBcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgJyArXG4gICAgICAgICdvbiBhbHJlYWR5IG1vdW50ZWQgZWxlbWVudDogJyArIHRoaXMuZWxcbiAgICAgIClcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFB1YmxpYyB1cGRhdGUsIGNhbGxlZCBieSB0aGUgd2F0Y2hlciBpbiB0aGUgZHluYW1pY1xuICAgKiBsaXRlcmFsIHNjZW5hcmlvLCBlLmcuIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuICAgKi9cblxuICB1cGRhdGU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICghdGhpcy5saXRlcmFsKSB7XG4gICAgICB0aGlzLnNldENvbXBvbmVudCh2YWx1ZSlcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFN3aXRjaCBkeW5hbWljIGNvbXBvbmVudHMuIE1heSByZXNvbHZlIHRoZSBjb21wb25lbnRcbiAgICogYXN5bmNocm9ub3VzbHksIGFuZCBwZXJmb3JtIHRyYW5zaXRpb24gYmFzZWQgb25cbiAgICogc3BlY2lmaWVkIHRyYW5zaXRpb24gbW9kZS4gQWNjZXB0cyBhIGZldyBhZGRpdGlvbmFsXG4gICAqIGFyZ3VtZW50cyBzcGVjaWZpY2FsbHkgZm9yIHZ1ZS1yb3V0ZXIuXG4gICAqXG4gICAqIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgZnVsbCB0cmFuc2l0aW9uIGlzXG4gICAqIGZpbmlzaGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBzZXRDb21wb25lbnQ6IGZ1bmN0aW9uICh2YWx1ZSwgY2IpIHtcbiAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKClcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAvLyBqdXN0IHJlbW92ZSBjdXJyZW50XG4gICAgICB0aGlzLnVuYnVpbGQodHJ1ZSlcbiAgICAgIHRoaXMucmVtb3ZlKHRoaXMuY2hpbGRWTSwgY2IpXG4gICAgICB0aGlzLmNoaWxkVk0gPSBudWxsXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzZWxmID0gdGhpc1xuICAgICAgdGhpcy5yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYubW91bnRDb21wb25lbnQoY2IpXG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG4gICAqIHRoZSBjaGlsZCB2bS5cbiAgICovXG5cbiAgcmVzb2x2ZUNvbXBvbmVudDogZnVuY3Rpb24gKGlkLCBjYikge1xuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gXy5jYW5jZWxsYWJsZShmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgICBzZWxmLkNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQub3B0aW9ucy5uYW1lIHx8IGlkXG4gICAgICBzZWxmLkNvbXBvbmVudCA9IENvbXBvbmVudFxuICAgICAgY2IoKVxuICAgIH0pXG4gICAgdGhpcy52bS5fcmVzb2x2ZUNvbXBvbmVudChpZCwgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpXG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSB1c2luZyB0aGUgY3VycmVudCBjb25zdHJ1Y3RvciBhbmRcbiAgICogcmVwbGFjZSB0aGUgZXhpc3RpbmcgaW5zdGFuY2UuIFRoaXMgbWV0aG9kIGRvZXNuJ3QgY2FyZVxuICAgKiB3aGV0aGVyIHRoZSBuZXcgY29tcG9uZW50IGFuZCB0aGUgb2xkIG9uZSBhcmUgYWN0dWFsbHlcbiAgICogdGhlIHNhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChjYikge1xuICAgIC8vIGFjdHVhbCBtb3VudFxuICAgIHRoaXMudW5idWlsZCh0cnVlKVxuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHZhciBhY3RpdmF0ZUhvb2sgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlXG4gICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKClcbiAgICB2YXIgbmV3Q29tcG9uZW50ID0gdGhpcy5idWlsZCgpXG4gICAgaWYgKGFjdGl2YXRlSG9vayAmJiAhY2FjaGVkKSB7XG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBuZXdDb21wb25lbnRcbiAgICAgIGFjdGl2YXRlSG9vay5jYWxsKG5ld0NvbXBvbmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsXG4gICAgICAgIHNlbGYudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIHJlZiBmb3Iga2VwdC1hbGl2ZSBjb21wb25lbnRcbiAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKVxuICAgICAgfVxuICAgICAgdGhpcy50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBjb21wb25lbnQgY2hhbmdlcyBvciB1bmJpbmRzIGJlZm9yZSBhbiBhc3luY1xuICAgKiBjb25zdHJ1Y3RvciBpcyByZXNvbHZlZCwgd2UgbmVlZCB0byBpbnZhbGlkYXRlIGl0c1xuICAgKiBwZW5kaW5nIGNhbGxiYWNrLlxuICAgKi9cblxuICBpbnZhbGlkYXRlUGVuZGluZzogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnBlbmRpbmdDb21wb25lbnRDYikge1xuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IuY2FuY2VsKClcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gbnVsbFxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5zdGFudGlhdGUvaW5zZXJ0IGEgbmV3IGNoaWxkIHZtLlxuICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxuICAgKiBpbnN0YW5jZTsgb3RoZXJ3aXNlIGJ1aWxkIGEgbmV3IG9uZSBhbmQgY2FjaGUgaXQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxuICAgKiBAcmV0dXJuIHtWdWV9IC0gdGhlIGNyZWF0ZWQgaW5zdGFuY2VcbiAgICovXG5cbiAgYnVpbGQ6IGZ1bmN0aW9uIChleHRyYU9wdGlvbnMpIHtcbiAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKVxuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgIHJldHVybiBjYWNoZWRcbiAgICB9XG4gICAgaWYgKHRoaXMuQ29tcG9uZW50KSB7XG4gICAgICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBuYW1lOiB0aGlzLkNvbXBvbmVudE5hbWUsXG4gICAgICAgIGVsOiB0ZW1wbGF0ZVBhcnNlci5jbG9uZSh0aGlzLmVsKSxcbiAgICAgICAgdGVtcGxhdGU6IHRoaXMuaW5saW5lVGVtcGxhdGUsXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0byBhZGQgdGhlIGNoaWxkIHdpdGggY29ycmVjdCBwYXJlbnRcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgaXRzIHBhcmVudFxuICAgICAgICAvLyBzaG91bGQgYmUgdGhlIHRyYW5zY2x1c2lvbiBob3N0LlxuICAgICAgICBwYXJlbnQ6IHRoaXMuX2hvc3QgfHwgdGhpcy52bSxcbiAgICAgICAgLy8gaWYgbm8gaW5saW5lLXRlbXBsYXRlLCB0aGVuIHRoZSBjb21waWxlZFxuICAgICAgICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLlxuICAgICAgICBfbGlua2VyQ2FjaGFibGU6ICF0aGlzLmlubGluZVRlbXBsYXRlLFxuICAgICAgICBfcmVmOiB0aGlzLmRlc2NyaXB0b3IucmVmLFxuICAgICAgICBfYXNDb21wb25lbnQ6IHRydWUsXG4gICAgICAgIF9pc1JvdXRlclZpZXc6IHRoaXMuX2lzUm91dGVyVmlldyxcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuICAgICAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgICAgICAgLy8gYW5kIGl0cyBob3N0LlxuICAgICAgICBfY29udGV4dDogdGhpcy52bSxcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcbiAgICAgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcbiAgICAgICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcbiAgICAgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgICAgICBfc2NvcGU6IHRoaXMuX3Njb3BlLFxuICAgICAgICAvLyBwYXNzIGluIHRoZSBvd25lciBmcmFnbWVudCBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3Nhcnkgc28gdGhhdCB0aGUgZnJhZ21lbnQgY2FuIGtlZXBcbiAgICAgICAgLy8gdHJhY2sgb2YgaXRzIGNvbnRhaW5lZCBjb21wb25lbnRzIGluIG9yZGVyIHRvXG4gICAgICAgIC8vIGNhbGwgYXR0YWNoL2RldGFjaCBob29rcyBmb3IgdGhlbS5cbiAgICAgICAgX2ZyYWc6IHRoaXMuX2ZyYWdcbiAgICAgIH1cbiAgICAgIC8vIGV4dHJhIG9wdGlvbnNcbiAgICAgIC8vIGluIDEuMC4wIHRoaXMgaXMgdXNlZCBieSB2dWUtcm91dGVyIG9ubHlcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGV4dHJhT3B0aW9ucykge1xuICAgICAgICBfLmV4dGVuZChvcHRpb25zLCBleHRyYU9wdGlvbnMpXG4gICAgICB9XG4gICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5Db21wb25lbnQob3B0aW9ucylcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZFxuICAgICAgfVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICAgIHRoaXMuZWwuaGFzQXR0cmlidXRlKCd0cmFuc2l0aW9uJykgJiZcbiAgICAgICAgICBjaGlsZC5faXNGcmFnbWVudCkge1xuICAgICAgICBfLndhcm4oXG4gICAgICAgICAgJ1RyYW5zaXRpb25zIHdpbGwgbm90IHdvcmsgb24gYSBmcmFnbWVudCBpbnN0YW5jZS4gJyArXG4gICAgICAgICAgJ1RlbXBsYXRlOiAnICsgY2hpbGQuJG9wdGlvbnMudGVtcGxhdGVcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNoaWxkXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUcnkgdG8gZ2V0IGEgY2FjaGVkIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IGNvbXBvbmVudC5cbiAgICpcbiAgICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cbiAgICovXG5cbiAgZ2V0Q2FjaGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMua2VlcEFsaXZlICYmIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXVxuICB9LFxuXG4gIC8qKlxuICAgKiBUZWFyZG93biB0aGUgY3VycmVudCBjaGlsZCwgYnV0IGRlZmVycyBjbGVhbnVwIHNvXG4gICAqIHRoYXQgd2UgY2FuIHNlcGFyYXRlIHRoZSBkZXN0cm95IGFuZCByZW1vdmFsIHN0ZXBzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyXG4gICAqL1xuXG4gIHVuYnVpbGQ6IGZ1bmN0aW9uIChkZWZlcikge1xuICAgIGlmICh0aGlzLndhaXRpbmdGb3IpIHtcbiAgICAgIHRoaXMud2FpdGluZ0Zvci4kZGVzdHJveSgpXG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBudWxsXG4gICAgfVxuICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRWTVxuICAgIGlmICghY2hpbGQgfHwgdGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAvLyByZW1vdmUgcmVmXG4gICAgICAgIGNoaWxkLl91cGRhdGVSZWYodHJ1ZSlcbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cbiAgICAvLyB0aGUgc29sZSBwdXJwb3NlIG9mIGBkZWZlckNsZWFudXBgIGlzIHNvIHRoYXQgd2UgY2FuXG4gICAgLy8gXCJkZWFjdGl2YXRlXCIgdGhlIHZtIHJpZ2h0IG5vdyBhbmQgcGVyZm9ybSBET00gcmVtb3ZhbFxuICAgIC8vIGxhdGVyLlxuICAgIGNoaWxkLiRkZXN0cm95KGZhbHNlLCBkZWZlcilcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGN1cnJlbnQgZGVzdHJveWVkIGNoaWxkIGFuZCBtYW51YWxseSBkb1xuICAgKiB0aGUgY2xlYW51cCBhZnRlciByZW1vdmFsLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICByZW1vdmU6IGZ1bmN0aW9uIChjaGlsZCwgY2IpIHtcbiAgICB2YXIga2VlcEFsaXZlID0gdGhpcy5rZWVwQWxpdmVcbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIC8vIHdlIG1heSBoYXZlIGEgY29tcG9uZW50IHN3aXRjaCB3aGVuIGEgcHJldmlvdXNcbiAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxuICAgICAgLy8gd2Ugd2FudCB0byB0cmlnZ2VyIG9ubHkgb25lIGxhc3Rlc3QgaW5zZXJ0aW9uIGNiXG4gICAgICAvLyB3aGVuIHRoZSBleGlzdGluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLiAoIzExMTkpXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBjYlxuICAgICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbHMtLVxuICAgICAgICBpZiAoIWtlZXBBbGl2ZSkgY2hpbGQuX2NsZWFudXAoKVxuICAgICAgICBpZiAoIXNlbGYucGVuZGluZ1JlbW92YWxzICYmIHNlbGYucGVuZGluZ1JlbW92YWxDYikge1xuICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYigpXG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoY2IpIHtcbiAgICAgIGNiKClcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFjdHVhbGx5IHN3YXAgdGhlIGNvbXBvbmVudHMsIGRlcGVuZGluZyBvbiB0aGVcbiAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICB0cmFuc2l0aW9uOiBmdW5jdGlvbiAodGFyZ2V0LCBjYikge1xuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHZhciBjdXJyZW50ID0gdGhpcy5jaGlsZFZNXG4gICAgLy8gZm9yIGRldnRvb2wgaW5zcGVjdGlvblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY3VycmVudCkgY3VycmVudC5faW5hY3RpdmUgPSB0cnVlXG4gICAgICB0YXJnZXQuX2luYWN0aXZlID0gZmFsc2VcbiAgICB9XG4gICAgdGhpcy5jaGlsZFZNID0gdGFyZ2V0XG4gICAgc3dpdGNoIChzZWxmLnBhcmFtcy50cmFuc2l0aW9uTW9kZSkge1xuICAgICAgY2FzZSAnaW4tb3V0JzpcbiAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBjYilcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ291dC1pbic6XG4gICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50KVxuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBVbmJpbmQuXG4gICAqL1xuXG4gIHVuYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKVxuICAgIC8vIERvIG5vdCBkZWZlciBjbGVhbnVwIHdoZW4gdW5iaW5kaW5nXG4gICAgdGhpcy51bmJ1aWxkKClcbiAgICAvLyBkZXN0cm95IGFsbCBrZWVwLWFsaXZlIGNhY2hlZCBpbnN0YW5jZXNcbiAgICBpZiAodGhpcy5jYWNoZSkge1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHtcbiAgICAgICAgdGhpcy5jYWNoZVtrZXldLiRkZXN0cm95KClcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FjaGUgPSBudWxsXG4gICAgfVxuICB9XG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4uLy4uL3BhcnNlcnMvdGVtcGxhdGVcIjo2MyxcIi4uLy4uL3V0aWxcIjo3MixcIl9wcm9jZXNzXCI6MX1dLDI4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbmV4cG9ydHMuc3R5bGUgPSByZXF1aXJlKCcuL3N0eWxlJylcbmV4cG9ydHNbJ2NsYXNzJ10gPSByZXF1aXJlKCcuL2NsYXNzJylcbmV4cG9ydHMuY29tcG9uZW50ID0gcmVxdWlyZSgnLi9jb21wb25lbnQnKVxuZXhwb3J0cy5wcm9wID0gcmVxdWlyZSgnLi9wcm9wJylcbmV4cG9ydHMudHJhbnNpdGlvbiA9IHJlcXVpcmUoJy4vdHJhbnNpdGlvbicpXG5cbn0se1wiLi9jbGFzc1wiOjI2LFwiLi9jb21wb25lbnRcIjoyNyxcIi4vcHJvcFwiOjI5LFwiLi9zdHlsZVwiOjMwLFwiLi90cmFuc2l0aW9uXCI6MzF9XSwyOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vLyBOT1RFOiB0aGUgcHJvcCBpbnRlcm5hbCBkaXJlY3RpdmUgaXMgY29tcGlsZWQgYW5kIGxpbmtlZFxuLy8gZHVyaW5nIF9pbml0U2NvcGUoKSwgYmVmb3JlIHRoZSBjcmVhdGVkIGhvb2sgaXMgY2FsbGVkLlxuLy8gVGhlIHB1cnBvc2UgaXMgdG8gbWFrZSB0aGUgaW5pdGlhbCBwcm9wIHZhbHVlcyBhdmFpbGFibGVcbi8vIGluc2lkZSBgY3JlYXRlZGAgaG9va3MgYW5kIGBkYXRhYCBmdW5jdGlvbnMuXG5cbnZhciBfID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpXG52YXIgV2F0Y2hlciA9IHJlcXVpcmUoJy4uLy4uL3dhdGNoZXInKVxudmFyIGJpbmRpbmdNb2RlcyA9IHJlcXVpcmUoJy4uLy4uL2NvbmZpZycpLl9wcm9wQmluZGluZ01vZGVzXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBjaGlsZCA9IHRoaXMudm1cbiAgICB2YXIgcGFyZW50ID0gY2hpbGQuX2NvbnRleHRcbiAgICAvLyBwYXNzZWQgaW4gZnJvbSBjb21waWxlciBkaXJlY3RseVxuICAgIHZhciBwcm9wID0gdGhpcy5kZXNjcmlwdG9yLnByb3BcbiAgICB2YXIgY2hpbGRLZXkgPSBwcm9wLnBhdGhcbiAgICB2YXIgcGFyZW50S2V5ID0gcHJvcC5wYXJlbnRQYXRoXG4gICAgdmFyIHR3b1dheSA9IHByb3AubW9kZSA9PT0gYmluZGluZ01vZGVzLlRXT19XQVlcblxuICAgIHZhciBwYXJlbnRXYXRjaGVyID0gdGhpcy5wYXJlbnRXYXRjaGVyID0gbmV3IFdhdGNoZXIoXG4gICAgICBwYXJlbnQsXG4gICAgICBwYXJlbnRLZXksXG4gICAgICBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIGlmIChfLmFzc2VydFByb3AocHJvcCwgdmFsKSkge1xuICAgICAgICAgIGNoaWxkW2NoaWxkS2V5XSA9IHZhbFxuICAgICAgICB9XG4gICAgICB9LCB7XG4gICAgICAgIHR3b1dheTogdHdvV2F5LFxuICAgICAgICBmaWx0ZXJzOiBwcm9wLmZpbHRlcnMsXG4gICAgICAgIC8vIGltcG9ydGFudDogcHJvcHMgbmVlZCB0byBiZSBvYnNlcnZlZCBvbiB0aGVcbiAgICAgICAgLy8gdi1mb3Igc2NvcGUgaWYgcHJlc2VudFxuICAgICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBzZXQgdGhlIGNoaWxkIGluaXRpYWwgdmFsdWUuXG4gICAgXy5pbml0UHJvcChjaGlsZCwgcHJvcCwgcGFyZW50V2F0Y2hlci52YWx1ZSlcblxuICAgIC8vIHNldHVwIHR3by13YXkgYmluZGluZ1xuICAgIGlmICh0d29XYXkpIHtcbiAgICAgIC8vIGltcG9ydGFudDogZGVmZXIgdGhlIGNoaWxkIHdhdGNoZXIgY3JlYXRpb24gdW50aWxcbiAgICAgIC8vIHRoZSBjcmVhdGVkIGhvb2sgKGFmdGVyIGRhdGEgb2JzZXJ2YXRpb24pXG4gICAgICB2YXIgc2VsZiA9IHRoaXNcbiAgICAgIGNoaWxkLiRvbmNlKCdob29rOmNyZWF0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuY2hpbGRXYXRjaGVyID0gbmV3IFdhdGNoZXIoXG4gICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgY2hpbGRLZXksXG4gICAgICAgICAgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgcGFyZW50V2F0Y2hlci5zZXQodmFsKVxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIC8vIGVuc3VyZSBzeW5jIHVwd2FyZCBiZWZvcmUgcGFyZW50IHN5bmMgZG93bi5cbiAgICAgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGluIGNhc2VzIGUuZy4gdGhlIGNoaWxkXG4gICAgICAgICAgICAvLyBtdXRhdGVzIGEgcHJvcCBhcnJheSwgdGhlbiByZXBsYWNlcyBpdC4gKCMxNjgzKVxuICAgICAgICAgICAgc3luYzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5wYXJlbnRXYXRjaGVyLnRlYXJkb3duKClcbiAgICBpZiAodGhpcy5jaGlsZFdhdGNoZXIpIHtcbiAgICAgIHRoaXMuY2hpbGRXYXRjaGVyLnRlYXJkb3duKClcbiAgICB9XG4gIH1cbn1cblxufSx7XCIuLi8uLi9jb25maWdcIjoyMSxcIi4uLy4uL3V0aWxcIjo3MixcIi4uLy4uL3dhdGNoZXJcIjo3Nn1dLDMwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpXG52YXIgcHJlZml4ZXMgPSBbJy13ZWJraXQtJywgJy1tb3otJywgJy1tcy0nXVxudmFyIGNhbWVsUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXVxudmFyIGltcG9ydGFudFJFID0gLyFpbXBvcnRhbnQ7PyQvXG52YXIgdGVzdEVsID0gbnVsbFxudmFyIHByb3BDYWNoZSA9IHt9XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIGRlZXA6IHRydWUsXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5lbC5zdHlsZS5jc3NUZXh0ID0gdmFsdWVcbiAgICB9IGVsc2UgaWYgKF8uaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlLnJlZHVjZShfLmV4dGVuZCwge30pKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSlcbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlT2JqZWN0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBjYWNoZSBvYmplY3Qgc3R5bGVzIHNvIHRoYXQgb25seSBjaGFuZ2VkIHByb3BzXG4gICAgLy8gYXJlIGFjdHVhbGx5IHVwZGF0ZWQuXG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSB8fCAodGhpcy5jYWNoZSA9IHt9KVxuICAgIHZhciBuYW1lLCB2YWxcbiAgICBmb3IgKG5hbWUgaW4gY2FjaGUpIHtcbiAgICAgIGlmICghKG5hbWUgaW4gdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIG51bGwpXG4gICAgICAgIGRlbGV0ZSBjYWNoZVtuYW1lXVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKG5hbWUgaW4gdmFsdWUpIHtcbiAgICAgIHZhbCA9IHZhbHVlW25hbWVdXG4gICAgICBpZiAodmFsICE9PSBjYWNoZVtuYW1lXSkge1xuICAgICAgICBjYWNoZVtuYW1lXSA9IHZhbFxuICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCB2YWwpXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gKHByb3AsIHZhbHVlKSB7XG4gICAgcHJvcCA9IG5vcm1hbGl6ZShwcm9wKVxuICAgIGlmICghcHJvcCkgcmV0dXJuIC8vIHVuc3VwcG9ydGVkIHByb3BcbiAgICAvLyBjYXN0IHBvc3NpYmxlIG51bWJlcnMvYm9vbGVhbnMgaW50byBzdHJpbmdzXG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHZhbHVlICs9ICcnXG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB2YXIgaXNJbXBvcnRhbnQgPSBpbXBvcnRhbnRSRS50ZXN0KHZhbHVlKVxuICAgICAgICA/ICdpbXBvcnRhbnQnXG4gICAgICAgIDogJydcbiAgICAgIGlmIChpc0ltcG9ydGFudCkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKS50cmltKClcbiAgICAgIH1cbiAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkocHJvcCwgdmFsdWUsIGlzSW1wb3J0YW50KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KHByb3ApXG4gICAgfVxuICB9XG5cbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgYSBDU1MgcHJvcGVydHkgbmFtZS5cbiAqIC0gY2FjaGUgcmVzdWx0XG4gKiAtIGF1dG8gcHJlZml4XG4gKiAtIGNhbWVsQ2FzZSAtPiBkYXNoLWNhc2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZSAocHJvcCkge1xuICBpZiAocHJvcENhY2hlW3Byb3BdKSB7XG4gICAgcmV0dXJuIHByb3BDYWNoZVtwcm9wXVxuICB9XG4gIHZhciByZXMgPSBwcmVmaXgocHJvcClcbiAgcHJvcENhY2hlW3Byb3BdID0gcHJvcENhY2hlW3Jlc10gPSByZXNcbiAgcmV0dXJuIHJlc1xufVxuXG4vKipcbiAqIEF1dG8gZGV0ZWN0IHRoZSBhcHByb3ByaWF0ZSBwcmVmaXggZm9yIGEgQ1NTIHByb3BlcnR5LlxuICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzUyMzY5MlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcHJlZml4IChwcm9wKSB7XG4gIHByb3AgPSBfLmh5cGhlbmF0ZShwcm9wKVxuICB2YXIgY2FtZWwgPSBfLmNhbWVsaXplKHByb3ApXG4gIHZhciB1cHBlciA9IGNhbWVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWwuc2xpY2UoMSlcbiAgaWYgKCF0ZXN0RWwpIHtcbiAgICB0ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICB9XG4gIGlmIChjYW1lbCBpbiB0ZXN0RWwuc3R5bGUpIHtcbiAgICByZXR1cm4gcHJvcFxuICB9XG4gIHZhciBpID0gcHJlZml4ZXMubGVuZ3RoXG4gIHZhciBwcmVmaXhlZFxuICB3aGlsZSAoaS0tKSB7XG4gICAgcHJlZml4ZWQgPSBjYW1lbFByZWZpeGVzW2ldICsgdXBwZXJcbiAgICBpZiAocHJlZml4ZWQgaW4gdGVzdEVsLnN0eWxlKSB7XG4gICAgICByZXR1cm4gcHJlZml4ZXNbaV0gKyBwcm9wXG4gICAgfVxuICB9XG59XG5cbn0se1wiLi4vLi4vdXRpbFwiOjcyfV0sMzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIF8gPSByZXF1aXJlKCcuLi8uLi91dGlsJylcbnZhciBUcmFuc2l0aW9uID0gcmVxdWlyZSgnLi4vLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uJylcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgcHJpb3JpdHk6IDExMDAsXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAoaWQsIG9sZElkKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbFxuICAgIC8vIHJlc29sdmUgb24gb3duZXIgdm1cbiAgICB2YXIgaG9va3MgPSBfLnJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAndHJhbnNpdGlvbnMnLCBpZClcbiAgICBpZCA9IGlkIHx8ICd2J1xuICAgIC8vIGFwcGx5IG9uIGNsb3Nlc3Qgdm1cbiAgICBlbC5fX3ZfdHJhbnMgPSBuZXcgVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB0aGlzLmVsLl9fdnVlX18gfHwgdGhpcy52bSlcbiAgICBpZiAob2xkSWQpIHtcbiAgICAgIF8ucmVtb3ZlQ2xhc3MoZWwsIG9sZElkICsgJy10cmFuc2l0aW9uJylcbiAgICB9XG4gICAgXy5hZGRDbGFzcyhlbCwgaWQgKyAnLXRyYW5zaXRpb24nKVxuICB9XG59XG5cbn0se1wiLi4vLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uXCI6NjcsXCIuLi8uLi91dGlsXCI6NzJ9XSwzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xudmFyIF8gPSByZXF1aXJlKCcuLi8uLi91dGlsJylcblxuLy8geGxpbmtcbnZhciB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnXG52YXIgeGxpbmtSRSA9IC9eeGxpbms6L1xuXG4vLyB0aGVzZSBpbnB1dCBlbGVtZW50IGF0dHJpYnV0ZXMgc2hvdWxkIGFsc28gc2V0IHRoZWlyXG4vLyBjb3JyZXNwb25kaW5nIHByb3BlcnRpZXNcbnZhciBpbnB1dFByb3BzID0ge1xuICB2YWx1ZTogMSxcbiAgY2hlY2tlZDogMSxcbiAgc2VsZWN0ZWQ6IDFcbn1cblxuLy8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgc2V0IGEgaGlkZGVuIHByb3BlcnR5IGZvclxuLy8gYmluZGluZyB2LW1vZGVsIHRvIG9iamVjdCB2YWx1ZXNcbnZhciBtb2RlbFByb3BzID0ge1xuICB2YWx1ZTogJ192YWx1ZScsXG4gICd0cnVlLXZhbHVlJzogJ190cnVlVmFsdWUnLFxuICAnZmFsc2UtdmFsdWUnOiAnX2ZhbHNlVmFsdWUnXG59XG5cbi8vIGNoZWNrIGZvciBhdHRyaWJ1dGVzIHRoYXQgcHJvaGliaXQgaW50ZXJwb2xhdGlvbnNcbnZhciBkaXNhbGxvd2VkSW50ZXJwQXR0clJFID0gL152LXxeOnxeQHxeKGlzfHRyYW5zaXRpb258dHJhbnNpdGlvbi1tb2RlfGRlYm91bmNlfHRyYWNrLWJ5fHN0YWdnZXJ8ZW50ZXItc3RhZ2dlcnxsZWF2ZS1zdGFnZ2VyKSQvXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIHByaW9yaXR5OiA4NTAsXG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBhdHRyID0gdGhpcy5hcmdcbiAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lXG4gICAgLy8gc2hvdWxkIGJlIGRlZXAgd2F0Y2ggb24gb2JqZWN0IG1vZGVcbiAgICBpZiAoIWF0dHIpIHtcbiAgICAgIHRoaXMuZGVlcCA9IHRydWVcbiAgICB9XG4gICAgLy8gaGFuZGxlIGludGVycG9sYXRpb24gYmluZGluZ3NcbiAgICBpZiAodGhpcy5kZXNjcmlwdG9yLmludGVycCkge1xuICAgICAgLy8gb25seSBhbGxvdyBiaW5kaW5nIG9uIG5hdGl2ZSBhdHRyaWJ1dGVzXG4gICAgICBpZiAoXG4gICAgICAgIGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUudGVzdChhdHRyKSB8fFxuICAgICAgICAoYXR0ciA9PT0gJ25hbWUnICYmICh0YWcgPT09ICdQQVJUSUFMJyB8fCB0YWcgPT09ICdTTE9UJykpXG4gICAgICApIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICAgYXR0ciArICc9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJyArXG4gICAgICAgICAgJ2F0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIFZ1ZS5qcyAnICtcbiAgICAgICAgICAnZGlyZWN0aXZlcyBhbmQgc3BlY2lhbCBhdHRyaWJ1dGVzLidcbiAgICAgICAgKVxuICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKVxuICAgICAgICB0aGlzLmludmFsaWQgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdmFyIHJhdyA9IGF0dHIgKyAnPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICdcbiAgICAgICAgLy8gd2FybiBzcmNcbiAgICAgICAgaWYgKGF0dHIgPT09ICdzcmMnKSB7XG4gICAgICAgICAgXy53YXJuKFxuICAgICAgICAgICAgcmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzcmNcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICtcbiAgICAgICAgICAgICdhIDQwNCByZXF1ZXN0LiBVc2Ugdi1iaW5kOnNyYyBpbnN0ZWFkLidcbiAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICAvLyB3YXJuIHN0eWxlXG4gICAgICAgIGlmIChhdHRyID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgXy53YXJuKFxuICAgICAgICAgICAgcmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzdHlsZVwiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgK1xuICAgICAgICAgICAgJ3RoZSBhdHRyaWJ1dGUgdG8gYmUgZGlzY2FyZGVkIGluIEludGVybmV0IEV4cGxvcmVyLiAnICtcbiAgICAgICAgICAgICdVc2Ugdi1iaW5kOnN0eWxlIGluc3RlYWQuJ1xuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmludmFsaWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB2YXIgYXR0ciA9IHRoaXMuYXJnXG4gICAgaWYgKHRoaXMuYXJnKSB7XG4gICAgICB0aGlzLmhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pXG4gICAgfVxuICB9LFxuXG4gIC8vIHNoYXJlIG9iamVjdCBoYW5kbGVyIHdpdGggdi1iaW5kOmNsYXNzXG4gIGhhbmRsZU9iamVjdDogcmVxdWlyZSgnLi4vaW50ZXJuYWwvc3R5bGUnKS5oYW5kbGVPYmplY3QsXG5cbiAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiAoYXR0ciwgdmFsdWUpIHtcbiAgICBpZiAoaW5wdXRQcm9wc1thdHRyXSAmJiBhdHRyIGluIHRoaXMuZWwpIHtcbiAgICAgIHRoaXMuZWxbYXR0cl0gPSBhdHRyID09PSAndmFsdWUnXG4gICAgICAgID8gKHZhbHVlIHx8ICcnKSAvLyBJRTkgd2lsbCBzZXQgaW5wdXQudmFsdWUgdG8gXCJudWxsXCIgZm9yIG51bGwuLi5cbiAgICAgICAgOiB2YWx1ZVxuICAgIH1cbiAgICAvLyBzZXQgbW9kZWwgcHJvcHNcbiAgICB2YXIgbW9kZWxQcm9wID0gbW9kZWxQcm9wc1thdHRyXVxuICAgIGlmIChtb2RlbFByb3ApIHtcbiAgICAgIHRoaXMuZWxbbW9kZWxQcm9wXSA9IHZhbHVlXG4gICAgICAvLyB1cGRhdGUgdi1tb2RlbCBpZiBwcmVzZW50XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzLmVsLl9fdl9tb2RlbFxuICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgIG1vZGVsLmxpc3RlbmVyKClcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZG8gbm90IHNldCB2YWx1ZSBhdHRyaWJ1dGUgZm9yIHRleHRhcmVhXG4gICAgaWYgKGF0dHIgPT09ICd2YWx1ZScgJiYgdGhpcy5lbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVcbiAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gZmFsc2UpIHtcbiAgICAgIGlmICh4bGlua1JFLnRlc3QoYXR0cikpIHtcbiAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBhdHRyLCB2YWx1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKVxuICAgIH1cbiAgfVxufVxuXG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSlcblxufSx7XCIuLi8uLi91dGlsXCI6NzIsXCIuLi9pbnRlcm5hbC9zdHlsZVwiOjMwLFwiX3Byb2Nlc3NcIjoxfV0sMzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsXG4gICAgdGhpcy52bS4kb25jZSgnaG9vazpjb21waWxlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgndi1jbG9haycpXG4gICAgfSlcbiAgfVxufVxuXG59LHt9XSwzNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBwcmlvcml0eTogMTUwMCxcblxuICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCF0aGlzLmFyZykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHZhciBpZCA9IHRoaXMuaWQgPSBfLmNhbWVsaXplKHRoaXMuYXJnKVxuICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHNcbiAgICBpZiAocmVmcy5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgIHJlZnNbaWRdID0gdGhpcy5lbFxuICAgIH0gZWxzZSB7XG4gICAgICBfLmRlZmluZVJlYWN0aXZlKHJlZnMsIGlkLCB0aGlzLmVsKVxuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzXG4gICAgaWYgKHJlZnNbdGhpcy5pZF0gPT09IHRoaXMuZWwpIHtcbiAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsXG4gICAgfVxuICB9XG59XG5cbn0se1wiLi4vLi4vdXRpbFwiOjcyfV0sMzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpXG52YXIgRnJhZ21lbnRGYWN0b3J5ID0gcmVxdWlyZSgnLi4vLi4vZnJhZ21lbnQvZmFjdG9yeScpXG52YXIgaXNPYmplY3QgPSBfLmlzT2JqZWN0XG52YXIgdWlkID0gMFxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBwcmlvcml0eTogMjAwMCxcblxuICBwYXJhbXM6IFtcbiAgICAndHJhY2stYnknLFxuICAgICdzdGFnZ2VyJyxcbiAgICAnZW50ZXItc3RhZ2dlcicsXG4gICAgJ2xlYXZlLXN0YWdnZXInXG4gIF0sXG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIC8vIHN1cHBvcnQgXCJpdGVtIGluIGl0ZW1zXCIgc3ludGF4XG4gICAgdmFyIGluTWF0Y2ggPSB0aGlzLmV4cHJlc3Npb24ubWF0Y2goLyguKikgaW4gKC4qKS8pXG4gICAgaWYgKGluTWF0Y2gpIHtcbiAgICAgIHZhciBpdE1hdGNoID0gaW5NYXRjaFsxXS5tYXRjaCgvXFwoKC4qKSwoLiopXFwpLylcbiAgICAgIGlmIChpdE1hdGNoKSB7XG4gICAgICAgIHRoaXMuaXRlcmF0b3IgPSBpdE1hdGNoWzFdLnRyaW0oKVxuICAgICAgICB0aGlzLmFsaWFzID0gaXRNYXRjaFsyXS50cmltKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKVxuICAgICAgfVxuICAgICAgdGhpcy5leHByZXNzaW9uID0gaW5NYXRjaFsyXVxuICAgIH1cblxuICAgIGlmICghdGhpcy5hbGlhcykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICdBbGlhcyBpcyByZXF1aXJlZCBpbiB2LWZvci4nXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyB1aWQgYXMgYSBjYWNoZSBpZGVudGlmaWVyXG4gICAgdGhpcy5pZCA9ICdfX3YtZm9yX18nICsgKCsrdWlkKVxuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBvcHRpb24gbGlzdCxcbiAgICAvLyBzbyB0aGF0IHdlIGtub3cgaWYgd2UgbmVlZCB0byB1cGRhdGUgdGhlIDxzZWxlY3Q+J3NcbiAgICAvLyB2LW1vZGVsIHdoZW4gdGhlIG9wdGlvbiBsaXN0IGhhcyBjaGFuZ2VkLlxuICAgIC8vIGJlY2F1c2Ugdi1tb2RlbCBoYXMgYSBsb3dlciBwcmlvcml0eSB0aGFuIHYtZm9yLFxuICAgIC8vIHRoZSB2LW1vZGVsIGlzIG5vdCBib3VuZCBoZXJlIHlldCwgc28gd2UgaGF2ZSB0b1xuICAgIC8vIHJldHJpdmUgaXQgaW4gdGhlIGFjdHVhbCB1cGRhdGVNb2RlbCgpIGZ1bmN0aW9uLlxuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWVcbiAgICB0aGlzLmlzT3B0aW9uID1cbiAgICAgICh0YWcgPT09ICdPUFRJT04nIHx8IHRhZyA9PT0gJ09QVEdST1VQJykgJiZcbiAgICAgIHRoaXMuZWwucGFyZW50Tm9kZS50YWdOYW1lID09PSAnU0VMRUNUJ1xuXG4gICAgLy8gc2V0dXAgYW5jaG9yIG5vZGVzXG4gICAgdGhpcy5zdGFydCA9IF8uY3JlYXRlQW5jaG9yKCd2LWZvci1zdGFydCcpXG4gICAgdGhpcy5lbmQgPSBfLmNyZWF0ZUFuY2hvcigndi1mb3ItZW5kJylcbiAgICBfLnJlcGxhY2UodGhpcy5lbCwgdGhpcy5lbmQpXG4gICAgXy5iZWZvcmUodGhpcy5zdGFydCwgdGhpcy5lbmQpXG5cbiAgICAvLyBjYWNoZVxuICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cbiAgICAvLyBmcmFnbWVudCBmYWN0b3J5XG4gICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB0aGlzLmRpZmYoZGF0YSlcbiAgICB0aGlzLnVwZGF0ZVJlZigpXG4gICAgdGhpcy51cGRhdGVNb2RlbCgpXG4gIH0sXG5cbiAgLyoqXG4gICAqIERpZmYsIGJhc2VkIG9uIG5ldyBkYXRhIGFuZCBvbGQgZGF0YSwgZGV0ZXJtaW5lIHRoZVxuICAgKiBtaW5pbXVtIGFtb3VudCBvZiBET00gbWFuaXB1bGF0aW9ucyBuZWVkZWQgdG8gbWFrZSB0aGVcbiAgICogRE9NIHJlZmxlY3QgdGhlIG5ldyBkYXRhIEFycmF5LlxuICAgKlxuICAgKiBUaGUgYWxnb3JpdGhtIGRpZmZzIHRoZSBuZXcgZGF0YSBBcnJheSBieSBzdG9yaW5nIGFcbiAgICogaGlkZGVuIHJlZmVyZW5jZSB0byBhbiBvd25lciB2bSBpbnN0YW5jZSBvbiBwcmV2aW91c2x5XG4gICAqIHNlZW4gZGF0YS4gVGhpcyBhbGxvd3MgdXMgdG8gYWNoaWV2ZSBPKG4pIHdoaWNoIGlzXG4gICAqIGJldHRlciB0aGFuIGEgbGV2ZW5zaHRlaW4gZGlzdGFuY2UgYmFzZWQgYWxnb3JpdGhtLFxuICAgKiB3aGljaCBpcyBPKG0gKiBuKS5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gZGF0YVxuICAgKi9cblxuICBkaWZmOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgIC8vIGNoZWNrIGlmIHRoZSBBcnJheSB3YXMgY29udmVydGVkIGZyb20gYW4gT2JqZWN0XG4gICAgdmFyIGl0ZW0gPSBkYXRhWzBdXG4gICAgdmFyIGNvbnZlcnRlZEZyb21PYmplY3QgPSB0aGlzLmZyb21PYmplY3QgPVxuICAgICAgaXNPYmplY3QoaXRlbSkgJiZcbiAgICAgIGl0ZW0uaGFzT3duUHJvcGVydHkoJyRrZXknKSAmJlxuICAgICAgaXRlbS5oYXNPd25Qcm9wZXJ0eSgnJHZhbHVlJylcblxuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeVxuICAgIHZhciBvbGRGcmFncyA9IHRoaXMuZnJhZ3NcbiAgICB2YXIgZnJhZ3MgPSB0aGlzLmZyYWdzID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKVxuICAgIHZhciBhbGlhcyA9IHRoaXMuYWxpYXNcbiAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLml0ZXJhdG9yXG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydFxuICAgIHZhciBlbmQgPSB0aGlzLmVuZFxuICAgIHZhciBpbkRvYyA9IF8uaW5Eb2Moc3RhcnQpXG4gICAgdmFyIGluaXQgPSAhb2xkRnJhZ3NcbiAgICB2YXIgaSwgbCwgZnJhZywga2V5LCB2YWx1ZSwgcHJpbWl0aXZlXG5cbiAgICAvLyBGaXJzdCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBuZXcgQXJyYXkgYW5kIGZpbGwgdXBcbiAgICAvLyB0aGUgbmV3IGZyYWdzIGFycmF5LiBJZiBhIHBpZWNlIG9mIGRhdGEgaGFzIGEgY2FjaGVkXG4gICAgLy8gaW5zdGFuY2UgZm9yIGl0LCB3ZSByZXVzZSBpdC4gT3RoZXJ3aXNlIGJ1aWxkIGEgbmV3XG4gICAgLy8gaW5zdGFuY2UuXG4gICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpdGVtID0gZGF0YVtpXVxuICAgICAga2V5ID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJGtleSA6IG51bGxcbiAgICAgIHZhbHVlID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJHZhbHVlIDogaXRlbVxuICAgICAgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKVxuICAgICAgZnJhZyA9ICFpbml0ICYmIHRoaXMuZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaSwga2V5KVxuICAgICAgaWYgKGZyYWcpIHsgLy8gcmV1c2FibGUgZnJhZ21lbnRcbiAgICAgICAgZnJhZy5yZXVzZWQgPSB0cnVlXG4gICAgICAgIC8vIHVwZGF0ZSAkaW5kZXhcbiAgICAgICAgZnJhZy5zY29wZS4kaW5kZXggPSBpXG4gICAgICAgIC8vIHVwZGF0ZSAka2V5XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICBmcmFnLnNjb3BlLiRrZXkgPSBrZXlcbiAgICAgICAgfVxuICAgICAgICAvLyB1cGRhdGUgaXRlcmF0b3JcbiAgICAgICAgaWYgKGl0ZXJhdG9yKSB7XG4gICAgICAgICAgZnJhZy5zY29wZVtpdGVyYXRvcl0gPSBrZXkgIT09IG51bGwgPyBrZXkgOiBpXG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGRhdGEgZm9yIHRyYWNrLWJ5LCBvYmplY3QgcmVwZWF0ICZcbiAgICAgICAgLy8gcHJpbWl0aXZlIHZhbHVlcy5cbiAgICAgICAgaWYgKHRyYWNrQnlLZXkgfHwgY29udmVydGVkRnJvbU9iamVjdCB8fCBwcmltaXRpdmUpIHtcbiAgICAgICAgICBmcmFnLnNjb3BlW2FsaWFzXSA9IHZhbHVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7IC8vIG5ldyBpc250YW5jZVxuICAgICAgICBmcmFnID0gdGhpcy5jcmVhdGUodmFsdWUsIGFsaWFzLCBpLCBrZXkpXG4gICAgICAgIGZyYWcuZnJlc2ggPSAhaW5pdFxuICAgICAgfVxuICAgICAgZnJhZ3NbaV0gPSBmcmFnXG4gICAgICBpZiAoaW5pdCkge1xuICAgICAgICBmcmFnLmJlZm9yZShlbmQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gd2UncmUgZG9uZSBmb3IgdGhlIGluaXRpYWwgcmVuZGVyLlxuICAgIGlmIChpbml0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBTZWNvbmQgcGFzcywgZ28gdGhyb3VnaCB0aGUgb2xkIGZyYWdtZW50cyBhbmRcbiAgICAvLyBkZXN0cm95IHRob3NlIHdobyBhcmUgbm90IHJldXNlZCAoYW5kIHJlbW92ZSB0aGVtXG4gICAgLy8gZnJvbSBjYWNoZSlcbiAgICB2YXIgcmVtb3ZhbEluZGV4ID0gMFxuICAgIHZhciB0b3RhbFJlbW92ZWQgPSBvbGRGcmFncy5sZW5ndGggLSBmcmFncy5sZW5ndGhcbiAgICBmb3IgKGkgPSAwLCBsID0gb2xkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmcmFnID0gb2xkRnJhZ3NbaV1cbiAgICAgIGlmICghZnJhZy5yZXVzZWQpIHtcbiAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpXG4gICAgICAgIHRoaXMucmVtb3ZlKGZyYWcsIHJlbW92YWxJbmRleCsrLCB0b3RhbFJlbW92ZWQsIGluRG9jKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZpbmFsIHBhc3MsIG1vdmUvaW5zZXJ0IG5ldyBmcmFnbWVudHMgaW50byB0aGVcbiAgICAvLyByaWdodCBwbGFjZS5cbiAgICB2YXIgdGFyZ2V0UHJldiwgcHJldkVsLCBjdXJyZW50UHJldlxuICAgIHZhciBpbnNlcnRpb25JbmRleCA9IDBcbiAgICBmb3IgKGkgPSAwLCBsID0gZnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmcmFnID0gZnJhZ3NbaV1cbiAgICAgIC8vIHRoaXMgaXMgdGhlIGZyYWcgdGhhdCB3ZSBzaG91bGQgYmUgYWZ0ZXJcbiAgICAgIHRhcmdldFByZXYgPSBmcmFnc1tpIC0gMV1cbiAgICAgIHByZXZFbCA9IHRhcmdldFByZXZcbiAgICAgICAgPyB0YXJnZXRQcmV2LnN0YWdnZXJDYlxuICAgICAgICAgID8gdGFyZ2V0UHJldi5zdGFnZ2VyQW5jaG9yXG4gICAgICAgICAgOiB0YXJnZXRQcmV2LmVuZCB8fCB0YXJnZXRQcmV2Lm5vZGVcbiAgICAgICAgOiBzdGFydFxuICAgICAgaWYgKGZyYWcucmV1c2VkICYmICFmcmFnLnN0YWdnZXJDYikge1xuICAgICAgICBjdXJyZW50UHJldiA9IGZpbmRQcmV2RnJhZyhmcmFnLCBzdGFydCwgdGhpcy5pZClcbiAgICAgICAgaWYgKGN1cnJlbnRQcmV2ICE9PSB0YXJnZXRQcmV2KSB7XG4gICAgICAgICAgdGhpcy5tb3ZlKGZyYWcsIHByZXZFbClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbmV3IGluc3RhbmNlLCBvciBzdGlsbCBpbiBzdGFnZ2VyLlxuICAgICAgICAvLyBpbnNlcnQgd2l0aCB1cGRhdGVkIHN0YWdnZXIgaW5kZXguXG4gICAgICAgIHRoaXMuaW5zZXJ0KGZyYWcsIGluc2VydGlvbkluZGV4KyssIHByZXZFbCwgaW5Eb2MpXG4gICAgICB9XG4gICAgICBmcmFnLnJldXNlZCA9IGZyYWcuZnJlc2ggPSBmYWxzZVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGZyYWdtZW50IGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhbGlhc1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG4gICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuICAgKi9cblxuICBjcmVhdGU6IGZ1bmN0aW9uICh2YWx1ZSwgYWxpYXMsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgaG9zdCA9IHRoaXMuX2hvc3RcbiAgICAvLyBjcmVhdGUgaXRlcmF0aW9uIHNjb3BlXG4gICAgdmFyIHBhcmVudFNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bVxuICAgIHZhciBzY29wZSA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUpXG4gICAgLy8gcmVmIGhvbGRlciBmb3IgdGhlIHNjb3BlXG4gICAgc2NvcGUuJHJlZnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRyZWZzKVxuICAgIHNjb3BlLiRlbHMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRlbHMpXG4gICAgLy8gbWFrZSBzdXJlIHBvaW50ICRwYXJlbnQgdG8gcGFyZW50IHNjb3BlXG4gICAgc2NvcGUuJHBhcmVudCA9IHBhcmVudFNjb3BlXG4gICAgLy8gZm9yIHR3by13YXkgYmluZGluZyBvbiBhbGlhc1xuICAgIHNjb3BlLiRmb3JDb250ZXh0ID0gdGhpc1xuICAgIC8vIGRlZmluZSBzY29wZSBwcm9wZXJ0aWVzXG4gICAgXy5kZWZpbmVSZWFjdGl2ZShzY29wZSwgYWxpYXMsIHZhbHVlKVxuICAgIF8uZGVmaW5lUmVhY3RpdmUoc2NvcGUsICckaW5kZXgnLCBpbmRleClcbiAgICBpZiAoa2V5KSB7XG4gICAgICBfLmRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGtleScsIGtleSlcbiAgICB9IGVsc2UgaWYgKHNjb3BlLiRrZXkpIHtcbiAgICAgIC8vIGF2b2lkIGFjY2lkZW50YWwgZmFsbGJhY2tcbiAgICAgIF8uZGVmaW5lKHNjb3BlLCAnJGtleScsIG51bGwpXG4gICAgfVxuICAgIGlmICh0aGlzLml0ZXJhdG9yKSB7XG4gICAgICBfLmRlZmluZVJlYWN0aXZlKHNjb3BlLCB0aGlzLml0ZXJhdG9yLCBrZXkgIT09IG51bGwgPyBrZXkgOiBpbmRleClcbiAgICB9XG4gICAgdmFyIGZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKVxuICAgIGZyYWcuZm9ySWQgPSB0aGlzLmlkXG4gICAgdGhpcy5jYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpXG4gICAgcmV0dXJuIGZyYWdcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB2LXJlZiBvbiBvd25lciB2bS5cbiAgICovXG5cbiAgdXBkYXRlUmVmOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMuZGVzY3JpcHRvci5yZWZcbiAgICBpZiAoIXJlZikgcmV0dXJuXG4gICAgdmFyIGhhc2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNcbiAgICB2YXIgcmVmc1xuICAgIGlmICghdGhpcy5mcm9tT2JqZWN0KSB7XG4gICAgICByZWZzID0gdGhpcy5mcmFncy5tYXAoZmluZFZtRnJvbUZyYWcpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZnMgPSB7fVxuICAgICAgdGhpcy5mcmFncy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnKSB7XG4gICAgICAgIHJlZnNbZnJhZy5zY29wZS4ka2V5XSA9IGZpbmRWbUZyb21GcmFnKGZyYWcpXG4gICAgICB9KVxuICAgIH1cbiAgICBoYXNoW3JlZl0gPSByZWZzXG4gIH0sXG5cbiAgLyoqXG4gICAqIEZvciBvcHRpb24gbGlzdHMsIHVwZGF0ZSB0aGUgY29udGFpbmluZyB2LW1vZGVsIG9uXG4gICAqIHBhcmVudCA8c2VsZWN0Pi5cbiAgICovXG5cbiAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5pc09wdGlvbikge1xuICAgICAgdmFyIHBhcmVudCA9IHRoaXMuc3RhcnQucGFyZW50Tm9kZVxuICAgICAgdmFyIG1vZGVsID0gcGFyZW50ICYmIHBhcmVudC5fX3ZfbW9kZWxcbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICBtb2RlbC5mb3JjZVVwZGF0ZSgpXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbnNlcnQgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jXG4gICAqL1xuXG4gIGluc2VydDogZnVuY3Rpb24gKGZyYWcsIGluZGV4LCBwcmV2RWwsIGluRG9jKSB7XG4gICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKVxuICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsXG4gICAgfVxuICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCBudWxsLCAnZW50ZXInKVxuICAgIGlmIChpbkRvYyAmJiBzdGFnZ2VyQW1vdW50KSB7XG4gICAgICAvLyBjcmVhdGUgYW4gYW5jaG9yIGFuZCBpbnNlcnQgaXQgc3luY2hyb25vdXNseSxcbiAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIHJlc29sdmUgdGhlIGNvcnJlY3Qgb3JkZXIgd2l0aG91dFxuICAgICAgLy8gd29ycnlpbmcgYWJvdXQgc29tZSBlbGVtZW50cyBub3QgaW5zZXJ0ZWQgeWV0XG4gICAgICB2YXIgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yXG4gICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3IgPSBfLmNyZWF0ZUFuY2hvcignc3RhZ2dlci1hbmNob3InKVxuICAgICAgICBhbmNob3IuX192ZnJhZ19fID0gZnJhZ1xuICAgICAgfVxuICAgICAgXy5hZnRlcihhbmNob3IsIHByZXZFbClcbiAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gXy5jYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbFxuICAgICAgICBmcmFnLmJlZm9yZShhbmNob3IpXG4gICAgICAgIF8ucmVtb3ZlKGFuY2hvcilcbiAgICAgIH0pXG4gICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KVxuICAgIH0gZWxzZSB7XG4gICAgICBmcmFnLmJlZm9yZShwcmV2RWwubmV4dFNpYmxpbmcpXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY1xuICAgKi9cblxuICByZW1vdmU6IGZ1bmN0aW9uIChmcmFnLCBpbmRleCwgdG90YWwsIGluRG9jKSB7XG4gICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKVxuICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsXG4gICAgICAvLyBpdCdzIG5vdCBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgZnJhZyB0byBiZSByZW1vdmVkXG4gICAgICAvLyB0d2ljZSwgc28gaWYgd2UgaGF2ZSBhIHBlbmRpbmcgc3RhZ2dlciBjYWxsYmFjayxcbiAgICAgIC8vIGl0IG1lYW5zIHRoaXMgZnJhZyBpcyBxdWV1ZWQgZm9yIGVudGVyIGJ1dCByZW1vdmVkXG4gICAgICAvLyBiZWZvcmUgaXRzIHRyYW5zaXRpb24gc3RhcnRlZC4gU2luY2UgaXQgaXMgYWxyZWFkeVxuICAgICAgLy8gZGVzdHJveWVkLCB3ZSBjYW4ganVzdCBsZWF2ZSBpdCBpbiBkZXRhY2hlZCBzdGF0ZS5cbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsICdsZWF2ZScpXG4gICAgaWYgKGluRG9jICYmIHN0YWdnZXJBbW91bnQpIHtcbiAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gXy5jYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbFxuICAgICAgICBmcmFnLnJlbW92ZSgpXG4gICAgICB9KVxuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudClcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZy5yZW1vdmUoKVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogTW92ZSBhIGZyYWdtZW50IHRvIGEgbmV3IHBvc2l0aW9uLlxuICAgKiBGb3JjZSBubyB0cmFuc2l0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG4gICAqL1xuXG4gIG1vdmU6IGZ1bmN0aW9uIChmcmFnLCBwcmV2RWwpIHtcbiAgICBmcmFnLmJlZm9yZShwcmV2RWwubmV4dFNpYmxpbmcsIGZhbHNlKVxuICB9LFxuXG4gIC8qKlxuICAgKiBDYWNoZSBhIGZyYWdtZW50IHVzaW5nIHRyYWNrLWJ5IG9yIHRoZSBvYmplY3Qga2V5LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgKi9cblxuICBjYWNoZUZyYWc6IGZ1bmN0aW9uICh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSkge1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeVxuICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGVcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKVxuICAgIHZhciBpZFxuICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcbiAgICAgIGlkID0gdHJhY2tCeUtleVxuICAgICAgICA/IHRyYWNrQnlLZXkgPT09ICckaW5kZXgnXG4gICAgICAgICAgPyBpbmRleFxuICAgICAgICAgIDogdmFsdWVbdHJhY2tCeUtleV1cbiAgICAgICAgOiAoa2V5IHx8IHZhbHVlKVxuICAgICAgaWYgKCFjYWNoZVtpZF0pIHtcbiAgICAgICAgY2FjaGVbaWRdID0gZnJhZ1xuICAgICAgfSBlbHNlIGlmICh0cmFja0J5S2V5ICE9PSAnJGluZGV4Jykge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICAgIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWQgPSB0aGlzLmlkXG4gICAgICBpZiAodmFsdWUuaGFzT3duUHJvcGVydHkoaWQpKSB7XG4gICAgICAgIGlmICh2YWx1ZVtpZF0gPT09IG51bGwpIHtcbiAgICAgICAgICB2YWx1ZVtpZF0gPSBmcmFnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICAgIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgXy5kZWZpbmUodmFsdWUsIGlkLCBmcmFnKVxuICAgICAgfVxuICAgIH1cbiAgICBmcmFnLnJhdyA9IHZhbHVlXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhIGNhY2hlZCBmcmFnbWVudCBmcm9tIHRoZSB2YWx1ZS9pbmRleC9rZXlcbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAgICovXG5cbiAgZ2V0Q2FjaGVkRnJhZzogZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwga2V5KSB7XG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5XG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSlcbiAgICB2YXIgZnJhZ1xuICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcbiAgICAgIHZhciBpZCA9IHRyYWNrQnlLZXlcbiAgICAgICAgPyB0cmFja0J5S2V5ID09PSAnJGluZGV4J1xuICAgICAgICAgID8gaW5kZXhcbiAgICAgICAgICA6IHZhbHVlW3RyYWNrQnlLZXldXG4gICAgICAgIDogKGtleSB8fCB2YWx1ZSlcbiAgICAgIGZyYWcgPSB0aGlzLmNhY2hlW2lkXVxuICAgIH0gZWxzZSB7XG4gICAgICBmcmFnID0gdmFsdWVbdGhpcy5pZF1cbiAgICB9XG4gICAgaWYgKGZyYWcgJiYgKGZyYWcucmV1c2VkIHx8IGZyYWcuZnJlc2gpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpXG4gICAgfVxuICAgIHJldHVybiBmcmFnXG4gIH0sXG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGZyYWdtZW50IGZyb20gY2FjaGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICovXG5cbiAgZGVsZXRlQ2FjaGVkRnJhZzogZnVuY3Rpb24gKGZyYWcpIHtcbiAgICB2YXIgdmFsdWUgPSBmcmFnLnJhd1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeVxuICAgIHZhciBzY29wZSA9IGZyYWcuc2NvcGVcbiAgICB2YXIgaW5kZXggPSBzY29wZS4kaW5kZXhcbiAgICAvLyBmaXggIzk0ODogYXZvaWQgYWNjaWRlbnRhbGx5IGZhbGwgdGhyb3VnaCB0b1xuICAgIC8vIGEgcGFyZW50IHJlcGVhdGVyIHdoaWNoIGhhcHBlbnMgdG8gaGF2ZSAka2V5LlxuICAgIHZhciBrZXkgPSBzY29wZS5oYXNPd25Qcm9wZXJ0eSgnJGtleScpICYmIHNjb3BlLiRrZXlcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKVxuICAgIGlmICh0cmFja0J5S2V5IHx8IGtleSB8fCBwcmltaXRpdmUpIHtcbiAgICAgIHZhciBpZCA9IHRyYWNrQnlLZXlcbiAgICAgICAgPyB0cmFja0J5S2V5ID09PSAnJGluZGV4J1xuICAgICAgICAgID8gaW5kZXhcbiAgICAgICAgICA6IHZhbHVlW3RyYWNrQnlLZXldXG4gICAgICAgIDogKGtleSB8fCB2YWx1ZSlcbiAgICAgIHRoaXMuY2FjaGVbaWRdID0gbnVsbFxuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZVt0aGlzLmlkXSA9IG51bGxcbiAgICAgIGZyYWcucmF3ID0gbnVsbFxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBzdGFnZ2VyIGFtb3VudCBmb3IgYW4gaW5zZXJ0aW9uL3JlbW92YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICAgKi9cblxuICBnZXRTdGFnZ2VyOiBmdW5jdGlvbiAoZnJhZywgaW5kZXgsIHRvdGFsLCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgKyAnU3RhZ2dlcidcbiAgICB2YXIgdHJhbnMgPSBmcmFnLm5vZGUuX192X3RyYW5zXG4gICAgdmFyIGhvb2tzID0gdHJhbnMgJiYgdHJhbnMuaG9va3NcbiAgICB2YXIgaG9vayA9IGhvb2tzICYmIChob29rc1t0eXBlXSB8fCBob29rcy5zdGFnZ2VyKVxuICAgIHJldHVybiBob29rXG4gICAgICA/IGhvb2suY2FsbChmcmFnLCBpbmRleCwgdG90YWwpXG4gICAgICA6IGluZGV4ICogcGFyc2VJbnQodGhpcy5wYXJhbXNbdHlwZV0gfHwgdGhpcy5wYXJhbXMuc3RhZ2dlciwgMTApXG4gIH0sXG5cbiAgLyoqXG4gICAqIFByZS1wcm9jZXNzIHRoZSB2YWx1ZSBiZWZvcmUgcGlwaW5nIGl0IHRocm91Z2ggdGhlXG4gICAqIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG4gICAqL1xuXG4gIF9wcmVQcm9jZXNzOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyByZWdhcmRsZXNzIG9mIHR5cGUsIHN0b3JlIHRoZSB1bi1maWx0ZXJlZCByYXcgdmFsdWUuXG4gICAgdGhpcy5yYXdWYWx1ZSA9IHZhbHVlXG4gICAgcmV0dXJuIHZhbHVlXG4gIH0sXG5cbiAgLyoqXG4gICAqIFBvc3QtcHJvY2VzcyB0aGUgdmFsdWUgYWZ0ZXIgaXQgaGFzIGJlZW4gcGlwZWQgdGhyb3VnaFxuICAgKiB0aGUgZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cbiAgICpcbiAgICogSXQgaXMgbmVjZXNzYXJ5IGZvciB0aGlzIHRvIGJlIGNhbGxlZCBkdXJpbmcgdGhlXG4gICAqIHdhdGhjZXIncyBkZXBlbmRlbmN5IGNvbGxlY3Rpb24gcGhhc2UgYmVjYXVzZSB3ZSB3YW50XG4gICAqIHRoZSB2LWZvciB0byB1cGRhdGUgd2hlbiB0aGUgc291cmNlIE9iamVjdCBpcyBtdXRhdGVkLlxuICAgKi9cblxuICBfcG9zdFByb2Nlc3M6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmIChfLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9IGVsc2UgaWYgKF8uaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgIC8vIGNvbnZlcnQgcGxhaW4gb2JqZWN0IHRvIGFycmF5LlxuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSlcbiAgICAgIHZhciBpID0ga2V5cy5sZW5ndGhcbiAgICAgIHZhciByZXMgPSBuZXcgQXJyYXkoaSlcbiAgICAgIHZhciBrZXlcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAga2V5ID0ga2V5c1tpXVxuICAgICAgICByZXNbaV0gPSB7XG4gICAgICAgICAgJGtleToga2V5LFxuICAgICAgICAgICR2YWx1ZTogdmFsdWVba2V5XVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhbHVlID0gcmFuZ2UodmFsdWUpXG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgfHwgW11cbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmc1t0aGlzLmRlc2NyaXB0b3IucmVmXSA9IG51bGxcbiAgICB9XG4gICAgaWYgKHRoaXMuZnJhZ3MpIHtcbiAgICAgIHZhciBpID0gdGhpcy5mcmFncy5sZW5ndGhcbiAgICAgIHZhciBmcmFnXG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGZyYWcgPSB0aGlzLmZyYWdzW2ldXG4gICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKVxuICAgICAgICBmcmFnLmRlc3Ryb3koKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBmaW5kIHRoZSBwcmV2aW91cyBlbGVtZW50IHRoYXQgaXMgYSBmcmFnbWVudFxuICogYW5jaG9yLiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGEgZGVzdHJveWVkIGZyYWcnc1xuICogZWxlbWVudCBjb3VsZCBzdGlsbCBiZSBsaW5nZXJpbmcgaW4gdGhlIERPTSBiZWZvcmUgaXRzXG4gKiBsZWF2aW5nIHRyYW5zaXRpb24gZmluaXNoZXMsIGJ1dCBpdHMgaW5zZXJ0ZWQgZmxhZ1xuICogc2hvdWxkIGhhdmUgYmVlbiBzZXQgdG8gZmFsc2Ugc28gd2UgY2FuIHNraXAgdGhlbS5cbiAqXG4gKiBJZiB0aGlzIGlzIGEgYmxvY2sgcmVwZWF0LCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBvbmx5XG4gKiByZXR1cm4gZnJhZyB0aGF0IGlzIGJvdW5kIHRvIHRoaXMgdi1mb3IuIChzZWUgIzkyOSlcbiAqXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gKiBAcGFyYW0ge0NvbW1lbnR8VGV4dH0gYW5jaG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEByZXR1cm4ge0ZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIGZpbmRQcmV2RnJhZyAoZnJhZywgYW5jaG9yLCBpZCkge1xuICB2YXIgZWwgPSBmcmFnLm5vZGUucHJldmlvdXNTaWJsaW5nXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIWVsKSByZXR1cm5cbiAgZnJhZyA9IGVsLl9fdmZyYWdfX1xuICB3aGlsZSAoXG4gICAgKCFmcmFnIHx8IGZyYWcuZm9ySWQgIT09IGlkIHx8ICFmcmFnLmluc2VydGVkKSAmJlxuICAgIGVsICE9PSBhbmNob3JcbiAgKSB7XG4gICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmdcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIWVsKSByZXR1cm5cbiAgICBmcmFnID0gZWwuX192ZnJhZ19fXG4gIH1cbiAgcmV0dXJuIGZyYWdcbn1cblxuLyoqXG4gKiBGaW5kIGEgdm0gZnJvbSBhIGZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gZmluZFZtRnJvbUZyYWcgKGZyYWcpIHtcbiAgcmV0dXJuIGZyYWcubm9kZS5fX3Z1ZV9fIHx8IGZyYWcubm9kZS5uZXh0U2libGluZy5fX3Z1ZV9fXG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcmFuZ2UgYXJyYXkgZnJvbSBnaXZlbiBudW1iZXIuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbmZ1bmN0aW9uIHJhbmdlIChuKSB7XG4gIHZhciBpID0gLTFcbiAgdmFyIHJldCA9IG5ldyBBcnJheShuKVxuICB3aGlsZSAoKytpIDwgbikge1xuICAgIHJldFtpXSA9IGlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzLndhcm5EdXBsaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBfLndhcm4oXG4gICAgICAnRHVwbGljYXRlIHZhbHVlIGZvdW5kIGluIHYtZm9yPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgK1xuICAgICAgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJy4gVXNlIHRyYWNrLWJ5PVwiJGluZGV4XCIgaWYgJyArXG4gICAgICAneW91IGFyZSBleHBlY3RpbmcgZHVwbGljYXRlIHZhbHVlcy4nXG4gICAgKVxuICB9XG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4uLy4uL2ZyYWdtZW50L2ZhY3RvcnlcIjo1MCxcIi4uLy4uL3V0aWxcIjo3MixcIl9wcm9jZXNzXCI6MX1dLDM2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpXG52YXIgdGVtcGxhdGVQYXJzZXIgPSByZXF1aXJlKCcuLi8uLi9wYXJzZXJzL3RlbXBsYXRlJylcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIC8vIGEgY29tbWVudCBub2RlIG1lYW5zIHRoaXMgaXMgYSBiaW5kaW5nIGZvclxuICAgIC8vIHt7eyBpbmxpbmUgdW5lc2NhcGVkIGh0bWwgfX19XG4gICAgaWYgKHRoaXMuZWwubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgIC8vIGhvbGQgbm9kZXNcbiAgICAgIHRoaXMubm9kZXMgPSBbXVxuICAgICAgLy8gcmVwbGFjZSB0aGUgcGxhY2Vob2xkZXIgd2l0aCBwcm9wZXIgYW5jaG9yXG4gICAgICB0aGlzLmFuY2hvciA9IF8uY3JlYXRlQW5jaG9yKCd2LWh0bWwnKVxuICAgICAgXy5yZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKVxuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhbHVlID0gXy50b1N0cmluZyh2YWx1ZSlcbiAgICBpZiAodGhpcy5ub2Rlcykge1xuICAgICAgdGhpcy5zd2FwKHZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLmlubmVySFRNTCA9IHZhbHVlXG4gICAgfVxuICB9LFxuXG4gIHN3YXA6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIHJlbW92ZSBvbGQgbm9kZXNcbiAgICB2YXIgaSA9IHRoaXMubm9kZXMubGVuZ3RoXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgXy5yZW1vdmUodGhpcy5ub2Rlc1tpXSlcbiAgICB9XG4gICAgLy8gY29udmVydCBuZXcgdmFsdWUgdG8gYSBmcmFnbWVudFxuICAgIC8vIGRvIG5vdCBhdHRlbXB0IHRvIHJldHJpZXZlIGZyb20gaWQgc2VsZWN0b3JcbiAgICB2YXIgZnJhZyA9IHRlbXBsYXRlUGFyc2VyLnBhcnNlKHZhbHVlLCB0cnVlLCB0cnVlKVxuICAgIC8vIHNhdmUgYSByZWZlcmVuY2UgdG8gdGhlc2Ugbm9kZXMgc28gd2UgY2FuIHJlbW92ZSBsYXRlclxuICAgIHRoaXMubm9kZXMgPSBfLnRvQXJyYXkoZnJhZy5jaGlsZE5vZGVzKVxuICAgIF8uYmVmb3JlKGZyYWcsIHRoaXMuYW5jaG9yKVxuICB9XG59XG5cbn0se1wiLi4vLi4vcGFyc2Vycy90ZW1wbGF0ZVwiOjYzLFwiLi4vLi4vdXRpbFwiOjcyfV0sMzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpXG52YXIgRnJhZ21lbnRGYWN0b3J5ID0gcmVxdWlyZSgnLi4vLi4vZnJhZ21lbnQvZmFjdG9yeScpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIHByaW9yaXR5OiAyMDAwLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsXG4gICAgaWYgKCFlbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG4gICAgICB2YXIgbmV4dCA9IGVsLm5leHRFbGVtZW50U2libGluZ1xuICAgICAgaWYgKG5leHQgJiYgXy5hdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgICBfLnJlbW92ZShuZXh0KVxuICAgICAgICB0aGlzLmVsc2VGYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCBuZXh0KVxuICAgICAgfVxuICAgICAgLy8gY2hlY2sgbWFpbiBibG9ja1xuICAgICAgdGhpcy5hbmNob3IgPSBfLmNyZWF0ZUFuY2hvcigndi1pZicpXG4gICAgICBfLnJlcGxhY2UoZWwsIHRoaXMuYW5jaG9yKVxuICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCBlbClcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICd2LWlmPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBjYW5ub3QgYmUgJyArXG4gICAgICAgICd1c2VkIG9uIGFuIGluc3RhbmNlIHJvb3QgZWxlbWVudC4nXG4gICAgICApXG4gICAgICB0aGlzLmludmFsaWQgPSB0cnVlXG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuaW52YWxpZCkgcmV0dXJuXG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBpZiAoIXRoaXMuZnJhZykge1xuICAgICAgICB0aGlzLmluc2VydCgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlKClcbiAgICB9XG4gIH0sXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIHRoaXMuZWxzZUZyYWcucmVtb3ZlKClcbiAgICAgIHRoaXMuZWxzZUZyYWcgPSBudWxsXG4gICAgfVxuICAgIHRoaXMuZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpXG4gICAgdGhpcy5mcmFnLmJlZm9yZSh0aGlzLmFuY2hvcilcbiAgfSxcblxuICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcucmVtb3ZlKClcbiAgICAgIHRoaXMuZnJhZyA9IG51bGxcbiAgICB9XG4gICAgaWYgKHRoaXMuZWxzZUZhY3RvcnkgJiYgIXRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIHRoaXMuZWxzZUZyYWcgPSB0aGlzLmVsc2VGYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZylcbiAgICAgIHRoaXMuZWxzZUZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKVxuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcuZGVzdHJveSgpXG4gICAgfVxuICB9XG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4uLy4uL2ZyYWdtZW50L2ZhY3RvcnlcIjo1MCxcIi4uLy4uL3V0aWxcIjo3MixcIl9wcm9jZXNzXCI6MX1dLDM4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIHRleHQgJiBodG1sXG5leHBvcnRzLnRleHQgPSByZXF1aXJlKCcuL3RleHQnKVxuZXhwb3J0cy5odG1sID0gcmVxdWlyZSgnLi9odG1sJylcblxuLy8gbG9naWMgY29udHJvbFxuZXhwb3J0c1snZm9yJ10gPSByZXF1aXJlKCcuL2ZvcicpXG5leHBvcnRzWydpZiddID0gcmVxdWlyZSgnLi9pZicpXG5leHBvcnRzLnNob3cgPSByZXF1aXJlKCcuL3Nob3cnKVxuXG4vLyB0d28td2F5IGJpbmRpbmdcbmV4cG9ydHMubW9kZWwgPSByZXF1aXJlKCcuL21vZGVsJylcblxuLy8gZXZlbnQgaGFuZGxpbmdcbmV4cG9ydHMub24gPSByZXF1aXJlKCcuL29uJylcblxuLy8gYXR0cmlidXRlc1xuZXhwb3J0cy5iaW5kID0gcmVxdWlyZSgnLi9iaW5kJylcblxuLy8gcmVmICYgZWxcbmV4cG9ydHMuZWwgPSByZXF1aXJlKCcuL2VsJylcbmV4cG9ydHMucmVmID0gcmVxdWlyZSgnLi9yZWYnKVxuXG4vLyBjbG9ha1xuZXhwb3J0cy5jbG9hayA9IHJlcXVpcmUoJy4vY2xvYWsnKVxuXG59LHtcIi4vYmluZFwiOjMyLFwiLi9jbG9ha1wiOjMzLFwiLi9lbFwiOjM0LFwiLi9mb3JcIjozNSxcIi4vaHRtbFwiOjM2LFwiLi9pZlwiOjM3LFwiLi9tb2RlbFwiOjQwLFwiLi9vblwiOjQ0LFwiLi9yZWZcIjo0NSxcIi4vc2hvd1wiOjQ2LFwiLi90ZXh0XCI6NDd9XSwzOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uLy4uLy4uL3V0aWwnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgdmFyIGVsID0gdGhpcy5lbFxuXG4gICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJylcbiAgICAgICAgPyBlbC5fdmFsdWVcbiAgICAgICAgOiBzZWxmLnBhcmFtcy5udW1iZXJcbiAgICAgICAgICA/IF8udG9OdW1iZXIoZWwudmFsdWUpXG4gICAgICAgICAgOiBlbC52YWx1ZVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEJvb2xlYW5WYWx1ZSAoKSB7XG4gICAgICB2YXIgdmFsID0gZWwuY2hlY2tlZFxuICAgICAgaWYgKHZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fdHJ1ZVZhbHVlXG4gICAgICB9XG4gICAgICBpZiAoIXZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX2ZhbHNlVmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX2ZhbHNlVmFsdWVcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWxcbiAgICB9XG5cbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1vZGVsID0gc2VsZi5fd2F0Y2hlci52YWx1ZVxuICAgICAgaWYgKF8uaXNBcnJheShtb2RlbCkpIHtcbiAgICAgICAgdmFyIHZhbCA9IHNlbGYuZ2V0VmFsdWUoKVxuICAgICAgICBpZiAoZWwuY2hlY2tlZCkge1xuICAgICAgICAgIGlmIChfLmluZGV4T2YobW9kZWwsIHZhbCkgPCAwKSB7XG4gICAgICAgICAgICBtb2RlbC5wdXNoKHZhbClcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW9kZWwuJHJlbW92ZSh2YWwpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuc2V0KGdldEJvb2xlYW5WYWx1ZSgpKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpXG4gICAgaWYgKGVsLmNoZWNrZWQpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lclxuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBlbCA9IHRoaXMuZWxcbiAgICBpZiAoXy5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgZWwuY2hlY2tlZCA9IF8uaW5kZXhPZih2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKSA+IC0xXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBfLmxvb3NlRXF1YWwodmFsdWUsIGVsLl90cnVlVmFsdWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jaGVja2VkID0gISF2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG59LHtcIi4uLy4uLy4uL3V0aWxcIjo3Mn1dLDQwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uLy4uLy4uL3V0aWwnKVxuXG52YXIgaGFuZGxlcnMgPSB7XG4gIHRleHQ6IHJlcXVpcmUoJy4vdGV4dCcpLFxuICByYWRpbzogcmVxdWlyZSgnLi9yYWRpbycpLFxuICBzZWxlY3Q6IHJlcXVpcmUoJy4vc2VsZWN0JyksXG4gIGNoZWNrYm94OiByZXF1aXJlKCcuL2NoZWNrYm94Jylcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgcHJpb3JpdHk6IDgwMCxcbiAgdHdvV2F5OiB0cnVlLFxuICBoYW5kbGVyczogaGFuZGxlcnMsXG4gIHBhcmFtczogWydsYXp5JywgJ251bWJlcicsICdkZWJvdW5jZSddLFxuXG4gIC8qKlxuICAgKiBQb3NzaWJsZSBlbGVtZW50czpcbiAgICogICA8c2VsZWN0PlxuICAgKiAgIDx0ZXh0YXJlYT5cbiAgICogICA8aW5wdXQgdHlwZT1cIipcIj5cbiAgICogICAgIC0gdGV4dFxuICAgKiAgICAgLSBjaGVja2JveFxuICAgKiAgICAgLSByYWRpb1xuICAgKiAgICAgLSBudW1iZXJcbiAgICovXG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIC8vIGZyaWVuZGx5IHdhcm5pbmcuLi5cbiAgICB0aGlzLmNoZWNrRmlsdGVycygpXG4gICAgaWYgKHRoaXMuaGFzUmVhZCAmJiAhdGhpcy5oYXNXcml0ZSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgK1xuICAgICAgICAndi1tb2RlbC4gWW91IG1pZ2h0IHdhbnQgdG8gdXNlIGEgdHdvLXdheSBmaWx0ZXIgJyArXG4gICAgICAgICd0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvci4nXG4gICAgICApXG4gICAgfVxuICAgIHZhciBlbCA9IHRoaXMuZWxcbiAgICB2YXIgdGFnID0gZWwudGFnTmFtZVxuICAgIHZhciBoYW5kbGVyXG4gICAgaWYgKHRhZyA9PT0gJ0lOUFVUJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzW2VsLnR5cGVdIHx8IGhhbmRsZXJzLnRleHRcbiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy5zZWxlY3RcbiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnRleHRcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICd2LW1vZGVsIGRvZXMgbm90IHN1cHBvcnQgZWxlbWVudCB0eXBlOiAnICsgdGFnXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgZWwuX192X21vZGVsID0gdGhpc1xuICAgIGhhbmRsZXIuYmluZC5jYWxsKHRoaXMpXG4gICAgdGhpcy51cGRhdGUgPSBoYW5kbGVyLnVwZGF0ZVxuICAgIHRoaXMuX3VuYmluZCA9IGhhbmRsZXIudW5iaW5kXG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIHJlYWQvd3JpdGUgZmlsdGVyIHN0YXRzLlxuICAgKi9cblxuICBjaGVja0ZpbHRlcnM6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmlsdGVycyA9IHRoaXMuZmlsdGVyc1xuICAgIGlmICghZmlsdGVycykgcmV0dXJuXG4gICAgdmFyIGkgPSBmaWx0ZXJzLmxlbmd0aFxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBmaWx0ZXIgPSBfLnJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlcnNbaV0ubmFtZSlcbiAgICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nIHx8IGZpbHRlci5yZWFkKSB7XG4gICAgICAgIHRoaXMuaGFzUmVhZCA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXIud3JpdGUpIHtcbiAgICAgICAgdGhpcy5oYXNXcml0ZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5lbC5fX3ZfbW9kZWwgPSBudWxsXG4gICAgdGhpcy5fdW5iaW5kICYmIHRoaXMuX3VuYmluZCgpXG4gIH1cbn1cblxufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpXG5cbn0se1wiLi4vLi4vLi4vdXRpbFwiOjcyLFwiLi9jaGVja2JveFwiOjM5LFwiLi9yYWRpb1wiOjQxLFwiLi9zZWxlY3RcIjo0MixcIi4vdGV4dFwiOjQzLFwiX3Byb2Nlc3NcIjoxfV0sNDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIF8gPSByZXF1aXJlKCcuLi8uLi8uLi91dGlsJylcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHZhciBlbCA9IHRoaXMuZWxcblxuICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyB2YWx1ZSBvdmVyd3JpdGUgdmlhIHYtYmluZDp2YWx1ZVxuICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX3ZhbHVlXG4gICAgICB9XG4gICAgICB2YXIgdmFsID0gZWwudmFsdWVcbiAgICAgIGlmIChzZWxmLnBhcmFtcy5udW1iZXIpIHtcbiAgICAgICAgdmFsID0gXy50b051bWJlcih2YWwpXG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsXG4gICAgfVxuXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYuc2V0KHNlbGYuZ2V0VmFsdWUoKSlcbiAgICB9XG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcilcblxuICAgIGlmIChlbC5jaGVja2VkKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXJcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLmVsLmNoZWNrZWQgPSBfLmxvb3NlRXF1YWwodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSlcbiAgfVxufVxuXG59LHtcIi4uLy4uLy4uL3V0aWxcIjo3Mn1dLDQyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbCcpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXNcbiAgICB2YXIgZWwgPSB0aGlzLmVsXG5cbiAgICAvLyBtZXRob2QgdG8gZm9yY2UgdXBkYXRlIERPTSB1c2luZyBsYXRlc3QgdmFsdWUuXG4gICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZWxmLl93YXRjaGVyKSB7XG4gICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIuZ2V0KCkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxuICAgIHZhciBtdWx0aXBsZSA9IHRoaXMubXVsdGlwbGUgPSBlbC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJylcblxuICAgIC8vIGF0dGFjaCBsaXN0ZW5lclxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUpXG4gICAgICB2YWx1ZSA9IHNlbGYucGFyYW1zLm51bWJlclxuICAgICAgICA/IF8uaXNBcnJheSh2YWx1ZSlcbiAgICAgICAgICA/IHZhbHVlLm1hcChfLnRvTnVtYmVyKVxuICAgICAgICAgIDogXy50b051bWJlcih2YWx1ZSlcbiAgICAgICAgOiB2YWx1ZVxuICAgICAgc2VsZi5zZXQodmFsdWUpXG4gICAgfVxuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpXG5cbiAgICAvLyBpZiBoYXMgaW5pdGlhbCB2YWx1ZSwgc2V0IGFmdGVyQmluZFxuICAgIHZhciBpbml0VmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUsIHRydWUpXG4gICAgaWYgKChtdWx0aXBsZSAmJiBpbml0VmFsdWUubGVuZ3RoKSB8fFxuICAgICAgICAoIW11bHRpcGxlICYmIGluaXRWYWx1ZSAhPT0gbnVsbCkpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lclxuICAgIH1cblxuICAgIC8vIEFsbCBtYWpvciBicm93c2VycyBleGNlcHQgRmlyZWZveCByZXNldHNcbiAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XG4gICAgLy8gaXMgYXBwZW5kZWQgdG8gYSBuZXcgcGFyZW50LCB0aGVyZWZvcmUgd2UgaGF2ZSB0b1xuICAgIC8vIGZvcmNlIGEgRE9NIHVwZGF0ZSB3aGVuZXZlciB0aGF0IGhhcHBlbnMuLi5cbiAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIHRoaXMuZm9yY2VVcGRhdGUpXG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsXG4gICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xXG4gICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBfLmlzQXJyYXkodmFsdWUpXG4gICAgdmFyIG9wdGlvbnMgPSBlbC5vcHRpb25zXG4gICAgdmFyIGkgPSBvcHRpb25zLmxlbmd0aFxuICAgIHZhciBvcCwgdmFsXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgb3AgPSBvcHRpb25zW2ldXG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJylcbiAgICAgICAgPyBvcC5fdmFsdWVcbiAgICAgICAgOiBvcC52YWx1ZVxuICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgICBvcC5zZWxlY3RlZCA9IG11bHRpXG4gICAgICAgID8gaW5kZXhPZih2YWx1ZSwgdmFsKSA+IC0xXG4gICAgICAgIDogXy5sb29zZUVxdWFsKHZhbHVlLCB2YWwpXG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHRoaXMudm0uJG9mZignaG9vazphdHRhY2hlZCcsIHRoaXMuZm9yY2VVcGRhdGUpXG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgc2VsZWN0IHZhbHVlXG4gKlxuICogQHBhcmFtIHtTZWxlY3RFbGVtZW50fSBlbFxuICogQHBhcmFtIHtCb29sZWFufSBtdWx0aVxuICogQHBhcmFtIHtCb29sZWFufSBpbml0XG4gKiBAcmV0dXJuIHtBcnJheXwqfVxuICovXG5cbmZ1bmN0aW9uIGdldFZhbHVlIChlbCwgbXVsdGksIGluaXQpIHtcbiAgdmFyIHJlcyA9IG11bHRpID8gW10gOiBudWxsXG4gIHZhciBvcCwgdmFsLCBzZWxlY3RlZFxuICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgb3AgPSBlbC5vcHRpb25zW2ldXG4gICAgc2VsZWN0ZWQgPSBpbml0XG4gICAgICA/IG9wLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKVxuICAgICAgOiBvcC5zZWxlY3RlZFxuICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpXG4gICAgICAgID8gb3AuX3ZhbHVlXG4gICAgICAgIDogb3AudmFsdWVcbiAgICAgIGlmIChtdWx0aSkge1xuICAgICAgICByZXMucHVzaCh2YWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuLyoqXG4gKiBOYXRpdmUgQXJyYXkuaW5kZXhPZiB1c2VzIHN0cmljdCBlcXVhbCwgYnV0IGluIHRoaXNcbiAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZiAoYXJyLCB2YWwpIHtcbiAgdmFyIGkgPSBhcnIubGVuZ3RoXG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAoXy5sb29zZUVxdWFsKGFycltpXSwgdmFsKSkge1xuICAgICAgcmV0dXJuIGlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xXG59XG5cbn0se1wiLi4vLi4vLi4vdXRpbFwiOjcyfV0sNDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIF8gPSByZXF1aXJlKCcuLi8uLi8uLi91dGlsJylcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHZhciBlbCA9IHRoaXMuZWxcbiAgICB2YXIgaXNSYW5nZSA9IGVsLnR5cGUgPT09ICdyYW5nZSdcbiAgICB2YXIgbGF6eSA9IHRoaXMucGFyYW1zLmxhenlcbiAgICB2YXIgbnVtYmVyID0gdGhpcy5wYXJhbXMubnVtYmVyXG4gICAgdmFyIGRlYm91bmNlID0gdGhpcy5wYXJhbXMuZGVib3VuY2VcblxuICAgIC8vIGhhbmRsZSBjb21wb3NpdGlvbiBldmVudHMuXG4gICAgLy8gICBodHRwOi8vYmxvZy5ldmFueW91Lm1lLzIwMTQvMDEvMDMvY29tcG9zaXRpb24tZXZlbnQvXG4gICAgLy8gc2tpcCB0aGlzIGZvciBBbmRyb2lkIGJlY2F1c2UgaXQgaGFuZGxlcyBjb21wb3NpdGlvblxuICAgIC8vIGV2ZW50cyBxdWl0ZSBkaWZmZXJlbnRseS4gQW5kcm9pZCBkb2Vzbid0IHRyaWdnZXJcbiAgICAvLyBjb21wb3NpdGlvbiBldmVudHMgZm9yIGxhbmd1YWdlIGlucHV0IG1ldGhvZHMgZS5nLlxuICAgIC8vIENoaW5lc2UsIGJ1dCBpbnN0ZWFkIHRyaWdnZXJzIHRoZW0gZm9yIHNwZWxsaW5nXG4gICAgLy8gc3VnZ2VzdGlvbnMuLi4gKHNlZSBEaXNjdXNzaW9uLyMxNjIpXG4gICAgdmFyIGNvbXBvc2luZyA9IGZhbHNlXG4gICAgaWYgKCFfLmlzQW5kcm9pZCAmJiAhaXNSYW5nZSkge1xuICAgICAgdGhpcy5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29tcG9zaW5nID0gdHJ1ZVxuICAgICAgfSlcbiAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21wb3NpbmcgPSBmYWxzZVxuICAgICAgICAvLyBpbiBJRTExIHRoZSBcImNvbXBvc2l0aW9uZW5kXCIgZXZlbnQgZmlyZXMgQUZURVJcbiAgICAgICAgLy8gdGhlIFwiaW5wdXRcIiBldmVudCwgc28gdGhlIGlucHV0IGhhbmRsZXIgaXMgYmxvY2tlZFxuICAgICAgICAvLyBhdCB0aGUgZW5kLi4uIGhhdmUgdG8gY2FsbCBpdCBoZXJlLlxuICAgICAgICAvL1xuICAgICAgICAvLyAjMTMyNzogaW4gbGF6eSBtb2RlIHRoaXMgaXMgdW5lY2Vzc2FyeS5cbiAgICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgICAgc2VsZi5saXN0ZW5lcigpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gcHJldmVudCBtZXNzaW5nIHdpdGggdGhlIGlucHV0IHdoZW4gdXNlciBpcyB0eXBpbmcsXG4gICAgLy8gYW5kIGZvcmNlIHVwZGF0ZSBvbiBibHVyLlxuICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlXG4gICAgaWYgKCFpc1JhbmdlKSB7XG4gICAgICB0aGlzLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5mb2N1c2VkID0gdHJ1ZVxuICAgICAgfSlcbiAgICAgIHRoaXMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZm9jdXNlZCA9IGZhbHNlXG4gICAgICAgIHNlbGYubGlzdGVuZXIoKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBOb3cgYXR0YWNoIHRoZSBtYWluIGxpc3RlbmVyXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChjb21wb3NpbmcpIHJldHVyblxuICAgICAgdmFyIHZhbCA9IG51bWJlciB8fCBpc1JhbmdlXG4gICAgICAgID8gXy50b051bWJlcihlbC52YWx1ZSlcbiAgICAgICAgOiBlbC52YWx1ZVxuICAgICAgc2VsZi5zZXQodmFsKVxuICAgICAgLy8gZm9yY2UgdXBkYXRlIG9uIG5leHQgdGljayB0byBhdm9pZCBsb2NrICYgc2FtZSB2YWx1ZVxuICAgICAgLy8gYWxzbyBvbmx5IHVwZGF0ZSB3aGVuIHVzZXIgaXMgbm90IHR5cGluZ1xuICAgICAgXy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLl9ib3VuZCAmJiAhc2VsZi5mb2N1c2VkKSB7XG4gICAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci52YWx1ZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBhcHBseSBkZWJvdW5jZVxuICAgIGlmIChkZWJvdW5jZSkge1xuICAgICAgdGhpcy5saXN0ZW5lciA9IF8uZGVib3VuY2UodGhpcy5saXN0ZW5lciwgZGVib3VuY2UpXG4gICAgfVxuXG4gICAgLy8gU3VwcG9ydCBqUXVlcnkgZXZlbnRzLCBzaW5jZSBqUXVlcnkudHJpZ2dlcigpIGRvZXNuJ3RcbiAgICAvLyB0cmlnZ2VyIG5hdGl2ZSBldmVudHMgaW4gc29tZSBjYXNlcyBhbmQgc29tZSBwbHVnaW5zXG4gICAgLy8gcmVseSBvbiAkLnRyaWdnZXIoKVxuICAgIC8vXG4gICAgLy8gV2Ugd2FudCB0byBtYWtlIHN1cmUgaWYgYSBsaXN0ZW5lciBpcyBhdHRhY2hlZCB1c2luZ1xuICAgIC8vIGpRdWVyeSwgaXQgaXMgYWxzbyByZW1vdmVkIHdpdGggalF1ZXJ5LCB0aGF0J3Mgd2h5XG4gICAgLy8gd2UgZG8gdGhlIGNoZWNrIGZvciBlYWNoIGRpcmVjdGl2ZSBpbnN0YW5jZSBhbmRcbiAgICAvLyBzdG9yZSB0aGF0IGNoZWNrIHJlc3VsdCBvbiBpdHNlbGYuIFRoaXMgYWxzbyBhbGxvd3NcbiAgICAvLyBlYXNpZXIgdGVzdCBjb3ZlcmFnZSBjb250cm9sIGJ5IHVuc2V0dGluZyB0aGUgZ2xvYmFsXG4gICAgLy8galF1ZXJ5IHZhcmlhYmxlIGluIHRlc3RzLlxuICAgIHRoaXMuaGFzalF1ZXJ5ID0gdHlwZW9mIGpRdWVyeSA9PT0gJ2Z1bmN0aW9uJ1xuICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuICAgICAgalF1ZXJ5KGVsKS5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcilcbiAgICAgIGlmICghbGF6eSkge1xuICAgICAgICBqUXVlcnkoZWwpLm9uKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpXG4gICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgdGhpcy5vbignaW5wdXQnLCB0aGlzLmxpc3RlbmVyKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElFOSBkb2Vzbid0IGZpcmUgaW5wdXQgZXZlbnQgb24gYmFja3NwYWNlL2RlbC9jdXRcbiAgICBpZiAoIWxhenkgJiYgXy5pc0lFOSkge1xuICAgICAgdGhpcy5vbignY3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfLm5leHRUaWNrKHNlbGYubGlzdGVuZXIpXG4gICAgICB9KVxuICAgICAgdGhpcy5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA0NiB8fCBlLmtleUNvZGUgPT09IDgpIHtcbiAgICAgICAgICBzZWxmLmxpc3RlbmVyKClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBzZXQgaW5pdGlhbCB2YWx1ZSBpZiBwcmVzZW50XG4gICAgaWYgKFxuICAgICAgZWwuaGFzQXR0cmlidXRlKCd2YWx1ZScpIHx8XG4gICAgICAoZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJiBlbC52YWx1ZS50cmltKCkpXG4gICAgKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXJcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLmVsLnZhbHVlID0gXy50b1N0cmluZyh2YWx1ZSlcbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsXG4gICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG4gICAgICBqUXVlcnkoZWwpLm9mZignY2hhbmdlJywgdGhpcy5saXN0ZW5lcilcbiAgICAgIGpRdWVyeShlbCkub2ZmKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpXG4gICAgfVxuICB9XG59XG5cbn0se1wiLi4vLi4vLi4vdXRpbFwiOjcyfV0sNDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpXG5cbi8vIGtleUNvZGUgYWxpYXNlc1xudmFyIGtleUNvZGVzID0ge1xuICBlc2M6IDI3LFxuICB0YWI6IDksXG4gIGVudGVyOiAxMyxcbiAgc3BhY2U6IDMyLFxuICAnZGVsZXRlJzogNDYsXG4gIHVwOiAzOCxcbiAgbGVmdDogMzcsXG4gIHJpZ2h0OiAzOSxcbiAgZG93bjogNDBcbn1cblxuZnVuY3Rpb24ga2V5RmlsdGVyIChoYW5kbGVyLCBrZXlzKSB7XG4gIHZhciBjb2RlcyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgY2hhckNvZGUgPSBrZXkuY2hhckNvZGVBdCgwKVxuICAgIGlmIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpIHtcbiAgICAgIHJldHVybiBwYXJzZUludChrZXksIDEwKVxuICAgIH1cbiAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2hhckNvZGUgPSBrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoY2hhckNvZGUgPiA2NCAmJiBjaGFyQ29kZSA8IDkxKSB7XG4gICAgICAgIHJldHVybiBjaGFyQ29kZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5Q29kZXNba2V5XVxuICB9KVxuICByZXR1cm4gZnVuY3Rpb24ga2V5SGFuZGxlciAoZSkge1xuICAgIGlmIChjb2Rlcy5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzdG9wRmlsdGVyIChoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBzdG9wSGFuZGxlciAoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpXG4gIH1cbn1cblxuZnVuY3Rpb24gcHJldmVudEZpbHRlciAoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gcHJldmVudEhhbmRsZXIgKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgYWNjZXB0U3RhdGVtZW50OiB0cnVlLFxuICBwcmlvcml0eTogNzAwLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBkZWFsIHdpdGggaWZyYW1lc1xuICAgIGlmIChcbiAgICAgIHRoaXMuZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScgJiZcbiAgICAgIHRoaXMuYXJnICE9PSAnbG9hZCdcbiAgICApIHtcbiAgICAgIHZhciBzZWxmID0gdGhpc1xuICAgICAgdGhpcy5pZnJhbWVCaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfLm9uKHNlbGYuZWwuY29udGVudFdpbmRvdywgc2VsZi5hcmcsIHNlbGYuaGFuZGxlcilcbiAgICAgIH1cbiAgICAgIHRoaXMub24oJ2xvYWQnLCB0aGlzLmlmcmFtZUJpbmQpXG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAvLyBzdHViIGEgbm9vcCBmb3Igdi1vbiB3aXRoIG5vIHZhbHVlLFxuICAgIC8vIGUuZy4gQG1vdXNlZG93bi5wcmV2ZW50XG4gICAgaWYgKCF0aGlzLmRlc2NyaXB0b3IucmF3KSB7XG4gICAgICBoYW5kbGVyID0gZnVuY3Rpb24gKCkge31cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAndi1vbjonICsgdGhpcy5hcmcgKyAnPVwiJyArXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiArICdcIiBleHBlY3RzIGEgZnVuY3Rpb24gdmFsdWUsICcgK1xuICAgICAgICAnZ290ICcgKyBoYW5kbGVyXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBhcHBseSBtb2RpZmllcnNcbiAgICBpZiAodGhpcy5tb2RpZmllcnMuc3RvcCkge1xuICAgICAgaGFuZGxlciA9IHN0b3BGaWx0ZXIoaGFuZGxlcilcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnByZXZlbnQpIHtcbiAgICAgIGhhbmRsZXIgPSBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpXG4gICAgfVxuICAgIC8vIGtleSBmaWx0ZXJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubW9kaWZpZXJzKVxuICAgICAgLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgIT09ICdzdG9wJyAmJiBrZXkgIT09ICdwcmV2ZW50J1xuICAgICAgfSlcbiAgICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICAgIGhhbmRsZXIgPSBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cylcbiAgICB9XG5cbiAgICB0aGlzLnJlc2V0KClcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyXG5cbiAgICBpZiAodGhpcy5pZnJhbWVCaW5kKSB7XG4gICAgICB0aGlzLmlmcmFtZUJpbmQoKVxuICAgIH0gZWxzZSB7XG4gICAgICBfLm9uKHRoaXMuZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpXG4gICAgfVxuICB9LFxuXG4gIHJlc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5pZnJhbWVCaW5kXG4gICAgICA/IHRoaXMuZWwuY29udGVudFdpbmRvd1xuICAgICAgOiB0aGlzLmVsXG4gICAgaWYgKHRoaXMuaGFuZGxlcikge1xuICAgICAgXy5vZmYoZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpXG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVzZXQoKVxuICB9XG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4uLy4uL3V0aWxcIjo3MixcIl9wcm9jZXNzXCI6MX1dLDQ1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuLi8uLi91dGlsJykud2FybihcbiAgICAgICAgJ3YtcmVmOicgKyB0aGlzLmFyZyArICcgbXVzdCBiZSB1c2VkIG9uIGEgY2hpbGQgJyArXG4gICAgICAgICdjb21wb25lbnQuIEZvdW5kIG9uIDwnICsgdGhpcy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPi4nXG4gICAgICApXG4gICAgfVxuICB9XG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4uLy4uL3V0aWxcIjo3MixcIl9wcm9jZXNzXCI6MX1dLDQ2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpXG52YXIgdHJhbnNpdGlvbiA9IHJlcXVpcmUoJy4uLy4uL3RyYW5zaXRpb24nKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICBpZiAobmV4dCAmJiBfLmF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmVsc2VFbCA9IG5leHRcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLmFwcGx5KHRoaXMuZWwsIHZhbHVlKVxuICAgIGlmICh0aGlzLmVsc2VFbCkge1xuICAgICAgdGhpcy5hcHBseSh0aGlzLmVsc2VFbCwgIXZhbHVlKVxuICAgIH1cbiAgfSxcblxuICBhcHBseTogZnVuY3Rpb24gKGVsLCB2YWx1ZSkge1xuICAgIHRyYW5zaXRpb24uYXBwbHkoZWwsIHZhbHVlID8gMSA6IC0xLCBmdW5jdGlvbiAoKSB7XG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyAnJyA6ICdub25lJ1xuICAgIH0sIHRoaXMudm0pXG4gIH1cbn1cblxufSx7XCIuLi8uLi90cmFuc2l0aW9uXCI6NjUsXCIuLi8uLi91dGlsXCI6NzJ9XSw0NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hdHRyID0gdGhpcy5lbC5ub2RlVHlwZSA9PT0gM1xuICAgICAgPyAnZGF0YSdcbiAgICAgIDogJ3RleHRDb250ZW50J1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5lbFt0aGlzLmF0dHJdID0gXy50b1N0cmluZyh2YWx1ZSlcbiAgfVxufVxuXG59LHtcIi4uLy4uL3V0aWxcIjo3Mn1dLDQ4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgUGF0aCA9IHJlcXVpcmUoJy4uL3BhcnNlcnMvcGF0aCcpXG52YXIgdG9BcnJheSA9IHJlcXVpcmUoJy4uL2RpcmVjdGl2ZXMvcHVibGljL2ZvcicpLl9wb3N0UHJvY2Vzc1xuXG4vKipcbiAqIExpbWl0IGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgKERlY2ltYWwgZXhwZWN0ZWQpXG4gKi9cblxuZXhwb3J0cy5saW1pdEJ5ID0gZnVuY3Rpb24gKGFyciwgbiwgb2Zmc2V0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA/IHBhcnNlSW50KG9mZnNldCwgMTApIDogMFxuICByZXR1cm4gdHlwZW9mIG4gPT09ICdudW1iZXInXG4gICAgPyBhcnIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBuKVxuICAgIDogYXJyXG59XG5cbi8qKlxuICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuICogQHBhcmFtIHtTdHJpbmd9IFtkZWxpbWl0ZXJdXG4gKiBAcGFyYW0ge1N0cmluZ30gLi4uZGF0YUtleXNcbiAqL1xuXG5leHBvcnRzLmZpbHRlckJ5ID0gZnVuY3Rpb24gKGFyciwgc2VhcmNoLCBkZWxpbWl0ZXIpIHtcbiAgYXJyID0gdG9BcnJheShhcnIpXG4gIGlmIChzZWFyY2ggPT0gbnVsbCkge1xuICAgIHJldHVybiBhcnJcbiAgfVxuICBpZiAodHlwZW9mIHNlYXJjaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBhcnIuZmlsdGVyKHNlYXJjaClcbiAgfVxuICAvLyBjYXN0IHRvIGxvd2VyY2FzZSBzdHJpbmdcbiAgc2VhcmNoID0gKCcnICsgc2VhcmNoKS50b0xvd2VyQ2FzZSgpXG4gIC8vIGFsbG93IG9wdGlvbmFsIGBpbmAgZGVsaW1pdGVyXG4gIC8vIGJlY2F1c2Ugd2h5IG5vdFxuICB2YXIgbiA9IGRlbGltaXRlciA9PT0gJ2luJyA/IDMgOiAyXG4gIC8vIGV4dHJhY3QgYW5kIGZsYXR0ZW4ga2V5c1xuICB2YXIga2V5cyA9IF8udG9BcnJheShhcmd1bWVudHMsIG4pLnJlZHVjZShmdW5jdGlvbiAocHJldiwgY3VyKSB7XG4gICAgcmV0dXJuIHByZXYuY29uY2F0KGN1cilcbiAgfSwgW10pXG4gIHZhciByZXMgPSBbXVxuICB2YXIgaXRlbSwga2V5LCB2YWwsIGpcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaXRlbSA9IGFycltpXVxuICAgIHZhbCA9IChpdGVtICYmIGl0ZW0uJHZhbHVlKSB8fCBpdGVtXG4gICAgaiA9IGtleXMubGVuZ3RoXG4gICAgaWYgKGopIHtcbiAgICAgIHdoaWxlIChqLS0pIHtcbiAgICAgICAga2V5ID0ga2V5c1tqXVxuICAgICAgICBpZiAoKGtleSA9PT0gJyRrZXknICYmIGNvbnRhaW5zKGl0ZW0uJGtleSwgc2VhcmNoKSkgfHxcbiAgICAgICAgICAgIGNvbnRhaW5zKFBhdGguZ2V0KHZhbCwga2V5KSwgc2VhcmNoKSkge1xuICAgICAgICAgIHJlcy5wdXNoKGl0ZW0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY29udGFpbnMoaXRlbSwgc2VhcmNoKSkge1xuICAgICAgcmVzLnB1c2goaXRlbSlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG4vKipcbiAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzb3J0S2V5XG4gKiBAcGFyYW0ge1N0cmluZ30gcmV2ZXJzZVxuICovXG5cbmV4cG9ydHMub3JkZXJCeSA9IGZ1bmN0aW9uIChhcnIsIHNvcnRLZXksIHJldmVyc2UpIHtcbiAgYXJyID0gdG9BcnJheShhcnIpXG4gIGlmICghc29ydEtleSkge1xuICAgIHJldHVybiBhcnJcbiAgfVxuICB2YXIgb3JkZXIgPSAocmV2ZXJzZSAmJiByZXZlcnNlIDwgMCkgPyAtMSA6IDFcbiAgLy8gc29ydCBvbiBhIGNvcHkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgYXJyYXlcbiAgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICBpZiAoc29ydEtleSAhPT0gJyRrZXknKSB7XG4gICAgICBpZiAoXy5pc09iamVjdChhKSAmJiAnJHZhbHVlJyBpbiBhKSBhID0gYS4kdmFsdWVcbiAgICAgIGlmIChfLmlzT2JqZWN0KGIpICYmICckdmFsdWUnIGluIGIpIGIgPSBiLiR2YWx1ZVxuICAgIH1cbiAgICBhID0gXy5pc09iamVjdChhKSA/IFBhdGguZ2V0KGEsIHNvcnRLZXkpIDogYVxuICAgIGIgPSBfLmlzT2JqZWN0KGIpID8gUGF0aC5nZXQoYiwgc29ydEtleSkgOiBiXG4gICAgcmV0dXJuIGEgPT09IGIgPyAwIDogYSA+IGIgPyBvcmRlciA6IC1vcmRlclxuICB9KVxufVxuXG4vKipcbiAqIFN0cmluZyBjb250YWluIGhlbHBlclxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG4gKi9cblxuZnVuY3Rpb24gY29udGFpbnMgKHZhbCwgc2VhcmNoKSB7XG4gIHZhciBpXG4gIGlmIChfLmlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsKVxuICAgIGkgPSBrZXlzLmxlbmd0aFxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGlmIChjb250YWlucyh2YWxba2V5c1tpXV0sIHNlYXJjaCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoXy5pc0FycmF5KHZhbCkpIHtcbiAgICBpID0gdmFsLmxlbmd0aFxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGlmIChjb250YWlucyh2YWxbaV0sIHNlYXJjaCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAodmFsICE9IG51bGwpIHtcbiAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaCkgPiAtMVxuICB9XG59XG5cbn0se1wiLi4vZGlyZWN0aXZlcy9wdWJsaWMvZm9yXCI6MzUsXCIuLi9wYXJzZXJzL3BhdGhcIjo2MixcIi4uL3V0aWxcIjo3Mn1dLDQ5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG5cbi8qKlxuICogU3RyaW5naWZ5IHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRlbnRcbiAqL1xuXG5leHBvcnRzLmpzb24gPSB7XG4gIHJlYWQ6IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZW50KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZydcbiAgICAgID8gdmFsdWVcbiAgICAgIDogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIE51bWJlcihpbmRlbnQpIHx8IDIpXG4gIH0sXG4gIHdyaXRlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogJ2FiYycgPT4gJ0FiYydcbiAqL1xuXG5leHBvcnRzLmNhcGl0YWxpemUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnXG4gIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKVxuICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKVxufVxuXG4vKipcbiAqICdhYmMnID0+ICdBQkMnXG4gKi9cblxuZXhwb3J0cy51cHBlcmNhc2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgcmV0dXJuICh2YWx1ZSB8fCB2YWx1ZSA9PT0gMClcbiAgICA/IHZhbHVlLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKVxuICAgIDogJydcbn1cblxuLyoqXG4gKiAnQWJDJyA9PiAnYWJjJ1xuICovXG5cbmV4cG9ydHMubG93ZXJjYXNlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHJldHVybiAodmFsdWUgfHwgdmFsdWUgPT09IDApXG4gICAgPyB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKClcbiAgICA6ICcnXG59XG5cbi8qKlxuICogMTIzNDUgPT4gJDEyLDM0NS4wMFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzaWduXG4gKi9cblxudmFyIGRpZ2l0c1JFID0gLyhcXGR7M30pKD89XFxkKS9nXG5leHBvcnRzLmN1cnJlbmN5ID0gZnVuY3Rpb24gKHZhbHVlLCBjdXJyZW5jeSkge1xuICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpXG4gIGlmICghaXNGaW5pdGUodmFsdWUpIHx8ICghdmFsdWUgJiYgdmFsdWUgIT09IDApKSByZXR1cm4gJydcbiAgY3VycmVuY3kgPSBjdXJyZW5jeSAhPSBudWxsID8gY3VycmVuY3kgOiAnJCdcbiAgdmFyIHN0cmluZ2lmaWVkID0gTWF0aC5hYnModmFsdWUpLnRvRml4ZWQoMilcbiAgdmFyIF9pbnQgPSBzdHJpbmdpZmllZC5zbGljZSgwLCAtMylcbiAgdmFyIGkgPSBfaW50Lmxlbmd0aCAlIDNcbiAgdmFyIGhlYWQgPSBpID4gMFxuICAgID8gKF9pbnQuc2xpY2UoMCwgaSkgKyAoX2ludC5sZW5ndGggPiAzID8gJywnIDogJycpKVxuICAgIDogJydcbiAgdmFyIF9mbG9hdCA9IHN0cmluZ2lmaWVkLnNsaWNlKC0zKVxuICB2YXIgc2lnbiA9IHZhbHVlIDwgMCA/ICctJyA6ICcnXG4gIHJldHVybiBjdXJyZW5jeSArIHNpZ24gKyBoZWFkICtcbiAgICBfaW50LnNsaWNlKGkpLnJlcGxhY2UoZGlnaXRzUkUsICckMSwnKSArXG4gICAgX2Zsb2F0XG59XG5cbi8qKlxuICogJ2l0ZW0nID0+ICdpdGVtcydcbiAqXG4gKiBAcGFyYW1zXG4gKiAgYW4gYXJyYXkgb2Ygc3RyaW5ncyBjb3JyZXNwb25kaW5nIHRvXG4gKiAgdGhlIHNpbmdsZSwgZG91YmxlLCB0cmlwbGUgLi4uIGZvcm1zIG9mIHRoZSB3b3JkIHRvXG4gKiAgYmUgcGx1cmFsaXplZC4gV2hlbiB0aGUgbnVtYmVyIHRvIGJlIHBsdXJhbGl6ZWRcbiAqICBleGNlZWRzIHRoZSBsZW5ndGggb2YgdGhlIGFyZ3MsIGl0IHdpbGwgdXNlIHRoZSBsYXN0XG4gKiAgZW50cnkgaW4gdGhlIGFycmF5LlxuICpcbiAqICBlLmcuIFsnc2luZ2xlJywgJ2RvdWJsZScsICd0cmlwbGUnLCAnbXVsdGlwbGUnXVxuICovXG5cbmV4cG9ydHMucGx1cmFsaXplID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHZhciBhcmdzID0gXy50b0FycmF5KGFyZ3VtZW50cywgMSlcbiAgcmV0dXJuIGFyZ3MubGVuZ3RoID4gMVxuICAgID8gKGFyZ3NbdmFsdWUgJSAxMCAtIDFdIHx8IGFyZ3NbYXJncy5sZW5ndGggLSAxXSlcbiAgICA6IChhcmdzWzBdICsgKHZhbHVlID09PSAxID8gJycgOiAncycpKVxufVxuXG4vKipcbiAqIERlYm91bmNlIGEgaGFuZGxlciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKiBAcGFyYW0ge051bWJlcn0gZGVsYXkgPSAzMDBcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMuZGVib3VuY2UgPSBmdW5jdGlvbiAoaGFuZGxlciwgZGVsYXkpIHtcbiAgaWYgKCFoYW5kbGVyKSByZXR1cm5cbiAgaWYgKCFkZWxheSkge1xuICAgIGRlbGF5ID0gMzAwXG4gIH1cbiAgcmV0dXJuIF8uZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpXG59XG5cbi8qKlxuICogSW5zdGFsbCBzcGVjaWFsIGFycmF5IGZpbHRlcnNcbiAqL1xuXG5fLmV4dGVuZChleHBvcnRzLCByZXF1aXJlKCcuL2FycmF5LWZpbHRlcnMnKSlcblxufSx7XCIuLi91dGlsXCI6NzIsXCIuL2FycmF5LWZpbHRlcnNcIjo0OH1dLDUwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgY29tcGlsZXIgPSByZXF1aXJlKCcuLi9jb21waWxlcicpXG52YXIgdGVtcGxhdGVQYXJzZXIgPSByZXF1aXJlKCcuLi9wYXJzZXJzL3RlbXBsYXRlJylcbnZhciBGcmFnbWVudCA9IHJlcXVpcmUoJy4vZnJhZ21lbnQnKVxudmFyIENhY2hlID0gcmVxdWlyZSgnLi4vY2FjaGUnKVxudmFyIGxpbmtlckNhY2hlID0gbmV3IENhY2hlKDUwMDApXG5cbi8qKlxuICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG4gKiBmcmFnbWVudC4gQ2FjaGVzIHRoZSBjb21waWxlZCBsaW5rZXIgaWYgcG9zc2libGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBlbFxuICovXG5cbmZ1bmN0aW9uIEZyYWdtZW50RmFjdG9yeSAodm0sIGVsKSB7XG4gIHRoaXMudm0gPSB2bVxuICB2YXIgdGVtcGxhdGVcbiAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIGVsID09PSAnc3RyaW5nJ1xuICBpZiAoaXNTdHJpbmcgfHwgXy5pc1RlbXBsYXRlKGVsKSkge1xuICAgIHRlbXBsYXRlID0gdGVtcGxhdGVQYXJzZXIucGFyc2UoZWwsIHRydWUpXG4gIH0gZWxzZSB7XG4gICAgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZChlbClcbiAgfVxuICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGVcbiAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQsIGJ1dCBvbmx5IGZvciBjb21wb25lbnRzXG4gIHZhciBsaW5rZXJcbiAgdmFyIGNpZCA9IHZtLmNvbnN0cnVjdG9yLmNpZFxuICBpZiAoY2lkID4gMCkge1xuICAgIHZhciBjYWNoZUlkID0gY2lkICsgKGlzU3RyaW5nID8gZWwgOiBlbC5vdXRlckhUTUwpXG4gICAgbGlua2VyID0gbGlua2VyQ2FjaGUuZ2V0KGNhY2hlSWQpXG4gICAgaWYgKCFsaW5rZXIpIHtcbiAgICAgIGxpbmtlciA9IGNvbXBpbGVyLmNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKVxuICAgICAgbGlua2VyQ2FjaGUucHV0KGNhY2hlSWQsIGxpbmtlcilcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGlua2VyID0gY29tcGlsZXIuY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpXG4gIH1cbiAgdGhpcy5saW5rZXIgPSBsaW5rZXJcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBmcmFnbWVudCBpbnN0YW5jZSB3aXRoIGdpdmVuIGhvc3QgYW5kIHNjb3BlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSBob3N0XG4gKiBAcGFyYW0ge09iamVjdH0gc2NvcGVcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IHBhcmVudEZyYWdcbiAqL1xuXG5GcmFnbWVudEZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuICB2YXIgZnJhZyA9IHRlbXBsYXRlUGFyc2VyLmNsb25lKHRoaXMudGVtcGxhdGUpXG4gIHJldHVybiBuZXcgRnJhZ21lbnQodGhpcy5saW5rZXIsIHRoaXMudm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZyYWdtZW50RmFjdG9yeVxuXG59LHtcIi4uL2NhY2hlXCI6MTYsXCIuLi9jb21waWxlclwiOjE5LFwiLi4vcGFyc2Vycy90ZW1wbGF0ZVwiOjYzLFwiLi4vdXRpbFwiOjcyLFwiLi9mcmFnbWVudFwiOjUxfV0sNTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciB0cmFuc2l0aW9uID0gcmVxdWlyZSgnLi4vdHJhbnNpdGlvbicpXG5cbi8qKlxuICogQWJzdHJhY3Rpb24gZm9yIGEgcGFydGlhbGx5LWNvbXBpbGVkIGZyYWdtZW50LlxuICogQ2FuIG9wdGlvbmFsbHkgY29tcGlsZSBjb250ZW50IHdpdGggYSBjaGlsZCBzY29wZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuICovXG5cbmZ1bmN0aW9uIEZyYWdtZW50IChsaW5rZXIsIHZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuICB0aGlzLmNoaWxkcmVuID0gW11cbiAgdGhpcy5jaGlsZEZyYWdzID0gW11cbiAgdGhpcy52bSA9IHZtXG4gIHRoaXMuc2NvcGUgPSBzY29wZVxuICB0aGlzLmluc2VydGVkID0gZmFsc2VcbiAgdGhpcy5wYXJlbnRGcmFnID0gcGFyZW50RnJhZ1xuICBpZiAocGFyZW50RnJhZykge1xuICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpXG4gIH1cbiAgdGhpcy51bmxpbmsgPSBsaW5rZXIodm0sIGZyYWcsIGhvc3QsIHNjb3BlLCB0aGlzKVxuICB2YXIgc2luZ2xlID0gdGhpcy5zaW5nbGUgPVxuICAgIGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcbiAgICAvLyBkbyBub3QgZ28gc2luZ2xlIG1vZGUgaWYgdGhlIG9ubHkgbm9kZSBpcyBhbiBhbmNob3JcbiAgICAhKGZyYWcuY2hpbGROb2Rlc1swXS5fX3Z1ZV9hbmNob3IpXG4gIGlmIChzaW5nbGUpIHtcbiAgICB0aGlzLm5vZGUgPSBmcmFnLmNoaWxkTm9kZXNbMF1cbiAgICB0aGlzLmJlZm9yZSA9IHNpbmdsZUJlZm9yZVxuICAgIHRoaXMucmVtb3ZlID0gc2luZ2xlUmVtb3ZlXG4gIH0gZWxzZSB7XG4gICAgdGhpcy5ub2RlID0gXy5jcmVhdGVBbmNob3IoJ2ZyYWdtZW50LXN0YXJ0JylcbiAgICB0aGlzLmVuZCA9IF8uY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1lbmQnKVxuICAgIHRoaXMuZnJhZyA9IGZyYWdcbiAgICBfLnByZXBlbmQodGhpcy5ub2RlLCBmcmFnKVxuICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpXG4gICAgdGhpcy5iZWZvcmUgPSBtdWx0aUJlZm9yZVxuICAgIHRoaXMucmVtb3ZlID0gbXVsdGlSZW1vdmVcbiAgfVxuICB0aGlzLm5vZGUuX192ZnJhZ19fID0gdGhpc1xufVxuXG4vKipcbiAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxuICogdGhpcyBmcmFnbWVudC4gQWxzbyBkbyBzbyByZWN1cnNpdmVseSBmb3IgYWxsIGNoaWxkXG4gKiBmcmFnbWVudHMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG4gIHZhciBpLCBsXG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGhvb2sodGhpcy5jaGlsZHJlbltpXSlcbiAgfVxuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5jYWxsSG9vayhob29rKVxuICB9XG59XG5cbi8qKlxuICogRGVzdHJveSB0aGUgZnJhZ21lbnQuXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnBhcmVudEZyYWcpIHtcbiAgICB0aGlzLnBhcmVudEZyYWcuY2hpbGRGcmFncy4kcmVtb3ZlKHRoaXMpXG4gIH1cbiAgdGhpcy51bmxpbmsoKVxufVxuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBzaW5nbGVCZWZvcmUgKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcbiAgdGhpcy5pbnNlcnRlZCA9IHRydWVcbiAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZVxuICAgID8gdHJhbnNpdGlvbi5iZWZvcmVcbiAgICA6IF8uYmVmb3JlXG4gIG1ldGhvZCh0aGlzLm5vZGUsIHRhcmdldCwgdGhpcy52bSlcbiAgaWYgKF8uaW5Eb2ModGhpcy5ub2RlKSkge1xuICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKVxuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGZyYWdtZW50LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKi9cblxuZnVuY3Rpb24gc2luZ2xlUmVtb3ZlICgpIHtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlXG4gIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gXy5pbkRvYyh0aGlzLm5vZGUpXG4gIHZhciBzZWxmID0gdGhpc1xuICBzZWxmLmNhbGxIb29rKGRlc3Ryb3lDaGlsZClcbiAgdHJhbnNpdGlvbi5yZW1vdmUodGhpcy5ub2RlLCB0aGlzLnZtLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcbiAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKVxuICAgIH1cbiAgICBzZWxmLmRlc3Ryb3koKVxuICB9KVxufVxuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aUJlZm9yZSAodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuICB0aGlzLmluc2VydGVkID0gdHJ1ZVxuICB2YXIgdm0gPSB0aGlzLnZtXG4gIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2VcbiAgICA/IHRyYW5zaXRpb24uYmVmb3JlXG4gICAgOiBfLmJlZm9yZVxuICBfLm1hcE5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIG1ldGhvZChub2RlLCB0YXJnZXQsIHZtKVxuICB9KVxuICBpZiAoXy5pbkRvYyh0aGlzLm5vZGUpKSB7XG4gICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpXG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZnJhZ21lbnQsIG11bHRpLW5vZGVzIHZlcnNpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aVJlbW92ZSAoKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZVxuICB2YXIgc2VsZiA9IHRoaXNcbiAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBfLmluRG9jKHRoaXMubm9kZSlcbiAgc2VsZi5jYWxsSG9vayhkZXN0cm95Q2hpbGQpXG4gIF8ucmVtb3ZlTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIHRoaXMudm0sIHRoaXMuZnJhZywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG4gICAgICBzZWxmLmNhbGxIb29rKGRldGFjaClcbiAgICB9XG4gICAgc2VsZi5kZXN0cm95KClcbiAgfSlcbn1cblxuLyoqXG4gKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBhdHRhY2ggKGNoaWxkKSB7XG4gIGlmICghY2hpbGQuX2lzQXR0YWNoZWQpIHtcbiAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJylcbiAgfVxufVxuXG4vKipcbiAqIENhbGwgZGVzdHJveSBmb3IgYWxsIGNvbnRhaW5lZCBpbnN0YW5jZXMsXG4gKiB3aXRoIHJlbW92ZTpmYWxzZSBhbmQgZGVmZXI6dHJ1ZS5cbiAqIERlZmVyIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIG5lZWQgdG9cbiAqIGtlZXAgdGhlIGNoaWxkcmVuIHRvIGNhbGwgZGV0YWNoIGhvb2tzXG4gKiBvbiB0aGVtLlxuICpcbiAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICovXG5cbmZ1bmN0aW9uIGRlc3Ryb3lDaGlsZCAoY2hpbGQpIHtcbiAgY2hpbGQuJGRlc3Ryb3koZmFsc2UsIHRydWUpXG59XG5cbi8qKlxuICogQ2FsbCBkZXRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gKi9cblxuZnVuY3Rpb24gZGV0YWNoIChjaGlsZCkge1xuICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQpIHtcbiAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJylcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZyYWdtZW50XG5cbn0se1wiLi4vdHJhbnNpdGlvblwiOjY1LFwiLi4vdXRpbFwiOjcyfV0sNTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgaW5Eb2MgPSBfLmluRG9jXG52YXIgZXZlbnRSRSA9IC9edi1vbjp8XkAvXG5cbi8qKlxuICogU2V0dXAgdGhlIGluc3RhbmNlJ3Mgb3B0aW9uIGV2ZW50cyAmIHdhdGNoZXJzLlxuICogSWYgdGhlIHZhbHVlIGlzIGEgc3RyaW5nLCB3ZSBwdWxsIGl0IGZyb20gdGhlXG4gKiBpbnN0YW5jZSdzIG1ldGhvZHMgYnkgbmFtZS5cbiAqL1xuXG5leHBvcnRzLl9pbml0RXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnNcbiAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG4gICAgcmVnaXN0ZXJDb21wb25lbnRFdmVudHModGhpcywgb3B0aW9ucy5lbClcbiAgfVxuICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJG9uJywgb3B0aW9ucy5ldmVudHMpXG4gIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckd2F0Y2gnLCBvcHRpb25zLndhdGNoKVxufVxuXG4vKipcbiAqIFJlZ2lzdGVyIHYtb24gZXZlbnRzIG9uIGEgY2hpbGQgY29tcG9uZW50XG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnRFdmVudHMgKHZtLCBlbCkge1xuICB2YXIgYXR0cnMgPSBlbC5hdHRyaWJ1dGVzXG4gIHZhciBuYW1lLCBoYW5kbGVyXG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgbmFtZSA9IGF0dHJzW2ldLm5hbWVcbiAgICBpZiAoZXZlbnRSRS50ZXN0KG5hbWUpKSB7XG4gICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKGV2ZW50UkUsICcnKVxuICAgICAgaGFuZGxlciA9ICh2bS5fc2NvcGUgfHwgdm0uX2NvbnRleHQpLiRldmFsKGF0dHJzW2ldLnZhbHVlLCB0cnVlKVxuICAgICAgdm0uJG9uKG5hbWUucmVwbGFjZShldmVudFJFKSwgaGFuZGxlcilcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZWdpc3RlciBjYWxsYmFja3MgZm9yIG9wdGlvbiBldmVudHMgYW5kIHdhdGNoZXJzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuICogQHBhcmFtIHtPYmplY3R9IGhhc2hcbiAqL1xuXG5mdW5jdGlvbiByZWdpc3RlckNhbGxiYWNrcyAodm0sIGFjdGlvbiwgaGFzaCkge1xuICBpZiAoIWhhc2gpIHJldHVyblxuICB2YXIgaGFuZGxlcnMsIGtleSwgaSwgalxuICBmb3IgKGtleSBpbiBoYXNoKSB7XG4gICAgaGFuZGxlcnMgPSBoYXNoW2tleV1cbiAgICBpZiAoXy5pc0FycmF5KGhhbmRsZXJzKSkge1xuICAgICAgZm9yIChpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzW2ldKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byByZWdpc3RlciBhbiBldmVudC93YXRjaCBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfE9iamVjdH0gaGFuZGxlclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICovXG5cbmZ1bmN0aW9uIHJlZ2lzdGVyICh2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgaGFuZGxlclxuICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZtW2FjdGlvbl0oa2V5LCBoYW5kbGVyLCBvcHRpb25zKVxuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIG1ldGhvZHMgPSB2bS4kb3B0aW9ucy5tZXRob2RzXG4gICAgdmFyIG1ldGhvZCA9IG1ldGhvZHMgJiYgbWV0aG9kc1toYW5kbGVyXVxuICAgIGlmIChtZXRob2QpIHtcbiAgICAgIHZtW2FjdGlvbl0oa2V5LCBtZXRob2QsIG9wdGlvbnMpXG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAnVW5rbm93biBtZXRob2Q6IFwiJyArIGhhbmRsZXIgKyAnXCIgd2hlbiAnICtcbiAgICAgICAgJ3JlZ2lzdGVyaW5nIGNhbGxiYWNrIGZvciAnICsgYWN0aW9uICtcbiAgICAgICAgJzogXCInICsga2V5ICsgJ1wiLidcbiAgICAgIClcbiAgICB9XG4gIH0gZWxzZSBpZiAoaGFuZGxlciAmJiB0eXBlID09PSAnb2JqZWN0Jykge1xuICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlci5oYW5kbGVyLCBoYW5kbGVyKVxuICB9XG59XG5cbi8qKlxuICogU2V0dXAgcmVjdXJzaXZlIGF0dGFjaGVkL2RldGFjaGVkIGNhbGxzXG4gKi9cblxuZXhwb3J0cy5faW5pdERPTUhvb2tzID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLiRvbignaG9vazphdHRhY2hlZCcsIG9uQXR0YWNoZWQpXG4gIHRoaXMuJG9uKCdob29rOmRldGFjaGVkJywgb25EZXRhY2hlZClcbn1cblxuLyoqXG4gKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGF0dGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cbiAqL1xuXG5mdW5jdGlvbiBvbkF0dGFjaGVkICgpIHtcbiAgaWYgKCF0aGlzLl9pc0F0dGFjaGVkKSB7XG4gICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWVcbiAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxBdHRhY2gpXG4gIH1cbn1cblxuLyoqXG4gKiBJdGVyYXRvciB0byBjYWxsIGF0dGFjaGVkIGhvb2tcbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBjYWxsQXR0YWNoIChjaGlsZCkge1xuICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJylcbiAgfVxufVxuXG4vKipcbiAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgZGV0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuICovXG5cbmZ1bmN0aW9uIG9uRGV0YWNoZWQgKCkge1xuICBpZiAodGhpcy5faXNBdHRhY2hlZCkge1xuICAgIHRoaXMuX2lzQXR0YWNoZWQgPSBmYWxzZVxuICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbERldGFjaClcbiAgfVxufVxuXG4vKipcbiAqIEl0ZXJhdG9yIHRvIGNhbGwgZGV0YWNoZWQgaG9va1xuICpcbiAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICovXG5cbmZ1bmN0aW9uIGNhbGxEZXRhY2ggKGNoaWxkKSB7XG4gIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKVxuICB9XG59XG5cbi8qKlxuICogVHJpZ2dlciBhbGwgaGFuZGxlcnMgZm9yIGEgaG9va1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBob29rXG4gKi9cblxuZXhwb3J0cy5fY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuICB2YXIgaGFuZGxlcnMgPSB0aGlzLiRvcHRpb25zW2hvb2tdXG4gIGlmIChoYW5kbGVycykge1xuICAgIGZvciAodmFyIGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICBoYW5kbGVyc1tpXS5jYWxsKHRoaXMpXG4gICAgfVxuICB9XG4gIHRoaXMuJGVtaXQoJ2hvb2s6JyArIGhvb2spXG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4uL3V0aWxcIjo3MixcIl9wcm9jZXNzXCI6MX1dLDUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBtZXJnZU9wdGlvbnMgPSByZXF1aXJlKCcuLi91dGlsJykubWVyZ2VPcHRpb25zXG52YXIgdWlkID0gMFxuXG4vKipcbiAqIFRoZSBtYWluIGluaXQgc2VxdWVuY2UuIFRoaXMgaXMgY2FsbGVkIGZvciBldmVyeVxuICogaW5zdGFuY2UsIGluY2x1ZGluZyBvbmVzIHRoYXQgYXJlIGNyZWF0ZWQgZnJvbSBleHRlbmRlZFxuICogY29uc3RydWN0b3JzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gdGhpcyBvcHRpb25zIG9iamVjdCBzaG91bGQgYmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIGNsYXNzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgYW5kIHRoZSBvcHRpb25zIHBhc3NlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0byB0aGUgY29uc3RydWN0b3IuXG4gKi9cblxuZXhwb3J0cy5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblxuICB0aGlzLiRlbCA9IG51bGxcbiAgdGhpcy4kcGFyZW50ID0gb3B0aW9ucy5wYXJlbnRcbiAgdGhpcy4kcm9vdCA9IHRoaXMuJHBhcmVudFxuICAgID8gdGhpcy4kcGFyZW50LiRyb290XG4gICAgOiB0aGlzXG4gIHRoaXMuJGNoaWxkcmVuID0gW11cbiAgdGhpcy4kcmVmcyA9IHt9ICAgICAgIC8vIGNoaWxkIHZtIHJlZmVyZW5jZXNcbiAgdGhpcy4kZWxzID0ge30gICAgICAgIC8vIGVsZW1lbnQgcmVmZXJlbmNlc1xuICB0aGlzLl93YXRjaGVycyA9IFtdICAgLy8gYWxsIHdhdGNoZXJzIGFzIGFuIGFycmF5XG4gIHRoaXMuX2RpcmVjdGl2ZXMgPSBbXSAvLyBhbGwgZGlyZWN0aXZlc1xuXG4gIC8vIGEgdWlkXG4gIHRoaXMuX3VpZCA9IHVpZCsrXG5cbiAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcbiAgdGhpcy5faXNWdWUgPSB0cnVlXG5cbiAgLy8gZXZlbnRzIGJvb2trZWVwaW5nXG4gIHRoaXMuX2V2ZW50cyA9IHt9ICAgICAgICAgICAgLy8gcmVnaXN0ZXJlZCBjYWxsYmFja3NcbiAgdGhpcy5fZXZlbnRzQ291bnQgPSB7fSAgICAgICAvLyBmb3IgJGJyb2FkY2FzdCBvcHRpbWl6YXRpb25cbiAgdGhpcy5fc2hvdWxkUHJvcGFnYXRlID0gZmFsc2UgLy8gZm9yIGV2ZW50IHByb3BhZ2F0aW9uXG5cbiAgLy8gZnJhZ21lbnQgaW5zdGFuY2UgcHJvcGVydGllc1xuICB0aGlzLl9pc0ZyYWdtZW50ID0gZmFsc2VcbiAgdGhpcy5fZnJhZ21lbnQgPSAgICAgICAgIC8vIEB0eXBlIHtEb2N1bWVudEZyYWdtZW50fVxuICB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gICAgLy8gQHR5cGUge1RleHR8Q29tbWVudH1cbiAgdGhpcy5fZnJhZ21lbnRFbmQgPSBudWxsIC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cbiAgLy8gbGlmZWN5Y2xlIHN0YXRlXG4gIHRoaXMuX2lzQ29tcGlsZWQgPVxuICB0aGlzLl9pc0Rlc3Ryb3llZCA9XG4gIHRoaXMuX2lzUmVhZHkgPVxuICB0aGlzLl9pc0F0dGFjaGVkID1cbiAgdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IGZhbHNlXG4gIHRoaXMuX3VubGlua0ZuID0gbnVsbFxuXG4gIC8vIGNvbnRleHQ6XG4gIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcbiAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG4gIC8vIGFuZCBpdHMgaG9zdC5cbiAgdGhpcy5fY29udGV4dCA9IG9wdGlvbnMuX2NvbnRleHQgfHwgdGhpcy4kcGFyZW50XG5cbiAgLy8gc2NvcGU6XG4gIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG4gIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG4gIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG4gIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cbiAgdGhpcy5fc2NvcGUgPSBvcHRpb25zLl9zY29wZVxuXG4gIC8vIGZyYWdtZW50OlxuICAvLyBpZiB0aGlzIGluc3RhbmNlIGlzIGNvbXBpbGVkIGluc2lkZSBhIEZyYWdtZW50LCBpdFxuICAvLyBuZWVkcyB0byByZWlnc3RlciBpdHNlbGYgYXMgYSBjaGlsZCBvZiB0aGF0IGZyYWdtZW50XG4gIC8vIGZvciBhdHRhY2gvZGV0YWNoIHRvIHdvcmsgcHJvcGVybHkuXG4gIHRoaXMuX2ZyYWcgPSBvcHRpb25zLl9mcmFnXG4gIGlmICh0aGlzLl9mcmFnKSB7XG4gICAgdGhpcy5fZnJhZy5jaGlsZHJlbi5wdXNoKHRoaXMpXG4gIH1cblxuICAvLyBwdXNoIHNlbGYgaW50byBwYXJlbnQgLyB0cmFuc2NsdXNpb24gaG9zdFxuICBpZiAodGhpcy4kcGFyZW50KSB7XG4gICAgdGhpcy4kcGFyZW50LiRjaGlsZHJlbi5wdXNoKHRoaXMpXG4gIH1cblxuICAvLyBtZXJnZSBvcHRpb25zLlxuICBvcHRpb25zID0gdGhpcy4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhcbiAgICB0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnMsXG4gICAgb3B0aW9ucyxcbiAgICB0aGlzXG4gIClcblxuICAvLyBzZXQgcmVmXG4gIHRoaXMuX3VwZGF0ZVJlZigpXG5cbiAgLy8gaW5pdGlhbGl6ZSBkYXRhIGFzIGVtcHR5IG9iamVjdC5cbiAgLy8gaXQgd2lsbCBiZSBmaWxsZWQgdXAgaW4gX2luaXRTY29wZSgpLlxuICB0aGlzLl9kYXRhID0ge31cblxuICAvLyBjYWxsIGluaXQgaG9va1xuICB0aGlzLl9jYWxsSG9vaygnaW5pdCcpXG5cbiAgLy8gaW5pdGlhbGl6ZSBkYXRhIG9ic2VydmF0aW9uIGFuZCBzY29wZSBpbmhlcml0YW5jZS5cbiAgdGhpcy5faW5pdFN0YXRlKClcblxuICAvLyBzZXR1cCBldmVudCBzeXN0ZW0gYW5kIG9wdGlvbiBldmVudHMuXG4gIHRoaXMuX2luaXRFdmVudHMoKVxuXG4gIC8vIGNhbGwgY3JlYXRlZCBob29rXG4gIHRoaXMuX2NhbGxIb29rKCdjcmVhdGVkJylcblxuICAvLyBpZiBgZWxgIG9wdGlvbiBpcyBwYXNzZWQsIHN0YXJ0IGNvbXBpbGF0aW9uLlxuICBpZiAob3B0aW9ucy5lbCkge1xuICAgIHRoaXMuJG1vdW50KG9wdGlvbnMuZWwpXG4gIH1cbn1cblxufSx7XCIuLi91dGlsXCI6NzJ9XSw1NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIERpcmVjdGl2ZSA9IHJlcXVpcmUoJy4uL2RpcmVjdGl2ZScpXG52YXIgY29tcGlsZXIgPSByZXF1aXJlKCcuLi9jb21waWxlcicpXG5cbi8qKlxuICogVXBkYXRlIHYtcmVmIGZvciBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcbiAqL1xuXG5leHBvcnRzLl91cGRhdGVSZWYgPSBmdW5jdGlvbiAocmVtb3ZlKSB7XG4gIHZhciByZWYgPSB0aGlzLiRvcHRpb25zLl9yZWZcbiAgaWYgKHJlZikge1xuICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMuX2NvbnRleHQpLiRyZWZzXG4gICAgaWYgKHJlbW92ZSkge1xuICAgICAgaWYgKHJlZnNbcmVmXSA9PT0gdGhpcykge1xuICAgICAgICByZWZzW3JlZl0gPSBudWxsXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZnNbcmVmXSA9IHRoaXNcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUcmFuc2NsdWRlLCBjb21waWxlIGFuZCBsaW5rIGVsZW1lbnQuXG4gKlxuICogSWYgYSBwcmUtY29tcGlsZWQgbGlua2VyIGlzIGF2YWlsYWJsZSwgdGhhdCBtZWFucyB0aGVcbiAqIHBhc3NlZCBpbiBlbGVtZW50IHdpbGwgYmUgcHJlLXRyYW5zY2x1ZGVkIGFuZCBjb21waWxlZFxuICogYXMgd2VsbCAtIGFsbCB3ZSBuZWVkIHRvIGRvIGlzIHRvIGNhbGwgdGhlIGxpbmtlci5cbiAqXG4gKiBPdGhlcndpc2Ugd2UgbmVlZCB0byBjYWxsIHRyYW5zY2x1ZGUvY29tcGlsZS9saW5rIGhlcmUuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7RWxlbWVudH1cbiAqL1xuXG5leHBvcnRzLl9jb21waWxlID0gZnVuY3Rpb24gKGVsKSB7XG4gIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9uc1xuXG4gIC8vIHRyYW5zY2x1ZGUgYW5kIGluaXQgZWxlbWVudFxuICAvLyB0cmFuc2NsdWRlIGNhbiBwb3RlbnRpYWxseSByZXBsYWNlIG9yaWdpbmFsXG4gIC8vIHNvIHdlIG5lZWQgdG8ga2VlcCByZWZlcmVuY2U7IHRoaXMgc3RlcCBhbHNvIGluamVjdHNcbiAgLy8gdGhlIHRlbXBsYXRlIGFuZCBjYWNoZXMgdGhlIG9yaWdpbmFsIGF0dHJpYnV0ZXNcbiAgLy8gb24gdGhlIGNvbnRhaW5lciBub2RlIGFuZCByZXBsYWNlciBub2RlLlxuICB2YXIgb3JpZ2luYWwgPSBlbFxuICBlbCA9IGNvbXBpbGVyLnRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpXG4gIHRoaXMuX2luaXRFbGVtZW50KGVsKVxuXG4gIC8vIHJvb3QgaXMgYWx3YXlzIGNvbXBpbGVkIHBlci1pbnN0YW5jZSwgYmVjYXVzZVxuICAvLyBjb250YWluZXIgYXR0cnMgYW5kIHByb3BzIGNhbiBiZSBkaWZmZXJlbnQgZXZlcnkgdGltZS5cbiAgdmFyIGNvbnRleHRPcHRpb25zID0gdGhpcy5fY29udGV4dCAmJiB0aGlzLl9jb250ZXh0LiRvcHRpb25zXG4gIHZhciByb290TGlua2VyID0gY29tcGlsZXIuY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKVxuXG4gIC8vIGNvbXBpbGUgYW5kIGxpbmsgdGhlIHJlc3RcbiAgdmFyIGNvbnRlbnRMaW5rRm5cbiAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yXG4gIC8vIGNvbXBvbmVudCBjb21waWxhdGlvbiBjYW4gYmUgY2FjaGVkXG4gIC8vIGFzIGxvbmcgYXMgaXQncyBub3QgdXNpbmcgaW5saW5lLXRlbXBsYXRlXG4gIGlmIChvcHRpb25zLl9saW5rZXJDYWNoYWJsZSkge1xuICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlclxuICAgIGlmICghY29udGVudExpbmtGbikge1xuICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyID0gY29tcGlsZXIuY29tcGlsZShlbCwgb3B0aW9ucylcbiAgICB9XG4gIH1cblxuICAvLyBsaW5rIHBoYXNlXG4gIC8vIG1ha2Ugc3VyZSB0byBsaW5rIHJvb3Qgd2l0aCBwcm9wIHNjb3BlIVxuICB2YXIgcm9vdFVubGlua0ZuID0gcm9vdExpbmtlcih0aGlzLCBlbCwgdGhpcy5fc2NvcGUpXG4gIHZhciBjb250ZW50VW5saW5rRm4gPSBjb250ZW50TGlua0ZuXG4gICAgPyBjb250ZW50TGlua0ZuKHRoaXMsIGVsKVxuICAgIDogY29tcGlsZXIuY29tcGlsZShlbCwgb3B0aW9ucykodGhpcywgZWwpXG5cbiAgLy8gcmVnaXN0ZXIgY29tcG9zaXRlIHVubGluayBmdW5jdGlvblxuICAvLyB0byBiZSBjYWxsZWQgZHVyaW5nIGluc3RhbmNlIGRlc3RydWN0aW9uXG4gIHRoaXMuX3VubGlua0ZuID0gZnVuY3Rpb24gKCkge1xuICAgIHJvb3RVbmxpbmtGbigpXG4gICAgLy8gcGFzc2luZyBkZXN0cm95aW5nOiB0cnVlIHRvIGF2b2lkIHNlYXJjaGluZyBhbmRcbiAgICAvLyBzcGxpY2luZyB0aGUgZGlyZWN0aXZlc1xuICAgIGNvbnRlbnRVbmxpbmtGbih0cnVlKVxuICB9XG5cbiAgLy8gZmluYWxseSByZXBsYWNlIG9yaWdpbmFsXG4gIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcbiAgICBfLnJlcGxhY2Uob3JpZ2luYWwsIGVsKVxuICB9XG5cbiAgdGhpcy5faXNDb21waWxlZCA9IHRydWVcbiAgdGhpcy5fY2FsbEhvb2soJ2NvbXBpbGVkJylcbiAgcmV0dXJuIGVsXG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBpbnN0YW5jZSBlbGVtZW50LiBDYWxsZWQgaW4gdGhlIHB1YmxpY1xuICogJG1vdW50KCkgbWV0aG9kLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5leHBvcnRzLl9pbml0RWxlbWVudCA9IGZ1bmN0aW9uIChlbCkge1xuICBpZiAoZWwgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSB7XG4gICAgdGhpcy5faXNGcmFnbWVudCA9IHRydWVcbiAgICB0aGlzLiRlbCA9IHRoaXMuX2ZyYWdtZW50U3RhcnQgPSBlbC5maXJzdENoaWxkXG4gICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBlbC5sYXN0Q2hpbGRcbiAgICAvLyBzZXQgcGVyc2lzdGVkIHRleHQgYW5jaG9ycyB0byBlbXB0eVxuICAgIGlmICh0aGlzLl9mcmFnbWVudFN0YXJ0Lm5vZGVUeXBlID09PSAzKSB7XG4gICAgICB0aGlzLl9mcmFnbWVudFN0YXJ0LmRhdGEgPSB0aGlzLl9mcmFnbWVudEVuZC5kYXRhID0gJydcbiAgICB9XG4gICAgdGhpcy5fZnJhZ21lbnQgPSBlbFxuICB9IGVsc2Uge1xuICAgIHRoaXMuJGVsID0gZWxcbiAgfVxuICB0aGlzLiRlbC5fX3Z1ZV9fID0gdGhpc1xuICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlQ29tcGlsZScpXG59XG5cbi8qKlxuICogQ3JlYXRlIGFuZCBiaW5kIGEgZGlyZWN0aXZlIHRvIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBkaXJlY3RpdmUgbmFtZVxuICogQHBhcmFtIHtOb2RlfSBub2RlICAgLSB0YXJnZXQgbm9kZVxuICogQHBhcmFtIHtPYmplY3R9IGRlc2MgLSBwYXJzZWQgZGlyZWN0aXZlIGRlc2NyaXB0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWYgIC0gZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0XG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICovXG5cbmV4cG9ydHMuX2JpbmREaXIgPSBmdW5jdGlvbiAoZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgdGhpcy5fZGlyZWN0aXZlcy5wdXNoKFxuICAgIG5ldyBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdGhpcywgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpXG4gIClcbn1cblxuLyoqXG4gKiBUZWFyZG93biBhbiBpbnN0YW5jZSwgdW5vYnNlcnZlcyB0aGUgZGF0YSwgdW5iaW5kIGFsbCB0aGVcbiAqIGRpcmVjdGl2ZXMsIHR1cm4gb2ZmIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzLCBldGMuXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSByZW1vdmUgLSB3aGV0aGVyIHRvIHJlbW92ZSB0aGUgRE9NIG5vZGUuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cCAtIGlmIHRydWUsIGRlZmVyIGNsZWFudXAgdG9cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgY2FsbGVkIGxhdGVyXG4gKi9cblxuZXhwb3J0cy5fZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuICBpZiAodGhpcy5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgIGlmICghZGVmZXJDbGVhbnVwKSB7XG4gICAgICB0aGlzLl9jbGVhbnVwKClcbiAgICB9XG4gICAgcmV0dXJuXG4gIH1cbiAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZURlc3Ryb3knKVxuICB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdHJ1ZVxuICB2YXIgaVxuICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudC4gb25seSBuZWNlc3NhcnlcbiAgLy8gaWYgcGFyZW50IGlzIG5vdCBiZWluZyBkZXN0cm95ZWQgYXMgd2VsbC5cbiAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudFxuICBpZiAocGFyZW50ICYmICFwYXJlbnQuX2lzQmVpbmdEZXN0cm95ZWQpIHtcbiAgICBwYXJlbnQuJGNoaWxkcmVuLiRyZW1vdmUodGhpcylcbiAgICAvLyB1bnJlZ2lzdGVyIHJlZiAocmVtb3ZlOiB0cnVlKVxuICAgIHRoaXMuX3VwZGF0ZVJlZih0cnVlKVxuICB9XG4gIC8vIGRlc3Ryb3kgYWxsIGNoaWxkcmVuLlxuICBpID0gdGhpcy4kY2hpbGRyZW4ubGVuZ3RoXG4gIHdoaWxlIChpLS0pIHtcbiAgICB0aGlzLiRjaGlsZHJlbltpXS4kZGVzdHJveSgpXG4gIH1cbiAgLy8gdGVhcmRvd24gcHJvcHNcbiAgaWYgKHRoaXMuX3Byb3BzVW5saW5rRm4pIHtcbiAgICB0aGlzLl9wcm9wc1VubGlua0ZuKClcbiAgfVxuICAvLyB0ZWFyZG93biBhbGwgZGlyZWN0aXZlcy4gdGhpcyBhbHNvIHRlYXJzZG93biBhbGxcbiAgLy8gZGlyZWN0aXZlLW93bmVkIHdhdGNoZXJzLlxuICBpZiAodGhpcy5fdW5saW5rRm4pIHtcbiAgICB0aGlzLl91bmxpbmtGbigpXG4gIH1cbiAgaSA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgdGhpcy5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKVxuICB9XG4gIC8vIHJlbW92ZSByZWZlcmVuY2UgdG8gc2VsZiBvbiAkZWxcbiAgaWYgKHRoaXMuJGVsKSB7XG4gICAgdGhpcy4kZWwuX192dWVfXyA9IG51bGxcbiAgfVxuICAvLyByZW1vdmUgRE9NIGVsZW1lbnRcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIGlmIChyZW1vdmUgJiYgdGhpcy4kZWwpIHtcbiAgICB0aGlzLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZi5fY2xlYW51cCgpXG4gICAgfSlcbiAgfSBlbHNlIGlmICghZGVmZXJDbGVhbnVwKSB7XG4gICAgdGhpcy5fY2xlYW51cCgpXG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhbiB1cCB0byBlbnN1cmUgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICogVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGxlYXZlIHRyYW5zaXRpb24gaWYgdGhlcmVcbiAqIGlzIGFueS5cbiAqL1xuXG5leHBvcnRzLl9jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5faXNEZXN0cm95ZWQpIHtcbiAgICByZXR1cm5cbiAgfVxuICAvLyByZW1vdmUgc2VsZiBmcm9tIG93bmVyIGZyYWdtZW50XG4gIC8vIGRvIGl0IGluIGNsZWFudXAgc28gdGhhdCB3ZSBjYW4gY2FsbCAkZGVzdHJveSB3aXRoXG4gIC8vIGRlZmVyIHJpZ2h0IHdoZW4gYSBmcmFnbWVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkLlxuICBpZiAodGhpcy5fZnJhZykge1xuICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4uJHJlbW92ZSh0aGlzKVxuICB9XG4gIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXG4gIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxuICBpZiAodGhpcy5fZGF0YS5fX29iX18pIHtcbiAgICB0aGlzLl9kYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKVxuICB9XG4gIC8vIENsZWFuIHVwIHJlZmVyZW5jZXMgdG8gcHJpdmF0ZSBwcm9wZXJ0aWVzIGFuZCBvdGhlclxuICAvLyBpbnN0YW5jZXMuIHByZXNlcnZlIHJlZmVyZW5jZSB0byBfZGF0YSBzbyB0aGF0IHByb3h5XG4gIC8vIGFjY2Vzc29ycyBzdGlsbCB3b3JrLiBUaGUgb25seSBwb3RlbnRpYWwgc2lkZSBlZmZlY3RcbiAgLy8gaGVyZSBpcyB0aGF0IG11dGF0aW5nIHRoZSBpbnN0YW5jZSBhZnRlciBpdCdzIGRlc3Ryb3llZFxuICAvLyBtYXkgYWZmZWN0IHRoZSBzdGF0ZSBvZiBvdGhlciBjb21wb25lbnRzIHRoYXQgYXJlIHN0aWxsXG4gIC8vIG9ic2VydmluZyB0aGUgc2FtZSBvYmplY3QsIGJ1dCB0aGF0IHNlZW1zIHRvIGJlIGFcbiAgLy8gcmVhc29uYWJsZSByZXNwb25zaWJpbGl0eSBmb3IgdGhlIHVzZXIgcmF0aGVyIHRoYW5cbiAgLy8gYWx3YXlzIHRocm93aW5nIGFuIGVycm9yIG9uIHRoZW0uXG4gIHRoaXMuJGVsID1cbiAgdGhpcy4kcGFyZW50ID1cbiAgdGhpcy4kcm9vdCA9XG4gIHRoaXMuJGNoaWxkcmVuID1cbiAgdGhpcy5fd2F0Y2hlcnMgPVxuICB0aGlzLl9jb250ZXh0ID1cbiAgdGhpcy5fc2NvcGUgPVxuICB0aGlzLl9kaXJlY3RpdmVzID0gbnVsbFxuICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cbiAgdGhpcy5faXNEZXN0cm95ZWQgPSB0cnVlXG4gIHRoaXMuX2NhbGxIb29rKCdkZXN0cm95ZWQnKVxuICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLlxuICB0aGlzLiRvZmYoKVxufVxuXG59LHtcIi4uL2NvbXBpbGVyXCI6MTksXCIuLi9kaXJlY3RpdmVcIjoyMixcIi4uL3V0aWxcIjo3Mn1dLDU1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxuXG4vKipcbiAqIEFwcGx5IGEgbGlzdCBvZiBmaWx0ZXIgKGRlc2NyaXB0b3JzKSB0byBhIHZhbHVlLlxuICogVXNpbmcgcGxhaW4gZm9yIGxvb3BzIGhlcmUgYmVjYXVzZSB0aGlzIHdpbGwgYmUgY2FsbGVkIGluXG4gKiB0aGUgZ2V0dGVyIG9mIGFueSB3YXRjaGVyIHdpdGggZmlsdGVycyBzbyBpdCBpcyB2ZXJ5XG4gKiBwZXJmb3JtYW5jZSBzZW5zaXRpdmUuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHsqfSBbb2xkVmFsdWVdXG4gKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJzXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHdyaXRlXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cbmV4cG9ydHMuX2FwcGx5RmlsdGVycyA9IGZ1bmN0aW9uICh2YWx1ZSwgb2xkVmFsdWUsIGZpbHRlcnMsIHdyaXRlKSB7XG4gIHZhciBmaWx0ZXIsIGZuLCBhcmdzLCBhcmcsIG9mZnNldCwgaSwgbCwgaiwga1xuICBmb3IgKGkgPSAwLCBsID0gZmlsdGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmaWx0ZXIgPSBmaWx0ZXJzW2ldXG4gICAgZm4gPSBfLnJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlci5uYW1lKVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBfLmFzc2VydEFzc2V0KGZuLCAnZmlsdGVyJywgZmlsdGVyLm5hbWUpXG4gICAgfVxuICAgIGlmICghZm4pIGNvbnRpbnVlXG4gICAgZm4gPSB3cml0ZSA/IGZuLndyaXRlIDogKGZuLnJlYWQgfHwgZm4pXG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgY29udGludWVcbiAgICBhcmdzID0gd3JpdGUgPyBbdmFsdWUsIG9sZFZhbHVlXSA6IFt2YWx1ZV1cbiAgICBvZmZzZXQgPSB3cml0ZSA/IDIgOiAxXG4gICAgaWYgKGZpbHRlci5hcmdzKSB7XG4gICAgICBmb3IgKGogPSAwLCBrID0gZmlsdGVyLmFyZ3MubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgIGFyZyA9IGZpbHRlci5hcmdzW2pdXG4gICAgICAgIGFyZ3NbaiArIG9mZnNldF0gPSBhcmcuZHluYW1pY1xuICAgICAgICAgID8gdGhpcy4kZ2V0KGFyZy52YWx1ZSlcbiAgICAgICAgICA6IGFyZy52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICB2YWx1ZSA9IGZuLmFwcGx5KHRoaXMsIGFyZ3MpXG4gIH1cbiAgcmV0dXJuIHZhbHVlXG59XG5cbi8qKlxuICogUmVzb2x2ZSBhIGNvbXBvbmVudCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNvbXBvbmVudFxuICogaXMgZGVmaW5lZCBub3JtYWxseSBvciB1c2luZyBhbiBhc3luYyBmYWN0b3J5IGZ1bmN0aW9uLlxuICogUmVzb2x2ZXMgc3luY2hyb25vdXNseSBpZiBhbHJlYWR5IHJlc29sdmVkLCBvdGhlcndpc2VcbiAqIHJlc29sdmVzIGFzeW5jaHJvbm91c2x5IGFuZCBjYWNoZXMgdGhlIHJlc29sdmVkXG4gKiBjb25zdHJ1Y3RvciBvbiB0aGUgZmFjdG9yeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZXhwb3J0cy5fcmVzb2x2ZUNvbXBvbmVudCA9IGZ1bmN0aW9uIChpZCwgY2IpIHtcbiAgdmFyIGZhY3RvcnkgPSBfLnJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnY29tcG9uZW50cycsIGlkKVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIF8uYXNzZXJ0QXNzZXQoZmFjdG9yeSwgJ2NvbXBvbmVudCcsIGlkKVxuICB9XG4gIGlmICghZmFjdG9yeSkge1xuICAgIHJldHVyblxuICB9XG4gIC8vIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5XG4gIGlmICghZmFjdG9yeS5vcHRpb25zKSB7XG4gICAgaWYgKGZhY3RvcnkucmVzb2x2ZWQpIHtcbiAgICAgIC8vIGNhY2hlZFxuICAgICAgY2IoZmFjdG9yeS5yZXNvbHZlZClcbiAgICB9IGVsc2UgaWYgKGZhY3RvcnkucmVxdWVzdGVkKSB7XG4gICAgICAvLyBwb29sIGNhbGxiYWNrc1xuICAgICAgZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2IpXG4gICAgfSBlbHNlIHtcbiAgICAgIGZhY3RvcnkucmVxdWVzdGVkID0gdHJ1ZVxuICAgICAgdmFyIGNicyA9IGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcyA9IFtjYl1cbiAgICAgIGZhY3RvcnkoZnVuY3Rpb24gcmVzb2x2ZSAocmVzKSB7XG4gICAgICAgIGlmIChfLmlzUGxhaW5PYmplY3QocmVzKSkge1xuICAgICAgICAgIHJlcyA9IF8uVnVlLmV4dGVuZChyZXMpXG4gICAgICAgIH1cbiAgICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcbiAgICAgICAgZmFjdG9yeS5yZXNvbHZlZCA9IHJlc1xuICAgICAgICAvLyBpbnZva2UgY2FsbGJhY2tzXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGNic1tpXShyZXMpXG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdCAocmVhc29uKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAgICdGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQ6ICcgKyBpZCArICcuICcgK1xuICAgICAgICAgIChyZWFzb24gPyAnXFxuUmVhc29uOiAnICsgcmVhc29uIDogJycpXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIG5vcm1hbCBjb21wb25lbnRcbiAgICBjYihmYWN0b3J5KVxuICB9XG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4uL3V0aWxcIjo3MixcIl9wcm9jZXNzXCI6MX1dLDU2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIGNvbXBpbGVyID0gcmVxdWlyZSgnLi4vY29tcGlsZXInKVxudmFyIE9ic2VydmVyID0gcmVxdWlyZSgnLi4vb2JzZXJ2ZXInKVxudmFyIERlcCA9IHJlcXVpcmUoJy4uL29ic2VydmVyL2RlcCcpXG52YXIgV2F0Y2hlciA9IHJlcXVpcmUoJy4uL3dhdGNoZXInKVxuXG4vKipcbiAqIFNldHVwIHRoZSBzY29wZSBvZiBhbiBpbnN0YW5jZSwgd2hpY2ggY29udGFpbnM6XG4gKiAtIG9ic2VydmVkIGRhdGFcbiAqIC0gY29tcHV0ZWQgcHJvcGVydGllc1xuICogLSB1c2VyIG1ldGhvZHNcbiAqIC0gbWV0YSBwcm9wZXJ0aWVzXG4gKi9cblxuZXhwb3J0cy5faW5pdFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9pbml0UHJvcHMoKVxuICB0aGlzLl9pbml0TWV0YSgpXG4gIHRoaXMuX2luaXRNZXRob2RzKClcbiAgdGhpcy5faW5pdERhdGEoKVxuICB0aGlzLl9pbml0Q29tcHV0ZWQoKVxufVxuXG4vKipcbiAqIEluaXRpYWxpemUgcHJvcHMuXG4gKi9cblxuZXhwb3J0cy5faW5pdFByb3BzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnNcbiAgdmFyIGVsID0gb3B0aW9ucy5lbFxuICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzXG4gIGlmIChwcm9wcyAmJiAhZWwpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICdQcm9wcyB3aWxsIG5vdCBiZSBjb21waWxlZCBpZiBubyBgZWxgIG9wdGlvbiBpcyAnICtcbiAgICAgICdwcm92aWRlZCBhdCBpbnN0YW50aWF0aW9uLidcbiAgICApXG4gIH1cbiAgLy8gbWFrZSBzdXJlIHRvIGNvbnZlcnQgc3RyaW5nIHNlbGVjdG9ycyBpbnRvIGVsZW1lbnQgbm93XG4gIGVsID0gb3B0aW9ucy5lbCA9IF8ucXVlcnkoZWwpXG4gIHRoaXMuX3Byb3BzVW5saW5rRm4gPSBlbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSAmJiBwcm9wc1xuICAgIC8vIHByb3BzIG11c3QgYmUgbGlua2VkIGluIHByb3BlciBzY29wZSBpZiBpbnNpZGUgdi1mb3JcbiAgICA/IGNvbXBpbGVyLmNvbXBpbGVBbmRMaW5rUHJvcHModGhpcywgZWwsIHByb3BzLCB0aGlzLl9zY29wZSlcbiAgICA6IG51bGxcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplIHRoZSBkYXRhLlxuICovXG5cbmV4cG9ydHMuX2luaXREYXRhID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcHJvcHNEYXRhID0gdGhpcy5fZGF0YVxuICB2YXIgb3B0aW9uc0RhdGFGbiA9IHRoaXMuJG9wdGlvbnMuZGF0YVxuICB2YXIgb3B0aW9uc0RhdGEgPSBvcHRpb25zRGF0YUZuICYmIG9wdGlvbnNEYXRhRm4oKVxuICBpZiAob3B0aW9uc0RhdGEpIHtcbiAgICB0aGlzLl9kYXRhID0gb3B0aW9uc0RhdGFcbiAgICBmb3IgKHZhciBwcm9wIGluIHByb3BzRGF0YSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAgICAgICBvcHRpb25zRGF0YS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICBfLndhcm4oXG4gICAgICAgICAgJ0RhdGEgZmllbGQgXCInICsgcHJvcCArICdcIiBpcyBhbHJlYWR5IGRlZmluZWQgJyArXG4gICAgICAgICAgJ2FzIGEgcHJvcC4gVXNlIHByb3AgZGVmYXVsdCB2YWx1ZSBpbnN0ZWFkLidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX3Byb3BzW3Byb3BdLnJhdyAhPT0gbnVsbCB8fFxuICAgICAgICAgICFvcHRpb25zRGF0YS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICBfLnNldChvcHRpb25zRGF0YSwgcHJvcCwgcHJvcHNEYXRhW3Byb3BdKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICB2YXIgZGF0YSA9IHRoaXMuX2RhdGFcbiAgLy8gcHJveHkgZGF0YSBvbiBpbnN0YW5jZVxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpXG4gIHZhciBpLCBrZXlcbiAgaSA9IGtleXMubGVuZ3RoXG4gIHdoaWxlIChpLS0pIHtcbiAgICBrZXkgPSBrZXlzW2ldXG4gICAgdGhpcy5fcHJveHkoa2V5KVxuICB9XG4gIC8vIG9ic2VydmUgZGF0YVxuICBPYnNlcnZlci5jcmVhdGUoZGF0YSwgdGhpcylcbn1cblxuLyoqXG4gKiBTd2FwIHRoZSBpbnN0YW5jZSdzICRkYXRhLiBDYWxsZWQgaW4gJGRhdGEncyBzZXR0ZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG5ld0RhdGFcbiAqL1xuXG5leHBvcnRzLl9zZXREYXRhID0gZnVuY3Rpb24gKG5ld0RhdGEpIHtcbiAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge31cbiAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhXG4gIHRoaXMuX2RhdGEgPSBuZXdEYXRhXG4gIHZhciBrZXlzLCBrZXksIGlcbiAgLy8gdW5wcm94eSBrZXlzIG5vdCBwcmVzZW50IGluIG5ldyBkYXRhXG4gIGtleXMgPSBPYmplY3Qua2V5cyhvbGREYXRhKVxuICBpID0ga2V5cy5sZW5ndGhcbiAgd2hpbGUgKGktLSkge1xuICAgIGtleSA9IGtleXNbaV1cbiAgICBpZiAoIShrZXkgaW4gbmV3RGF0YSkpIHtcbiAgICAgIHRoaXMuX3VucHJveHkoa2V5KVxuICAgIH1cbiAgfVxuICAvLyBwcm94eSBrZXlzIG5vdCBhbHJlYWR5IHByb3hpZWQsXG4gIC8vIGFuZCB0cmlnZ2VyIGNoYW5nZSBmb3IgY2hhbmdlZCB2YWx1ZXNcbiAga2V5cyA9IE9iamVjdC5rZXlzKG5ld0RhdGEpXG4gIGkgPSBrZXlzLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAga2V5ID0ga2V5c1tpXVxuICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAvLyBuZXcgcHJvcGVydHlcbiAgICAgIHRoaXMuX3Byb3h5KGtleSlcbiAgICB9XG4gIH1cbiAgb2xkRGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcylcbiAgT2JzZXJ2ZXIuY3JlYXRlKG5ld0RhdGEsIHRoaXMpXG4gIHRoaXMuX2RpZ2VzdCgpXG59XG5cbi8qKlxuICogUHJveHkgYSBwcm9wZXJ0eSwgc28gdGhhdFxuICogdm0ucHJvcCA9PT0gdm0uX2RhdGEucHJvcFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqL1xuXG5leHBvcnRzLl9wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgaWYgKCFfLmlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgIC8vIG5lZWQgdG8gc3RvcmUgcmVmIHRvIHNlbGYgaGVyZVxuICAgIC8vIGJlY2F1c2UgdGhlc2UgZ2V0dGVyL3NldHRlcnMgbWlnaHRcbiAgICAvLyBiZSBjYWxsZWQgYnkgY2hpbGQgc2NvcGVzIHZpYVxuICAgIC8vIHByb3RvdHlwZSBpbmhlcml0YW5jZS5cbiAgICB2YXIgc2VsZiA9IHRoaXNcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwga2V5LCB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBwcm94eUdldHRlciAoKSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9kYXRhW2tleV1cbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHByb3h5U2V0dGVyICh2YWwpIHtcbiAgICAgICAgc2VsZi5fZGF0YVtrZXldID0gdmFsXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuXG4vKipcbiAqIFVucHJveHkgYSBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKi9cblxuZXhwb3J0cy5fdW5wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgaWYgKCFfLmlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgIGRlbGV0ZSB0aGlzW2tleV1cbiAgfVxufVxuXG4vKipcbiAqIEZvcmNlIHVwZGF0ZSBvbiBldmVyeSB3YXRjaGVyIGluIHNjb3BlLlxuICovXG5cbmV4cG9ydHMuX2RpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB0aGlzLl93YXRjaGVyc1tpXS51cGRhdGUodHJ1ZSkgLy8gc2hhbGxvdyB1cGRhdGVzXG4gIH1cbn1cblxuLyoqXG4gKiBTZXR1cCBjb21wdXRlZCBwcm9wZXJ0aWVzLiBUaGV5IGFyZSBlc3NlbnRpYWxseVxuICogc3BlY2lhbCBnZXR0ZXIvc2V0dGVyc1xuICovXG5cbmZ1bmN0aW9uIG5vb3AgKCkge31cbmV4cG9ydHMuX2luaXRDb21wdXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNvbXB1dGVkID0gdGhpcy4kb3B0aW9ucy5jb21wdXRlZFxuICBpZiAoY29tcHV0ZWQpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcbiAgICAgIHZhciB1c2VyRGVmID0gY29tcHV0ZWRba2V5XVxuICAgICAgdmFyIGRlZiA9IHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHVzZXJEZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZGVmLmdldCA9IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLCB0aGlzKVxuICAgICAgICBkZWYuc2V0ID0gbm9vcFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVmLmdldCA9IHVzZXJEZWYuZ2V0XG4gICAgICAgICAgPyB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZVxuICAgICAgICAgICAgPyBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZi5nZXQsIHRoaXMpXG4gICAgICAgICAgICA6IF8uYmluZCh1c2VyRGVmLmdldCwgdGhpcylcbiAgICAgICAgICA6IG5vb3BcbiAgICAgICAgZGVmLnNldCA9IHVzZXJEZWYuc2V0XG4gICAgICAgICAgPyBfLmJpbmQodXNlckRlZi5zZXQsIHRoaXMpXG4gICAgICAgICAgOiBub29wXG4gICAgICB9XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCBkZWYpXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIG1ha2VDb21wdXRlZEdldHRlciAoZ2V0dGVyLCBvd25lcikge1xuICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKG93bmVyLCBnZXR0ZXIsIG51bGwsIHtcbiAgICBsYXp5OiB0cnVlXG4gIH0pXG4gIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlciAoKSB7XG4gICAgaWYgKHdhdGNoZXIuZGlydHkpIHtcbiAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKVxuICAgIH1cbiAgICBpZiAoRGVwLnRhcmdldCkge1xuICAgICAgd2F0Y2hlci5kZXBlbmQoKVxuICAgIH1cbiAgICByZXR1cm4gd2F0Y2hlci52YWx1ZVxuICB9XG59XG5cbi8qKlxuICogU2V0dXAgaW5zdGFuY2UgbWV0aG9kcy4gTWV0aG9kcyBtdXN0IGJlIGJvdW5kIHRvIHRoZVxuICogaW5zdGFuY2Ugc2luY2UgdGhleSBtaWdodCBiZSBwYXNzZWQgZG93biBhcyBhIHByb3AgdG9cbiAqIGNoaWxkIGNvbXBvbmVudHMuXG4gKi9cblxuZXhwb3J0cy5faW5pdE1ldGhvZHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBtZXRob2RzID0gdGhpcy4kb3B0aW9ucy5tZXRob2RzXG4gIGlmIChtZXRob2RzKSB7XG4gICAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHtcbiAgICAgIHRoaXNba2V5XSA9IF8uYmluZChtZXRob2RzW2tleV0sIHRoaXMpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBtZXRhIGluZm9ybWF0aW9uIGxpa2UgJGluZGV4LCAka2V5ICYgJHZhbHVlLlxuICovXG5cbmV4cG9ydHMuX2luaXRNZXRhID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbWV0YXMgPSB0aGlzLiRvcHRpb25zLl9tZXRhXG4gIGlmIChtZXRhcykge1xuICAgIGZvciAodmFyIGtleSBpbiBtZXRhcykge1xuICAgICAgXy5kZWZpbmVSZWFjdGl2ZSh0aGlzLCBrZXksIG1ldGFzW2tleV0pXG4gICAgfVxuICB9XG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4uL2NvbXBpbGVyXCI6MTksXCIuLi9vYnNlcnZlclwiOjU5LFwiLi4vb2JzZXJ2ZXIvZGVwXCI6NTgsXCIuLi91dGlsXCI6NzIsXCIuLi93YXRjaGVyXCI6NzYsXCJfcHJvY2Vzc1wiOjF9XSw1NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGVcbnZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pXG5cbi8qKlxuICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG4gKi9cblxuO1tcbiAgJ3B1c2gnLFxuICAncG9wJyxcbiAgJ3NoaWZ0JyxcbiAgJ3Vuc2hpZnQnLFxuICAnc3BsaWNlJyxcbiAgJ3NvcnQnLFxuICAncmV2ZXJzZSdcbl1cbi5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgLy8gY2FjaGUgb3JpZ2luYWwgbWV0aG9kXG4gIHZhciBvcmlnaW5hbCA9IGFycmF5UHJvdG9bbWV0aG9kXVxuICBfLmRlZmluZShhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvciAoKSB7XG4gICAgLy8gYXZvaWQgbGVha2luZyBhcmd1bWVudHM6XG4gICAgLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvc3VyZS13aXRoLWFyZ3VtZW50c1xuICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aFxuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkpXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXVxuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncylcbiAgICB2YXIgb2IgPSB0aGlzLl9fb2JfX1xuICAgIHZhciBpbnNlcnRlZFxuICAgIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgICBjYXNlICdwdXNoJzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICd1bnNoaWZ0JzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzcGxpY2UnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3Muc2xpY2UoMilcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgaWYgKGluc2VydGVkKSBvYi5vYnNlcnZlQXJyYXkoaW5zZXJ0ZWQpXG4gICAgLy8gbm90aWZ5IGNoYW5nZVxuICAgIG9iLmRlcC5ub3RpZnkoKVxuICAgIHJldHVybiByZXN1bHRcbiAgfSlcbn0pXG5cbi8qKlxuICogU3dhcCB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXggd2l0aCBhIG5ldyB2YWx1ZVxuICogYW5kIGVtaXRzIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHJldHVybiB7Kn0gLSByZXBsYWNlZCBlbGVtZW50XG4gKi9cblxuXy5kZWZpbmUoXG4gIGFycmF5UHJvdG8sXG4gICckc2V0JyxcbiAgZnVuY3Rpb24gJHNldCAoaW5kZXgsIHZhbCkge1xuICAgIGlmIChpbmRleCA+PSB0aGlzLmxlbmd0aCkge1xuICAgICAgdGhpcy5sZW5ndGggPSBpbmRleCArIDFcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxLCB2YWwpWzBdXG4gIH1cbilcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcmVtb3ZlIHRoZSBlbGVtZW50IGF0IGdpdmVuIGluZGV4LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5fLmRlZmluZShcbiAgYXJyYXlQcm90byxcbiAgJyRyZW1vdmUnLFxuICBmdW5jdGlvbiAkcmVtb3ZlIChpdGVtKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuXG4gICAgdmFyIGluZGV4ID0gXy5pbmRleE9mKHRoaXMsIGl0ZW0pXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSlcbiAgICB9XG4gIH1cbilcblxubW9kdWxlLmV4cG9ydHMgPSBhcnJheU1ldGhvZHNcblxufSx7XCIuLi91dGlsXCI6NzJ9XSw1ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIHVpZCA9IDBcblxuLyoqXG4gKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGVcbiAqIGRpcmVjdGl2ZXMgc3Vic2NyaWJpbmcgdG8gaXQuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cblxuZnVuY3Rpb24gRGVwICgpIHtcbiAgdGhpcy5pZCA9IHVpZCsrXG4gIHRoaXMuc3VicyA9IFtdXG59XG5cbi8vIHRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC5cbi8vIHRoaXMgaXMgZ2xvYmFsbHkgdW5pcXVlIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb25seSBvbmVcbi8vIHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkIGF0IGFueSB0aW1lLlxuRGVwLnRhcmdldCA9IG51bGxcblxuLyoqXG4gKiBBZGQgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cbiAqXG4gKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG4gKi9cblxuRGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG4gIHRoaXMuc3Vicy5wdXNoKHN1Yilcbn1cblxuLyoqXG4gKiBSZW1vdmUgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cbiAqXG4gKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG4gKi9cblxuRGVwLnByb3RvdHlwZS5yZW1vdmVTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG4gIHRoaXMuc3Vicy4kcmVtb3ZlKHN1Yilcbn1cblxuLyoqXG4gKiBBZGQgc2VsZiBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIHRhcmdldCB3YXRjaGVyLlxuICovXG5cbkRlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0LmFkZERlcCh0aGlzKVxufVxuXG4vKipcbiAqIE5vdGlmeSBhbGwgc3Vic2NyaWJlcnMgb2YgYSBuZXcgdmFsdWUuXG4gKi9cblxuRGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHN0YWJsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3RcbiAgdmFyIHN1YnMgPSBfLnRvQXJyYXkodGhpcy5zdWJzKVxuICBmb3IgKHZhciBpID0gMCwgbCA9IHN1YnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgc3Vic1tpXS51cGRhdGUoKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRGVwXG5cbn0se1wiLi4vdXRpbFwiOjcyfV0sNTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi9jb25maWcnKVxudmFyIERlcCA9IHJlcXVpcmUoJy4vZGVwJylcbnZhciBhcnJheU1ldGhvZHMgPSByZXF1aXJlKCcuL2FycmF5JylcbnZhciBhcnJheUtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpXG5cbi8qKlxuICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGFyZ2V0XG4gKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIE9ic2VydmVyICh2YWx1ZSkge1xuICB0aGlzLnZhbHVlID0gdmFsdWVcbiAgdGhpcy5kZXAgPSBuZXcgRGVwKClcbiAgXy5kZWZpbmUodmFsdWUsICdfX29iX18nLCB0aGlzKVxuICBpZiAoXy5pc0FycmF5KHZhbHVlKSkge1xuICAgIHZhciBhdWdtZW50ID0gXy5oYXNQcm90b1xuICAgICAgPyBwcm90b0F1Z21lbnRcbiAgICAgIDogY29weUF1Z21lbnRcbiAgICBhdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cylcbiAgICB0aGlzLm9ic2VydmVBcnJheSh2YWx1ZSlcbiAgfSBlbHNlIHtcbiAgICB0aGlzLndhbGsodmFsdWUpXG4gIH1cbn1cblxuLy8gU3RhdGljIG1ldGhvZHNcblxuLyoqXG4gKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcbiAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG4gKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHJldHVybiB7T2JzZXJ2ZXJ8dW5kZWZpbmVkfVxuICogQHN0YXRpY1xuICovXG5cbk9ic2VydmVyLmNyZWF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgdm0pIHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIG9iXG4gIGlmIChcbiAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdfX29iX18nKSAmJlxuICAgIHZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyXG4gICkge1xuICAgIG9iID0gdmFsdWUuX19vYl9fXG4gIH0gZWxzZSBpZiAoXG4gICAgKF8uaXNBcnJheSh2YWx1ZSkgfHwgXy5pc1BsYWluT2JqZWN0KHZhbHVlKSkgJiZcbiAgICAhT2JqZWN0LmlzRnJvemVuKHZhbHVlKSAmJlxuICAgICF2YWx1ZS5faXNWdWVcbiAgKSB7XG4gICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpXG4gIH1cbiAgaWYgKG9iICYmIHZtKSB7XG4gICAgb2IuYWRkVm0odm0pXG4gIH1cbiAgcmV0dXJuIG9iXG59XG5cbi8vIEluc3RhbmNlIG1ldGhvZHNcblxuLyoqXG4gKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cbiAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iailcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgdGhpcy5jb252ZXJ0KGtleXNbaV0sIG9ialtrZXlzW2ldXSlcbiAgfVxufVxuXG4vKipcbiAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmVBcnJheSA9IGZ1bmN0aW9uIChpdGVtcykge1xuICB2YXIgaSA9IGl0ZW1zLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgT2JzZXJ2ZXIuY3JlYXRlKGl0ZW1zW2ldKVxuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBhIHByb3BlcnR5IGludG8gZ2V0dGVyL3NldHRlciBzbyB3ZSBjYW4gZW1pdFxuICogdGhlIGV2ZW50cyB3aGVuIHRoZSBwcm9wZXJ0eSBpcyBhY2Nlc3NlZC9jaGFuZ2VkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcbiAgZGVmaW5lUmVhY3RpdmUodGhpcy52YWx1ZSwga2V5LCB2YWwpXG59XG5cbi8qKlxuICogQWRkIGFuIG93bmVyIHZtLCBzbyB0aGF0IHdoZW4gJHNldC8kZGVsZXRlIG11dGF0aW9uc1xuICogaGFwcGVuIHdlIGNhbiBub3RpZnkgb3duZXIgdm1zIHRvIHByb3h5IHRoZSBrZXlzIGFuZFxuICogZGlnZXN0IHRoZSB3YXRjaGVycy4gVGhpcyBpcyBvbmx5IGNhbGxlZCB3aGVuIHRoZSBvYmplY3RcbiAqIGlzIG9ic2VydmVkIGFzIGFuIGluc3RhbmNlJ3Mgcm9vdCAkZGF0YS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUuYWRkVm0gPSBmdW5jdGlvbiAodm0pIHtcbiAgKHRoaXMudm1zIHx8ICh0aGlzLnZtcyA9IFtdKSkucHVzaCh2bSlcbn1cblxuLyoqXG4gKiBSZW1vdmUgYW4gb3duZXIgdm0uIFRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIG9iamVjdCBpc1xuICogc3dhcHBlZCBvdXQgYXMgYW4gaW5zdGFuY2UncyAkZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLnJlbW92ZVZtID0gZnVuY3Rpb24gKHZtKSB7XG4gIHRoaXMudm1zLiRyZW1vdmUodm0pXG59XG5cbi8vIGhlbHBlcnNcblxuLyoqXG4gKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgaW50ZXJjZXB0aW5nXG4gKiB0aGUgcHJvdG90eXBlIGNoYWluIHVzaW5nIF9fcHJvdG9fX1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b1xuICovXG5cbmZ1bmN0aW9uIHByb3RvQXVnbWVudCAodGFyZ2V0LCBzcmMpIHtcbiAgdGFyZ2V0Ll9fcHJvdG9fXyA9IHNyY1xufVxuXG4vKipcbiAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZ1xuICogaGlkZGVuIHByb3BlcnRpZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuICogQHBhcmFtIHtPYmplY3R9IHByb3RvXG4gKi9cblxuZnVuY3Rpb24gY29weUF1Z21lbnQgKHRhcmdldCwgc3JjLCBrZXlzKSB7XG4gIHZhciBpID0ga2V5cy5sZW5ndGhcbiAgdmFyIGtleVxuICB3aGlsZSAoaS0tKSB7XG4gICAga2V5ID0ga2V5c1tpXVxuICAgIF8uZGVmaW5lKHRhcmdldCwga2V5LCBzcmNba2V5XSlcbiAgfVxufVxuXG4vKipcbiAqIERlZmluZSBhIHJlYWN0aXZlIHByb3BlcnR5IG9uIGFuIE9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbmZ1bmN0aW9uIGRlZmluZVJlYWN0aXZlIChvYmosIGtleSwgdmFsKSB7XG4gIHZhciBkZXAgPSBuZXcgRGVwKClcblxuICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcbiAgdmFyIGdldHRlciwgc2V0dGVyXG4gIGlmIChjb25maWcuY29udmVydEFsbFByb3BlcnRpZXMpIHtcbiAgICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KVxuICAgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0XG4gICAgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0XG4gIH1cblxuICB2YXIgY2hpbGRPYiA9IE9ic2VydmVyLmNyZWF0ZSh2YWwpXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIgKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbFxuICAgICAgaWYgKERlcC50YXJnZXQpIHtcbiAgICAgICAgZGVwLmRlcGVuZCgpXG4gICAgICAgIGlmIChjaGlsZE9iKSB7XG4gICAgICAgICAgY2hpbGRPYi5kZXAuZGVwZW5kKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoXy5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIGZvciAodmFyIGUsIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBlID0gdmFsdWVbaV1cbiAgICAgICAgICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIgKG5ld1ZhbCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbFxuICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoc2V0dGVyKSB7XG4gICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gbmV3VmFsXG4gICAgICB9XG4gICAgICBjaGlsZE9iID0gT2JzZXJ2ZXIuY3JlYXRlKG5ld1ZhbClcbiAgICAgIGRlcC5ub3RpZnkoKVxuICAgIH1cbiAgfSlcbn1cblxuLy8gQXR0YWNoIHRvIHRoZSB1dGlsIG9iamVjdCBzbyBpdCBjYW4gYmUgdXNlZCBlbHNld2hlcmUuXG5fLmRlZmluZVJlYWN0aXZlID0gZGVmaW5lUmVhY3RpdmVcblxubW9kdWxlLmV4cG9ydHMgPSBPYnNlcnZlclxuXG59LHtcIi4uL2NvbmZpZ1wiOjIxLFwiLi4vdXRpbFwiOjcyLFwiLi9hcnJheVwiOjU3LFwiLi9kZXBcIjo1OH1dLDYwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgQ2FjaGUgPSByZXF1aXJlKCcuLi9jYWNoZScpXG52YXIgY2FjaGUgPSBuZXcgQ2FjaGUoMTAwMClcbnZhciBmaWx0ZXJUb2tlblJFID0gL1teXFxzJ1wiXSt8J1teJ10qJ3xcIlteXCJdKlwiL2dcbnZhciByZXNlcnZlZEFyZ1JFID0gL15pbiR8Xi0/XFxkKy9cblxuLyoqXG4gKiBQYXJzZXIgc3RhdGVcbiAqL1xuXG52YXIgc3RyLCBkaXJcbnZhciBjLCBpLCBsLCBsYXN0RmlsdGVySW5kZXhcbnZhciBpblNpbmdsZSwgaW5Eb3VibGUsIGN1cmx5LCBzcXVhcmUsIHBhcmVuXG5cbi8qKlxuICogUHVzaCBhIGZpbHRlciB0byB0aGUgY3VycmVudCBkaXJlY3RpdmUgb2JqZWN0XG4gKi9cblxuZnVuY3Rpb24gcHVzaEZpbHRlciAoKSB7XG4gIHZhciBleHAgPSBzdHIuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKClcbiAgdmFyIGZpbHRlclxuICBpZiAoZXhwKSB7XG4gICAgZmlsdGVyID0ge31cbiAgICB2YXIgdG9rZW5zID0gZXhwLm1hdGNoKGZpbHRlclRva2VuUkUpXG4gICAgZmlsdGVyLm5hbWUgPSB0b2tlbnNbMF1cbiAgICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZpbHRlci5hcmdzID0gdG9rZW5zLnNsaWNlKDEpLm1hcChwcm9jZXNzRmlsdGVyQXJnKVxuICAgIH1cbiAgfVxuICBpZiAoZmlsdGVyKSB7XG4gICAgKGRpci5maWx0ZXJzID0gZGlyLmZpbHRlcnMgfHwgW10pLnB1c2goZmlsdGVyKVxuICB9XG4gIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gYXJndW1lbnQgaXMgZHluYW1pYyBhbmQgc3RyaXAgcXVvdGVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhcmdcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzRmlsdGVyQXJnIChhcmcpIHtcbiAgaWYgKHJlc2VydmVkQXJnUkUudGVzdChhcmcpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBfLnRvTnVtYmVyKGFyZyksXG4gICAgICBkeW5hbWljOiBmYWxzZVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgc3RyaXBwZWQgPSBfLnN0cmlwUXVvdGVzKGFyZylcbiAgICB2YXIgZHluYW1pYyA9IHN0cmlwcGVkID09PSBhcmdcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IGR5bmFtaWMgPyBhcmcgOiBzdHJpcHBlZCxcbiAgICAgIGR5bmFtaWM6IGR5bmFtaWNcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhIGRpcmVjdGl2ZSB2YWx1ZSBhbmQgZXh0cmFjdCB0aGUgZXhwcmVzc2lvblxuICogYW5kIGl0cyBmaWx0ZXJzIGludG8gYSBkZXNjcmlwdG9yLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogXCJhICsgMSB8IHVwcGVyY2FzZVwiIHdpbGwgeWllbGQ6XG4gKiB7XG4gKiAgIGV4cHJlc3Npb246ICdhICsgMScsXG4gKiAgIGZpbHRlcnM6IFtcbiAqICAgICB7IG5hbWU6ICd1cHBlcmNhc2UnLCBhcmdzOiBudWxsIH1cbiAqICAgXVxuICogfVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKHMpIHtcblxuICB2YXIgaGl0ID0gY2FjaGUuZ2V0KHMpXG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0XG4gIH1cblxuICAvLyByZXNldCBwYXJzZXIgc3RhdGVcbiAgc3RyID0gc1xuICBpblNpbmdsZSA9IGluRG91YmxlID0gZmFsc2VcbiAgY3VybHkgPSBzcXVhcmUgPSBwYXJlbiA9IDBcbiAgbGFzdEZpbHRlckluZGV4ID0gMFxuICBkaXIgPSB7fVxuXG4gIGZvciAoaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaWYgKGluU2luZ2xlKSB7XG4gICAgICAvLyBjaGVjayBzaW5nbGUgcXVvdGVcbiAgICAgIGlmIChjID09PSAweDI3KSBpblNpbmdsZSA9ICFpblNpbmdsZVxuICAgIH0gZWxzZSBpZiAoaW5Eb3VibGUpIHtcbiAgICAgIC8vIGNoZWNrIGRvdWJsZSBxdW90ZVxuICAgICAgaWYgKGMgPT09IDB4MjIpIGluRG91YmxlID0gIWluRG91YmxlXG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGMgPT09IDB4N0MgJiYgLy8gcGlwZVxuICAgICAgc3RyLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmXG4gICAgICBzdHIuY2hhckNvZGVBdChpIC0gMSkgIT09IDB4N0NcbiAgICApIHtcbiAgICAgIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG4gICAgICAgIC8vIGZpcnN0IGZpbHRlciwgZW5kIG9mIGV4cHJlc3Npb25cbiAgICAgICAgbGFzdEZpbHRlckluZGV4ID0gaSArIDFcbiAgICAgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBhbHJlYWR5IGhhcyBmaWx0ZXJcbiAgICAgICAgcHVzaEZpbHRlcigpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICBjYXNlIDB4MjI6IGluRG91YmxlID0gdHJ1ZTsgYnJlYWsgLy8gXCJcbiAgICAgICAgY2FzZSAweDI3OiBpblNpbmdsZSA9IHRydWU7IGJyZWFrIC8vICdcbiAgICAgICAgY2FzZSAweDI4OiBwYXJlbisrOyBicmVhayAgICAgICAgIC8vIChcbiAgICAgICAgY2FzZSAweDI5OiBwYXJlbi0tOyBicmVhayAgICAgICAgIC8vIClcbiAgICAgICAgY2FzZSAweDVCOiBzcXVhcmUrKzsgYnJlYWsgICAgICAgIC8vIFtcbiAgICAgICAgY2FzZSAweDVEOiBzcXVhcmUtLTsgYnJlYWsgICAgICAgIC8vIF1cbiAgICAgICAgY2FzZSAweDdCOiBjdXJseSsrOyBicmVhayAgICAgICAgIC8vIHtcbiAgICAgICAgY2FzZSAweDdEOiBjdXJseS0tOyBicmVhayAgICAgICAgIC8vIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKVxuICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuICAgIHB1c2hGaWx0ZXIoKVxuICB9XG5cbiAgY2FjaGUucHV0KHMsIGRpcilcbiAgcmV0dXJuIGRpclxufVxuXG59LHtcIi4uL2NhY2hlXCI6MTYsXCIuLi91dGlsXCI6NzJ9XSw2MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xudmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciBQYXRoID0gcmVxdWlyZSgnLi9wYXRoJylcbnZhciBDYWNoZSA9IHJlcXVpcmUoJy4uL2NhY2hlJylcbnZhciBleHByZXNzaW9uQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMClcblxudmFyIGFsbG93ZWRLZXl3b3JkcyA9XG4gICdNYXRoLERhdGUsdGhpcyx0cnVlLGZhbHNlLG51bGwsdW5kZWZpbmVkLEluZmluaXR5LE5hTiwnICtcbiAgJ2lzTmFOLGlzRmluaXRlLGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLCcgK1xuICAnZW5jb2RlVVJJQ29tcG9uZW50LHBhcnNlSW50LHBhcnNlRmxvYXQnXG52YXIgYWxsb3dlZEtleXdvcmRzUkUgPVxuICBuZXcgUmVnRXhwKCdeKCcgKyBhbGxvd2VkS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJylcblxuLy8ga2V5d29yZHMgdGhhdCBkb24ndCBtYWtlIHNlbnNlIGluc2lkZSBleHByZXNzaW9uc1xudmFyIGltcHJvcGVyS2V5d29yZHMgPVxuICAnYnJlYWssY2FzZSxjbGFzcyxjYXRjaCxjb25zdCxjb250aW51ZSxkZWJ1Z2dlcixkZWZhdWx0LCcgK1xuICAnZGVsZXRlLGRvLGVsc2UsZXhwb3J0LGV4dGVuZHMsZmluYWxseSxmb3IsZnVuY3Rpb24saWYsJyArXG4gICdpbXBvcnQsaW4saW5zdGFuY2VvZixsZXQscmV0dXJuLHN1cGVyLHN3aXRjaCx0aHJvdyx0cnksJyArXG4gICd2YXIsd2hpbGUsd2l0aCx5aWVsZCxlbnVtLGF3YWl0LGltcGxlbWVudHMscGFja2FnZSwnICtcbiAgJ3Byb2N0ZWN0ZWQsc3RhdGljLGludGVyZmFjZSxwcml2YXRlLHB1YmxpYydcbnZhciBpbXByb3BlcktleXdvcmRzUkUgPVxuICBuZXcgUmVnRXhwKCdeKCcgKyBpbXByb3BlcktleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpXG5cbnZhciB3c1JFID0gL1xccy9nXG52YXIgbmV3bGluZVJFID0gL1xcbi9nXG52YXIgc2F2ZVJFID0gL1tcXHssXVxccypbXFx3XFwkX10rXFxzKjp8KCdbXiddKid8XCJbXlwiXSpcIil8bmV3IHx0eXBlb2YgfHZvaWQgL2dcbnZhciByZXN0b3JlUkUgPSAvXCIoXFxkKylcIi9nXG52YXIgcGF0aFRlc3RSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooXFwuW0EtWmEtel8kXVtcXHckXSp8XFxbJy4qPydcXF18XFxbXCIuKj9cIlxcXXxcXFtcXGQrXFxdfFxcW1tBLVphLXpfJF1bXFx3JF0qXFxdKSokL1xudmFyIHBhdGhSZXBsYWNlUkUgPSAvW15cXHckXFwuXShbQS1aYS16XyRdW1xcdyRdKihcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFsnLio/J1xcXXxcXFtcIi4qP1wiXFxdKSopL2dcbnZhciBib29sZWFuTGl0ZXJhbFJFID0gL14odHJ1ZXxmYWxzZSkkL1xuXG4vKipcbiAqIFNhdmUgLyBSZXdyaXRlIC8gUmVzdG9yZVxuICpcbiAqIFdoZW4gcmV3cml0aW5nIHBhdGhzIGZvdW5kIGluIGFuIGV4cHJlc3Npb24sIGl0IGlzXG4gKiBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgbGV0dGVyIHNlcXVlbmNlcyB0byBiZSBmb3VuZCBpblxuICogc3RyaW5ncyBhbmQgT2JqZWN0IGxpdGVyYWwgcHJvcGVydHkga2V5cy4gVGhlcmVmb3JlIHdlXG4gKiByZW1vdmUgYW5kIHN0b3JlIHRoZXNlIHBhcnRzIGluIGEgdGVtcG9yYXJ5IGFycmF5LCBhbmRcbiAqIHJlc3RvcmUgdGhlbSBhZnRlciB0aGUgcGF0aCByZXdyaXRlLlxuICovXG5cbnZhciBzYXZlZCA9IFtdXG5cbi8qKlxuICogU2F2ZSByZXBsYWNlclxuICpcbiAqIFRoZSBzYXZlIHJlZ2V4IGNhbiBtYXRjaCB0d28gcG9zc2libGUgY2FzZXM6XG4gKiAxLiBBbiBvcGVuaW5nIG9iamVjdCBsaXRlcmFsXG4gKiAyLiBBIHN0cmluZ1xuICogSWYgbWF0Y2hlZCBhcyBhIHBsYWluIHN0cmluZywgd2UgbmVlZCB0byBlc2NhcGUgaXRzXG4gKiBuZXdsaW5lcywgc2luY2UgdGhlIHN0cmluZyBuZWVkcyB0byBiZSBwcmVzZXJ2ZWQgd2hlblxuICogZ2VuZXJhdGluZyB0aGUgZnVuY3Rpb24gYm9keS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gaXNTdHJpbmcgLSBzdHIgaWYgbWF0Y2hlZCBhcyBhIHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfSAtIHBsYWNlaG9sZGVyIHdpdGggaW5kZXhcbiAqL1xuXG5mdW5jdGlvbiBzYXZlIChzdHIsIGlzU3RyaW5nKSB7XG4gIHZhciBpID0gc2F2ZWQubGVuZ3RoXG4gIHNhdmVkW2ldID0gaXNTdHJpbmdcbiAgICA/IHN0ci5yZXBsYWNlKG5ld2xpbmVSRSwgJ1xcXFxuJylcbiAgICA6IHN0clxuICByZXR1cm4gJ1wiJyArIGkgKyAnXCInXG59XG5cbi8qKlxuICogUGF0aCByZXdyaXRlIHJlcGxhY2VyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHJhd1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHJld3JpdGUgKHJhdykge1xuICB2YXIgYyA9IHJhdy5jaGFyQXQoMClcbiAgdmFyIHBhdGggPSByYXcuc2xpY2UoMSlcbiAgaWYgKGFsbG93ZWRLZXl3b3Jkc1JFLnRlc3QocGF0aCkpIHtcbiAgICByZXR1cm4gcmF3XG4gIH0gZWxzZSB7XG4gICAgcGF0aCA9IHBhdGguaW5kZXhPZignXCInKSA+IC0xXG4gICAgICA/IHBhdGgucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpXG4gICAgICA6IHBhdGhcbiAgICByZXR1cm4gYyArICdzY29wZS4nICsgcGF0aFxuICB9XG59XG5cbi8qKlxuICogUmVzdG9yZSByZXBsYWNlclxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBpIC0gbWF0Y2hlZCBzYXZlIGluZGV4XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcmVzdG9yZSAoc3RyLCBpKSB7XG4gIHJldHVybiBzYXZlZFtpXVxufVxuXG4vKipcbiAqIFJld3JpdGUgYW4gZXhwcmVzc2lvbiwgcHJlZml4aW5nIGFsbCBwYXRoIGFjY2Vzc29ycyB3aXRoXG4gKiBgc2NvcGUuYCBhbmQgZ2VuZXJhdGUgZ2V0dGVyL3NldHRlciBmdW5jdGlvbnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHtCb29sZWFufSBuZWVkU2V0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlRXhwRm5zIChleHAsIG5lZWRTZXQpIHtcbiAgaWYgKGltcHJvcGVyS2V5d29yZHNSRS50ZXN0KGV4cCkpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICdBdm9pZCB1c2luZyByZXNlcnZlZCBrZXl3b3JkcyBpbiBleHByZXNzaW9uOiAnICsgZXhwXG4gICAgKVxuICB9XG4gIC8vIHJlc2V0IHN0YXRlXG4gIHNhdmVkLmxlbmd0aCA9IDBcbiAgLy8gc2F2ZSBzdHJpbmdzIGFuZCBvYmplY3QgbGl0ZXJhbCBrZXlzXG4gIHZhciBib2R5ID0gZXhwXG4gICAgLnJlcGxhY2Uoc2F2ZVJFLCBzYXZlKVxuICAgIC5yZXBsYWNlKHdzUkUsICcnKVxuICAvLyByZXdyaXRlIGFsbCBwYXRoc1xuICAvLyBwYWQgMSBzcGFjZSBoZXJlIGJlY2F1ZSB0aGUgcmVnZXggbWF0Y2hlcyAxIGV4dHJhIGNoYXJcbiAgYm9keSA9ICgnICcgKyBib2R5KVxuICAgIC5yZXBsYWNlKHBhdGhSZXBsYWNlUkUsIHJld3JpdGUpXG4gICAgLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKVxuICB2YXIgZ2V0dGVyID0gbWFrZUdldHRlcihib2R5KVxuICBpZiAoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldDogZ2V0dGVyLFxuICAgICAgYm9keTogYm9keSxcbiAgICAgIHNldDogbmVlZFNldFxuICAgICAgICA/IG1ha2VTZXR0ZXIoYm9keSlcbiAgICAgICAgOiBudWxsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBnZXR0ZXIgc2V0dGVycyBmb3IgYSBzaW1wbGUgcGF0aC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlUGF0aEZucyAoZXhwKSB7XG4gIHZhciBnZXR0ZXIsIHBhdGhcbiAgaWYgKGV4cC5pbmRleE9mKCdbJykgPCAwKSB7XG4gICAgLy8gcmVhbGx5IHNpbXBsZSBwYXRoXG4gICAgcGF0aCA9IGV4cC5zcGxpdCgnLicpXG4gICAgcGF0aC5yYXcgPSBleHBcbiAgICBnZXR0ZXIgPSBQYXRoLmNvbXBpbGVHZXR0ZXIocGF0aClcbiAgfSBlbHNlIHtcbiAgICAvLyBkbyB0aGUgcmVhbCBwYXJzaW5nXG4gICAgcGF0aCA9IFBhdGgucGFyc2UoZXhwKVxuICAgIGdldHRlciA9IHBhdGguZ2V0XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBnZXQ6IGdldHRlcixcbiAgICAvLyBhbHdheXMgZ2VuZXJhdGUgc2V0dGVyIGZvciBzaW1wbGUgcGF0aHNcbiAgICBzZXQ6IGZ1bmN0aW9uIChvYmosIHZhbCkge1xuICAgICAgUGF0aC5zZXQob2JqLCBwYXRoLCB2YWwpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQnVpbGQgYSBnZXR0ZXIgZnVuY3Rpb24uIFJlcXVpcmVzIGV2YWwuXG4gKlxuICogV2UgaXNvbGF0ZSB0aGUgdHJ5L2NhdGNoIHNvIGl0IGRvZXNuJ3QgYWZmZWN0IHRoZVxuICogb3B0aW1pemF0aW9uIG9mIHRoZSBwYXJzZSBmdW5jdGlvbiB3aGVuIGl0IGlzIG5vdCBjYWxsZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGJvZHlcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlR2V0dGVyIChib2R5KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbignc2NvcGUnLCAncmV0dXJuICcgKyBib2R5ICsgJzsnKVxuICB9IGNhdGNoIChlKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAnSW52YWxpZCBleHByZXNzaW9uLiAnICtcbiAgICAgICdHZW5lcmF0ZWQgZnVuY3Rpb24gYm9keTogJyArIGJvZHlcbiAgICApXG4gIH1cbn1cblxuLyoqXG4gKiBCdWlsZCBhIHNldHRlciBmdW5jdGlvbi5cbiAqXG4gKiBUaGlzIGlzIG9ubHkgbmVlZGVkIGluIHJhcmUgc2l0dWF0aW9ucyBsaWtlIFwiYVtiXVwiIHdoZXJlXG4gKiBhIHNldHRhYmxlIHBhdGggcmVxdWlyZXMgZHluYW1pYyBldmFsdWF0aW9uLlxuICpcbiAqIFRoaXMgc2V0dGVyIGZ1bmN0aW9uIG1heSB0aHJvdyBlcnJvciB3aGVuIGNhbGxlZCBpZiB0aGVcbiAqIGV4cHJlc3Npb24gYm9keSBpcyBub3QgYSB2YWxpZCBsZWZ0LWhhbmQgZXhwcmVzc2lvbiBpblxuICogYXNzaWdubWVudC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYm9keVxuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIG1ha2VTZXR0ZXIgKGJvZHkpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzY29wZScsICd2YWx1ZScsIGJvZHkgKyAnPXZhbHVlOycpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICdJbnZhbGlkIHNldHRlciBmdW5jdGlvbiBib2R5OiAnICsgYm9keVxuICAgIClcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGZvciBzZXR0ZXIgZXhpc3RlbmNlIG9uIGEgY2FjaGUgaGl0LlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhpdFxuICovXG5cbmZ1bmN0aW9uIGNoZWNrU2V0dGVyIChoaXQpIHtcbiAgaWYgKCFoaXQuc2V0KSB7XG4gICAgaGl0LnNldCA9IG1ha2VTZXR0ZXIoaGl0LmJvZHkpXG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhbiBleHByZXNzaW9uIGludG8gcmUtd3JpdHRlbiBnZXR0ZXIvc2V0dGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG5lZWRTZXRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAoZXhwLCBuZWVkU2V0KSB7XG4gIGV4cCA9IGV4cC50cmltKClcbiAgLy8gdHJ5IGNhY2hlXG4gIHZhciBoaXQgPSBleHByZXNzaW9uQ2FjaGUuZ2V0KGV4cClcbiAgaWYgKGhpdCkge1xuICAgIGlmIChuZWVkU2V0KSB7XG4gICAgICBjaGVja1NldHRlcihoaXQpXG4gICAgfVxuICAgIHJldHVybiBoaXRcbiAgfVxuICAvLyB3ZSBkbyBhIHNpbXBsZSBwYXRoIGNoZWNrIHRvIG9wdGltaXplIGZvciB0aGVtLlxuICAvLyB0aGUgY2hlY2sgZmFpbHMgdmFsaWQgcGF0aHMgd2l0aCB1bnVzYWwgd2hpdGVzcGFjZXMsXG4gIC8vIGJ1dCB0aGF0J3MgdG9vIHJhcmUgYW5kIHdlIGRvbid0IGNhcmUuXG4gIC8vIGFsc28gc2tpcCBib29sZWFuIGxpdGVyYWxzIGFuZCBwYXRocyB0aGF0IHN0YXJ0IHdpdGhcbiAgLy8gZ2xvYmFsIFwiTWF0aFwiXG4gIHZhciByZXMgPSBleHBvcnRzLmlzU2ltcGxlUGF0aChleHApXG4gICAgPyBjb21waWxlUGF0aEZucyhleHApXG4gICAgOiBjb21waWxlRXhwRm5zKGV4cCwgbmVlZFNldClcbiAgZXhwcmVzc2lvbkNhY2hlLnB1dChleHAsIHJlcylcbiAgcmV0dXJuIHJlc1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBzaW1wbGUgcGF0aC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmV4cG9ydHMuaXNTaW1wbGVQYXRoID0gZnVuY3Rpb24gKGV4cCkge1xuICByZXR1cm4gcGF0aFRlc3RSRS50ZXN0KGV4cCkgJiZcbiAgICAvLyBkb24ndCB0cmVhdCB0cnVlL2ZhbHNlIGFzIHBhdGhzXG4gICAgIWJvb2xlYW5MaXRlcmFsUkUudGVzdChleHApICYmXG4gICAgLy8gTWF0aCBjb25zdGFudHMgZS5nLiBNYXRoLlBJLCBNYXRoLkUgZXRjLlxuICAgIGV4cC5zbGljZSgwLCA1KSAhPT0gJ01hdGguJ1xufVxuXG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSlcblxufSx7XCIuLi9jYWNoZVwiOjE2LFwiLi4vdXRpbFwiOjcyLFwiLi9wYXRoXCI6NjIsXCJfcHJvY2Vzc1wiOjF9XSw2MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xudmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciBDYWNoZSA9IHJlcXVpcmUoJy4uL2NhY2hlJylcbnZhciBwYXRoQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMClcbnZhciBpZGVudFJFID0gZXhwb3J0cy5pZGVudFJFID0gL15bJF9hLXpBLVpdK1tcXHckXSokL1xuXG4vLyBhY3Rpb25zXG52YXIgQVBQRU5EID0gMFxudmFyIFBVU0ggPSAxXG5cbi8vIHN0YXRlc1xudmFyIEJFRk9SRV9QQVRIID0gMFxudmFyIElOX1BBVEggPSAxXG52YXIgQkVGT1JFX0lERU5UID0gMlxudmFyIElOX0lERU5UID0gM1xudmFyIEJFRk9SRV9FTEVNRU5UID0gNFxudmFyIEFGVEVSX1pFUk8gPSA1XG52YXIgSU5fSU5ERVggPSA2XG52YXIgSU5fU0lOR0xFX1FVT1RFID0gN1xudmFyIElOX0RPVUJMRV9RVU9URSA9IDhcbnZhciBJTl9TVUJfUEFUSCA9IDlcbnZhciBBRlRFUl9FTEVNRU5UID0gMTBcbnZhciBBRlRFUl9QQVRIID0gMTFcbnZhciBFUlJPUiA9IDEyXG5cbnZhciBwYXRoU3RhdGVNYWNoaW5lID0gW11cblxucGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfUEFUSF0gPSB7XG4gICd3cyc6IFtCRUZPUkVfUEFUSF0sXG4gICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJ1snOiBbQkVGT1JFX0VMRU1FTlRdLFxuICAnZW9mJzogW0FGVEVSX1BBVEhdXG59XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fUEFUSF0gPSB7XG4gICd3cyc6IFtJTl9QQVRIXSxcbiAgJy4nOiBbQkVGT1JFX0lERU5UXSxcbiAgJ1snOiBbQkVGT1JFX0VMRU1FTlRdLFxuICAnZW9mJzogW0FGVEVSX1BBVEhdXG59XG5cbnBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX0lERU5UXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9JREVOVF0sXG4gICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXVxufVxuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX0lERU5UXSA9IHtcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnMCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJ251bWJlcic6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJ3dzJzogW0lOX1BBVEgsIFBVU0hdLFxuICAnLic6IFtCRUZPUkVfSURFTlQsIFBVU0hdLFxuICAnWyc6IFtCRUZPUkVfRUxFTUVOVCwgUFVTSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSCwgUFVTSF1cbn1cblxucGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfRUxFTUVOVF0gPSB7XG4gICd3cyc6IFtCRUZPUkVfRUxFTUVOVF0sXG4gICcwJzogW0FGVEVSX1pFUk8sIEFQUEVORF0sXG4gICdudW1iZXInOiBbSU5fSU5ERVgsIEFQUEVORF0sXG4gIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkQsICcnXSxcbiAgJ1wiJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5ELCAnJ10sXG4gICdpZGVudCc6IFtJTl9TVUJfUEFUSCwgQVBQRU5ELCAnKiddXG59XG5cbnBhdGhTdGF0ZU1hY2hpbmVbQUZURVJfWkVST10gPSB7XG4gICd3cyc6IFtBRlRFUl9FTEVNRU5ULCBQVVNIXSxcbiAgJ10nOiBbSU5fUEFUSCwgUFVTSF1cbn1cblxucGF0aFN0YXRlTWFjaGluZVtJTl9JTkRFWF0gPSB7XG4gICcwJzogW0lOX0lOREVYLCBBUFBFTkRdLFxuICAnbnVtYmVyJzogW0lOX0lOREVYLCBBUFBFTkRdLFxuICAnd3MnOiBbQUZURVJfRUxFTUVOVF0sXG4gICddJzogW0lOX1BBVEgsIFBVU0hdXG59XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcbiAgXCInXCI6IFtBRlRFUl9FTEVNRU5UXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cbn1cblxucGF0aFN0YXRlTWFjaGluZVtJTl9ET1VCTEVfUVVPVEVdID0ge1xuICAnXCInOiBbQUZURVJfRUxFTUVOVF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdXG59XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fU1VCX1BBVEhdID0ge1xuICAnaWRlbnQnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG4gICcwJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuICAnbnVtYmVyJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuICAnd3MnOiBbQUZURVJfRUxFTUVOVF0sXG4gICddJzogW0lOX1BBVEgsIFBVU0hdXG59XG5cbnBhdGhTdGF0ZU1hY2hpbmVbQUZURVJfRUxFTUVOVF0gPSB7XG4gICd3cyc6IFtBRlRFUl9FTEVNRU5UXSxcbiAgJ10nOiBbSU5fUEFUSCwgUFVTSF1cbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBjaGFyYWN0ZXIgaW4gYSBrZXlwYXRoLlxuICpcbiAqIEBwYXJhbSB7Q2hhcn0gY2hcbiAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuICovXG5cbmZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZSAoY2gpIHtcbiAgaWYgKGNoID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gJ2VvZidcbiAgfVxuXG4gIHZhciBjb2RlID0gY2guY2hhckNvZGVBdCgwKVxuXG4gIHN3aXRjaCAoY29kZSkge1xuICAgIGNhc2UgMHg1QjogLy8gW1xuICAgIGNhc2UgMHg1RDogLy8gXVxuICAgIGNhc2UgMHgyRTogLy8gLlxuICAgIGNhc2UgMHgyMjogLy8gXCJcbiAgICBjYXNlIDB4Mjc6IC8vICdcbiAgICBjYXNlIDB4MzA6IC8vIDBcbiAgICAgIHJldHVybiBjaFxuXG4gICAgY2FzZSAweDVGOiAvLyBfXG4gICAgY2FzZSAweDI0OiAvLyAkXG4gICAgICByZXR1cm4gJ2lkZW50J1xuXG4gICAgY2FzZSAweDIwOiAvLyBTcGFjZVxuICAgIGNhc2UgMHgwOTogLy8gVGFiXG4gICAgY2FzZSAweDBBOiAvLyBOZXdsaW5lXG4gICAgY2FzZSAweDBEOiAvLyBSZXR1cm5cbiAgICBjYXNlIDB4QTA6ICAvLyBOby1icmVhayBzcGFjZVxuICAgIGNhc2UgMHhGRUZGOiAgLy8gQnl0ZSBPcmRlciBNYXJrXG4gICAgY2FzZSAweDIwMjg6ICAvLyBMaW5lIFNlcGFyYXRvclxuICAgIGNhc2UgMHgyMDI5OiAgLy8gUGFyYWdyYXBoIFNlcGFyYXRvclxuICAgICAgcmV0dXJuICd3cydcbiAgfVxuXG4gIC8vIGEteiwgQS1aXG4gIGlmIChcbiAgICAoY29kZSA+PSAweDYxICYmIGNvZGUgPD0gMHg3QSkgfHxcbiAgICAoY29kZSA+PSAweDQxICYmIGNvZGUgPD0gMHg1QSlcbiAgKSB7XG4gICAgcmV0dXJuICdpZGVudCdcbiAgfVxuXG4gIC8vIDEtOVxuICBpZiAoY29kZSA+PSAweDMxICYmIGNvZGUgPD0gMHgzOSkge1xuICAgIHJldHVybiAnbnVtYmVyJ1xuICB9XG5cbiAgcmV0dXJuICdlbHNlJ1xufVxuXG4vKipcbiAqIFBhcnNlIGEgc3RyaW5nIHBhdGggaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VQYXRoIChwYXRoKSB7XG4gIHZhciBrZXlzID0gW11cbiAgdmFyIGluZGV4ID0gLTFcbiAgdmFyIG1vZGUgPSBCRUZPUkVfUEFUSFxuICB2YXIgYywgbmV3Q2hhciwga2V5LCB0eXBlLCB0cmFuc2l0aW9uLCBhY3Rpb24sIHR5cGVNYXBcblxuICB2YXIgYWN0aW9ucyA9IFtdXG4gIGFjdGlvbnNbUFVTSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAga2V5cy5wdXNoKGtleSlcbiAgICBrZXkgPSB1bmRlZmluZWRcbiAgfVxuICBhY3Rpb25zW0FQUEVORF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBrZXkgPSBuZXdDaGFyXG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSArPSBuZXdDaGFyXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWF5YmVVbmVzY2FwZVF1b3RlICgpIHtcbiAgICB2YXIgbmV4dENoYXIgPSBwYXRoW2luZGV4ICsgMV1cbiAgICBpZiAoKG1vZGUgPT09IElOX1NJTkdMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gXCInXCIpIHx8XG4gICAgICAgIChtb2RlID09PSBJTl9ET1VCTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09ICdcIicpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBuZXdDaGFyID0gbmV4dENoYXJcbiAgICAgIGFjdGlvbnNbQVBQRU5EXSgpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHdoaWxlIChtb2RlICE9IG51bGwpIHtcbiAgICBpbmRleCsrXG4gICAgYyA9IHBhdGhbaW5kZXhdXG5cbiAgICBpZiAoYyA9PT0gJ1xcXFwnICYmIG1heWJlVW5lc2NhcGVRdW90ZSgpKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYylcbiAgICB0eXBlTWFwID0gcGF0aFN0YXRlTWFjaGluZVttb2RlXVxuICAgIHRyYW5zaXRpb24gPSB0eXBlTWFwW3R5cGVdIHx8IHR5cGVNYXBbJ2Vsc2UnXSB8fCBFUlJPUlxuXG4gICAgaWYgKHRyYW5zaXRpb24gPT09IEVSUk9SKSB7XG4gICAgICByZXR1cm4gLy8gcGFyc2UgZXJyb3JcbiAgICB9XG5cbiAgICBtb2RlID0gdHJhbnNpdGlvblswXVxuICAgIGFjdGlvbiA9IGFjdGlvbnNbdHJhbnNpdGlvblsxXV1cbiAgICBpZiAoYWN0aW9uKSB7XG4gICAgICBuZXdDaGFyID0gdHJhbnNpdGlvblsyXVxuICAgICAgbmV3Q2hhciA9IG5ld0NoYXIgPT09IHVuZGVmaW5lZFxuICAgICAgICA/IGNcbiAgICAgICAgOiBuZXdDaGFyID09PSAnKidcbiAgICAgICAgICA/IG5ld0NoYXIgKyBjXG4gICAgICAgICAgOiBuZXdDaGFyXG4gICAgICBhY3Rpb24oKVxuICAgIH1cblxuICAgIGlmIChtb2RlID09PSBBRlRFUl9QQVRIKSB7XG4gICAgICBrZXlzLnJhdyA9IHBhdGhcbiAgICAgIHJldHVybiBrZXlzXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRm9ybWF0IGEgYWNjZXNzb3Igc2VnbWVudCBiYXNlZCBvbiBpdHMgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdEFjY2Vzc29yIChrZXkpIHtcbiAgaWYgKGlkZW50UkUudGVzdChrZXkpKSB7IC8vIGlkZW50aWZpZXJcbiAgICByZXR1cm4gJy4nICsga2V5XG4gIH0gZWxzZSBpZiAoK2tleSA9PT0ga2V5ID4+PiAwKSB7IC8vIGJyYWNrZXQgaW5kZXhcbiAgICByZXR1cm4gJ1snICsga2V5ICsgJ10nXG4gIH0gZWxzZSBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyonKSB7XG4gICAgcmV0dXJuICdbbycgKyBmb3JtYXRBY2Nlc3NvcihrZXkuc2xpY2UoMSkpICsgJ10nXG4gIH0gZWxzZSB7IC8vIGJyYWNrZXQgc3RyaW5nXG4gICAgcmV0dXJuICdbXCInICsga2V5LnJlcGxhY2UoL1wiL2csICdcXFxcXCInKSArICdcIl0nXG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlcyBhIGdldHRlciBmdW5jdGlvbiB3aXRoIGEgZml4ZWQgcGF0aC5cbiAqIFRoZSBmaXhlZCBwYXRoIGdldHRlciBzdXByZXNzZXMgZXJyb3JzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHBhdGhcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMuY29tcGlsZUdldHRlciA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gIHZhciBib2R5ID0gJ3JldHVybiBvJyArIHBhdGgubWFwKGZvcm1hdEFjY2Vzc29yKS5qb2luKCcnKVxuICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdvJywgYm9keSlcbn1cblxuLyoqXG4gKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gIHZhciBoaXQgPSBwYXRoQ2FjaGUuZ2V0KHBhdGgpXG4gIGlmICghaGl0KSB7XG4gICAgaGl0ID0gcGFyc2VQYXRoKHBhdGgpXG4gICAgaWYgKGhpdCkge1xuICAgICAgaGl0LmdldCA9IGV4cG9ydHMuY29tcGlsZUdldHRlcihoaXQpXG4gICAgICBwYXRoQ2FjaGUucHV0KHBhdGgsIGhpdClcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhpdFxufVxuXG4vKipcbiAqIEdldCBmcm9tIGFuIG9iamVjdCBmcm9tIGEgcGF0aCBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICovXG5cbmV4cG9ydHMuZ2V0ID0gZnVuY3Rpb24gKG9iaiwgcGF0aCkge1xuICBwYXRoID0gZXhwb3J0cy5wYXJzZShwYXRoKVxuICBpZiAocGF0aCkge1xuICAgIHJldHVybiBwYXRoLmdldChvYmopXG4gIH1cbn1cblxuLyoqXG4gKiBXYXJuIGFnYWluc3Qgc2V0dGluZyBub24tZXhpc3RlbnQgcm9vdCBwYXRoIG9uIGEgdm0uXG4gKi9cblxudmFyIHdhcm5Ob25FeGlzdGVudFxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgd2Fybk5vbkV4aXN0ZW50ID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICBfLndhcm4oXG4gICAgICAnWW91IGFyZSBzZXR0aW5nIGEgbm9uLWV4aXN0ZW50IHBhdGggXCInICsgcGF0aC5yYXcgKyAnXCIgJyArXG4gICAgICAnb24gYSB2bSBpbnN0YW5jZS4gQ29uc2lkZXIgcHJlLWluaXRpYWxpemluZyB0aGUgcHJvcGVydHkgJyArXG4gICAgICAnd2l0aCB0aGUgXCJkYXRhXCIgb3B0aW9uIGZvciBtb3JlIHJlbGlhYmxlIHJlYWN0aXZpdHkgJyArXG4gICAgICAnYW5kIGJldHRlciBwZXJmb3JtYW5jZS4nXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogU2V0IG9uIGFuIG9iamVjdCBmcm9tIGEgcGF0aFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nIHwgQXJyYXl9IHBhdGhcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZXhwb3J0cy5zZXQgPSBmdW5jdGlvbiAob2JqLCBwYXRoLCB2YWwpIHtcbiAgdmFyIG9yaWdpbmFsID0gb2JqXG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICBwYXRoID0gZXhwb3J0cy5wYXJzZShwYXRoKVxuICB9XG4gIGlmICghcGF0aCB8fCAhXy5pc09iamVjdChvYmopKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgdmFyIGxhc3QsIGtleVxuICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgbGFzdCA9IG9ialxuICAgIGtleSA9IHBhdGhbaV1cbiAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyonKSB7XG4gICAgICBrZXkgPSBvcmlnaW5hbFtrZXkuc2xpY2UoMSldXG4gICAgfVxuICAgIGlmIChpIDwgbCAtIDEpIHtcbiAgICAgIG9iaiA9IG9ialtrZXldXG4gICAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkge1xuICAgICAgICBvYmogPSB7fVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBsYXN0Ll9pc1Z1ZSkge1xuICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoKVxuICAgICAgICB9XG4gICAgICAgIF8uc2V0KGxhc3QsIGtleSwgb2JqKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoXy5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgb2JqLiRzZXQoa2V5LCB2YWwpXG4gICAgICB9IGVsc2UgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWxcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9iai5faXNWdWUpIHtcbiAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aClcbiAgICAgICAgfVxuICAgICAgICBfLnNldChvYmosIGtleSwgdmFsKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSlcblxufSx7XCIuLi9jYWNoZVwiOjE2LFwiLi4vdXRpbFwiOjcyLFwiX3Byb2Nlc3NcIjoxfV0sNjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciBDYWNoZSA9IHJlcXVpcmUoJy4uL2NhY2hlJylcbnZhciB0ZW1wbGF0ZUNhY2hlID0gbmV3IENhY2hlKDEwMDApXG52YXIgaWRTZWxlY3RvckNhY2hlID0gbmV3IENhY2hlKDEwMDApXG5cbnZhciBtYXAgPSB7XG4gIF9kZWZhdWx0OiBbMCwgJycsICcnXSxcbiAgbGVnZW5kOiBbMSwgJzxmaWVsZHNldD4nLCAnPC9maWVsZHNldD4nXSxcbiAgdHI6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxuICBjb2w6IFtcbiAgICAyLFxuICAgICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsXG4gICAgJzwvY29sZ3JvdXA+PC90YWJsZT4nXG4gIF1cbn1cblxubWFwLnRkID1cbm1hcC50aCA9IFtcbiAgMyxcbiAgJzx0YWJsZT48dGJvZHk+PHRyPicsXG4gICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXG5dXG5cbm1hcC5vcHRpb24gPVxubWFwLm9wdGdyb3VwID0gW1xuICAxLFxuICAnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JyxcbiAgJzwvc2VsZWN0Pidcbl1cblxubWFwLnRoZWFkID1cbm1hcC50Ym9keSA9XG5tYXAuY29sZ3JvdXAgPVxubWFwLmNhcHRpb24gPVxubWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J11cblxubWFwLmcgPVxubWFwLmRlZnMgPVxubWFwLnN5bWJvbCA9XG5tYXAudXNlID1cbm1hcC5pbWFnZSA9XG5tYXAudGV4dCA9XG5tYXAuY2lyY2xlID1cbm1hcC5lbGxpcHNlID1cbm1hcC5saW5lID1cbm1hcC5wYXRoID1cbm1hcC5wb2x5Z29uID1cbm1hcC5wb2x5bGluZSA9XG5tYXAucmVjdCA9IFtcbiAgMSxcbiAgJzxzdmcgJyArXG4gICAgJ3htbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiAnICtcbiAgICAneG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgJyArXG4gICAgJ3htbG5zOmV2PVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS94bWwtZXZlbnRzXCInICtcbiAgICAndmVyc2lvbj1cIjEuMVwiPicsXG4gICc8L3N2Zz4nXG5dXG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgc3VwcG9ydGVkIHRlbXBsYXRlIG5vZGUgd2l0aCBhXG4gKiBEb2N1bWVudEZyYWdtZW50IGNvbnRlbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzUmVhbFRlbXBsYXRlIChub2RlKSB7XG4gIHJldHVybiBfLmlzVGVtcGxhdGUobm9kZSkgJiZcbiAgICBub2RlLmNvbnRlbnQgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50XG59XG5cbnZhciB0YWdSRSA9IC88KFtcXHc6XSspL1xudmFyIGVudGl0eVJFID0gLyZcXHcrO3wmI1xcZCs7fCYjeFtcXGRBLUZdKzsvXG5cbi8qKlxuICogQ29udmVydCBhIHN0cmluZyB0ZW1wbGF0ZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG4gKiBEZXRlcm1pbmVzIGNvcnJlY3Qgd3JhcHBpbmcgYnkgdGFnIHR5cGVzLiBXcmFwcGluZ1xuICogc3RyYXRlZ3kgZm91bmQgaW4galF1ZXJ5ICYgY29tcG9uZW50L2RvbWlmeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVTdHJpbmdcbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gc3RyaW5nVG9GcmFnbWVudCAodGVtcGxhdGVTdHJpbmcpIHtcbiAgLy8gdHJ5IGEgY2FjaGUgaGl0IGZpcnN0XG4gIHZhciBoaXQgPSB0ZW1wbGF0ZUNhY2hlLmdldCh0ZW1wbGF0ZVN0cmluZylcbiAgaWYgKGhpdCkge1xuICAgIHJldHVybiBoaXRcbiAgfVxuXG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG4gIHZhciB0YWdNYXRjaCA9IHRlbXBsYXRlU3RyaW5nLm1hdGNoKHRhZ1JFKVxuICB2YXIgZW50aXR5TWF0Y2ggPSBlbnRpdHlSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKVxuXG4gIGlmICghdGFnTWF0Y2ggJiYgIWVudGl0eU1hdGNoKSB7XG4gICAgLy8gdGV4dCBvbmx5LCByZXR1cm4gYSBzaW5nbGUgdGV4dCBub2RlLlxuICAgIGZyYWcuYXBwZW5kQ2hpbGQoXG4gICAgICBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZW1wbGF0ZVN0cmluZylcbiAgICApXG4gIH0gZWxzZSB7XG5cbiAgICB2YXIgdGFnID0gdGFnTWF0Y2ggJiYgdGFnTWF0Y2hbMV1cbiAgICB2YXIgd3JhcCA9IG1hcFt0YWddIHx8IG1hcC5fZGVmYXVsdFxuICAgIHZhciBkZXB0aCA9IHdyYXBbMF1cbiAgICB2YXIgcHJlZml4ID0gd3JhcFsxXVxuICAgIHZhciBzdWZmaXggPSB3cmFwWzJdXG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgbm9kZS5pbm5lckhUTUwgPSBwcmVmaXggKyB0ZW1wbGF0ZVN0cmluZy50cmltKCkgKyBzdWZmaXhcbiAgICB3aGlsZSAoZGVwdGgtLSkge1xuICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkXG4gICAgfVxuXG4gICAgdmFyIGNoaWxkXG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKVxuICAgIH1cbiAgfVxuXG4gIHRlbXBsYXRlQ2FjaGUucHV0KHRlbXBsYXRlU3RyaW5nLCBmcmFnKVxuICByZXR1cm4gZnJhZ1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSB0ZW1wbGF0ZSBub2RlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gbm9kZVRvRnJhZ21lbnQgKG5vZGUpIHtcbiAgLy8gaWYgaXRzIGEgdGVtcGxhdGUgdGFnIGFuZCB0aGUgYnJvd3NlciBzdXBwb3J0cyBpdCxcbiAgLy8gaXRzIGNvbnRlbnQgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LlxuICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcbiAgICBfLnRyaW1Ob2RlKG5vZGUuY29udGVudClcbiAgICByZXR1cm4gbm9kZS5jb250ZW50XG4gIH1cbiAgLy8gc2NyaXB0IHRlbXBsYXRlXG4gIGlmIChub2RlLnRhZ05hbWUgPT09ICdTQ1JJUFQnKSB7XG4gICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS50ZXh0Q29udGVudClcbiAgfVxuICAvLyBub3JtYWwgbm9kZSwgY2xvbmUgaXQgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsXG4gIHZhciBjbG9uZSA9IGV4cG9ydHMuY2xvbmUobm9kZSlcbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgdmFyIGNoaWxkXG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gIHdoaWxlIChjaGlsZCA9IGNsb25lLmZpcnN0Q2hpbGQpIHtcbiAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpXG4gIH1cbiAgXy50cmltTm9kZShmcmFnKVxuICByZXR1cm4gZnJhZ1xufVxuXG4vLyBUZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIFNhZmFyaSB0ZW1wbGF0ZSBjbG9uaW5nIGJ1Z1xuLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNzc1NVxudmFyIGhhc0Jyb2tlblRlbXBsYXRlID0gKGZ1bmN0aW9uICgpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKF8uaW5Ccm93c2VyKSB7XG4gICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGEuaW5uZXJIVE1MID0gJzx0ZW1wbGF0ZT4xPC90ZW1wbGF0ZT4nXG4gICAgcmV0dXJuICFhLmNsb25lTm9kZSh0cnVlKS5maXJzdENoaWxkLmlubmVySFRNTFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59KSgpXG5cbi8vIFRlc3QgZm9yIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgY2xvbmUgYnVnXG52YXIgaGFzVGV4dGFyZWFDbG9uZUJ1ZyA9IChmdW5jdGlvbiAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChfLmluQnJvd3Nlcikge1xuICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKVxuICAgIHQucGxhY2Vob2xkZXIgPSAndCdcbiAgICByZXR1cm4gdC5jbG9uZU5vZGUodHJ1ZSkudmFsdWUgPT09ICd0J1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59KSgpXG5cbi8qKlxuICogMS4gRGVhbCB3aXRoIFNhZmFyaSBjbG9uaW5nIG5lc3RlZCA8dGVtcGxhdGU+IGJ1ZyBieVxuICogICAgbWFudWFsbHkgY2xvbmluZyBhbGwgdGVtcGxhdGUgaW5zdGFuY2VzLlxuICogMi4gRGVhbCB3aXRoIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgYnVnIGJ5IHNldHRpbmdcbiAqICAgIHRoZSBjb3JyZWN0IHZhbHVlIGFmdGVyIGNsb25pbmcuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IG5vZGVcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5leHBvcnRzLmNsb25lID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3JBbGwpIHtcbiAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUoKVxuICB9XG4gIHZhciByZXMgPSBub2RlLmNsb25lTm9kZSh0cnVlKVxuICB2YXIgaSwgb3JpZ2luYWwsIGNsb25lZFxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGhhc0Jyb2tlblRlbXBsYXRlKSB7XG4gICAgdmFyIGNsb25lID0gcmVzXG4gICAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG4gICAgICBub2RlID0gbm9kZS5jb250ZW50XG4gICAgICBjbG9uZSA9IHJlcy5jb250ZW50XG4gICAgfVxuICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpXG4gICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuICAgICAgY2xvbmVkID0gY2xvbmUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKVxuICAgICAgaSA9IGNsb25lZC5sZW5ndGhcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY2xvbmVkW2ldLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKFxuICAgICAgICAgIGV4cG9ydHMuY2xvbmUob3JpZ2luYWxbaV0pLFxuICAgICAgICAgIGNsb25lZFtpXVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaGFzVGV4dGFyZWFDbG9uZUJ1Zykge1xuICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgIHJlcy52YWx1ZSA9IG5vZGUudmFsdWVcbiAgICB9IGVsc2Uge1xuICAgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJylcbiAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgICAgY2xvbmVkID0gcmVzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJylcbiAgICAgICAgaSA9IGNsb25lZC5sZW5ndGhcbiAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgIGNsb25lZFtpXS52YWx1ZSA9IG9yaWdpbmFsW2ldLnZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG4vKipcbiAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbiBhbmQgbm9ybWFsaXplcyBpdCBpbnRvIGFcbiAqIGEgRG9jdW1lbnRGcmFnbWVudCB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgcGFydGlhbCBvciBhXG4gKiBpbnN0YW5jZSB0ZW1wbGF0ZS5cbiAqXG4gKiBAcGFyYW0geyp9IHRlbXBsYXRlXG4gKiAgICBQb3NzaWJsZSB2YWx1ZXMgaW5jbHVkZTpcbiAqICAgIC0gRG9jdW1lbnRGcmFnbWVudCBvYmplY3RcbiAqICAgIC0gTm9kZSBvYmplY3Qgb2YgdHlwZSBUZW1wbGF0ZVxuICogICAgLSBpZCBzZWxlY3RvcjogJyNzb21lLXRlbXBsYXRlLWlkJ1xuICogICAgLSB0ZW1wbGF0ZSBzdHJpbmc6ICc8ZGl2PjxzcGFuPnt7bXNnfX08L3NwYW4+PC9kaXY+J1xuICogQHBhcmFtIHtCb29sZWFufSBjbG9uZVxuICogQHBhcmFtIHtCb29sZWFufSBub1NlbGVjdG9yXG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fHVuZGVmaW5lZH1cbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKHRlbXBsYXRlLCBjbG9uZSwgbm9TZWxlY3Rvcikge1xuICB2YXIgbm9kZSwgZnJhZ1xuXG4gIC8vIGlmIHRoZSB0ZW1wbGF0ZSBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQsXG4gIC8vIGRvIG5vdGhpbmdcbiAgaWYgKHRlbXBsYXRlIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCkge1xuICAgIF8udHJpbU5vZGUodGVtcGxhdGUpXG4gICAgcmV0dXJuIGNsb25lXG4gICAgICA/IGV4cG9ydHMuY2xvbmUodGVtcGxhdGUpXG4gICAgICA6IHRlbXBsYXRlXG4gIH1cblxuICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuICAgIC8vIGlkIHNlbGVjdG9yXG4gICAgaWYgKCFub1NlbGVjdG9yICYmIHRlbXBsYXRlLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICAvLyBpZCBzZWxlY3RvciBjYW4gYmUgY2FjaGVkIHRvb1xuICAgICAgZnJhZyA9IGlkU2VsZWN0b3JDYWNoZS5nZXQodGVtcGxhdGUpXG4gICAgICBpZiAoIWZyYWcpIHtcbiAgICAgICAgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlLnNsaWNlKDEpKVxuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudChub2RlKVxuICAgICAgICAgIC8vIHNhdmUgc2VsZWN0b3IgdG8gY2FjaGVcbiAgICAgICAgICBpZFNlbGVjdG9yQ2FjaGUucHV0KHRlbXBsYXRlLCBmcmFnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbCBzdHJpbmcgdGVtcGxhdGVcbiAgICAgIGZyYWcgPSBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlKVxuICAgIH1cbiAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xuICAgIC8vIGEgZGlyZWN0IG5vZGVcbiAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQodGVtcGxhdGUpXG4gIH1cblxuICByZXR1cm4gZnJhZyAmJiBjbG9uZVxuICAgID8gZXhwb3J0cy5jbG9uZShmcmFnKVxuICAgIDogZnJhZ1xufVxuXG59LHtcIi4uL2NhY2hlXCI6MTYsXCIuLi91dGlsXCI6NzJ9XSw2NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgQ2FjaGUgPSByZXF1aXJlKCcuLi9jYWNoZScpXG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJylcbnZhciBkaXJQYXJzZXIgPSByZXF1aXJlKCcuL2RpcmVjdGl2ZScpXG52YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2dcbnZhciBjYWNoZSwgdGFnUkUsIGh0bWxSRVxuXG4vKipcbiAqIEVzY2FwZSBhIHN0cmluZyBzbyBpdCBjYW4gYmUgdXNlZCBpbiBhIFJlZ0V4cFxuICogY29uc3RydWN0b3IuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICovXG5cbmZ1bmN0aW9uIGVzY2FwZVJlZ2V4IChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKVxufVxuXG5leHBvcnRzLmNvbXBpbGVSZWdleCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG9wZW4gPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1swXSlcbiAgdmFyIGNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMV0pXG4gIHZhciB1bnNhZmVPcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMF0pXG4gIHZhciB1bnNhZmVDbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzFdKVxuICB0YWdSRSA9IG5ldyBSZWdFeHAoXG4gICAgdW5zYWZlT3BlbiArICcoLis/KScgKyB1bnNhZmVDbG9zZSArICd8JyArXG4gICAgb3BlbiArICcoLis/KScgKyBjbG9zZSxcbiAgICAnZydcbiAgKVxuICBodG1sUkUgPSBuZXcgUmVnRXhwKFxuICAgICdeJyArIHVuc2FmZU9wZW4gKyAnLionICsgdW5zYWZlQ2xvc2UgKyAnJCdcbiAgKVxuICAvLyByZXNldCBjYWNoZVxuICBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKVxufVxuXG4vKipcbiAqIFBhcnNlIGEgdGVtcGxhdGUgdGV4dCBzdHJpbmcgaW50byBhbiBhcnJheSBvZiB0b2tlbnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAqIEByZXR1cm4ge0FycmF5PE9iamVjdD4gfCBudWxsfVxuICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHR5cGVcbiAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB2YWx1ZVxuICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaHRtbF1cbiAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW29uZVRpbWVdXG4gKi9cblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gIGlmICghY2FjaGUpIHtcbiAgICBleHBvcnRzLmNvbXBpbGVSZWdleCgpXG4gIH1cbiAgdmFyIGhpdCA9IGNhY2hlLmdldCh0ZXh0KVxuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdFxuICB9XG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xcbi9nLCAnJylcbiAgaWYgKCF0YWdSRS50ZXN0KHRleHQpKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICB2YXIgdG9rZW5zID0gW11cbiAgdmFyIGxhc3RJbmRleCA9IHRhZ1JFLmxhc3RJbmRleCA9IDBcbiAgdmFyIG1hdGNoLCBpbmRleCwgaHRtbCwgdmFsdWUsIGZpcnN0LCBvbmVUaW1lXG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gIHdoaWxlIChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpIHtcbiAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGluZGV4ID0gbWF0Y2guaW5kZXhcbiAgICAvLyBwdXNoIHRleHQgdG9rZW5cbiAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleClcbiAgICAgIH0pXG4gICAgfVxuICAgIC8vIHRhZyB0b2tlblxuICAgIGh0bWwgPSBodG1sUkUudGVzdChtYXRjaFswXSlcbiAgICB2YWx1ZSA9IGh0bWwgPyBtYXRjaFsxXSA6IG1hdGNoWzJdXG4gICAgZmlyc3QgPSB2YWx1ZS5jaGFyQ29kZUF0KDApXG4gICAgb25lVGltZSA9IGZpcnN0ID09PSA0MiAvLyAqXG4gICAgdmFsdWUgPSBvbmVUaW1lXG4gICAgICA/IHZhbHVlLnNsaWNlKDEpXG4gICAgICA6IHZhbHVlXG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgdGFnOiB0cnVlLFxuICAgICAgdmFsdWU6IHZhbHVlLnRyaW0oKSxcbiAgICAgIGh0bWw6IGh0bWwsXG4gICAgICBvbmVUaW1lOiBvbmVUaW1lXG4gICAgfSlcbiAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aFxuICB9XG4gIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleClcbiAgICB9KVxuICB9XG4gIGNhY2hlLnB1dCh0ZXh0LCB0b2tlbnMpXG4gIHJldHVybiB0b2tlbnNcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBsaXN0IG9mIHRva2VucyBpbnRvIGFuIGV4cHJlc3Npb24uXG4gKiBlLmcuIHRva2VucyBwYXJzZWQgZnJvbSAnYSB7e2J9fSBjJyBjYW4gYmUgc2VyaWFsaXplZFxuICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmV4cG9ydHMudG9rZW5zVG9FeHAgPSBmdW5jdGlvbiAodG9rZW5zKSB7XG4gIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuKVxuICAgIH0pLmpvaW4oJysnKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHRydWUpXG4gIH1cbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBzaW5nbGUgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNpbmdsZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFRva2VuICh0b2tlbiwgc2luZ2xlKSB7XG4gIHJldHVybiB0b2tlbi50YWdcbiAgICA/IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSlcbiAgICA6ICdcIicgKyB0b2tlbi52YWx1ZSArICdcIidcbn1cblxuLyoqXG4gKiBGb3IgYW4gYXR0cmlidXRlIHdpdGggbXVsdGlwbGUgaW50ZXJwb2xhdGlvbiB0YWdzLFxuICogZS5nLiBhdHRyPVwic29tZS17e3RoaW5nIHwgZmlsdGVyfX1cIiwgaW4gb3JkZXIgdG8gY29tYmluZVxuICogdGhlIHdob2xlIHRoaW5nIGludG8gYSBzaW5nbGUgd2F0Y2hhYmxlIGV4cHJlc3Npb24sIHdlXG4gKiBoYXZlIHRvIGlubGluZSB0aG9zZSBmaWx0ZXJzLiBUaGlzIGZ1bmN0aW9uIGRvZXMgZXhhY3RseVxuICogdGhhdC4gVGhpcyBpcyBhIGJpdCBoYWNreSBidXQgaXQgYXZvaWRzIGhlYXZ5IGNoYW5nZXNcbiAqIHRvIGRpcmVjdGl2ZSBwYXJzZXIgYW5kIHdhdGNoZXIgbWVjaGFuaXNtLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc2luZ2xlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGZpbHRlclJFID0gL1tefF1cXHxbXnxdL1xuZnVuY3Rpb24gaW5saW5lRmlsdGVycyAoZXhwLCBzaW5nbGUpIHtcbiAgaWYgKCFmaWx0ZXJSRS50ZXN0KGV4cCkpIHtcbiAgICByZXR1cm4gc2luZ2xlXG4gICAgICA/IGV4cFxuICAgICAgOiAnKCcgKyBleHAgKyAnKSdcbiAgfSBlbHNlIHtcbiAgICB2YXIgZGlyID0gZGlyUGFyc2VyLnBhcnNlKGV4cClcbiAgICBpZiAoIWRpci5maWx0ZXJzKSB7XG4gICAgICByZXR1cm4gJygnICsgZXhwICsgJyknXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAndGhpcy5fYXBwbHlGaWx0ZXJzKCcgK1xuICAgICAgICBkaXIuZXhwcmVzc2lvbiArIC8vIHZhbHVlXG4gICAgICAgICcsbnVsbCwnICsgICAgICAgLy8gb2xkVmFsdWUgKG51bGwgZm9yIHJlYWQpXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KGRpci5maWx0ZXJzKSArIC8vIGZpbHRlciBkZXNjcmlwdG9yc1xuICAgICAgICAnLGZhbHNlKScgICAgICAgIC8vIHdyaXRlP1xuICAgIH1cbiAgfVxufVxuXG59LHtcIi4uL2NhY2hlXCI6MTYsXCIuLi9jb25maWdcIjoyMSxcIi4vZGlyZWN0aXZlXCI6NjB9XSw2NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxuXG4vKipcbiAqIEFwcGVuZCB3aXRoIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmV4cG9ydHMuYXBwZW5kID0gZnVuY3Rpb24gKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICBhcHBseShlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbClcbiAgfSwgdm0sIGNiKVxufVxuXG4vKipcbiAqIEluc2VydEJlZm9yZSB3aXRoIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmV4cG9ydHMuYmVmb3JlID0gZnVuY3Rpb24gKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICBhcHBseShlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIF8uYmVmb3JlKGVsLCB0YXJnZXQpXG4gIH0sIHZtLCBjYilcbn1cblxuLyoqXG4gKiBSZW1vdmUgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmV4cG9ydHMucmVtb3ZlID0gZnVuY3Rpb24gKGVsLCB2bSwgY2IpIHtcbiAgYXBwbHkoZWwsIC0xLCBmdW5jdGlvbiAoKSB7XG4gICAgXy5yZW1vdmUoZWwpXG4gIH0sIHZtLCBjYilcbn1cblxuLyoqXG4gKiBBcHBseSB0cmFuc2l0aW9ucyB3aXRoIGFuIG9wZXJhdGlvbiBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge051bWJlcn0gZGlyZWN0aW9uXG4gKiAgICAgICAgICAgICAgICAgIDE6IGVudGVyXG4gKiAgICAgICAgICAgICAgICAgLTE6IGxlYXZlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHRoZSBhY3R1YWwgRE9NIG9wZXJhdGlvblxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxudmFyIGFwcGx5ID0gZXhwb3J0cy5hcHBseSA9IGZ1bmN0aW9uIChlbCwgZGlyZWN0aW9uLCBvcCwgdm0sIGNiKSB7XG4gIHZhciB0cmFuc2l0aW9uID0gZWwuX192X3RyYW5zXG4gIGlmIChcbiAgICAhdHJhbnNpdGlvbiB8fFxuICAgIC8vIHNraXAgaWYgdGhlcmUgYXJlIG5vIGpzIGhvb2tzIGFuZCBDU1MgdHJhbnNpdGlvbiBpc1xuICAgIC8vIG5vdCBzdXBwb3J0ZWRcbiAgICAoIXRyYW5zaXRpb24uaG9va3MgJiYgIV8udHJhbnNpdGlvbkVuZEV2ZW50KSB8fFxuICAgIC8vIHNraXAgdHJhbnNpdGlvbnMgZm9yIGluaXRpYWwgY29tcGlsZVxuICAgICF2bS5faXNDb21waWxlZCB8fFxuICAgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBtYW5pcHVsYXRlZCBieSBhIHBhcmVudCBkaXJlY3RpdmVcbiAgICAvLyBkdXJpbmcgdGhlIHBhcmVudCdzIGNvbXBpbGF0aW9uIHBoYXNlLCBza2lwIHRoZVxuICAgIC8vIGFuaW1hdGlvbi5cbiAgICAodm0uJHBhcmVudCAmJiAhdm0uJHBhcmVudC5faXNDb21waWxlZClcbiAgKSB7XG4gICAgb3AoKVxuICAgIGlmIChjYikgY2IoKVxuICAgIHJldHVyblxuICB9XG4gIHZhciBhY3Rpb24gPSBkaXJlY3Rpb24gPiAwID8gJ2VudGVyJyA6ICdsZWF2ZSdcbiAgdHJhbnNpdGlvblthY3Rpb25dKG9wLCBjYilcbn1cblxufSx7XCIuLi91dGlsXCI6NzJ9XSw2NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIHF1ZXVlID0gW11cbnZhciBxdWV1ZWQgPSBmYWxzZVxuXG4vKipcbiAqIFB1c2ggYSBqb2IgaW50byB0aGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gam9iXG4gKi9cblxuZXhwb3J0cy5wdXNoID0gZnVuY3Rpb24gKGpvYikge1xuICBxdWV1ZS5wdXNoKGpvYilcbiAgaWYgKCFxdWV1ZWQpIHtcbiAgICBxdWV1ZWQgPSB0cnVlXG4gICAgXy5uZXh0VGljayhmbHVzaClcbiAgfVxufVxuXG4vKipcbiAqIEZsdXNoIHRoZSBxdWV1ZSwgYW5kIGRvIG9uZSBmb3JjZWQgcmVmbG93IGJlZm9yZVxuICogdHJpZ2dlcmluZyB0cmFuc2l0aW9ucy5cbiAqL1xuXG5mdW5jdGlvbiBmbHVzaCAoKSB7XG4gIC8vIEZvcmNlIGxheW91dFxuICB2YXIgZiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHRcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIHF1ZXVlW2ldKClcbiAgfVxuICBxdWV1ZSA9IFtdXG4gIHF1ZXVlZCA9IGZhbHNlXG4gIC8vIGR1bW15IHJldHVybiwgc28ganMgbGludGVycyBkb24ndCBjb21wbGFpbiBhYm91dFxuICAvLyB1bnVzZWQgdmFyaWFibGUgZlxuICByZXR1cm4gZlxufVxuXG59LHtcIi4uL3V0aWxcIjo3Mn1dLDY3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgcXVldWUgPSByZXF1aXJlKCcuL3F1ZXVlJylcbnZhciBhZGRDbGFzcyA9IF8uYWRkQ2xhc3NcbnZhciByZW1vdmVDbGFzcyA9IF8ucmVtb3ZlQ2xhc3NcbnZhciB0cmFuc2l0aW9uRW5kRXZlbnQgPSBfLnRyYW5zaXRpb25FbmRFdmVudFxudmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gXy5hbmltYXRpb25FbmRFdmVudFxudmFyIHRyYW5zRHVyYXRpb25Qcm9wID0gXy50cmFuc2l0aW9uUHJvcCArICdEdXJhdGlvbidcbnZhciBhbmltRHVyYXRpb25Qcm9wID0gXy5hbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJ1xuXG52YXIgVFlQRV9UUkFOU0lUSU9OID0gMVxudmFyIFRZUEVfQU5JTUFUSU9OID0gMlxuXG4vKipcbiAqIEEgVHJhbnNpdGlvbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXMgdGhlIHN0YXRlIGFuZCBsb2dpY1xuICogb2YgdGhlIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcGFyYW0ge09iamVjdH0gaG9va3NcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbmZ1bmN0aW9uIFRyYW5zaXRpb24gKGVsLCBpZCwgaG9va3MsIHZtKSB7XG4gIHRoaXMuaWQgPSBpZFxuICB0aGlzLmVsID0gZWxcbiAgdGhpcy5lbnRlckNsYXNzID0gaWQgKyAnLWVudGVyJ1xuICB0aGlzLmxlYXZlQ2xhc3MgPSBpZCArICctbGVhdmUnXG4gIHRoaXMuaG9va3MgPSBob29rc1xuICB0aGlzLnZtID0gdm1cbiAgLy8gYXN5bmMgc3RhdGVcbiAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPVxuICB0aGlzLnBlbmRpbmdDc3NDYiA9XG4gIHRoaXMuY2FuY2VsID1cbiAgdGhpcy5wZW5kaW5nSnNDYiA9XG4gIHRoaXMub3AgPVxuICB0aGlzLmNiID0gbnVsbFxuICB0aGlzLmp1c3RFbnRlcmVkID0gZmFsc2VcbiAgdGhpcy5lbnRlcmVkID0gdGhpcy5sZWZ0ID0gZmFsc2VcbiAgdGhpcy50eXBlQ2FjaGUgPSB7fVxuICAvLyBiaW5kXG4gIHZhciBzZWxmID0gdGhpc1xuICA7WydlbnRlck5leHRUaWNrJywgJ2VudGVyRG9uZScsICdsZWF2ZU5leHRUaWNrJywgJ2xlYXZlRG9uZSddXG4gICAgLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcbiAgICAgIHNlbGZbbV0gPSBfLmJpbmQoc2VsZlttXSwgc2VsZilcbiAgICB9KVxufVxuXG52YXIgcCA9IFRyYW5zaXRpb24ucHJvdG90eXBlXG5cbi8qKlxuICogU3RhcnQgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cbiAqXG4gKiAxLiBlbnRlciB0cmFuc2l0aW9uIHRyaWdnZXJlZFxuICogMi4gY2FsbCBiZWZvcmVFbnRlciBob29rXG4gKiAzLiBhZGQgZW50ZXIgY2xhc3NcbiAqIDQuIGluc2VydC9zaG93IGVsZW1lbnRcbiAqIDUuIGNhbGwgZW50ZXIgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcbiAqIDYuIHJlZmxvd1xuICogNy4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuICogICAgLSB0cmFuc2l0aW9uOlxuICogICAgICAgIHJlbW92ZSBjbGFzcyBub3csIHdhaXQgZm9yIHRyYW5zaXRpb25lbmQsXG4gKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiAgICAtIGFuaW1hdGlvbjpcbiAqICAgICAgICB3YWl0IGZvciBhbmltYXRpb25lbmQsIHJlbW92ZSBjbGFzcyxcbiAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG4gKiAgICAgICAgZG9uZSBub3cgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqIDguIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcbiAqICAgIGFmdGVyRW50ZXIgaG9vay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIGluc2VydC9zaG93IHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxucC5lbnRlciA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcbiAgdGhpcy5jYW5jZWxQZW5kaW5nKClcbiAgdGhpcy5jYWxsSG9vaygnYmVmb3JlRW50ZXInKVxuICB0aGlzLmNiID0gY2JcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKVxuICBvcCgpXG4gIHRoaXMuZW50ZXJlZCA9IGZhbHNlXG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2VudGVyJylcbiAgaWYgKHRoaXMuZW50ZXJlZCkge1xuICAgIHJldHVybiAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG4gIH1cbiAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuZW50ZXJDYW5jZWxsZWRcbiAgcXVldWUucHVzaCh0aGlzLmVudGVyTmV4dFRpY2spXG59XG5cbi8qKlxuICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLCB3aGljaCBpc1xuICogdG8gYmUgcHVzaGVkIGludG8gYSBxdWV1ZSBhbmQgZXhlY3V0ZWQgYWZ0ZXIgYSByZWZsb3cgc29cbiAqIHRoYXQgcmVtb3ZpbmcgdGhlIGNsYXNzIGNhbiB0cmlnZ2VyIGEgQ1NTIHRyYW5zaXRpb24uXG4gKi9cblxucC5lbnRlck5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuXG4gIC8vIEltcG9ydGFudCBoYWNrOlxuICAvLyBpbiBDaHJvbWUsIGlmIGEganVzdC1lbnRlcmVkIGVsZW1lbnQgaXMgYXBwbGllZCB0aGVcbiAgLy8gbGVhdmUgY2xhc3Mgd2hpbGUgaXRzIGludGVycG9sYXRlZCBwcm9wZXJ0eSBzdGlsbCBoYXNcbiAgLy8gYSB2ZXJ5IHNtYWxsIHZhbHVlICh3aXRoaW4gb25lIGZyYW1lKSwgQ2hyb21lIHdpbGxcbiAgLy8gc2tpcCB0aGUgbGVhdmUgdHJhbnNpdGlvbiBlbnRpcmVseSBhbmQgbm90IGZpcmluZyB0aGVcbiAgLy8gdHJhbnN0aW9uZW5kIGV2ZW50LiBUaGVyZWZvcmUgd2UgbmVlZCB0byBwcm90ZWN0ZWRcbiAgLy8gYWdhaW5zdCBzdWNoIGNhc2VzIHVzaW5nIGEgb25lLWZyYW1lIHRpbWVvdXQuXG4gIHRoaXMuanVzdEVudGVyZWQgPSB0cnVlXG4gIHZhciBzZWxmID0gdGhpc1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLmp1c3RFbnRlcmVkID0gZmFsc2VcbiAgfSwgMTcpXG5cbiAgdmFyIGVudGVyRG9uZSA9IHRoaXMuZW50ZXJEb25lXG4gIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmVudGVyQ2xhc3MpXG4gIGlmICghdGhpcy5wZW5kaW5nSnNDYikge1xuICAgIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcbiAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBieSByZW1vdmluZyBlbnRlciBjbGFzcyBub3dcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcylcbiAgICAgIHRoaXMuc2V0dXBDc3NDYih0cmFuc2l0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSlcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICB0aGlzLnNldHVwQ3NzQ2IoYW5pbWF0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSlcbiAgICB9IGVsc2Uge1xuICAgICAgZW50ZXJEb25lKClcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG4gICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKVxuICB9XG59XG5cbi8qKlxuICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG4gKi9cblxucC5lbnRlckRvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZW50ZXJlZCA9IHRydWVcbiAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbFxuICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpXG4gIHRoaXMuY2FsbEhvb2soJ2FmdGVyRW50ZXInKVxuICBpZiAodGhpcy5jYikgdGhpcy5jYigpXG59XG5cbi8qKlxuICogU3RhcnQgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKlxuICogMS4gbGVhdmUgdHJhbnNpdGlvbiB0cmlnZ2VyZWQuXG4gKiAyLiBjYWxsIGJlZm9yZUxlYXZlIGhvb2tcbiAqIDMuIGFkZCBsZWF2ZSBjbGFzcyAodHJpZ2dlciBjc3MgdHJhbnNpdGlvbilcbiAqIDQuIGNhbGwgbGVhdmUgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcbiAqIDUuIHJlZmxvdyBpZiBubyBleHBsaWNpdCBqcyBjYWxsYmFjayBpcyBwcm92aWRlZFxuICogNi4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuICogICAgLSB0cmFuc2l0aW9uIG9yIGFuaW1hdGlvbjpcbiAqICAgICAgICB3YWl0IGZvciBlbmQgZXZlbnQsIHJlbW92ZSBjbGFzcywgdGhlbiBkb25lIGlmXG4gKiAgICAgICAgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG4gKiAgICAgICAgZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogNy4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuICogICAgYWZ0ZXJMZWF2ZSBob29rLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gcmVtb3ZlL2hpZGUgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5wLmxlYXZlID0gZnVuY3Rpb24gKG9wLCBjYikge1xuICB0aGlzLmNhbmNlbFBlbmRpbmcoKVxuICB0aGlzLmNhbGxIb29rKCdiZWZvcmVMZWF2ZScpXG4gIHRoaXMub3AgPSBvcFxuICB0aGlzLmNiID0gY2JcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKVxuICB0aGlzLmxlZnQgPSBmYWxzZVxuICB0aGlzLmNhbGxIb29rV2l0aENiKCdsZWF2ZScpXG4gIGlmICh0aGlzLmxlZnQpIHtcbiAgICByZXR1cm4gLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuICB9XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmxlYXZlQ2FuY2VsbGVkXG4gIC8vIG9ubHkgbmVlZCB0byBoYW5kbGUgbGVhdmVEb25lIGlmXG4gIC8vIDEuIHRoZSB0cmFuc2l0aW9uIGlzIGFscmVhZHkgZG9uZSAoc3luY2hyb25vdXNseSBjYWxsZWRcbiAgLy8gICAgYnkgdGhlIHVzZXIsIHdoaWNoIGNhdXNlcyB0aGlzLm9wIHNldCB0byBudWxsKVxuICAvLyAyLiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrXG4gIGlmICh0aGlzLm9wICYmICF0aGlzLnBlbmRpbmdKc0NiKSB7XG4gICAgLy8gaWYgYSBDU1MgdHJhbnNpdGlvbiBsZWF2ZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgZW50ZXIsXG4gICAgLy8gdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIHRoZXJlZm9yZSB3ZVxuICAgIC8vIGRldGVjdCBzdWNoIGNhc2VzIGFuZCBlbmQgdGhlIGxlYXZlIGltbWVkaWF0ZWx5LlxuICAgIGlmICh0aGlzLmp1c3RFbnRlcmVkKSB7XG4gICAgICB0aGlzLmxlYXZlRG9uZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHF1ZXVlLnB1c2godGhpcy5sZWF2ZU5leHRUaWNrKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKi9cblxucC5sZWF2ZU5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5sZWF2ZUNsYXNzKVxuICBpZiAodHlwZSkge1xuICAgIHZhciBldmVudCA9IHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTlxuICAgICAgPyB0cmFuc2l0aW9uRW5kRXZlbnRcbiAgICAgIDogYW5pbWF0aW9uRW5kRXZlbnRcbiAgICB0aGlzLnNldHVwQ3NzQ2IoZXZlbnQsIHRoaXMubGVhdmVEb25lKVxuICB9IGVsc2Uge1xuICAgIHRoaXMubGVhdmVEb25lKClcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wLmxlYXZlRG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5sZWZ0ID0gdHJ1ZVxuICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsXG4gIHRoaXMub3AoKVxuICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpXG4gIHRoaXMuY2FsbEhvb2soJ2FmdGVyTGVhdmUnKVxuICBpZiAodGhpcy5jYikgdGhpcy5jYigpXG4gIHRoaXMub3AgPSBudWxsXG59XG5cbi8qKlxuICogQ2FuY2VsIGFueSBwZW5kaW5nIGNhbGxiYWNrcyBmcm9tIGEgcHJldmlvdXNseSBydW5uaW5nXG4gKiBidXQgbm90IGZpbmlzaGVkIHRyYW5zaXRpb24uXG4gKi9cblxucC5jYW5jZWxQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGxcbiAgdmFyIGhhc1BlbmRpbmcgPSBmYWxzZVxuICBpZiAodGhpcy5wZW5kaW5nQ3NzQ2IpIHtcbiAgICBoYXNQZW5kaW5nID0gdHJ1ZVxuICAgIF8ub2ZmKHRoaXMuZWwsIHRoaXMucGVuZGluZ0Nzc0V2ZW50LCB0aGlzLnBlbmRpbmdDc3NDYilcbiAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gbnVsbFxuICB9XG4gIGlmICh0aGlzLnBlbmRpbmdKc0NiKSB7XG4gICAgaGFzUGVuZGluZyA9IHRydWVcbiAgICB0aGlzLnBlbmRpbmdKc0NiLmNhbmNlbCgpXG4gICAgdGhpcy5wZW5kaW5nSnNDYiA9IG51bGxcbiAgfVxuICBpZiAoaGFzUGVuZGluZykge1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcylcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpXG4gIH1cbiAgaWYgKHRoaXMuY2FuY2VsKSB7XG4gICAgdGhpcy5jYW5jZWwuY2FsbCh0aGlzLnZtLCB0aGlzLmVsKVxuICAgIHRoaXMuY2FuY2VsID0gbnVsbFxuICB9XG59XG5cbi8qKlxuICogQ2FsbCBhIHVzZXItcHJvdmlkZWQgc3luY2hyb25vdXMgaG9vayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5cbnAuY2FsbEhvb2sgPSBmdW5jdGlvbiAodHlwZSkge1xuICBpZiAodGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdKSB7XG4gICAgdGhpcy5ob29rc1t0eXBlXS5jYWxsKHRoaXMudm0sIHRoaXMuZWwpXG4gIH1cbn1cblxuLyoqXG4gKiBDYWxsIGEgdXNlci1wcm92aWRlZCwgcG90ZW50aWFsbHktYXN5bmMgaG9vayBmdW5jdGlvbi5cbiAqIFdlIGNoZWNrIGZvciB0aGUgbGVuZ3RoIG9mIGFyZ3VtZW50cyB0byBzZWUgaWYgdGhlIGhvb2tcbiAqIGV4cGVjdHMgYSBgZG9uZWAgY2FsbGJhY2suIElmIHRydWUsIHRoZSB0cmFuc2l0aW9uJ3MgZW5kXG4gKiB3aWxsIGJlIGRldGVybWluZWQgYnkgd2hlbiB0aGUgdXNlciBjYWxscyB0aGF0IGNhbGxiYWNrO1xuICogb3RoZXJ3aXNlLCB0aGUgZW5kIGlzIGRldGVybWluZWQgYnkgdGhlIENTUyB0cmFuc2l0aW9uIG9yXG4gKiBhbmltYXRpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuXG5wLmNhbGxIb29rV2l0aENiID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdmFyIGhvb2sgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV1cbiAgaWYgKGhvb2spIHtcbiAgICBpZiAoaG9vay5sZW5ndGggPiAxKSB7XG4gICAgICB0aGlzLnBlbmRpbmdKc0NiID0gXy5jYW5jZWxsYWJsZSh0aGlzW3R5cGUgKyAnRG9uZSddKVxuICAgIH1cbiAgICBob29rLmNhbGwodGhpcy52bSwgdGhpcy5lbCwgdGhpcy5wZW5kaW5nSnNDYilcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhbiBlbGVtZW50J3MgdHJhbnNpdGlvbiB0eXBlIGJhc2VkIG9uIHRoZVxuICogY2FsY3VsYXRlZCBzdHlsZXMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZVxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG5cbnAuZ2V0Q3NzVHJhbnNpdGlvblR5cGUgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoXG4gICAgIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuICAgIC8vIHNraXAgQ1NTIHRyYW5zaXRpb25zIGlmIHBhZ2UgaXMgbm90IHZpc2libGUgLVxuICAgIC8vIHRoaXMgc29sdmVzIHRoZSBpc3N1ZSBvZiB0cmFuc2l0aW9uZW5kIGV2ZW50cyBub3RcbiAgICAvLyBmaXJpbmcgdW50aWwgdGhlIHBhZ2UgaXMgdmlzaWJsZSBhZ2Fpbi5cbiAgICAvLyBwYWdlVmlzaWJpbGl0eSBBUEkgaXMgc3VwcG9ydGVkIGluIElFMTArLCBzYW1lIGFzXG4gICAgLy8gQ1NTIHRyYW5zaXRpb25zLlxuICAgIGRvY3VtZW50LmhpZGRlbiB8fFxuICAgIC8vIGV4cGxpY2l0IGpzLW9ubHkgdHJhbnNpdGlvblxuICAgICh0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuY3NzID09PSBmYWxzZSkgfHxcbiAgICAvLyBlbGVtZW50IGlzIGhpZGRlblxuICAgIGlzSGlkZGVuKHRoaXMuZWwpXG4gICkge1xuICAgIHJldHVyblxuICB9XG4gIHZhciB0eXBlID0gdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXVxuICBpZiAodHlwZSkgcmV0dXJuIHR5cGVcbiAgdmFyIGlubGluZVN0eWxlcyA9IHRoaXMuZWwuc3R5bGVcbiAgdmFyIGNvbXB1dGVkU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbClcbiAgdmFyIHRyYW5zRHVyYXRpb24gPVxuICAgIGlubGluZVN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF0gfHxcbiAgICBjb21wdXRlZFN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF1cbiAgaWYgKHRyYW5zRHVyYXRpb24gJiYgdHJhbnNEdXJhdGlvbiAhPT0gJzBzJykge1xuICAgIHR5cGUgPSBUWVBFX1RSQU5TSVRJT05cbiAgfSBlbHNlIHtcbiAgICB2YXIgYW5pbUR1cmF0aW9uID1cbiAgICAgIGlubGluZVN0eWxlc1thbmltRHVyYXRpb25Qcm9wXSB8fFxuICAgICAgY29tcHV0ZWRTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF1cbiAgICBpZiAoYW5pbUR1cmF0aW9uICYmIGFuaW1EdXJhdGlvbiAhPT0gJzBzJykge1xuICAgICAgdHlwZSA9IFRZUEVfQU5JTUFUSU9OXG4gICAgfVxuICB9XG4gIGlmICh0eXBlKSB7XG4gICAgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXSA9IHR5cGVcbiAgfVxuICByZXR1cm4gdHlwZVxufVxuXG4vKipcbiAqIFNldHVwIGEgQ1NTIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5wLnNldHVwQ3NzQ2IgPSBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XG4gIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gZXZlbnRcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHZhciBlbCA9IHRoaXMuZWxcbiAgdmFyIG9uRW5kID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBmdW5jdGlvbiAoZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZWwpIHtcbiAgICAgIF8ub2ZmKGVsLCBldmVudCwgb25FbmQpXG4gICAgICBzZWxmLnBlbmRpbmdDc3NFdmVudCA9IHNlbGYucGVuZGluZ0Nzc0NiID0gbnVsbFxuICAgICAgaWYgKCFzZWxmLnBlbmRpbmdKc0NiICYmIGNiKSB7XG4gICAgICAgIGNiKClcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXy5vbihlbCwgZXZlbnQsIG9uRW5kKVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgaGlkZGVuIC0gaW4gdGhhdCBjYXNlIHdlIGNhbiBqdXN0XG4gKiBza2lwIHRoZSB0cmFuc2l0aW9uIGFsbHRvZ2V0aGVyLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNIaWRkZW4gKGVsKSB7XG4gIHJldHVybiAhKFxuICAgIGVsLm9mZnNldFdpZHRoIHx8XG4gICAgZWwub2Zmc2V0SGVpZ2h0IHx8XG4gICAgZWwuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGhcbiAgKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zaXRpb25cblxufSx7XCIuLi91dGlsXCI6NzIsXCIuL3F1ZXVlXCI6NjZ9XSw2ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xudmFyIF8gPSByZXF1aXJlKCcuL2luZGV4JylcblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LCBpZiB5ZXMgcmV0dXJuIGl0c1xuICogY29tcG9uZW50IGlkLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICovXG5cbmV4cG9ydHMuY29tbW9uVGFnUkUgPSAvXihkaXZ8cHxzcGFufGltZ3xhfGJ8aXxicnx1bHxvbHxsaXxoMXxoMnxoM3xoNHxoNXxoNnxjb2RlfHByZXx0YWJsZXx0aHx0ZHx0cnxmb3JtfGxhYmVsfGlucHV0fHNlbGVjdHxvcHRpb258bmF2fGFydGljbGV8c2VjdGlvbnxoZWFkZXJ8Zm9vdGVyKSQvXG5leHBvcnRzLmNoZWNrQ29tcG9uZW50ID0gZnVuY3Rpb24gKGVsLCBvcHRpb25zKSB7XG4gIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKClcbiAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpXG4gIGlmICghZXhwb3J0cy5jb21tb25UYWdSRS50ZXN0KHRhZykgJiYgdGFnICE9PSAnY29tcG9uZW50Jykge1xuICAgIGlmIChfLnJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykpIHtcbiAgICAgIHJldHVybiB7IGlkOiB0YWcgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwpXG4gICAgICBpZiAoaXMpIHtcbiAgICAgICAgcmV0dXJuIGlzXG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRhZy5pbmRleE9mKCctJykgPiAtMSB8fFxuICAgICAgICAgIChcbiAgICAgICAgICAgIC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgICAgIC8vIENocm9tZSByZXR1cm5zIHVua25vd24gZm9yIHNldmVyYWwgSFRNTDUgZWxlbWVudHMuXG4gICAgICAgICAgICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTQwNTI2XG4gICAgICAgICAgICAhL14oZGF0YXx0aW1lfHJ0Y3xyYikkLy50ZXN0KHRhZylcbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIF8ud2FybihcbiAgICAgICAgICAgICdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gZGlkIHlvdSAnICtcbiAgICAgICAgICAgICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8nXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGhhc0F0dHJzKSB7XG4gICAgcmV0dXJuIGdldElzQmluZGluZyhlbClcbiAgfVxufVxuXG4vKipcbiAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBnZXRJc0JpbmRpbmcgKGVsKSB7XG4gIC8vIGR5bmFtaWMgc3ludGF4XG4gIHZhciBleHAgPSBfLmF0dHIoZWwsICdpcycpXG4gIGlmIChleHAgIT0gbnVsbCkge1xuICAgIHJldHVybiB7IGlkOiBleHAgfVxuICB9IGVsc2Uge1xuICAgIGV4cCA9IF8uZ2V0QmluZEF0dHIoZWwsICdpcycpXG4gICAgaWYgKGV4cCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4geyBpZDogZXhwLCBkeW5hbWljOiB0cnVlIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTZXQgYSBwcm9wJ3MgaW5pdGlhbCB2YWx1ZSBvbiBhIHZtIGFuZCBpdHMgZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmV4cG9ydHMuaW5pdFByb3AgPSBmdW5jdGlvbiAodm0sIHByb3AsIHZhbHVlKSB7XG4gIGlmIChleHBvcnRzLmFzc2VydFByb3AocHJvcCwgdmFsdWUpKSB7XG4gICAgdmFyIGtleSA9IHByb3AucGF0aFxuICAgIHZtW2tleV0gPSB2bS5fZGF0YVtrZXldID0gdmFsdWVcbiAgfVxufVxuXG4vKipcbiAqIEFzc2VydCB3aGV0aGVyIGEgcHJvcCBpcyB2YWxpZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmV4cG9ydHMuYXNzZXJ0UHJvcCA9IGZ1bmN0aW9uIChwcm9wLCB2YWx1ZSkge1xuICAvLyBpZiBhIHByb3AgaXMgbm90IHByb3ZpZGVkIGFuZCBpcyBub3QgcmVxdWlyZWQsXG4gIC8vIHNraXAgdGhlIGNoZWNrLlxuICBpZiAocHJvcC5yYXcgPT09IG51bGwgJiYgIXByb3AucmVxdWlyZWQpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zXG4gIHZhciB0eXBlID0gb3B0aW9ucy50eXBlXG4gIHZhciB2YWxpZCA9IHRydWVcbiAgdmFyIGV4cGVjdGVkVHlwZVxuICBpZiAodHlwZSkge1xuICAgIGlmICh0eXBlID09PSBTdHJpbmcpIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdzdHJpbmcnXG4gICAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBOdW1iZXIpIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdudW1iZXInXG4gICAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcidcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IEJvb2xlYW4pIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdib29sZWFuJ1xuICAgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJ1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gRnVuY3Rpb24pIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdmdW5jdGlvbidcbiAgICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBPYmplY3QpIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdvYmplY3QnXG4gICAgICB2YWxpZCA9IF8uaXNQbGFpbk9iamVjdCh2YWx1ZSlcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IEFycmF5KSB7XG4gICAgICBleHBlY3RlZFR5cGUgPSAnYXJyYXknXG4gICAgICB2YWxpZCA9IF8uaXNBcnJheSh2YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGVcbiAgICB9XG4gIH1cbiAgaWYgKCF2YWxpZCkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgJ0ludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yICcgK1xuICAgICAgcHJvcC5wYXRoICsgJz1cIicgKyBwcm9wLnJhdyArICdcIi4nICtcbiAgICAgICcgRXhwZWN0ZWQgJyArIGZvcm1hdFR5cGUoZXhwZWN0ZWRUeXBlKSArXG4gICAgICAnLCBnb3QgJyArIGZvcm1hdFZhbHVlKHZhbHVlKSArICcuJ1xuICAgIClcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICB2YXIgdmFsaWRhdG9yID0gb3B0aW9ucy52YWxpZGF0b3JcbiAgaWYgKHZhbGlkYXRvcikge1xuICAgIGlmICghdmFsaWRhdG9yLmNhbGwobnVsbCwgdmFsdWUpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICAgJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yICcgK1xuICAgICAgICBwcm9wLnBhdGggKyAnPVwiJyArIHByb3AucmF3ICsgJ1wiJ1xuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbmZ1bmN0aW9uIGZvcm1hdFR5cGUgKHZhbCkge1xuICByZXR1cm4gdmFsXG4gICAgPyB2YWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWwuc2xpY2UoMSlcbiAgICA6ICdjdXN0b20gdHlwZSdcbn1cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUgKHZhbCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpXG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4vaW5kZXhcIjo3MixcIl9wcm9jZXNzXCI6MX1dLDY5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG4vKipcbiAqIEVuYWJsZSBkZWJ1ZyB1dGlsaXRpZXMuXG4gKi9cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblxuICB2YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJylcbiAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCdcblxuICAvKipcbiAgICogTG9nIGEgbWVzc2FnZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1zZ1xuICAgKi9cblxuICBleHBvcnRzLmxvZyA9IGZ1bmN0aW9uIChtc2cpIHtcbiAgICBpZiAoaGFzQ29uc29sZSAmJiBjb25maWcuZGVidWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbVnVlIGluZm9dOiAnICsgbXNnKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXZSd2ZSBnb3QgYSBwcm9ibGVtIGhlcmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtc2dcbiAgICovXG5cbiAgZXhwb3J0cy53YXJuID0gZnVuY3Rpb24gKG1zZywgZSkge1xuICAgIGlmIChoYXNDb25zb2xlICYmICghY29uZmlnLnNpbGVudCB8fCBjb25maWcuZGVidWcpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tWdWUgd2Fybl06ICcgKyBtc2cpXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChjb25maWcuZGVidWcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKChlIHx8IG5ldyBFcnJvcignV2FybmluZyBTdGFjayBUcmFjZScpKS5zdGFjaylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXNzZXJ0IGFzc2V0IGV4aXN0c1xuICAgKi9cblxuICBleHBvcnRzLmFzc2VydEFzc2V0ID0gZnVuY3Rpb24gKHZhbCwgdHlwZSwgaWQpIHtcbiAgICBpZiAoIXZhbCkge1xuICAgICAgZXhwb3J0cy53YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZSArICc6ICcgKyBpZClcbiAgICB9XG4gIH1cbn1cblxufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpXG5cbn0se1wiLi4vY29uZmlnXCI6MjEsXCJfcHJvY2Vzc1wiOjF9XSw3MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xudmFyIF8gPSByZXF1aXJlKCcuL2luZGV4JylcbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi9jb25maWcnKVxudmFyIHRyYW5zaXRpb24gPSByZXF1aXJlKCcuLi90cmFuc2l0aW9uJylcblxuLyoqXG4gKiBRdWVyeSBhbiBlbGVtZW50IHNlbGVjdG9yIGlmIGl0J3Mgbm90IGFuIGVsZW1lbnQgYWxyZWFkeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuICogQHJldHVybiB7RWxlbWVudH1cbiAqL1xuXG5leHBvcnRzLnF1ZXJ5ID0gZnVuY3Rpb24gKGVsKSB7XG4gIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIHNlbGVjdG9yID0gZWxcbiAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpXG4gICAgaWYgKCFlbCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICdDYW5ub3QgZmluZCBlbGVtZW50OiAnICsgc2VsZWN0b3JcbiAgICAgIClcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVsXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cbiAqIE5vdGU6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyBzaG91bGQgd29yayBoZXJlXG4gKiBidXQgYWx3YXlzIHJldHVybnMgZmFsc2UgZm9yIGNvbW1lbnQgbm9kZXMgaW4gcGhhbnRvbWpzLFxuICogbWFraW5nIHVuaXQgdGVzdHMgZGlmZmljdWx0LiBUaGlzIGlzIGZpeGVkIGJ5IGRvaW5nIHRoZVxuICogY29udGFpbnMoKSBjaGVjayBvbiB0aGUgbm9kZSdzIHBhcmVudE5vZGUgaW5zdGVhZCBvZlxuICogdGhlIG5vZGUgaXRzZWxmLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5leHBvcnRzLmluRG9jID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgdmFyIGRvYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuICB2YXIgcGFyZW50ID0gbm9kZSAmJiBub2RlLnBhcmVudE5vZGVcbiAgcmV0dXJuIGRvYyA9PT0gbm9kZSB8fFxuICAgIGRvYyA9PT0gcGFyZW50IHx8XG4gICAgISEocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSAmJiAoZG9jLmNvbnRhaW5zKHBhcmVudCkpKVxufVxuXG4vKipcbiAqIEdldCBhbmQgcmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIGEgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBhdHRyXG4gKi9cblxuZXhwb3J0cy5hdHRyID0gZnVuY3Rpb24gKG5vZGUsIGF0dHIpIHtcbiAgdmFyIHZhbCA9IG5vZGUuZ2V0QXR0cmlidXRlKGF0dHIpXG4gIGlmICh2YWwgIT09IG51bGwpIHtcbiAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyKVxuICB9XG4gIHJldHVybiB2YWxcbn1cblxuLyoqXG4gKiBHZXQgYW4gYXR0cmlidXRlIHdpdGggY29sb24gb3Igdi1iaW5kOiBwcmVmaXguXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7U3RyaW5nfG51bGx9XG4gKi9cblxuZXhwb3J0cy5nZXRCaW5kQXR0ciA9IGZ1bmN0aW9uIChub2RlLCBuYW1lKSB7XG4gIHZhciB2YWwgPSBleHBvcnRzLmF0dHIobm9kZSwgJzonICsgbmFtZSlcbiAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgIHZhbCA9IGV4cG9ydHMuYXR0cihub2RlLCAndi1iaW5kOicgKyBuYW1lKVxuICB9XG4gIHJldHVybiB2YWxcbn1cblxuLyoqXG4gKiBJbnNlcnQgZWwgYmVmb3JlIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZXhwb3J0cy5iZWZvcmUgPSBmdW5jdGlvbiAoZWwsIHRhcmdldCkge1xuICB0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHRhcmdldClcbn1cblxuLyoqXG4gKiBJbnNlcnQgZWwgYWZ0ZXIgdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqL1xuXG5leHBvcnRzLmFmdGVyID0gZnVuY3Rpb24gKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuICAgIGV4cG9ydHMuYmVmb3JlKGVsLCB0YXJnZXQubmV4dFNpYmxpbmcpXG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZWwpXG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZWwgZnJvbSBET01cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZXhwb3J0cy5yZW1vdmUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbClcbn1cblxuLyoqXG4gKiBQcmVwZW5kIGVsIHRvIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZXhwb3J0cy5wcmVwZW5kID0gZnVuY3Rpb24gKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5maXJzdENoaWxkKSB7XG4gICAgZXhwb3J0cy5iZWZvcmUoZWwsIHRhcmdldC5maXJzdENoaWxkKVxuICB9IGVsc2Uge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbClcbiAgfVxufVxuXG4vKipcbiAqIFJlcGxhY2UgdGFyZ2V0IHdpdGggZWxcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmV4cG9ydHMucmVwbGFjZSA9IGZ1bmN0aW9uICh0YXJnZXQsIGVsKSB7XG4gIHZhciBwYXJlbnQgPSB0YXJnZXQucGFyZW50Tm9kZVxuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZChlbCwgdGFyZ2V0KVxuICB9XG59XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZXhwb3J0cy5vbiA9IGZ1bmN0aW9uIChlbCwgZXZlbnQsIGNiKSB7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKVxufVxuXG4vKipcbiAqIFJlbW92ZSBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmV4cG9ydHMub2ZmID0gZnVuY3Rpb24gKGVsLCBldmVudCwgY2IpIHtcbiAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2IpXG59XG5cbi8qKlxuICogQWRkIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cm9uZ30gY2xzXG4gKi9cblxuZXhwb3J0cy5hZGRDbGFzcyA9IGZ1bmN0aW9uIChlbCwgY2xzKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNscylcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gJyAnICsgKGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyAnICdcbiAgICBpZiAoY3VyLmluZGV4T2YoJyAnICsgY2xzICsgJyAnKSA8IDApIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoY3VyICsgY2xzKS50cmltKCkpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cm9uZ30gY2xzXG4gKi9cblxuZXhwb3J0cy5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uIChlbCwgY2xzKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNscylcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gJyAnICsgKGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyAnICdcbiAgICB2YXIgdGFyID0gJyAnICsgY2xzICsgJyAnXG4gICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkge1xuICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpXG4gICAgfVxuICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjdXIudHJpbSgpKVxuICB9XG4gIGlmICghZWwuY2xhc3NOYW1lKSB7XG4gICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpXG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHJhdyBjb250ZW50IGluc2lkZSBhbiBlbGVtZW50IGludG8gYSB0ZW1wb3JhcnlcbiAqIGNvbnRhaW5lciBkaXZcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGFzRnJhZ21lbnRcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cblxuZXhwb3J0cy5leHRyYWN0Q29udGVudCA9IGZ1bmN0aW9uIChlbCwgYXNGcmFnbWVudCkge1xuICB2YXIgY2hpbGRcbiAgdmFyIHJhd0NvbnRlbnRcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChcbiAgICBleHBvcnRzLmlzVGVtcGxhdGUoZWwpICYmXG4gICAgZWwuY29udGVudCBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnRcbiAgKSB7XG4gICAgZWwgPSBlbC5jb250ZW50XG4gIH1cbiAgaWYgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgIGV4cG9ydHMudHJpbU5vZGUoZWwpXG4gICAgcmF3Q29udGVudCA9IGFzRnJhZ21lbnRcbiAgICAgID8gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG4gICAgICA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAoY2hpbGQgPSBlbC5maXJzdENoaWxkKSB7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgICAgcmF3Q29udGVudC5hcHBlbmRDaGlsZChjaGlsZClcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJhd0NvbnRlbnRcbn1cblxuLyoqXG4gKiBUcmltIHBvc3NpYmxlIGVtcHR5IGhlYWQvdGFpbCB0ZXh0Tm9kZXMgaW5zaWRlIGEgcGFyZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICovXG5cbmV4cG9ydHMudHJpbU5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICB0cmltKG5vZGUsIG5vZGUuZmlyc3RDaGlsZClcbiAgdHJpbShub2RlLCBub2RlLmxhc3RDaGlsZClcbn1cblxuZnVuY3Rpb24gdHJpbSAocGFyZW50LCBub2RlKSB7XG4gIGlmIChub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IDMgJiYgIW5vZGUuZGF0YS50cmltKCkpIHtcbiAgICBwYXJlbnQucmVtb3ZlQ2hpbGQobm9kZSlcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSB0YWcuXG4gKiBOb3RlIGlmIHRoZSB0ZW1wbGF0ZSBhcHBlYXJzIGluc2lkZSBhbiBTVkcgaXRzIHRhZ05hbWVcbiAqIHdpbGwgYmUgaW4gbG93ZXJjYXNlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5leHBvcnRzLmlzVGVtcGxhdGUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgcmV0dXJuIGVsLnRhZ05hbWUgJiZcbiAgICBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZW1wbGF0ZSdcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gXCJhbmNob3JcIiBmb3IgcGVyZm9ybWluZyBkb20gaW5zZXJ0aW9uL3JlbW92YWxzLlxuICogVGhpcyBpcyB1c2VkIGluIGEgbnVtYmVyIG9mIHNjZW5hcmlvczpcbiAqIC0gZnJhZ21lbnQgaW5zdGFuY2VcbiAqIC0gdi1odG1sXG4gKiAtIHYtaWZcbiAqIC0gdi1mb3JcbiAqIC0gY29tcG9uZW50XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcGVyc2lzdCAtIElFIHRyYXNoZXMgZW1wdHkgdGV4dE5vZGVzIG9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZU5vZGUodHJ1ZSksIHNvIGluIGNlcnRhaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VzIHRoZSBhbmNob3IgbmVlZHMgdG8gYmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbi1lbXB0eSB0byBiZSBwZXJzaXN0ZWQgaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcy5cbiAqIEByZXR1cm4ge0NvbW1lbnR8VGV4dH1cbiAqL1xuXG5leHBvcnRzLmNyZWF0ZUFuY2hvciA9IGZ1bmN0aW9uIChjb250ZW50LCBwZXJzaXN0KSB7XG4gIHZhciBhbmNob3IgPSBjb25maWcuZGVidWdcbiAgICA/IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoY29udGVudClcbiAgICA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBlcnNpc3QgPyAnICcgOiAnJylcbiAgYW5jaG9yLl9fdnVlX2FuY2hvciA9IHRydWVcbiAgcmV0dXJuIGFuY2hvclxufVxuXG4vKipcbiAqIEZpbmQgYSBjb21wb25lbnQgcmVmIGF0dHJpYnV0ZSB0aGF0IHN0YXJ0cyB3aXRoICQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtTdHJpbmd8dW5kZWZpbmVkfVxuICovXG5cbnZhciByZWZSRSA9IC9edi1yZWY6L1xuZXhwb3J0cy5maW5kUmVmID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgaWYgKG5vZGUuaGFzQXR0cmlidXRlcygpKSB7XG4gICAgdmFyIGF0dHJzID0gbm9kZS5hdHRyaWJ1dGVzXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBuYW1lID0gYXR0cnNbaV0ubmFtZVxuICAgICAgaWYgKHJlZlJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIF8uY2FtZWxpemUobmFtZS5yZXBsYWNlKHJlZlJFLCAnJykpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogTWFwIGEgZnVuY3Rpb24gdG8gYSByYW5nZSBvZiBub2RlcyAuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge05vZGV9IGVuZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3BcbiAqL1xuXG5leHBvcnRzLm1hcE5vZGVSYW5nZSA9IGZ1bmN0aW9uIChub2RlLCBlbmQsIG9wKSB7XG4gIHZhciBuZXh0XG4gIHdoaWxlIChub2RlICE9PSBlbmQpIHtcbiAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZ1xuICAgIG9wKG5vZGUpXG4gICAgbm9kZSA9IG5leHRcbiAgfVxuICBvcChlbmQpXG59XG5cbi8qKlxuICogUmVtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgd2l0aCB0cmFuc2l0aW9uLCBzdG9yZVxuICogdGhlIG5vZGVzIGluIGEgZnJhZ21lbnQgd2l0aCBjb3JyZWN0IG9yZGVyaW5nLFxuICogYW5kIGNhbGwgY2FsbGJhY2sgd2hlbiBkb25lLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gc3RhcnRcbiAqIEBwYXJhbSB7Tm9kZX0gZW5kXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5leHBvcnRzLnJlbW92ZU5vZGVSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCwgZW5kLCB2bSwgZnJhZywgY2IpIHtcbiAgdmFyIGRvbmUgPSBmYWxzZVxuICB2YXIgcmVtb3ZlZCA9IDBcbiAgdmFyIG5vZGVzID0gW11cbiAgZXhwb3J0cy5tYXBOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBpZiAobm9kZSA9PT0gZW5kKSBkb25lID0gdHJ1ZVxuICAgIG5vZGVzLnB1c2gobm9kZSlcbiAgICB0cmFuc2l0aW9uLnJlbW92ZShub2RlLCB2bSwgb25SZW1vdmVkKVxuICB9KVxuICBmdW5jdGlvbiBvblJlbW92ZWQgKCkge1xuICAgIHJlbW92ZWQrK1xuICAgIGlmIChkb25lICYmIHJlbW92ZWQgPj0gbm9kZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZXNbaV0pXG4gICAgICB9XG4gICAgICBjYiAmJiBjYigpXG4gICAgfVxuICB9XG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4uL2NvbmZpZ1wiOjIxLFwiLi4vdHJhbnNpdGlvblwiOjY1LFwiLi9pbmRleFwiOjcyLFwiX3Byb2Nlc3NcIjoxfV0sNzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gY2FuIHdlIHVzZSBfX3Byb3RvX18/XG5leHBvcnRzLmhhc1Byb3RvID0gJ19fcHJvdG9fXycgaW4ge31cblxuLy8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZ1xudmFyIGluQnJvd3NlciA9IGV4cG9ydHMuaW5Ccm93c2VyID1cbiAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nXG5cbmV4cG9ydHMuaXNJRTkgPVxuICBpbkJyb3dzZXIgJiZcbiAgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwXG5cbmV4cG9ydHMuaXNBbmRyb2lkID1cbiAgaW5Ccm93c2VyICYmXG4gIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdhbmRyb2lkJykgPiAwXG5cbi8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmdcbmlmIChpbkJyb3dzZXIgJiYgIWV4cG9ydHMuaXNJRTkpIHtcbiAgdmFyIGlzV2Via2l0VHJhbnMgPVxuICAgIHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJlxuICAgIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZFxuICB2YXIgaXNXZWJraXRBbmltID1cbiAgICB3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJlxuICAgIHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCAhPT0gdW5kZWZpbmVkXG4gIGV4cG9ydHMudHJhbnNpdGlvblByb3AgPSBpc1dlYmtpdFRyYW5zXG4gICAgPyAnV2Via2l0VHJhbnNpdGlvbidcbiAgICA6ICd0cmFuc2l0aW9uJ1xuICBleHBvcnRzLnRyYW5zaXRpb25FbmRFdmVudCA9IGlzV2Via2l0VHJhbnNcbiAgICA/ICd3ZWJraXRUcmFuc2l0aW9uRW5kJ1xuICAgIDogJ3RyYW5zaXRpb25lbmQnXG4gIGV4cG9ydHMuYW5pbWF0aW9uUHJvcCA9IGlzV2Via2l0QW5pbVxuICAgID8gJ1dlYmtpdEFuaW1hdGlvbidcbiAgICA6ICdhbmltYXRpb24nXG4gIGV4cG9ydHMuYW5pbWF0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdEFuaW1cbiAgICA/ICd3ZWJraXRBbmltYXRpb25FbmQnXG4gICAgOiAnYW5pbWF0aW9uZW5kJ1xufVxuXG4vKipcbiAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcbiAqIHNob3VsZCBiZSBleGVjdXRlZCBhcyBhIG1pY3JvdGFzaywgc28gd2UgbGV2ZXJhZ2VcbiAqIE11dGF0aW9uT2JzZXJ2ZXIgaWYgaXQncyBhdmFpbGFibGUsIGFuZCBmYWxsYmFjayB0b1xuICogc2V0VGltZW91dCgwKS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtPYmplY3R9IGN0eFxuICovXG5cbmV4cG9ydHMubmV4dFRpY2sgPSAoZnVuY3Rpb24gKCkge1xuICB2YXIgY2FsbGJhY2tzID0gW11cbiAgdmFyIHBlbmRpbmcgPSBmYWxzZVxuICB2YXIgdGltZXJGdW5jXG4gIGZ1bmN0aW9uIG5leHRUaWNrSGFuZGxlciAoKSB7XG4gICAgcGVuZGluZyA9IGZhbHNlXG4gICAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKVxuICAgIGNhbGxiYWNrcyA9IFtdXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvcGllc1tpXSgpXG4gICAgfVxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGNvdW50ZXIgPSAxXG4gICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobmV4dFRpY2tIYW5kbGVyKVxuICAgIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50ZXIpXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0ZXh0Tm9kZSwge1xuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuICAgIH0pXG4gICAgdGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgY291bnRlciA9IChjb3VudGVyICsgMSkgJSAyXG4gICAgICB0ZXh0Tm9kZS5kYXRhID0gY291bnRlclxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aW1lckZ1bmMgPSBzZXRUaW1lb3V0XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYiwgY3R4KSB7XG4gICAgdmFyIGZ1bmMgPSBjdHhcbiAgICAgID8gZnVuY3Rpb24gKCkgeyBjYi5jYWxsKGN0eCkgfVxuICAgICAgOiBjYlxuICAgIGNhbGxiYWNrcy5wdXNoKGZ1bmMpXG4gICAgaWYgKHBlbmRpbmcpIHJldHVyblxuICAgIHBlbmRpbmcgPSB0cnVlXG4gICAgdGltZXJGdW5jKG5leHRUaWNrSGFuZGxlciwgMClcbiAgfVxufSkoKVxuXG59LHt9XSw3MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgbGFuZyA9IHJlcXVpcmUoJy4vbGFuZycpXG52YXIgZXh0ZW5kID0gbGFuZy5leHRlbmRcblxuZXh0ZW5kKGV4cG9ydHMsIGxhbmcpXG5leHRlbmQoZXhwb3J0cywgcmVxdWlyZSgnLi9lbnYnKSlcbmV4dGVuZChleHBvcnRzLCByZXF1aXJlKCcuL2RvbScpKVxuZXh0ZW5kKGV4cG9ydHMsIHJlcXVpcmUoJy4vb3B0aW9ucycpKVxuZXh0ZW5kKGV4cG9ydHMsIHJlcXVpcmUoJy4vY29tcG9uZW50JykpXG5leHRlbmQoZXhwb3J0cywgcmVxdWlyZSgnLi9kZWJ1ZycpKVxuXG59LHtcIi4vY29tcG9uZW50XCI6NjgsXCIuL2RlYnVnXCI6NjksXCIuL2RvbVwiOjcwLFwiLi9lbnZcIjo3MSxcIi4vbGFuZ1wiOjczLFwiLi9vcHRpb25zXCI6NzR9XSw3MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vKipcbiAqIFNldCBhIHByb3BlcnR5IG9uIGFuIG9iamVjdC4gQWRkcyB0aGUgbmV3IHByb3BlcnR5IGFuZFxuICogdHJpZ2dlcnMgY2hhbmdlIG5vdGlmaWNhdGlvbiBpZiB0aGUgcHJvcGVydHkgZG9lc24ndFxuICogYWxyZWFkeSBleGlzdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHB1YmxpY1xuICovXG5cbmV4cG9ydHMuc2V0ID0gZnVuY3Rpb24gc2V0IChvYmosIGtleSwgdmFsKSB7XG4gIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgIG9ialtrZXldID0gdmFsXG4gICAgcmV0dXJuXG4gIH1cbiAgaWYgKG9iai5faXNWdWUpIHtcbiAgICBzZXQob2JqLl9kYXRhLCBrZXksIHZhbClcbiAgICByZXR1cm5cbiAgfVxuICB2YXIgb2IgPSBvYmouX19vYl9fXG4gIGlmICghb2IpIHtcbiAgICBvYmpba2V5XSA9IHZhbFxuICAgIHJldHVyblxuICB9XG4gIG9iLmNvbnZlcnQoa2V5LCB2YWwpXG4gIG9iLmRlcC5ub3RpZnkoKVxuICBpZiAob2Iudm1zKSB7XG4gICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIHZtID0gb2Iudm1zW2ldXG4gICAgICB2bS5fcHJveHkoa2V5KVxuICAgICAgdm0uX2RpZ2VzdCgpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKi9cblxuZXhwb3J0cy5kZWxldGUgPSBmdW5jdGlvbiAob2JqLCBrZXkpIHtcbiAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgIHJldHVyblxuICB9XG4gIGRlbGV0ZSBvYmpba2V5XVxuICB2YXIgb2IgPSBvYmouX19vYl9fXG4gIGlmICghb2IpIHtcbiAgICByZXR1cm5cbiAgfVxuICBvYi5kZXAubm90aWZ5KClcbiAgaWYgKG9iLnZtcykge1xuICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aFxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciB2bSA9IG9iLnZtc1tpXVxuICAgICAgdm0uX3VucHJveHkoa2V5KVxuICAgICAgdm0uX2RpZ2VzdCgpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIGxpdGVyYWwgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgbGl0ZXJhbFZhbHVlUkUgPSAvXlxccz8odHJ1ZXxmYWxzZXxbXFxkXFwuXSt8J1teJ10qJ3xcIlteXCJdKlwiKVxccz8kL1xuZXhwb3J0cy5pc0xpdGVyYWwgPSBmdW5jdGlvbiAoZXhwKSB7XG4gIHJldHVybiBsaXRlcmFsVmFsdWVSRS50ZXN0KGV4cClcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHN0cmluZyBzdGFydHMgd2l0aCAkIG9yIF9cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmV4cG9ydHMuaXNSZXNlcnZlZCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMClcbiAgcmV0dXJuIGMgPT09IDB4MjQgfHwgYyA9PT0gMHg1RlxufVxuXG4vKipcbiAqIEd1YXJkIHRleHQgb3V0cHV0LCBtYWtlIHN1cmUgdW5kZWZpbmVkIG91dHB1dHNcbiAqIGVtcHR5IHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5leHBvcnRzLnRvU3RyaW5nID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsXG4gICAgPyAnJ1xuICAgIDogdmFsdWUudG9TdHJpbmcoKVxufVxuXG4vKipcbiAqIENoZWNrIGFuZCBjb252ZXJ0IHBvc3NpYmxlIG51bWVyaWMgc3RyaW5ncyB0byBudW1iZXJzXG4gKiBiZWZvcmUgc2V0dGluZyBiYWNrIHRvIGRhdGFcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHsqfE51bWJlcn1cbiAqL1xuXG5leHBvcnRzLnRvTnVtYmVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnNlZCA9IE51bWJlcih2YWx1ZSlcbiAgICByZXR1cm4gaXNOYU4ocGFyc2VkKVxuICAgICAgPyB2YWx1ZVxuICAgICAgOiBwYXJzZWRcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4gbGl0ZXJhbHMgaW50byByZWFsIGJvb2xlYW5zLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4geyp8Qm9vbGVhbn1cbiAqL1xuXG5leHBvcnRzLnRvQm9vbGVhbiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09ICd0cnVlJ1xuICAgID8gdHJ1ZVxuICAgIDogdmFsdWUgPT09ICdmYWxzZSdcbiAgICAgID8gZmFsc2VcbiAgICAgIDogdmFsdWVcbn1cblxuLyoqXG4gKiBTdHJpcCBxdW90ZXMgZnJvbSBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZyB8IGZhbHNlfVxuICovXG5cbmV4cG9ydHMuc3RyaXBRdW90ZXMgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHZhciBhID0gc3RyLmNoYXJDb2RlQXQoMClcbiAgdmFyIGIgPSBzdHIuY2hhckNvZGVBdChzdHIubGVuZ3RoIC0gMSlcbiAgcmV0dXJuIGEgPT09IGIgJiYgKGEgPT09IDB4MjIgfHwgYSA9PT0gMHgyNylcbiAgICA/IHN0ci5zbGljZSgxLCAtMSlcbiAgICA6IHN0clxufVxuXG4vKipcbiAqIENhbWVsaXplIGEgaHlwaGVuLWRlbG1pdGVkIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGNhbWVsaXplUkUgPSAvLShcXHcpL2dcbmV4cG9ydHMuY2FtZWxpemUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCB0b1VwcGVyKVxufVxuXG5mdW5jdGlvbiB0b1VwcGVyIChfLCBjKSB7XG4gIHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJydcbn1cblxuLyoqXG4gKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgaHlwaGVuYXRlUkUgPSAvKFthLXpcXGRdKShbQS1aXSkvZ1xuZXhwb3J0cy5oeXBoZW5hdGUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHJldHVybiBzdHJcbiAgICAucmVwbGFjZShoeXBoZW5hdGVSRSwgJyQxLSQyJylcbiAgICAudG9Mb3dlckNhc2UoKVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGh5cGhlbi91bmRlcnNjb3JlL3NsYXNoIGRlbGltaXRlcmVkIG5hbWVzIGludG9cbiAqIGNhbWVsaXplZCBjbGFzc05hbWVzLlxuICpcbiAqIGUuZy4gbXktY29tcG9uZW50ID0+IE15Q29tcG9uZW50XG4gKiAgICAgIHNvbWVfZWxzZSAgICA9PiBTb21lRWxzZVxuICogICAgICBzb21lL2NvbXAgICAgPT4gU29tZUNvbXBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9cXC9dKShcXHcpL2dcbmV4cG9ydHMuY2xhc3NpZnkgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCB0b1VwcGVyKVxufVxuXG4vKipcbiAqIFNpbXBsZSBiaW5kLCBmYXN0ZXIgdGhhbiBuYXRpdmVcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtPYmplY3R9IGN0eFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZXhwb3J0cy5iaW5kID0gZnVuY3Rpb24gKGZuLCBjdHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoXG4gICAgcmV0dXJuIGxcbiAgICAgID8gbCA+IDFcbiAgICAgICAgPyBmbi5hcHBseShjdHgsIGFyZ3VtZW50cylcbiAgICAgICAgOiBmbi5jYWxsKGN0eCwgYSlcbiAgICAgIDogZm4uY2FsbChjdHgpXG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0IGFuIEFycmF5LWxpa2Ugb2JqZWN0IHRvIGEgcmVhbCBBcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5LWxpa2V9IGxpc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRdIC0gc3RhcnQgaW5kZXhcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbmV4cG9ydHMudG9BcnJheSA9IGZ1bmN0aW9uIChsaXN0LCBzdGFydCkge1xuICBzdGFydCA9IHN0YXJ0IHx8IDBcbiAgdmFyIGkgPSBsaXN0Lmxlbmd0aCAtIHN0YXJ0XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoaSlcbiAgd2hpbGUgKGktLSkge1xuICAgIHJldFtpXSA9IGxpc3RbaSArIHN0YXJ0XVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuLyoqXG4gKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRvXG4gKiBAcGFyYW0ge09iamVjdH0gZnJvbVxuICovXG5cbmV4cG9ydHMuZXh0ZW5kID0gZnVuY3Rpb24gKHRvLCBmcm9tKSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSlcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgdG9ba2V5c1tpXV0gPSBmcm9tW2tleXNbaV1dXG4gIH1cbiAgcmV0dXJuIHRvXG59XG5cbi8qKlxuICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsXG4gKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG4gKiBpcyBhIEpTT04tY29tcGxpYW50IHR5cGUuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZXhwb3J0cy5pc09iamVjdCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0J1xufVxuXG4vKipcbiAqIFN0cmljdCBvYmplY3QgdHlwZSBjaGVjay4gT25seSByZXR1cm5zIHRydWVcbiAqIGZvciBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xudmFyIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBPYmplY3RdJ1xuZXhwb3J0cy5pc1BsYWluT2JqZWN0ID0gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSBPQkpFQ1RfU1RSSU5HXG59XG5cbi8qKlxuICogQXJyYXkgdHlwZSBjaGVjay5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5leHBvcnRzLmlzQXJyYXkgPSBBcnJheS5pc0FycmF5XG5cbi8qKlxuICogRGVmaW5lIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHBhcmFtIHtCb29sZWFufSBbZW51bWVyYWJsZV1cbiAqL1xuXG5leHBvcnRzLmRlZmluZSA9IGZ1bmN0aW9uIChvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIHZhbHVlOiB2YWwsXG4gICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KVxufVxuXG4vKipcbiAqIERlYm91bmNlIGEgZnVuY3Rpb24gc28gaXQgb25seSBnZXRzIGNhbGxlZCBhZnRlciB0aGVcbiAqIGlucHV0IHN0b3BzIGFycml2aW5nIGFmdGVyIHRoZSBnaXZlbiB3YWl0IHBlcmlvZC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jXG4gKiBAcGFyYW0ge051bWJlcn0gd2FpdFxuICogQHJldHVybiB7RnVuY3Rpb259IC0gdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuICovXG5cbmV4cG9ydHMuZGVib3VuY2UgPSBmdW5jdGlvbiAoZnVuYywgd2FpdCkge1xuICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHRcbiAgdmFyIGxhdGVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsYXN0ID0gRGF0ZS5ub3coKSAtIHRpbWVzdGFtcFxuICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdClcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dCA9IG51bGxcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncylcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsXG4gICAgfVxuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgY29udGV4dCA9IHRoaXNcbiAgICBhcmdzID0gYXJndW1lbnRzXG4gICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKVxuICAgIGlmICghdGltZW91dCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxufVxuXG4vKipcbiAqIE1hbnVhbCBpbmRleE9mIGJlY2F1c2UgaXQncyBzbGlnaHRseSBmYXN0ZXIgdGhhblxuICogbmF0aXZlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHBhcmFtIHsqfSBvYmpcbiAqL1xuXG5leHBvcnRzLmluZGV4T2YgPSBmdW5jdGlvbiAoYXJyLCBvYmopIHtcbiAgdmFyIGkgPSBhcnIubGVuZ3RoXG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpXG4gIH1cbiAgcmV0dXJuIC0xXG59XG5cbi8qKlxuICogTWFrZSBhIGNhbmNlbGxhYmxlIHZlcnNpb24gb2YgYW4gYXN5bmMgY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMuY2FuY2VsbGFibGUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdmFyIGNiID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG4gICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgIH1cbiAgfVxuICBjYi5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgY2IuY2FuY2VsbGVkID0gdHJ1ZVxuICB9XG4gIHJldHVybiBjYlxufVxuXG4vKipcbiAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuICogaWYgdGhleSBhcmUgcGxhaW4gb2JqZWN0cywgZG8gdGhleSBoYXZlIHRoZSBzYW1lIHNoYXBlP1xuICpcbiAqIEBwYXJhbSB7Kn0gYVxuICogQHBhcmFtIHsqfSBiXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmV4cG9ydHMubG9vc2VFcXVhbCA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICByZXR1cm4gYSA9PSBiIHx8IChcbiAgICBleHBvcnRzLmlzT2JqZWN0KGEpICYmIGV4cG9ydHMuaXNPYmplY3QoYilcbiAgICAgID8gSlNPTi5zdHJpbmdpZnkoYSkgPT09IEpTT04uc3RyaW5naWZ5KGIpXG4gICAgICA6IGZhbHNlXG4gIClcbiAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbn1cblxufSx7fV0sNzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbnZhciBfID0gcmVxdWlyZSgnLi9pbmRleCcpXG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJylcbnZhciBleHRlbmQgPSBfLmV4dGVuZFxuXG4vKipcbiAqIE9wdGlvbiBvdmVyd3JpdGluZyBzdHJhdGVnaWVzIGFyZSBmdW5jdGlvbnMgdGhhdCBoYW5kbGVcbiAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uXG4gKiB2YWx1ZSBpbnRvIHRoZSBmaW5hbCB2YWx1ZS5cbiAqXG4gKiBBbGwgc3RyYXRlZ3kgZnVuY3Rpb25zIGZvbGxvdyB0aGUgc2FtZSBzaWduYXR1cmU6XG4gKlxuICogQHBhcmFtIHsqfSBwYXJlbnRWYWxcbiAqIEBwYXJhbSB7Kn0gY2hpbGRWYWxcbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKi9cblxudmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cbi8qKlxuICogSGVscGVyIHRoYXQgcmVjdXJzaXZlbHkgbWVyZ2VzIHR3byBkYXRhIG9iamVjdHMgdG9nZXRoZXIuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VEYXRhICh0bywgZnJvbSkge1xuICB2YXIga2V5LCB0b1ZhbCwgZnJvbVZhbFxuICBmb3IgKGtleSBpbiBmcm9tKSB7XG4gICAgdG9WYWwgPSB0b1trZXldXG4gICAgZnJvbVZhbCA9IGZyb21ba2V5XVxuICAgIGlmICghdG8uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgXy5zZXQodG8sIGtleSwgZnJvbVZhbClcbiAgICB9IGVsc2UgaWYgKF8uaXNPYmplY3QodG9WYWwpICYmIF8uaXNPYmplY3QoZnJvbVZhbCkpIHtcbiAgICAgIG1lcmdlRGF0YSh0b1ZhbCwgZnJvbVZhbClcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRvXG59XG5cbi8qKlxuICogRGF0YVxuICovXG5cbnN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0pIHtcbiAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuICAgIGlmICghY2hpbGRWYWwpIHtcbiAgICAgIHJldHVybiBwYXJlbnRWYWxcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICdUaGUgXCJkYXRhXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgK1xuICAgICAgICAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICtcbiAgICAgICAgJ2RlZmluaXRpb25zLidcbiAgICAgIClcbiAgICAgIHJldHVybiBwYXJlbnRWYWxcbiAgICB9XG4gICAgaWYgKCFwYXJlbnRWYWwpIHtcbiAgICAgIHJldHVybiBjaGlsZFZhbFxuICAgIH1cbiAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG4gICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG4gICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG4gICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG4gICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbiAoKSB7XG4gICAgICByZXR1cm4gbWVyZ2VEYXRhKFxuICAgICAgICBjaGlsZFZhbC5jYWxsKHRoaXMpLFxuICAgICAgICBwYXJlbnRWYWwuY2FsbCh0aGlzKVxuICAgICAgKVxuICAgIH1cbiAgfSBlbHNlIGlmIChwYXJlbnRWYWwgfHwgY2hpbGRWYWwpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkSW5zdGFuY2VEYXRhRm4gKCkge1xuICAgICAgLy8gaW5zdGFuY2UgbWVyZ2VcbiAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBjaGlsZFZhbC5jYWxsKHZtKVxuICAgICAgICA6IGNoaWxkVmFsXG4gICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gcGFyZW50VmFsLmNhbGwodm0pXG4gICAgICAgIDogdW5kZWZpbmVkXG4gICAgICBpZiAoaW5zdGFuY2VEYXRhKSB7XG4gICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0RGF0YVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEVsXG4gKi9cblxuc3RyYXRzLmVsID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0gJiYgY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAnVGhlIFwiZWxcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArXG4gICAgICAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICtcbiAgICAgICdkZWZpbml0aW9ucy4nXG4gICAgKVxuICAgIHJldHVyblxuICB9XG4gIHZhciByZXQgPSBjaGlsZFZhbCB8fCBwYXJlbnRWYWxcbiAgLy8gaW52b2tlIHRoZSBlbGVtZW50IGZhY3RvcnkgaWYgdGhpcyBpcyBpbnN0YW5jZSBtZXJnZVxuICByZXR1cm4gdm0gJiYgdHlwZW9mIHJldCA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gcmV0LmNhbGwodm0pXG4gICAgOiByZXRcbn1cblxuLyoqXG4gKiBIb29rcyBhbmQgcGFyYW0gYXR0cmlidXRlcyBhcmUgbWVyZ2VkIGFzIGFycmF5cy5cbiAqL1xuXG5zdHJhdHMuaW5pdCA9XG5zdHJhdHMuY3JlYXRlZCA9XG5zdHJhdHMucmVhZHkgPVxuc3RyYXRzLmF0dGFjaGVkID1cbnN0cmF0cy5kZXRhY2hlZCA9XG5zdHJhdHMuYmVmb3JlQ29tcGlsZSA9XG5zdHJhdHMuY29tcGlsZWQgPVxuc3RyYXRzLmJlZm9yZURlc3Ryb3kgPVxuc3RyYXRzLmRlc3Ryb3llZCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbFxuICAgID8gcGFyZW50VmFsXG4gICAgICA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpXG4gICAgICA6IF8uaXNBcnJheShjaGlsZFZhbClcbiAgICAgICAgPyBjaGlsZFZhbFxuICAgICAgICA6IFtjaGlsZFZhbF1cbiAgICA6IHBhcmVudFZhbFxufVxuXG4vKipcbiAqIDAuMTEgZGVwcmVjYXRpb24gd2FybmluZ1xuICovXG5cbnN0cmF0cy5wYXJhbUF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICdcInBhcmFtQXR0cmlidXRlc1wiIG9wdGlvbiBoYXMgYmVlbiBkZXByZWNhdGVkIGluIDAuMTIuICcgK1xuICAgICdVc2UgXCJwcm9wc1wiIGluc3RlYWQuJ1xuICApXG59XG5cbi8qKlxuICogQXNzZXRzXG4gKlxuICogV2hlbiBhIHZtIGlzIHByZXNlbnQgKGluc3RhbmNlIGNyZWF0aW9uKSwgd2UgbmVlZCB0byBkb1xuICogYSB0aHJlZS13YXkgbWVyZ2UgYmV0d2VlbiBjb25zdHJ1Y3RvciBvcHRpb25zLCBpbnN0YW5jZVxuICogb3B0aW9ucyBhbmQgcGFyZW50IG9wdGlvbnMuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VBc3NldHMgKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsKVxuICByZXR1cm4gY2hpbGRWYWxcbiAgICA/IGV4dGVuZChyZXMsIGd1YXJkQXJyYXlBc3NldHMoY2hpbGRWYWwpKVxuICAgIDogcmVzXG59XG5cbmNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gIHN0cmF0c1t0eXBlICsgJ3MnXSA9IG1lcmdlQXNzZXRzXG59KVxuXG4vKipcbiAqIEV2ZW50cyAmIFdhdGNoZXJzLlxuICpcbiAqIEV2ZW50cyAmIHdhdGNoZXJzIGhhc2hlcyBzaG91bGQgbm90IG92ZXJ3cml0ZSBvbmVcbiAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLlxuICovXG5cbnN0cmF0cy53YXRjaCA9XG5zdHJhdHMuZXZlbnRzID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbFxuICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsXG4gIHZhciByZXQgPSB7fVxuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpXG4gIGZvciAodmFyIGtleSBpbiBjaGlsZFZhbCkge1xuICAgIHZhciBwYXJlbnQgPSByZXRba2V5XVxuICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleV1cbiAgICBpZiAocGFyZW50ICYmICFfLmlzQXJyYXkocGFyZW50KSkge1xuICAgICAgcGFyZW50ID0gW3BhcmVudF1cbiAgICB9XG4gICAgcmV0W2tleV0gPSBwYXJlbnRcbiAgICAgID8gcGFyZW50LmNvbmNhdChjaGlsZClcbiAgICAgIDogW2NoaWxkXVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuLyoqXG4gKiBPdGhlciBvYmplY3QgaGFzaGVzLlxuICovXG5cbnN0cmF0cy5wcm9wcyA9XG5zdHJhdHMubWV0aG9kcyA9XG5zdHJhdHMuY29tcHV0ZWQgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsXG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWxcbiAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKVxuICBleHRlbmQocmV0LCBjaGlsZFZhbClcbiAgcmV0dXJuIHJldFxufVxuXG4vKipcbiAqIERlZmF1bHQgc3RyYXRlZ3kuXG4gKi9cblxudmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkXG4gICAgPyBwYXJlbnRWYWxcbiAgICA6IGNoaWxkVmFsXG59XG5cbi8qKlxuICogTWFrZSBzdXJlIGNvbXBvbmVudCBvcHRpb25zIGdldCBjb252ZXJ0ZWQgdG8gYWN0dWFsXG4gKiBjb25zdHJ1Y3RvcnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBndWFyZENvbXBvbmVudHMgKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuY29tcG9uZW50cykge1xuICAgIHZhciBjb21wb25lbnRzID0gb3B0aW9ucy5jb21wb25lbnRzID1cbiAgICAgIGd1YXJkQXJyYXlBc3NldHMob3B0aW9ucy5jb21wb25lbnRzKVxuICAgIHZhciBkZWZcbiAgICB2YXIgaWRzID0gT2JqZWN0LmtleXMoY29tcG9uZW50cylcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBpZHNbaV1cbiAgICAgIGlmIChfLmNvbW1vblRhZ1JFLnRlc3Qoa2V5KSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICAgICAnRG8gbm90IHVzZSBidWlsdC1pbiBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICtcbiAgICAgICAgICAnaWQ6ICcgKyBrZXlcbiAgICAgICAgKVxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgZGVmID0gY29tcG9uZW50c1trZXldXG4gICAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGRlZikpIHtcbiAgICAgICAgY29tcG9uZW50c1trZXldID0gXy5WdWUuZXh0ZW5kKGRlZilcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFbnN1cmUgYWxsIHByb3BzIG9wdGlvbiBzeW50YXggYXJlIG5vcm1hbGl6ZWQgaW50byB0aGVcbiAqIE9iamVjdC1iYXNlZCBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBndWFyZFByb3BzIChvcHRpb25zKSB7XG4gIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHNcbiAgdmFyIGksIHZhbFxuICBpZiAoXy5pc0FycmF5KHByb3BzKSkge1xuICAgIG9wdGlvbnMucHJvcHMgPSB7fVxuICAgIGkgPSBwcm9wcy5sZW5ndGhcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1tpXVxuICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIG9wdGlvbnMucHJvcHNbdmFsXSA9IG51bGxcbiAgICAgIH0gZWxzZSBpZiAodmFsLm5hbWUpIHtcbiAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWwubmFtZV0gPSB2YWxcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoXy5pc1BsYWluT2JqZWN0KHByb3BzKSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpXG4gICAgaSA9IGtleXMubGVuZ3RoXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFsID0gcHJvcHNba2V5c1tpXV1cbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHByb3BzW2tleXNbaV1dID0geyB0eXBlOiB2YWwgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEd1YXJkIGFuIEFycmF5LWZvcm1hdCBhc3NldHMgb3B0aW9uIGFuZCBjb252ZXJ0ZWQgaXRcbiAqIGludG8gdGhlIGtleS12YWx1ZSBPYmplY3QgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBhc3NldHNcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBndWFyZEFycmF5QXNzZXRzIChhc3NldHMpIHtcbiAgaWYgKF8uaXNBcnJheShhc3NldHMpKSB7XG4gICAgdmFyIHJlcyA9IHt9XG4gICAgdmFyIGkgPSBhc3NldHMubGVuZ3RoXG4gICAgdmFyIGFzc2V0XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgYXNzZXQgPSBhc3NldHNbaV1cbiAgICAgIHZhciBpZCA9IHR5cGVvZiBhc3NldCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/ICgoYXNzZXQub3B0aW9ucyAmJiBhc3NldC5vcHRpb25zLm5hbWUpIHx8IGFzc2V0LmlkKVxuICAgICAgICA6IChhc3NldC5uYW1lIHx8IGFzc2V0LmlkKVxuICAgICAgaWYgKCFpZCkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICAgICAnQXJyYXktc3ludGF4IGFzc2V0cyBtdXN0IHByb3ZpZGUgYSBcIm5hbWVcIiBvciBcImlkXCIgZmllbGQuJ1xuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNbaWRdID0gYXNzZXRcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc1xuICB9XG4gIHJldHVybiBhc3NldHNcbn1cblxuLyoqXG4gKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuXG4gKiBDb3JlIHV0aWxpdHkgdXNlZCBpbiBib3RoIGluc3RhbnRpYXRpb24gYW5kIGluaGVyaXRhbmNlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXJlbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBjaGlsZFxuICogQHBhcmFtIHtWdWV9IFt2bV0gLSBpZiB2bSBpcyBwcmVzZW50LCBpbmRpY2F0ZXMgdGhpcyBpc1xuICogICAgICAgICAgICAgICAgICAgICBhbiBpbnN0YW50aWF0aW9uIG1lcmdlLlxuICovXG5cbmV4cG9ydHMubWVyZ2VPcHRpb25zID0gZnVuY3Rpb24gbWVyZ2UgKHBhcmVudCwgY2hpbGQsIHZtKSB7XG4gIGd1YXJkQ29tcG9uZW50cyhjaGlsZClcbiAgZ3VhcmRQcm9wcyhjaGlsZClcbiAgdmFyIG9wdGlvbnMgPSB7fVxuICB2YXIga2V5XG4gIGlmIChjaGlsZC5taXhpbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkLm1peGlucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHBhcmVudCA9IG1lcmdlKHBhcmVudCwgY2hpbGQubWl4aW5zW2ldLCB2bSlcbiAgICB9XG4gIH1cbiAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG4gICAgbWVyZ2VGaWVsZChrZXkpXG4gIH1cbiAgZm9yIChrZXkgaW4gY2hpbGQpIHtcbiAgICBpZiAoIShwYXJlbnQuaGFzT3duUHJvcGVydHkoa2V5KSkpIHtcbiAgICAgIG1lcmdlRmllbGQoa2V5KVxuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBtZXJnZUZpZWxkIChrZXkpIHtcbiAgICB2YXIgc3RyYXQgPSBzdHJhdHNba2V5XSB8fCBkZWZhdWx0U3RyYXRcbiAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSlcbiAgfVxuICByZXR1cm4gb3B0aW9uc1xufVxuXG4vKipcbiAqIFJlc29sdmUgYW4gYXNzZXQuXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYmVjYXVzZSBjaGlsZCBpbnN0YW5jZXMgbmVlZCBhY2Nlc3NcbiAqIHRvIGFzc2V0cyBkZWZpbmVkIGluIGl0cyBhbmNlc3RvciBjaGFpbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHJldHVybiB7T2JqZWN0fEZ1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMucmVzb2x2ZUFzc2V0ID0gZnVuY3Rpb24gcmVzb2x2ZSAob3B0aW9ucywgdHlwZSwgaWQpIHtcbiAgdmFyIGFzc2V0cyA9IG9wdGlvbnNbdHlwZV1cbiAgdmFyIGNhbWVsaXplZElkXG4gIHJldHVybiBhc3NldHNbaWRdIHx8XG4gICAgLy8gY2FtZWxDYXNlIElEXG4gICAgYXNzZXRzW2NhbWVsaXplZElkID0gXy5jYW1lbGl6ZShpZCldIHx8XG4gICAgLy8gUGFzY2FsIENhc2UgSURcbiAgICBhc3NldHNbY2FtZWxpemVkSWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZWRJZC5zbGljZSgxKV1cbn1cblxufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpXG5cbn0se1wiLi4vY29uZmlnXCI6MjEsXCIuL2luZGV4XCI6NzIsXCJfcHJvY2Vzc1wiOjF9XSw3NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xudmFyIF8gPSByZXF1aXJlKCcuL3V0aWwnKVxudmFyIGV4dGVuZCA9IF8uZXh0ZW5kXG5cbi8qKlxuICogVGhlIGV4cG9zZWQgVnVlIGNvbnN0cnVjdG9yLlxuICpcbiAqIEFQSSBjb252ZW50aW9uczpcbiAqIC0gcHVibGljIEFQSSBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpZXhlZCB3aXRoIGAkYFxuICogLSBpbnRlcm5hbCBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYF9gXG4gKiAtIG5vbi1wcmVmaXhlZCBwcm9wZXJ0aWVzIGFyZSBhc3N1bWVkIHRvIGJlIHByb3hpZWQgdXNlclxuICogICBkYXRhLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIFZ1ZSAob3B0aW9ucykge1xuICB0aGlzLl9pbml0KG9wdGlvbnMpXG59XG5cbi8qKlxuICogTWl4aW4gZ2xvYmFsIEFQSVxuICovXG5cbmV4dGVuZChWdWUsIHJlcXVpcmUoJy4vYXBpL2dsb2JhbCcpKVxuXG4vKipcbiAqIFZ1ZSBhbmQgZXZlcnkgY29uc3RydWN0b3IgdGhhdCBleHRlbmRzIFZ1ZSBoYXMgYW5cbiAqIGFzc29jaWF0ZWQgb3B0aW9ucyBvYmplY3QsIHdoaWNoIGNhbiBiZSBhY2Nlc3NlZCBkdXJpbmdcbiAqIGNvbXBpbGF0aW9uIHN0ZXBzIGFzIGB0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnNgLlxuICpcbiAqIFRoZXNlIGNhbiBiZSBzZWVuIGFzIHRoZSBkZWZhdWx0IG9wdGlvbnMgb2YgZXZlcnlcbiAqIFZ1ZSBpbnN0YW5jZS5cbiAqL1xuXG5WdWUub3B0aW9ucyA9IHtcbiAgcmVwbGFjZTogdHJ1ZSxcbiAgZGlyZWN0aXZlczogcmVxdWlyZSgnLi9kaXJlY3RpdmVzL3B1YmxpYycpLFxuICBlbGVtZW50RGlyZWN0aXZlczogcmVxdWlyZSgnLi9kaXJlY3RpdmVzL2VsZW1lbnQnKSxcbiAgZmlsdGVyczogcmVxdWlyZSgnLi9maWx0ZXJzJyksXG4gIHRyYW5zaXRpb25zOiB7fSxcbiAgY29tcG9uZW50czoge30sXG4gIHBhcnRpYWxzOiB7fVxufVxuXG4vKipcbiAqIEJ1aWxkIHVwIHRoZSBwcm90b3R5cGVcbiAqL1xuXG52YXIgcCA9IFZ1ZS5wcm90b3R5cGVcblxuLyoqXG4gKiAkZGF0YSBoYXMgYSBzZXR0ZXIgd2hpY2ggZG9lcyBhIGJ1bmNoIG9mXG4gKiB0ZWFyZG93bi9zZXR1cCB3b3JrXG4gKi9cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHAsICckZGF0YScsIHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiAobmV3RGF0YSkge1xuICAgIGlmIChuZXdEYXRhICE9PSB0aGlzLl9kYXRhKSB7XG4gICAgICB0aGlzLl9zZXREYXRhKG5ld0RhdGEpXG4gICAgfVxuICB9XG59KVxuXG4vKipcbiAqIE1peGluIGludGVybmFsIGluc3RhbmNlIG1ldGhvZHNcbiAqL1xuXG5leHRlbmQocCwgcmVxdWlyZSgnLi9pbnN0YW5jZS9pbml0JykpXG5leHRlbmQocCwgcmVxdWlyZSgnLi9pbnN0YW5jZS9ldmVudHMnKSlcbmV4dGVuZChwLCByZXF1aXJlKCcuL2luc3RhbmNlL3N0YXRlJykpXG5leHRlbmQocCwgcmVxdWlyZSgnLi9pbnN0YW5jZS9saWZlY3ljbGUnKSlcbmV4dGVuZChwLCByZXF1aXJlKCcuL2luc3RhbmNlL21pc2MnKSlcblxuLyoqXG4gKiBNaXhpbiBwdWJsaWMgQVBJIG1ldGhvZHNcbiAqL1xuXG5leHRlbmQocCwgcmVxdWlyZSgnLi9hcGkvZGF0YScpKVxuZXh0ZW5kKHAsIHJlcXVpcmUoJy4vYXBpL2RvbScpKVxuZXh0ZW5kKHAsIHJlcXVpcmUoJy4vYXBpL2V2ZW50cycpKVxuZXh0ZW5kKHAsIHJlcXVpcmUoJy4vYXBpL2xpZmVjeWNsZScpKVxuXG5WdWUudmVyc2lvbiA9ICcxLjAuOCdcbm1vZHVsZS5leHBvcnRzID0gXy5WdWUgPSBWdWVcblxuLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBpZiAoXy5pbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18pIHtcbiAgICB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5lbWl0KCdpbml0JywgVnVlKVxuICB9XG59XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKVxuXG59LHtcIi4vYXBpL2RhdGFcIjoxMCxcIi4vYXBpL2RvbVwiOjExLFwiLi9hcGkvZXZlbnRzXCI6MTIsXCIuL2FwaS9nbG9iYWxcIjoxMyxcIi4vYXBpL2xpZmVjeWNsZVwiOjE0LFwiLi9kaXJlY3RpdmVzL2VsZW1lbnRcIjoyMyxcIi4vZGlyZWN0aXZlcy9wdWJsaWNcIjozOCxcIi4vZmlsdGVyc1wiOjQ5LFwiLi9pbnN0YW5jZS9ldmVudHNcIjo1MixcIi4vaW5zdGFuY2UvaW5pdFwiOjUzLFwiLi9pbnN0YW5jZS9saWZlY3ljbGVcIjo1NCxcIi4vaW5zdGFuY2UvbWlzY1wiOjU1LFwiLi9pbnN0YW5jZS9zdGF0ZVwiOjU2LFwiLi91dGlsXCI6NzIsXCJfcHJvY2Vzc1wiOjF9XSw3NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xudmFyIF8gPSByZXF1aXJlKCcuL3V0aWwnKVxudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4vY29uZmlnJylcbnZhciBEZXAgPSByZXF1aXJlKCcuL29ic2VydmVyL2RlcCcpXG52YXIgZXhwUGFyc2VyID0gcmVxdWlyZSgnLi9wYXJzZXJzL2V4cHJlc3Npb24nKVxudmFyIGJhdGNoZXIgPSByZXF1aXJlKCcuL2JhdGNoZXInKVxudmFyIHVpZCA9IDBcblxuLyoqXG4gKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcyxcbiAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuXG4gKiBUaGlzIGlzIHVzZWQgZm9yIGJvdGggdGhlICR3YXRjaCgpIGFwaSBhbmQgZGlyZWN0aXZlcy5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7U3RyaW5nfSBleHByZXNzaW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqICAgICAgICAgICAgICAgICAtIHtBcnJheX0gZmlsdGVyc1xuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHR3b1dheVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB1c2VyXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gc3luY1xuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxhenlcbiAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3ByZVByb2Nlc3NdXG4gKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwb3N0UHJvY2Vzc11cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIFdhdGNoZXIgKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucykge1xuICAvLyBtaXggaW4gb3B0aW9uc1xuICBpZiAob3B0aW9ucykge1xuICAgIF8uZXh0ZW5kKHRoaXMsIG9wdGlvbnMpXG4gIH1cbiAgdmFyIGlzRm4gPSB0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJ1xuICB0aGlzLnZtID0gdm1cbiAgdm0uX3dhdGNoZXJzLnB1c2godGhpcylcbiAgdGhpcy5leHByZXNzaW9uID0gaXNGbiA/IGV4cE9yRm4udG9TdHJpbmcoKSA6IGV4cE9yRm5cbiAgdGhpcy5jYiA9IGNiXG4gIHRoaXMuaWQgPSArK3VpZCAvLyB1aWQgZm9yIGJhdGNoaW5nXG4gIHRoaXMuYWN0aXZlID0gdHJ1ZVxuICB0aGlzLmRpcnR5ID0gdGhpcy5sYXp5IC8vIGZvciBsYXp5IHdhdGNoZXJzXG4gIHRoaXMuZGVwcyA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgdGhpcy5uZXdEZXBzID0gbnVsbFxuICB0aGlzLnByZXZFcnJvciA9IG51bGwgLy8gZm9yIGFzeW5jIGVycm9yIHN0YWNrc1xuICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXIvc2V0dGVyXG4gIGlmIChpc0ZuKSB7XG4gICAgdGhpcy5nZXR0ZXIgPSBleHBPckZuXG4gICAgdGhpcy5zZXR0ZXIgPSB1bmRlZmluZWRcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVzID0gZXhwUGFyc2VyLnBhcnNlKGV4cE9yRm4sIHRoaXMudHdvV2F5KVxuICAgIHRoaXMuZ2V0dGVyID0gcmVzLmdldFxuICAgIHRoaXMuc2V0dGVyID0gcmVzLnNldFxuICB9XG4gIHRoaXMudmFsdWUgPSB0aGlzLmxhenlcbiAgICA/IHVuZGVmaW5lZFxuICAgIDogdGhpcy5nZXQoKVxuICAvLyBzdGF0ZSBmb3IgYXZvaWRpbmcgZmFsc2UgdHJpZ2dlcnMgZm9yIGRlZXAgYW5kIEFycmF5XG4gIC8vIHdhdGNoZXJzIGR1cmluZyB2bS5fZGlnZXN0KClcbiAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZVxufVxuXG4vKipcbiAqIEFkZCBhIGRlcGVuZGVuY3kgdG8gdGhpcyBkaXJlY3RpdmUuXG4gKlxuICogQHBhcmFtIHtEZXB9IGRlcFxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmFkZERlcCA9IGZ1bmN0aW9uIChkZXApIHtcbiAgdmFyIGlkID0gZGVwLmlkXG4gIGlmICghdGhpcy5uZXdEZXBzW2lkXSkge1xuICAgIHRoaXMubmV3RGVwc1tpZF0gPSBkZXBcbiAgICBpZiAoIXRoaXMuZGVwc1tpZF0pIHtcbiAgICAgIHRoaXMuZGVwc1tpZF0gPSBkZXBcbiAgICAgIGRlcC5hZGRTdWIodGhpcylcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmJlZm9yZUdldCgpXG4gIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bVxuICB2YXIgdmFsdWVcbiAgdHJ5IHtcbiAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlKVxuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKFxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzXG4gICAgKSB7XG4gICAgICBfLndhcm4oXG4gICAgICAgICdFcnJvciB3aGVuIGV2YWx1YXRpbmcgZXhwcmVzc2lvbiBcIicgK1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gKyAnXCIuICcgK1xuICAgICAgICAoY29uZmlnLmRlYnVnXG4gICAgICAgICAgPyAnJ1xuICAgICAgICAgIDogJ1R1cm4gb24gZGVidWcgbW9kZSB0byBzZWUgc3RhY2sgdHJhY2UuJ1xuICAgICAgICApLCBlXG4gICAgICApXG4gICAgfVxuICB9XG4gIC8vIFwidG91Y2hcIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhc1xuICAvLyBkZXBlbmRlbmNpZXMgZm9yIGRlZXAgd2F0Y2hpbmdcbiAgaWYgKHRoaXMuZGVlcCkge1xuICAgIHRyYXZlcnNlKHZhbHVlKVxuICB9XG4gIGlmICh0aGlzLnByZVByb2Nlc3MpIHtcbiAgICB2YWx1ZSA9IHRoaXMucHJlUHJvY2Vzcyh2YWx1ZSlcbiAgfVxuICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCBudWxsLCB0aGlzLmZpbHRlcnMsIGZhbHNlKVxuICB9XG4gIGlmICh0aGlzLnBvc3RQcm9jZXNzKSB7XG4gICAgdmFsdWUgPSB0aGlzLnBvc3RQcm9jZXNzKHZhbHVlKVxuICB9XG4gIHRoaXMuYWZ0ZXJHZXQoKVxuICByZXR1cm4gdmFsdWVcbn1cblxuLyoqXG4gKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtXG4gIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnMoXG4gICAgICB2YWx1ZSwgdGhpcy52YWx1ZSwgdGhpcy5maWx0ZXJzLCB0cnVlKVxuICB9XG4gIHRyeSB7XG4gICAgdGhpcy5zZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUsIHZhbHVlKVxuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKFxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzXG4gICAgKSB7XG4gICAgICBfLndhcm4oXG4gICAgICAgICdFcnJvciB3aGVuIGV2YWx1YXRpbmcgc2V0dGVyIFwiJyArXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiArICdcIicsIGVcbiAgICAgIClcbiAgICB9XG4gIH1cbiAgLy8gdHdvLXdheSBzeW5jIGZvciB2LWZvciBhbGlhc1xuICB2YXIgZm9yQ29udGV4dCA9IHNjb3BlLiRmb3JDb250ZXh0XG4gIGlmIChmb3JDb250ZXh0ICYmIGZvckNvbnRleHQuYWxpYXMgPT09IHRoaXMuZXhwcmVzc2lvbikge1xuICAgIGlmIChmb3JDb250ZXh0LmZpbHRlcnMpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAnSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0d28td2F5IGJpbmRpbmcgb24gJyArXG4gICAgICAgICdhIHYtZm9yIGFsaWFzICgnICsgdGhpcy5leHByZXNzaW9uICsgJyksIGFuZCB0aGUgJyArXG4gICAgICAgICd2LWZvciBoYXMgZmlsdGVycy4gVGhpcyB3aWxsIG5vdCB3b3JrIHByb3Blcmx5LiAnICtcbiAgICAgICAgJ0VpdGhlciByZW1vdmUgdGhlIGZpbHRlcnMgb3IgdXNlIGFuIGFycmF5IG9mICcgK1xuICAgICAgICAnb2JqZWN0cyBhbmQgYmluZCB0byBvYmplY3QgcHJvcGVydGllcyBpbnN0ZWFkLidcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBmb3JDb250ZXh0Ll93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2NvcGUuJGtleSkgeyAvLyBvcmlnaW5hbCBpcyBhbiBvYmplY3RcbiAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZVtzY29wZS4ka2V5XSA9IHZhbHVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlLiRzZXQoc2NvcGUuJGluZGV4LCB2YWx1ZSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbi8qKlxuICogUHJlcGFyZSBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmJlZm9yZUdldCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldCA9IHRoaXNcbiAgdGhpcy5uZXdEZXBzID0gT2JqZWN0LmNyZWF0ZShudWxsKVxufVxuXG4vKipcbiAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWZ0ZXJHZXQgPSBmdW5jdGlvbiAoKSB7XG4gIERlcC50YXJnZXQgPSBudWxsXG4gIHZhciBpZHMgPSBPYmplY3Qua2V5cyh0aGlzLmRlcHMpXG4gIHZhciBpID0gaWRzLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgdmFyIGlkID0gaWRzW2ldXG4gICAgaWYgKCF0aGlzLm5ld0RlcHNbaWRdKSB7XG4gICAgICB0aGlzLmRlcHNbaWRdLnJlbW92ZVN1Yih0aGlzKVxuICAgIH1cbiAgfVxuICB0aGlzLmRlcHMgPSB0aGlzLm5ld0RlcHNcbn1cblxuLyoqXG4gKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSBzaGFsbG93XG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHNoYWxsb3cpIHtcbiAgaWYgKHRoaXMubGF6eSkge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlXG4gIH0gZWxzZSBpZiAodGhpcy5zeW5jIHx8ICFjb25maWcuYXN5bmMpIHtcbiAgICB0aGlzLnJ1bigpXG4gIH0gZWxzZSB7XG4gICAgLy8gaWYgcXVldWVkLCBvbmx5IG92ZXJ3cml0ZSBzaGFsbG93IHdpdGggbm9uLXNoYWxsb3csXG4gICAgLy8gYnV0IG5vdCB0aGUgb3RoZXIgd2F5IGFyb3VuZC5cbiAgICB0aGlzLnNoYWxsb3cgPSB0aGlzLnF1ZXVlZFxuICAgICAgPyBzaGFsbG93XG4gICAgICAgID8gdGhpcy5zaGFsbG93XG4gICAgICAgIDogZmFsc2VcbiAgICAgIDogISFzaGFsbG93XG4gICAgdGhpcy5xdWV1ZWQgPSB0cnVlXG4gICAgLy8gcmVjb3JkIGJlZm9yZS1wdXNoIGVycm9yIHN0YWNrIGluIGRlYnVnIG1vZGVcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcpIHtcbiAgICAgIHRoaXMucHJldkVycm9yID0gbmV3IEVycm9yKCdbdnVlXSBhc3luYyBzdGFjayB0cmFjZScpXG4gICAgfVxuICAgIGJhdGNoZXIucHVzaCh0aGlzKVxuICB9XG59XG5cbi8qKlxuICogQmF0Y2hlciBqb2IgaW50ZXJmYWNlLlxuICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIGJhdGNoZXIuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpXG4gICAgaWYgKFxuICAgICAgdmFsdWUgIT09IHRoaXMudmFsdWUgfHxcbiAgICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIEFycmF5IHdhdGNoZXJzIHNob3VsZCBmaXJlIGV2ZW5cbiAgICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcbiAgICAgIC8vIGhhdmUgbXV0YXRlZDsgYnV0IG9ubHkgZG8gc28gaWYgdGhpcyBpcyBhXG4gICAgICAvLyBub24tc2hhbGxvdyB1cGRhdGUgKGNhdXNlZCBieSBhIHZtIGRpZ2VzdCkuXG4gICAgICAoKF8uaXNBcnJheSh2YWx1ZSkgfHwgdGhpcy5kZWVwKSAmJiAhdGhpcy5zaGFsbG93KVxuICAgICkge1xuICAgICAgLy8gc2V0IG5ldyB2YWx1ZVxuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZVxuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlXG4gICAgICAvLyBpbiBkZWJ1ZyArIGFzeW5jIG1vZGUsIHdoZW4gYSB3YXRjaGVyIGNhbGxiYWNrc1xuICAgICAgLy8gdGhyb3dzLCB3ZSBhbHNvIHRocm93IHRoZSBzYXZlZCBiZWZvcmUtcHVzaCBlcnJvclxuICAgICAgLy8gc28gdGhlIGZ1bGwgY3Jvc3MtdGljayBzdGFjayB0cmFjZSBpcyBhdmFpbGFibGUuXG4gICAgICB2YXIgcHJldkVycm9yID0gdGhpcy5wcmV2RXJyb3JcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAgICAgICBjb25maWcuZGVidWcgJiYgcHJldkVycm9yKSB7XG4gICAgICAgIHRoaXMucHJldkVycm9yID0gbnVsbFxuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBfLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IHByZXZFcnJvclxuICAgICAgICAgIH0sIDApXG4gICAgICAgICAgdGhyb3cgZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlXG4gIH1cbn1cblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuXG4gKiBUaGlzIG9ubHkgZ2V0cyBjYWxsZWQgZm9yIGxhenkgd2F0Y2hlcnMuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIGF2b2lkIG92ZXJ3cml0aW5nIGFub3RoZXIgd2F0Y2hlciB0aGF0IGlzIGJlaW5nXG4gIC8vIGNvbGxlY3RlZC5cbiAgdmFyIGN1cnJlbnQgPSBEZXAudGFyZ2V0XG4gIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpXG4gIHRoaXMuZGlydHkgPSBmYWxzZVxuICBEZXAudGFyZ2V0ID0gY3VycmVudFxufVxuXG4vKipcbiAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGRlcElkcyA9IE9iamVjdC5rZXlzKHRoaXMuZGVwcylcbiAgdmFyIGkgPSBkZXBJZHMubGVuZ3RoXG4gIHdoaWxlIChpLS0pIHtcbiAgICB0aGlzLmRlcHNbZGVwSWRzW2ldXS5kZXBlbmQoKVxuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIHNlbGYgZnJvbSBhbGwgZGVwZW5kZW5jaWVzJyBzdWJjcmliZXIgbGlzdC5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS50ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSB2bSdzIHdhdGNoZXIgbGlzdFxuICAgIC8vIHdlIGNhbiBza2lwIHRoaXMgaWYgdGhlIHZtIGlmIGJlaW5nIGRlc3Ryb3llZFxuICAgIC8vIHdoaWNoIGNhbiBpbXByb3ZlIHRlYXJkb3duIHBlcmZvcm1hbmNlLlxuICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgdGhpcy52bS5fd2F0Y2hlcnMuJHJlbW92ZSh0aGlzKVxuICAgIH1cbiAgICB2YXIgZGVwSWRzID0gT2JqZWN0LmtleXModGhpcy5kZXBzKVxuICAgIHZhciBpID0gZGVwSWRzLmxlbmd0aFxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMuZGVwc1tkZXBJZHNbaV1dLnJlbW92ZVN1Yih0aGlzKVxuICAgIH1cbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlXG4gICAgdGhpcy52bSA9IHRoaXMuY2IgPSB0aGlzLnZhbHVlID0gbnVsbFxuICB9XG59XG5cbi8qKlxuICogUmVjcnVzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcbiAqIGdldHRlcnMsIHNvIHRoYXQgZXZlcnkgbmVzdGVkIHByb3BlcnR5IGluc2lkZSB0aGUgb2JqZWN0XG4gKiBpcyBjb2xsZWN0ZWQgYXMgYSBcImRlZXBcIiBkZXBlbmRlbmN5LlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gdHJhdmVyc2UgKHZhbCkge1xuICB2YXIgaSwga2V5c1xuICBpZiAoXy5pc0FycmF5KHZhbCkpIHtcbiAgICBpID0gdmFsLmxlbmd0aFxuICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtpXSlcbiAgfSBlbHNlIGlmIChfLmlzT2JqZWN0KHZhbCkpIHtcbiAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKVxuICAgIGkgPSBrZXlzLmxlbmd0aFxuICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtrZXlzW2ldXSlcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFdhdGNoZXJcblxufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpXG5cbn0se1wiLi9iYXRjaGVyXCI6MTUsXCIuL2NvbmZpZ1wiOjIxLFwiLi9vYnNlcnZlci9kZXBcIjo1OCxcIi4vcGFyc2Vycy9leHByZXNzaW9uXCI6NjEsXCIuL3V0aWxcIjo3MixcIl9wcm9jZXNzXCI6MX1dLDc3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBWdWUgPSByZXF1aXJlKCd2dWUnKTtcblZ1ZS5jb25maWcuZGVidWcgPSB0cnVlO1xuVnVlLnVzZShyZXF1aXJlKCd2dWUtcmVzb3VyY2UnKSk7XG5cbm5ldyBWdWUoe1xuICAgIGVsOiAnI2NvbnRhaW5lcicsXG4gICAgZGF0YToge1xuICAgICAgICBmdWxsUmVwb05hbWU6ICcnLFxuICAgICAgICB1c2VybmFtZTogJycsXG4gICAgICAgIHJlcG86ICcnXG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICAgIGNoYW5nZVJlcG86IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNwbGl0RGF0YSA9IHRoaXMuZnVsbFJlcG9OYW1lLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICB0aGlzLnVzZXJuYW1lID0gc3BsaXREYXRhWzBdO1xuICAgICAgICAgICAgdGhpcy5yZXBvID0gc3BsaXREYXRhWzFdO1xuXG4gICAgICAgICAgICBjb25zb2xlLmdyb3VwKFwiVnVlIERhdGFcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImZ1bGxSZXBvTmFtZTpcIiwgdGhpcy5mdWxsUmVwb05hbWUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1c2VybmFtZTpcIiwgdGhpcy51c2VybmFtZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlcG86XCIsIHRoaXMucmVwbyk7XG4gICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKFwiVnVlIERhdGFcIik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgZ2l0aHViRmlsZUV4cGxvcmVyOiByZXF1aXJlKCcuL2NvbXBvbmVudHMvZ2l0aHViLWZpbGUtZXhwbG9yZXInKVxuICAgIH1cbn0pO1xufSx7XCIuL2NvbXBvbmVudHMvZ2l0aHViLWZpbGUtZXhwbG9yZXJcIjo3OCxcInZ1ZVwiOjc1LFwidnVlLXJlc291cmNlXCI6M31dLDc4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0ge1xuXHR0ZW1wbGF0ZTogcmVxdWlyZShcIi4vdGVtcGxhdGUuaHRtbFwiKSxcblx0ZGF0YTogZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRwYXRoOiAnLycsXG5cdFx0XHRmaWxlczogW11cblx0XHR9O1xuXHR9LFxuXG5cdHByb3BzOiB7XG5cdFx0dXNlcm5hbWU6IHtcblx0XHRcdHR5cGU6IFN0cmluZyxcblx0XHRcdHJlcXVpcmVkOiB0cnVlXG5cdFx0fSxcblxuXHRcdHJlcG86IHtcblx0XHRcdHR5cGU6IFN0cmluZyxcblx0XHRcdHJlcXVpcmVkOiB0cnVlXG5cdFx0fVxuXHR9LFxuXG5cdGNyZWF0ZWQ6IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodGhpcy51c2VybmFtZSAmJiB0aGlzLnJlcG8pIHtcblx0XHRcdHRoaXMuZ2V0RmlsZXMoKVxuXHRcdH1cblx0fSxcblxuXHRtZXRob2RzOiB7XG5cdFx0Z2V0RmlsZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuJGh0dHAuZ2V0KCdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLycgKyBcbiAgICAgICAgICAgIFx0dGhpcy5mdWxsUmVwb1VybCArICcvY29udGVudHMnICsgdGhpcy5wYXRoLCBcbiAgICAgICAgICAgIFx0ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIFx0XHR0aGlzLmZpbGVzID0gZGF0YVxuICAgICAgICAgICAgXHR9KVxuXHRcdH1cblx0fSxcblxuXHRjb21wdXRlZDoge1xuXHRcdGZ1bGxSZXBvVXJsOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLnVzZXJuYW1lICsgJy8nICsgdGhpcy5yZXBvXG5cdFx0fVxuXHR9XG59XG59LHtcIi4vdGVtcGxhdGUuaHRtbFwiOjc5fV0sNzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSAnPGRpdiBjbGFzcz1cInJvd1wiPlxcblx0PGRpdiBjbGFzcz1cImNvbC1tZC0xMlwiPlxcblx0XHQ8dGFibGUgY2xhc3M9XCJ0YWJsZVwiPlxcblx0XHRcdDxjYXB0aW9uPiB7e3BhdGh9fSA8L2NhcHRpb24+XFxuXHRcdDwvdGFibGU+XFxuXHQ8L2Rpdj5cXG48L2Rpdj4nO1xufSx7fV19LHt9LFs3N10pXG5cbiIsIi8qKlxuICogU2VydmljZSBmb3Igc2VuZGluZyBuZXR3b3JrIHJlcXVlc3RzLlxuICovXG5cbnZhciB4aHIgPSByZXF1aXJlKCcuL2xpYi94aHInKTtcbnZhciBqc29ucCA9IHJlcXVpcmUoJy4vbGliL2pzb25wJyk7XG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJy4vbGliL3Byb21pc2UnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoXykge1xuXG4gICAgdmFyIG9yaWdpblVybCA9IF8udXJsLnBhcnNlKGxvY2F0aW9uLmhyZWYpO1xuICAgIHZhciBqc29uVHlwZSA9IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCd9O1xuXG4gICAgZnVuY3Rpb24gSHR0cCh1cmwsIG9wdGlvbnMpIHtcblxuICAgICAgICB2YXIgcHJvbWlzZTtcblxuICAgICAgICBpZiAoXy5pc1BsYWluT2JqZWN0KHVybCkpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB1cmw7XG4gICAgICAgICAgICB1cmwgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7dXJsOiB1cmx9LCBvcHRpb25zKTtcbiAgICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHRydWUsIHt9LFxuICAgICAgICAgICAgSHR0cC5vcHRpb25zLCB0aGlzLm9wdGlvbnMsIG9wdGlvbnNcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAob3B0aW9ucy5jcm9zc09yaWdpbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgb3B0aW9ucy5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luKG9wdGlvbnMudXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMubWV0aG9kID0gb3B0aW9ucy5tZXRob2QudG9VcHBlckNhc2UoKTtcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzID0gXy5leHRlbmQoe30sIEh0dHAuaGVhZGVycy5jb21tb24sXG4gICAgICAgICAgICAhb3B0aW9ucy5jcm9zc09yaWdpbiA/IEh0dHAuaGVhZGVycy5jdXN0b20gOiB7fSxcbiAgICAgICAgICAgIEh0dHAuaGVhZGVyc1tvcHRpb25zLm1ldGhvZC50b0xvd2VyQ2FzZSgpXSxcbiAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVyc1xuICAgICAgICApO1xuXG4gICAgICAgIGlmIChfLmlzUGxhaW5PYmplY3Qob3B0aW9ucy5kYXRhKSAmJiAvXihHRVR8SlNPTlApJC9pLnRlc3Qob3B0aW9ucy5tZXRob2QpKSB7XG4gICAgICAgICAgICBfLmV4dGVuZChvcHRpb25zLnBhcmFtcywgb3B0aW9ucy5kYXRhKTtcbiAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5lbXVsYXRlSFRUUCAmJiAhb3B0aW9ucy5jcm9zc09yaWdpbiAmJiAvXihQVVR8UEFUQ0h8REVMRVRFKSQvaS50ZXN0KG9wdGlvbnMubWV0aG9kKSkge1xuICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydYLUhUVFAtTWV0aG9kLU92ZXJyaWRlJ10gPSBvcHRpb25zLm1ldGhvZDtcbiAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gJ1BPU1QnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuZW11bGF0ZUpTT04gJiYgXy5pc1BsYWluT2JqZWN0KG9wdGlvbnMuZGF0YSkpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJztcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IF8udXJsLnBhcmFtcyhvcHRpb25zLmRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF8uaXNPYmplY3Qob3B0aW9ucy5kYXRhKSAmJiAvRm9ybURhdGEvaS50ZXN0KG9wdGlvbnMuZGF0YS50b1N0cmluZygpKSkge1xuICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuaGVhZGVyc1snQ29udGVudC1UeXBlJ107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXy5pc1BsYWluT2JqZWN0KG9wdGlvbnMuZGF0YSkpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm9taXNlID0gKG9wdGlvbnMubWV0aG9kID09ICdKU09OUCcgPyBqc29ucCA6IHhocikuY2FsbCh0aGlzLnZtLCBfLCBvcHRpb25zKTtcbiAgICAgICAgcHJvbWlzZSA9IGV4dGVuZFByb21pc2UocHJvbWlzZS50aGVuKHRyYW5zZm9ybVJlc3BvbnNlLCB0cmFuc2Zvcm1SZXNwb25zZSksIHRoaXMudm0pO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlLnN1Y2Nlc3Mob3B0aW9ucy5zdWNjZXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmVycm9yKSB7XG4gICAgICAgICAgICBwcm9taXNlID0gcHJvbWlzZS5lcnJvcihvcHRpb25zLmVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4dGVuZFByb21pc2UocHJvbWlzZSwgdm0pIHtcblxuICAgICAgICBwcm9taXNlLnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZm4pIHtcblxuICAgICAgICAgICAgcmV0dXJuIGV4dGVuZFByb21pc2UocHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHZtLCByZXNwb25zZS5kYXRhLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlKSB8fCByZXNwb25zZTtcbiAgICAgICAgICAgIH0pLCB2bSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICBwcm9taXNlLmVycm9yID0gZnVuY3Rpb24gKGZuKSB7XG5cbiAgICAgICAgICAgIHJldHVybiBleHRlbmRQcm9taXNlKHByb21pc2UudGhlbih1bmRlZmluZWQsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHZtLCByZXNwb25zZS5kYXRhLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlKSB8fCByZXNwb25zZTtcbiAgICAgICAgICAgIH0pLCB2bSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICBwcm9taXNlLmFsd2F5cyA9IGZ1bmN0aW9uIChmbikge1xuXG4gICAgICAgICAgICB2YXIgY2IgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbCh2bSwgcmVzcG9uc2UuZGF0YSwgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZSkgfHwgcmVzcG9uc2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kUHJvbWlzZShwcm9taXNlLnRoZW4oY2IsIGNiKSwgdm0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPSByZXNwb25zZS5yZXNwb25zZVRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzcG9uc2Uub2sgPyByZXNwb25zZSA6IFByb21pc2UucmVqZWN0KHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcm9zc09yaWdpbih1cmwpIHtcblxuICAgICAgICB2YXIgcmVxdWVzdFVybCA9IF8udXJsLnBhcnNlKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIChyZXF1ZXN0VXJsLnByb3RvY29sICE9PSBvcmlnaW5VcmwucHJvdG9jb2wgfHwgcmVxdWVzdFVybC5ob3N0ICE9PSBvcmlnaW5VcmwuaG9zdCk7XG4gICAgfVxuXG4gICAgSHR0cC5vcHRpb25zID0ge1xuICAgICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgICBwYXJhbXM6IHt9LFxuICAgICAgICBkYXRhOiAnJyxcbiAgICAgICAgeGhyOiBudWxsLFxuICAgICAgICBqc29ucDogJ2NhbGxiYWNrJyxcbiAgICAgICAgYmVmb3JlU2VuZDogbnVsbCxcbiAgICAgICAgY3Jvc3NPcmlnaW46IG51bGwsXG4gICAgICAgIGVtdWxhdGVIVFRQOiBmYWxzZSxcbiAgICAgICAgZW11bGF0ZUpTT046IGZhbHNlXG4gICAgfTtcblxuICAgIEh0dHAuaGVhZGVycyA9IHtcbiAgICAgICAgcHV0OiBqc29uVHlwZSxcbiAgICAgICAgcG9zdDoganNvblR5cGUsXG4gICAgICAgIHBhdGNoOiBqc29uVHlwZSxcbiAgICAgICAgZGVsZXRlOiBqc29uVHlwZSxcbiAgICAgICAgY29tbW9uOiB7J0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonfSxcbiAgICAgICAgY3VzdG9tOiB7J1gtUmVxdWVzdGVkLVdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnfVxuICAgIH07XG5cbiAgICBbJ2dldCcsICdwdXQnLCAncG9zdCcsICdwYXRjaCcsICdkZWxldGUnLCAnanNvbnAnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcblxuICAgICAgICBIdHRwW21ldGhvZF0gPSBmdW5jdGlvbiAodXJsLCBkYXRhLCBzdWNjZXNzLCBvcHRpb25zKSB7XG5cbiAgICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24oZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gc3VjY2VzcztcbiAgICAgICAgICAgICAgICBzdWNjZXNzID0gZGF0YTtcbiAgICAgICAgICAgICAgICBkYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcyh1cmwsIF8uZXh0ZW5kKHttZXRob2Q6IG1ldGhvZCwgZGF0YTogZGF0YSwgc3VjY2Vzczogc3VjY2Vzc30sIG9wdGlvbnMpKTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfLmh0dHAgPSBIdHRwO1xufTtcbiIsIi8qKlxuICogSW5zdGFsbCBwbHVnaW4uXG4gKi9cblxuZnVuY3Rpb24gaW5zdGFsbChWdWUpIHtcblxuICAgIHZhciBfID0gcmVxdWlyZSgnLi9saWIvdXRpbCcpKFZ1ZSk7XG5cbiAgICBWdWUudXJsID0gcmVxdWlyZSgnLi91cmwnKShfKTtcbiAgICBWdWUuaHR0cCA9IHJlcXVpcmUoJy4vaHR0cCcpKF8pO1xuICAgIFZ1ZS5yZXNvdXJjZSA9IHJlcXVpcmUoJy4vcmVzb3VyY2UnKShfKTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFZ1ZS5wcm90b3R5cGUsIHtcblxuICAgICAgICAkdXJsOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5vcHRpb25zKFZ1ZS51cmwsIHRoaXMsIHRoaXMuJG9wdGlvbnMudXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAkaHR0cDoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8ub3B0aW9ucyhWdWUuaHR0cCwgdGhpcywgdGhpcy4kb3B0aW9ucy5odHRwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAkcmVzb3VyY2U6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBWdWUucmVzb3VyY2UuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSk7XG59XG5cbmlmICh3aW5kb3cuVnVlKSB7XG4gICAgVnVlLnVzZShpbnN0YWxsKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnN0YWxsOyIsIi8qKlxuICogSlNPTlAgcmVxdWVzdC5cbiAqL1xuXG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJy4vcHJvbWlzZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChfLCBvcHRpb25zKSB7XG5cbiAgICB2YXIgY2FsbGJhY2sgPSAnX2pzb25wJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyKSwgcmVzcG9uc2UgPSB7fSwgc2NyaXB0LCBib2R5O1xuXG4gICAgb3B0aW9ucy5wYXJhbXNbb3B0aW9ucy5qc29ucF0gPSBjYWxsYmFjaztcblxuICAgIGlmIChfLmlzRnVuY3Rpb24ob3B0aW9ucy5iZWZvcmVTZW5kKSkge1xuICAgICAgICBvcHRpb25zLmJlZm9yZVNlbmQuY2FsbCh0aGlzLCB7fSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblxuICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgc2NyaXB0LnNyYyA9IF8udXJsKG9wdGlvbnMpO1xuICAgICAgICBzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICAgICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuXG4gICAgICAgIHdpbmRvd1tjYWxsYmFja10gPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgYm9keSA9IGRhdGE7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblxuICAgICAgICAgICAgZGVsZXRlIHdpbmRvd1tjYWxsYmFja107XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cbiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAnbG9hZCcgJiYgIWJvZHkpIHtcbiAgICAgICAgICAgICAgICBldmVudC50eXBlID0gJ2Vycm9yJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzcG9uc2Uub2sgPSBldmVudC50eXBlICE9PSAnZXJyb3InO1xuICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID0gcmVzcG9uc2Uub2sgPyAyMDAgOiA0MDQ7XG4gICAgICAgICAgICByZXNwb25zZS5yZXNwb25zZVRleHQgPSBib2R5ID8gYm9keSA6IGV2ZW50LnR5cGU7XG5cbiAgICAgICAgICAgIChyZXNwb25zZS5vayA/IHJlc29sdmUgOiByZWplY3QpKHJlc3BvbnNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzY3JpcHQub25sb2FkID0gaGFuZGxlcjtcbiAgICAgICAgc2NyaXB0Lm9uZXJyb3IgPSBoYW5kbGVyO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICB9KTtcblxufTtcbiIsIi8qKlxuICogUHJvbWlzZXMvQSsgcG9seWZpbGwgdjEuMS4wIChodHRwczovL2dpdGh1Yi5jb20vYnJhbXN0ZWluL3Byb21pcylcbiAqL1xuXG52YXIgUkVTT0xWRUQgPSAwO1xudmFyIFJFSkVDVEVEID0gMTtcbnZhciBQRU5ESU5HICA9IDI7XG5cbmZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpIHtcblxuICAgIHRoaXMuc3RhdGUgPSBQRU5ESU5HO1xuICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kZWZlcnJlZCA9IFtdO1xuXG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZSh4KTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgIHByb21pc2UucmVqZWN0KHIpO1xuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHByb21pc2UucmVqZWN0KGUpO1xuICAgIH1cbn1cblxuUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbiAocikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHJlamVjdChyKTtcbiAgICB9KTtcbn07XG5cblByb21pc2UucmVzb2x2ZSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcmVzb2x2ZSh4KTtcbiAgICB9KTtcbn07XG5cblByb21pc2UuYWxsID0gZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGNvdW50ID0gMCxcbiAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICAgIGlmIChpdGVyYWJsZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlc29sdmVyKGkpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IHg7XG4gICAgICAgICAgICAgICAgY291bnQgKz0gMTtcblxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVyYWJsZS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaXRlcmFibGVbaV0udGhlbihyZXNvbHZlcihpKSwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuUHJvbWlzZS5yYWNlID0gZnVuY3Rpb24gcmFjZShpdGVyYWJsZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlcmFibGUubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGl0ZXJhYmxlW2ldLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxudmFyIHAgPSBQcm9taXNlLnByb3RvdHlwZTtcblxucC5yZXNvbHZlID0gZnVuY3Rpb24gcmVzb2x2ZSh4KSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuXG4gICAgaWYgKHByb21pc2Uuc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICAgICAgaWYgKHggPT09IHByb21pc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2Ugc2V0dGxlZCB3aXRoIGl0c2VsZi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjYWxsZWQgPSBmYWxzZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHRoZW4gPSB4ICYmIHhbJ3RoZW4nXTtcblxuICAgICAgICAgICAgaWYgKHggIT09IG51bGwgJiYgdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhlbi5jYWxsKHgsIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnJlc29sdmUoeCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnJlamVjdChyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnJlamVjdChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwcm9taXNlLnN0YXRlID0gUkVTT0xWRUQ7XG4gICAgICAgIHByb21pc2UudmFsdWUgPSB4O1xuICAgICAgICBwcm9taXNlLm5vdGlmeSgpO1xuICAgIH1cbn07XG5cbnAucmVqZWN0ID0gZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcblxuICAgIGlmIChwcm9taXNlLnN0YXRlID09PSBQRU5ESU5HKSB7XG4gICAgICAgIGlmIChyZWFzb24gPT09IHByb21pc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2Ugc2V0dGxlZCB3aXRoIGl0c2VsZi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb21pc2Uuc3RhdGUgPSBSRUpFQ1RFRDtcbiAgICAgICAgcHJvbWlzZS52YWx1ZSA9IHJlYXNvbjtcbiAgICAgICAgcHJvbWlzZS5ub3RpZnkoKTtcbiAgICB9XG59O1xuXG5wLm5vdGlmeSA9IGZ1bmN0aW9uIG5vdGlmeSgpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG5cbiAgICBhc3luYyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChwcm9taXNlLnN0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgICAgICAgICB3aGlsZSAocHJvbWlzZS5kZWZlcnJlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBwcm9taXNlLmRlZmVycmVkLnNoaWZ0KCksXG4gICAgICAgICAgICAgICAgICAgIG9uUmVzb2x2ZWQgPSBkZWZlcnJlZFswXSxcbiAgICAgICAgICAgICAgICAgICAgb25SZWplY3RlZCA9IGRlZmVycmVkWzFdLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gZGVmZXJyZWRbMl0sXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCA9IGRlZmVycmVkWzNdO1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb21pc2Uuc3RhdGUgPT09IFJFU09MVkVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uUmVzb2x2ZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG9uUmVzb2x2ZWQuY2FsbCh1bmRlZmluZWQsIHByb21pc2UudmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwcm9taXNlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9taXNlLnN0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvblJlamVjdGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvblJlamVjdGVkLmNhbGwodW5kZWZpbmVkLCBwcm9taXNlLnZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxucC5jYXRjaCA9IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIG9uUmVqZWN0ZWQpO1xufTtcblxucC50aGVuID0gZnVuY3Rpb24gdGhlbihvblJlc29sdmVkLCBvblJlamVjdGVkKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcHJvbWlzZS5kZWZlcnJlZC5wdXNoKFtvblJlc29sdmVkLCBvblJlamVjdGVkLCByZXNvbHZlLCByZWplY3RdKTtcbiAgICAgICAgcHJvbWlzZS5ub3RpZnkoKTtcbiAgICB9KTtcbn07XG5cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGFzeW5jID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgcXVldWUucHVzaChjYWxsYmFjayk7XG5cbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGFzeW5jLmFzeW5jKCk7XG4gICAgfVxufTtcblxuYXN5bmMucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWVbMF0oKTtcbiAgICAgICAgcXVldWUuc2hpZnQoKTtcbiAgICB9XG59O1xuXG5pZiAod2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB2YXIgbW8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihhc3luYy5ydW4pO1xuXG4gICAgbW8ub2JzZXJ2ZShlbCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlXG4gICAgfSk7XG5cbiAgICBhc3luYy5hc3luYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwieFwiLCAwKTtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBhc3luYy5hc3luYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2V0VGltZW91dChhc3luYy5ydW4pO1xuICAgIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gd2luZG93LlByb21pc2UgfHwgUHJvbWlzZTtcbiIsIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoVnVlKSB7XG5cbiAgICB2YXIgXyA9IFZ1ZS51dGlsLmV4dGVuZCh7fSwgVnVlLnV0aWwpO1xuXG4gICAgXy5pc1N0cmluZyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJztcbiAgICB9O1xuXG4gICAgXy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7XG4gICAgfTtcblxuICAgIF8ub3B0aW9ucyA9IGZ1bmN0aW9uIChmbiwgb2JqLCBvcHRpb25zKSB7XG5cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMuY2FsbChvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF8uZXh0ZW5kKGZuLmJpbmQoe3ZtOiBvYmosIG9wdGlvbnM6IG9wdGlvbnN9KSwgZm4sIHtvcHRpb25zOiBvcHRpb25zfSk7XG4gICAgfTtcblxuICAgIF8uZWFjaCA9IGZ1bmN0aW9uIChvYmosIGl0ZXJhdG9yKSB7XG5cbiAgICAgICAgdmFyIGksIGtleTtcblxuICAgICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRvci5jYWxsKG9ialtpXSwgb2JqW2ldLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChfLmlzT2JqZWN0KG9iaikpIHtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5jYWxsKG9ialtrZXldLCBvYmpba2V5XSwga2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG5cbiAgICBfLmV4dGVuZCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcblxuICAgICAgICB2YXIgYXJyYXkgPSBbXSwgYXJncyA9IGFycmF5LnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSwgZGVlcDtcblxuICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIGRlZXAgPSB0YXJnZXQ7XG4gICAgICAgICAgICB0YXJnZXQgPSBhcmdzLnNoaWZ0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBhcmdzLmZvckVhY2goZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgZXh0ZW5kKHRhcmdldCwgYXJnLCBkZWVwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCwgc291cmNlLCBkZWVwKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChkZWVwICYmIChfLmlzUGxhaW5PYmplY3Qoc291cmNlW2tleV0pIHx8IF8uaXNBcnJheShzb3VyY2Vba2V5XSkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKF8uaXNQbGFpbk9iamVjdChzb3VyY2Vba2V5XSkgJiYgIV8uaXNQbGFpbk9iamVjdCh0YXJnZXRba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF8uaXNBcnJheShzb3VyY2Vba2V5XSkgJiYgIV8uaXNBcnJheSh0YXJnZXRba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXh0ZW5kKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSwgZGVlcCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZVtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIF87XG59O1xuIiwiLyoqXG4gKiBYTUxIdHRwIHJlcXVlc3QuXG4gKi9cblxudmFyIFByb21pc2UgPSByZXF1aXJlKCcuL3Byb21pc2UnKTtcbnZhciBYRG9tYWluID0gd2luZG93LlhEb21haW5SZXF1ZXN0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChfLCBvcHRpb25zKSB7XG5cbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLCBwcm9taXNlO1xuXG4gICAgaWYgKFhEb21haW4gJiYgb3B0aW9ucy5jcm9zc09yaWdpbikge1xuICAgICAgICByZXF1ZXN0ID0gbmV3IFhEb21haW5SZXF1ZXN0KCk7IG9wdGlvbnMuaGVhZGVycyA9IHt9O1xuICAgIH1cblxuICAgIGlmIChfLmlzUGxhaW5PYmplY3Qob3B0aW9ucy54aHIpKSB7XG4gICAgICAgIF8uZXh0ZW5kKHJlcXVlc3QsIG9wdGlvbnMueGhyKTtcbiAgICB9XG5cbiAgICBpZiAoXy5pc0Z1bmN0aW9uKG9wdGlvbnMuYmVmb3JlU2VuZCkpIHtcbiAgICAgICAgb3B0aW9ucy5iZWZvcmVTZW5kLmNhbGwodGhpcywgcmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblxuICAgICAgICByZXF1ZXN0Lm9wZW4ob3B0aW9ucy5tZXRob2QsIF8udXJsKG9wdGlvbnMpLCB0cnVlKTtcblxuICAgICAgICBfLmVhY2gob3B0aW9ucy5oZWFkZXJzLCBmdW5jdGlvbiAodmFsdWUsIGhlYWRlcikge1xuICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlciwgdmFsdWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuXG4gICAgICAgICAgICByZXF1ZXN0Lm9rID0gZXZlbnQudHlwZSA9PT0gJ2xvYWQnO1xuXG4gICAgICAgICAgICBpZiAocmVxdWVzdC5vayAmJiByZXF1ZXN0LnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJlcXVlc3Qub2sgPSByZXF1ZXN0LnN0YXR1cyA+PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXMgPCAzMDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIChyZXF1ZXN0Lm9rID8gcmVzb2x2ZSA6IHJlamVjdCkocmVxdWVzdCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVxdWVzdC5vbmxvYWQgPSBoYW5kbGVyO1xuICAgICAgICByZXF1ZXN0Lm9uYWJvcnQgPSBoYW5kbGVyO1xuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBoYW5kbGVyO1xuXG4gICAgICAgIHJlcXVlc3Quc2VuZChvcHRpb25zLmRhdGEpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHByb21pc2U7XG59O1xuIiwiLyoqXG4gKiBTZXJ2aWNlIGZvciBpbnRlcmFjdGluZyB3aXRoIFJFU1RmdWwgc2VydmljZXMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoXykge1xuXG4gICAgZnVuY3Rpb24gUmVzb3VyY2UodXJsLCBwYXJhbXMsIGFjdGlvbnMsIG9wdGlvbnMpIHtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsIHJlc291cmNlID0ge307XG5cbiAgICAgICAgYWN0aW9ucyA9IF8uZXh0ZW5kKHt9LFxuICAgICAgICAgICAgUmVzb3VyY2UuYWN0aW9ucyxcbiAgICAgICAgICAgIGFjdGlvbnNcbiAgICAgICAgKTtcblxuICAgICAgICBfLmVhY2goYWN0aW9ucywgZnVuY3Rpb24gKGFjdGlvbiwgbmFtZSkge1xuXG4gICAgICAgICAgICBhY3Rpb24gPSBfLmV4dGVuZCh0cnVlLCB7dXJsOiB1cmwsIHBhcmFtczogcGFyYW1zIHx8IHt9fSwgb3B0aW9ucywgYWN0aW9uKTtcblxuICAgICAgICAgICAgcmVzb3VyY2VbbmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChzZWxmLiRodHRwIHx8IF8uaHR0cCkob3B0cyhhY3Rpb24sIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc291cmNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9wdHMoYWN0aW9uLCBhcmdzKSB7XG5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSBfLmV4dGVuZCh7fSwgYWN0aW9uKSwgcGFyYW1zID0ge30sIGRhdGEsIHN1Y2Nlc3MsIGVycm9yO1xuXG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcblxuICAgICAgICAgICAgY2FzZSA0OlxuXG4gICAgICAgICAgICAgICAgZXJyb3IgPSBhcmdzWzNdO1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBhcmdzWzJdO1xuXG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYXNlIDI6XG5cbiAgICAgICAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKGFyZ3NbMV0pKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihhcmdzWzBdKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gYXJnc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gYXJnc1sxXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gYXJnc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBhcmdzWzJdO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMgPSBhcmdzWzBdO1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gYXJnc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IGFyZ3NbMl07XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYXNlIDE6XG5cbiAgICAgICAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKGFyZ3NbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBhcmdzWzBdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL14oUE9TVHxQVVR8UEFUQ0gpJC9pLnRlc3Qob3B0aW9ucy5tZXRob2QpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBhcmdzWzBdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IGFyZ3NbMF07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMDpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuXG4gICAgICAgICAgICAgICAgdGhyb3cgJ0V4cGVjdGVkIHVwIHRvIDQgYXJndW1lbnRzIFtwYXJhbXMsIGRhdGEsIHN1Y2Nlc3MsIGVycm9yXSwgZ290ICcgKyBhcmdzLmxlbmd0aCArICcgYXJndW1lbnRzJztcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMuZGF0YSA9IGRhdGE7XG4gICAgICAgIG9wdGlvbnMucGFyYW1zID0gXy5leHRlbmQoe30sIG9wdGlvbnMucGFyYW1zLCBwYXJhbXMpO1xuXG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBzdWNjZXNzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBvcHRpb25zLmVycm9yID0gZXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG5cbiAgICBSZXNvdXJjZS5hY3Rpb25zID0ge1xuXG4gICAgICAgIGdldDoge21ldGhvZDogJ0dFVCd9LFxuICAgICAgICBzYXZlOiB7bWV0aG9kOiAnUE9TVCd9LFxuICAgICAgICBxdWVyeToge21ldGhvZDogJ0dFVCd9LFxuICAgICAgICB1cGRhdGU6IHttZXRob2Q6ICdQVVQnfSxcbiAgICAgICAgcmVtb3ZlOiB7bWV0aG9kOiAnREVMRVRFJ30sXG4gICAgICAgIGRlbGV0ZToge21ldGhvZDogJ0RFTEVURSd9XG5cbiAgICB9O1xuXG4gICAgcmV0dXJuIF8ucmVzb3VyY2UgPSBSZXNvdXJjZTtcbn07XG4iLCIvKipcbiAqIFNlcnZpY2UgZm9yIFVSTCB0ZW1wbGF0aW5nLlxuICovXG5cbnZhciBpZSA9IGRvY3VtZW50LmRvY3VtZW50TW9kZTtcbnZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoXykge1xuXG4gICAgZnVuY3Rpb24gVXJsKHVybCwgcGFyYW1zKSB7XG5cbiAgICAgICAgdmFyIHVybFBhcmFtcyA9IHt9LCBxdWVyeVBhcmFtcyA9IHt9LCBvcHRpb25zID0gdXJsLCBxdWVyeTtcblxuICAgICAgICBpZiAoIV8uaXNQbGFpbk9iamVjdChvcHRpb25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt1cmw6IHVybCwgcGFyYW1zOiBwYXJhbXN9O1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHRydWUsIHt9LFxuICAgICAgICAgICAgVXJsLm9wdGlvbnMsIHRoaXMub3B0aW9ucywgb3B0aW9uc1xuICAgICAgICApO1xuXG4gICAgICAgIHVybCA9IG9wdGlvbnMudXJsLnJlcGxhY2UoLyhcXC8/KTooW2Etel1cXHcqKS9naSwgZnVuY3Rpb24gKG1hdGNoLCBzbGFzaCwgbmFtZSkge1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wYXJhbXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbXNbbmFtZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBzbGFzaCArIGVuY29kZVVyaVNlZ21lbnQob3B0aW9ucy5wYXJhbXNbbmFtZV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChfLmlzU3RyaW5nKG9wdGlvbnMucm9vdCkgJiYgIXVybC5tYXRjaCgvXihodHRwcz86KT9cXC8vKSkge1xuICAgICAgICAgICAgdXJsID0gb3B0aW9ucy5yb290ICsgJy8nICsgdXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgXy5lYWNoKG9wdGlvbnMucGFyYW1zLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICAgICAgaWYgKCF1cmxQYXJhbXNba2V5XSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcXVlcnkgPSBVcmwucGFyYW1zKHF1ZXJ5UGFyYW1zKTtcblxuICAgICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PSAtMSA/ICc/JyA6ICcmJykgKyBxdWVyeTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXJsIG9wdGlvbnMuXG4gICAgICovXG5cbiAgICBVcmwub3B0aW9ucyA9IHtcbiAgICAgICAgdXJsOiAnJyxcbiAgICAgICAgcm9vdDogbnVsbCxcbiAgICAgICAgcGFyYW1zOiB7fVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIGEgVXJsIHBhcmFtZXRlciBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAgICovXG5cbiAgICBVcmwucGFyYW1zID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIHZhciBwYXJhbXMgPSBbXTtcblxuICAgICAgICBwYXJhbXMuYWRkID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblxuICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbiAodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnB1c2goZW5jb2RlVXJpU2VnbWVudChrZXkpICsgJz0nICsgZW5jb2RlVXJpU2VnbWVudCh2YWx1ZSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlcmlhbGl6ZShwYXJhbXMsIG9iaik7XG5cbiAgICAgICAgcmV0dXJuIHBhcmFtcy5qb2luKCcmJyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBhcnNlIGEgVVJMIGFuZCByZXR1cm4gaXRzIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gICAgICovXG5cbiAgICBVcmwucGFyc2UgPSBmdW5jdGlvbiAodXJsKSB7XG5cbiAgICAgICAgaWYgKGllKSB7XG4gICAgICAgICAgICBlbC5ocmVmID0gdXJsO1xuICAgICAgICAgICAgdXJsID0gZWwuaHJlZjtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsLmhyZWYgPSB1cmw7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhyZWY6IGVsLmhyZWYsXG4gICAgICAgICAgICBwcm90b2NvbDogZWwucHJvdG9jb2wgPyBlbC5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLFxuICAgICAgICAgICAgcG9ydDogZWwucG9ydCxcbiAgICAgICAgICAgIGhvc3Q6IGVsLmhvc3QsXG4gICAgICAgICAgICBob3N0bmFtZTogZWwuaG9zdG5hbWUsXG4gICAgICAgICAgICBwYXRobmFtZTogZWwucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycgPyBlbC5wYXRobmFtZSA6ICcvJyArIGVsLnBhdGhuYW1lLFxuICAgICAgICAgICAgc2VhcmNoOiBlbC5zZWFyY2ggPyBlbC5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgICAgICAgICAgaGFzaDogZWwuaGFzaCA/IGVsLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJ1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzZXJpYWxpemUocGFyYW1zLCBvYmosIHNjb3BlKSB7XG5cbiAgICAgICAgdmFyIGFycmF5ID0gXy5pc0FycmF5KG9iaiksIHBsYWluID0gXy5pc1BsYWluT2JqZWN0KG9iaiksIGhhc2g7XG5cbiAgICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcblxuICAgICAgICAgICAgaGFzaCA9IF8uaXNPYmplY3QodmFsdWUpIHx8IF8uaXNBcnJheSh2YWx1ZSk7XG5cbiAgICAgICAgICAgIGlmIChzY29wZSkge1xuICAgICAgICAgICAgICAgIGtleSA9IHNjb3BlICsgJ1snICsgKHBsYWluIHx8IGhhc2ggPyBrZXkgOiAnJykgKyAnXSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghc2NvcGUgJiYgYXJyYXkpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuYWRkKHZhbHVlLm5hbWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFzaCkge1xuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZShwYXJhbXMsIHZhbHVlLCBrZXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuYWRkKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmNvZGVVcmlTZWdtZW50KHZhbHVlKSB7XG5cbiAgICAgICAgcmV0dXJuIGVuY29kZVVyaVF1ZXJ5KHZhbHVlLCB0cnVlKS5cbiAgICAgICAgICAgIHJlcGxhY2UoLyUyNi9naSwgJyYnKS5cbiAgICAgICAgICAgIHJlcGxhY2UoLyUzRC9naSwgJz0nKS5cbiAgICAgICAgICAgIHJlcGxhY2UoLyUyQi9naSwgJysnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmNvZGVVcmlRdWVyeSh2YWx1ZSwgc3BhY2VzKSB7XG5cbiAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkuXG4gICAgICAgICAgICByZXBsYWNlKC8lNDAvZ2ksICdAJykuXG4gICAgICAgICAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgICAgICAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICAgICAgICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cbiAgICAgICAgICAgIHJlcGxhY2UoLyUyMC9nLCAoc3BhY2VzID8gJyUyMCcgOiAnKycpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gXy51cmwgPSBVcmw7XG59O1xuIiwidmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciBXYXRjaGVyID0gcmVxdWlyZSgnLi4vd2F0Y2hlcicpXG52YXIgUGF0aCA9IHJlcXVpcmUoJy4uL3BhcnNlcnMvcGF0aCcpXG52YXIgdGV4dFBhcnNlciA9IHJlcXVpcmUoJy4uL3BhcnNlcnMvdGV4dCcpXG52YXIgZGlyUGFyc2VyID0gcmVxdWlyZSgnLi4vcGFyc2Vycy9kaXJlY3RpdmUnKVxudmFyIGV4cFBhcnNlciA9IHJlcXVpcmUoJy4uL3BhcnNlcnMvZXhwcmVzc2lvbicpXG52YXIgZmlsdGVyUkUgPSAvW158XVxcfFtefF0vXG5cbi8qKlxuICogR2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cbiAqIEByZXR1cm4geyp9XG4gKi9cblxuZXhwb3J0cy4kZ2V0ID0gZnVuY3Rpb24gKGV4cCwgYXNTdGF0ZW1lbnQpIHtcbiAgdmFyIHJlcyA9IGV4cFBhcnNlci5wYXJzZShleHApXG4gIGlmIChyZXMpIHtcbiAgICBpZiAoYXNTdGF0ZW1lbnQgJiYgIWV4cFBhcnNlci5pc1NpbXBsZVBhdGgoZXhwKSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgICByZXR1cm4gZnVuY3Rpb24gc3RhdGVtZW50SGFuZGxlciAoKSB7XG4gICAgICAgIHJlcy5nZXQuY2FsbChzZWxmLCBzZWxmKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gcmVzLmdldC5jYWxsKHRoaXMsIHRoaXMpXG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFNldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gKiBUaGUgZXhwcmVzc2lvbiBtdXN0IGJlIGEgdmFsaWQgbGVmdC1oYW5kXG4gKiBleHByZXNzaW9uIGluIGFuIGFzc2lnbm1lbnQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5leHBvcnRzLiRzZXQgPSBmdW5jdGlvbiAoZXhwLCB2YWwpIHtcbiAgdmFyIHJlcyA9IGV4cFBhcnNlci5wYXJzZShleHAsIHRydWUpXG4gIGlmIChyZXMgJiYgcmVzLnNldCkge1xuICAgIHJlcy5zZXQuY2FsbCh0aGlzLCB0aGlzLCB2YWwpXG4gIH1cbn1cblxuLyoqXG4gKiBEZWxldGUgYSBwcm9wZXJ0eSBvbiB0aGUgVk1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKi9cblxuZXhwb3J0cy4kZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuICBfLmRlbGV0ZSh0aGlzLl9kYXRhLCBrZXkpXG59XG5cbi8qKlxuICogV2F0Y2ggYW4gZXhwcmVzc2lvbiwgdHJpZ2dlciBjYWxsYmFjayB3aGVuIGl0c1xuICogdmFsdWUgY2hhbmdlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gaW1tZWRpYXRlXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB1bndhdGNoRm5cbiAqL1xuXG5leHBvcnRzLiR3YXRjaCA9IGZ1bmN0aW9uIChleHBPckZuLCBjYiwgb3B0aW9ucykge1xuICB2YXIgdm0gPSB0aGlzXG4gIHZhciBwYXJzZWRcbiAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnc3RyaW5nJykge1xuICAgIHBhcnNlZCA9IGRpclBhcnNlci5wYXJzZShleHBPckZuKVxuICAgIGV4cE9yRm4gPSBwYXJzZWQuZXhwcmVzc2lvblxuICB9XG4gIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCB7XG4gICAgZGVlcDogb3B0aW9ucyAmJiBvcHRpb25zLmRlZXAsXG4gICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzXG4gIH0pXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaW1tZWRpYXRlKSB7XG4gICAgY2IuY2FsbCh2bSwgd2F0Y2hlci52YWx1ZSlcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gdW53YXRjaEZuICgpIHtcbiAgICB3YXRjaGVyLnRlYXJkb3duKClcbiAgfVxufVxuXG4vKipcbiAqIEV2YWx1YXRlIGEgdGV4dCBkaXJlY3RpdmUsIGluY2x1ZGluZyBmaWx0ZXJzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5leHBvcnRzLiRldmFsID0gZnVuY3Rpb24gKHRleHQsIGFzU3RhdGVtZW50KSB7XG4gIC8vIGNoZWNrIGZvciBmaWx0ZXJzLlxuICBpZiAoZmlsdGVyUkUudGVzdCh0ZXh0KSkge1xuICAgIHZhciBkaXIgPSBkaXJQYXJzZXIucGFyc2UodGV4dClcbiAgICAvLyB0aGUgZmlsdGVyIHJlZ2V4IGNoZWNrIG1pZ2h0IGdpdmUgZmFsc2UgcG9zaXRpdmVcbiAgICAvLyBmb3IgcGlwZXMgaW5zaWRlIHN0cmluZ3MsIHNvIGl0J3MgcG9zc2libGUgdGhhdFxuICAgIC8vIHdlIGRvbid0IGdldCBhbnkgZmlsdGVycyBoZXJlXG4gICAgdmFyIHZhbCA9IHRoaXMuJGdldChkaXIuZXhwcmVzc2lvbiwgYXNTdGF0ZW1lbnQpXG4gICAgcmV0dXJuIGRpci5maWx0ZXJzXG4gICAgICA/IHRoaXMuX2FwcGx5RmlsdGVycyh2YWwsIG51bGwsIGRpci5maWx0ZXJzKVxuICAgICAgOiB2YWxcbiAgfSBlbHNlIHtcbiAgICAvLyBubyBmaWx0ZXJcbiAgICByZXR1cm4gdGhpcy4kZ2V0KHRleHQsIGFzU3RhdGVtZW50KVxuICB9XG59XG5cbi8qKlxuICogSW50ZXJwb2xhdGUgYSBwaWVjZSBvZiB0ZW1wbGF0ZSB0ZXh0LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZXhwb3J0cy4kaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiAodGV4dCkge1xuICB2YXIgdG9rZW5zID0gdGV4dFBhcnNlci5wYXJzZSh0ZXh0KVxuICB2YXIgdm0gPSB0aGlzXG4gIGlmICh0b2tlbnMpIHtcbiAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHZtLiRldmFsKHRva2Vuc1swXS52YWx1ZSkgKyAnJ1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHRva2VuLnRhZ1xuICAgICAgICAgID8gdm0uJGV2YWwodG9rZW4udmFsdWUpXG4gICAgICAgICAgOiB0b2tlbi52YWx1ZVxuICAgICAgfSkuam9pbignJylcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRleHRcbiAgfVxufVxuXG4vKipcbiAqIExvZyBpbnN0YW5jZSBkYXRhIGFzIGEgcGxhaW4gSlMgb2JqZWN0XG4gKiBzbyB0aGF0IGl0IGlzIGVhc2llciB0byBpbnNwZWN0IGluIGNvbnNvbGUuXG4gKiBUaGlzIG1ldGhvZCBhc3N1bWVzIGNvbnNvbGUgaXMgYXZhaWxhYmxlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBbcGF0aF1cbiAqL1xuXG5leHBvcnRzLiRsb2cgPSBmdW5jdGlvbiAocGF0aCkge1xuICB2YXIgZGF0YSA9IHBhdGhcbiAgICA/IFBhdGguZ2V0KHRoaXMuX2RhdGEsIHBhdGgpXG4gICAgOiB0aGlzLl9kYXRhXG4gIGlmIChkYXRhKSB7XG4gICAgZGF0YSA9IGNsZWFuKGRhdGEpXG4gIH1cbiAgLy8gaW5jbHVkZSBjb21wdXRlZCBmaWVsZHNcbiAgaWYgKCFwYXRoKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQpIHtcbiAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSlcbiAgICB9XG4gIH1cbiAgY29uc29sZS5sb2coZGF0YSlcbn1cblxuLyoqXG4gKiBcImNsZWFuXCIgYSBnZXR0ZXIvc2V0dGVyIGNvbnZlcnRlZCBvYmplY3QgaW50byBhIHBsYWluXG4gKiBvYmplY3QgY29weS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gLSBvYmpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBjbGVhbiAob2JqKSB7XG4gIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpXG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIHRyYW5zaXRpb24gPSByZXF1aXJlKCcuLi90cmFuc2l0aW9uJylcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBvbi1pbnN0YW5jZSBuZXh0VGljay4gVGhlIGNhbGxiYWNrIGlzXG4gKiBhdXRvLWJvdW5kIHRvIHRoZSBpbnN0YW5jZSwgYW5kIHRoaXMgYXZvaWRzIGNvbXBvbmVudFxuICogbW9kdWxlcyBoYXZpbmcgdG8gcmVseSBvbiB0aGUgZ2xvYmFsIFZ1ZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbmV4cG9ydHMuJG5leHRUaWNrID0gZnVuY3Rpb24gKGZuKSB7XG4gIF8ubmV4dFRpY2soZm4sIHRoaXMpXG59XG5cbi8qKlxuICogQXBwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gKi9cblxuZXhwb3J0cy4kYXBwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgcmV0dXJuIGluc2VydChcbiAgICB0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbixcbiAgICBhcHBlbmQsIHRyYW5zaXRpb24uYXBwZW5kXG4gIClcbn1cblxuLyoqXG4gKiBQcmVwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gKi9cblxuZXhwb3J0cy4kcHJlcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIHRhcmdldCA9IHF1ZXJ5KHRhcmdldClcbiAgaWYgKHRhcmdldC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICB0aGlzLiRiZWZvcmUodGFyZ2V0LmZpcnN0Q2hpbGQsIGNiLCB3aXRoVHJhbnNpdGlvbilcbiAgfSBlbHNlIHtcbiAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbilcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIEluc2VydCBpbnN0YW5jZSBiZWZvcmUgdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAqL1xuXG5leHBvcnRzLiRiZWZvcmUgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgcmV0dXJuIGluc2VydChcbiAgICB0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbixcbiAgICBiZWZvcmUsIHRyYW5zaXRpb24uYmVmb3JlXG4gIClcbn1cblxuLyoqXG4gKiBJbnNlcnQgaW5zdGFuY2UgYWZ0ZXIgdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAqL1xuXG5leHBvcnRzLiRhZnRlciA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpXG4gIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcbiAgICB0aGlzLiRiZWZvcmUodGFyZ2V0Lm5leHRTaWJsaW5nLCBjYiwgd2l0aFRyYW5zaXRpb24pXG4gIH0gZWxzZSB7XG4gICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LnBhcmVudE5vZGUsIGNiLCB3aXRoVHJhbnNpdGlvbilcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIFJlbW92ZSBpbnN0YW5jZSBmcm9tIERPTVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAqL1xuXG5leHBvcnRzLiRyZW1vdmUgPSBmdW5jdGlvbiAoY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIGlmICghdGhpcy4kZWwucGFyZW50Tm9kZSkge1xuICAgIHJldHVybiBjYiAmJiBjYigpXG4gIH1cbiAgdmFyIGluRG9jID0gdGhpcy5faXNBdHRhY2hlZCAmJiBfLmluRG9jKHRoaXMuJGVsKVxuICAvLyBpZiB3ZSBhcmUgbm90IGluIGRvY3VtZW50LCBubyBuZWVkIHRvIGNoZWNrXG4gIC8vIGZvciB0cmFuc2l0aW9uc1xuICBpZiAoIWluRG9jKSB3aXRoVHJhbnNpdGlvbiA9IGZhbHNlXG4gIHZhciBzZWxmID0gdGhpc1xuICB2YXIgcmVhbENiID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChpbkRvYykgc2VsZi5fY2FsbEhvb2soJ2RldGFjaGVkJylcbiAgICBpZiAoY2IpIGNiKClcbiAgfVxuICBpZiAodGhpcy5faXNGcmFnbWVudCkge1xuICAgIF8ucmVtb3ZlTm9kZVJhbmdlKFxuICAgICAgdGhpcy5fZnJhZ21lbnRTdGFydCxcbiAgICAgIHRoaXMuX2ZyYWdtZW50RW5kLFxuICAgICAgdGhpcywgdGhpcy5fZnJhZ21lbnQsIHJlYWxDYlxuICAgIClcbiAgfSBlbHNlIHtcbiAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2VcbiAgICAgID8gcmVtb3ZlXG4gICAgICA6IHRyYW5zaXRpb24ucmVtb3ZlXG4gICAgb3AodGhpcy4kZWwsIHRoaXMsIHJlYWxDYilcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIFNoYXJlZCBET00gaW5zZXJ0aW9uIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AxIC0gb3AgZm9yIG5vbi10cmFuc2l0aW9uIGluc2VydFxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AyIC0gb3AgZm9yIHRyYW5zaXRpb24gaW5zZXJ0XG4gKiBAcmV0dXJuIHZtXG4gKi9cblxuZnVuY3Rpb24gaW5zZXJ0ICh2bSwgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIG9wMSwgb3AyKSB7XG4gIHRhcmdldCA9IHF1ZXJ5KHRhcmdldClcbiAgdmFyIHRhcmdldElzRGV0YWNoZWQgPSAhXy5pbkRvYyh0YXJnZXQpXG4gIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSB8fCB0YXJnZXRJc0RldGFjaGVkXG4gICAgICA/IG9wMVxuICAgICAgOiBvcDJcbiAgdmFyIHNob3VsZENhbGxIb29rID1cbiAgICAhdGFyZ2V0SXNEZXRhY2hlZCAmJlxuICAgICF2bS5faXNBdHRhY2hlZCAmJlxuICAgICFfLmluRG9jKHZtLiRlbClcbiAgaWYgKHZtLl9pc0ZyYWdtZW50KSB7XG4gICAgXy5tYXBOb2RlUmFuZ2Uodm0uX2ZyYWdtZW50U3RhcnQsIHZtLl9mcmFnbWVudEVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIG9wKG5vZGUsIHRhcmdldCwgdm0pXG4gICAgfSlcbiAgICBjYiAmJiBjYigpXG4gIH0gZWxzZSB7XG4gICAgb3Aodm0uJGVsLCB0YXJnZXQsIHZtLCBjYilcbiAgfVxuICBpZiAoc2hvdWxkQ2FsbEhvb2spIHtcbiAgICB2bS5fY2FsbEhvb2soJ2F0dGFjaGVkJylcbiAgfVxuICByZXR1cm4gdm1cbn1cblxuLyoqXG4gKiBDaGVjayBmb3Igc2VsZWN0b3JzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiBxdWVyeSAoZWwpIHtcbiAgcmV0dXJuIHR5cGVvZiBlbCA9PT0gJ3N0cmluZydcbiAgICA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpXG4gICAgOiBlbFxufVxuXG4vKipcbiAqIEFwcGVuZCBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiBhcHBlbmQgKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpXG4gIGlmIChjYikgY2IoKVxufVxuXG4vKipcbiAqIEluc2VydEJlZm9yZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiBiZWZvcmUgKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICBfLmJlZm9yZShlbCwgdGFyZ2V0KVxuICBpZiAoY2IpIGNiKClcbn1cblxuLyoqXG4gKiBSZW1vdmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IGVsXG4gKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiByZW1vdmUgKGVsLCB2bSwgY2IpIHtcbiAgXy5yZW1vdmUoZWwpXG4gIGlmIChjYikgY2IoKVxufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcblxuLyoqXG4gKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5leHBvcnRzLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgKHRoaXMuX2V2ZW50c1tldmVudF0gfHwgKHRoaXMuX2V2ZW50c1tldmVudF0gPSBbXSkpXG4gICAgLnB1c2goZm4pXG4gIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIDEpXG4gIHJldHVybiB0aGlzXG59XG5cbi8qKlxuICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXG4gKiB0aW1lIHRoZW4gYXV0b21hdGljYWxseSByZW1vdmVkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5leHBvcnRzLiRvbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgZnVuY3Rpb24gb24gKCkge1xuICAgIHNlbGYuJG9mZihldmVudCwgb24pXG4gICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICB9XG4gIG9uLmZuID0gZm5cbiAgdGhpcy4kb24oZXZlbnQsIG9uKVxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG4gKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuZXhwb3J0cy4kb2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICB2YXIgY2JzXG4gIC8vIGFsbFxuICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBpZiAodGhpcy4kcGFyZW50KSB7XG4gICAgICBmb3IgKGV2ZW50IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdXG4gICAgICAgIGlmIChjYnMpIHtcbiAgICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9ldmVudHMgPSB7fVxuICAgIHJldHVybiB0aGlzXG4gIH1cbiAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XVxuICBpZiAoIWNicykge1xuICAgIHJldHVybiB0aGlzXG4gIH1cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aClcbiAgICB0aGlzLl9ldmVudHNbZXZlbnRdID0gbnVsbFxuICAgIHJldHVybiB0aGlzXG4gIH1cbiAgLy8gc3BlY2lmaWMgaGFuZGxlclxuICB2YXIgY2JcbiAgdmFyIGkgPSBjYnMubGVuZ3RoXG4gIHdoaWxlIChpLS0pIHtcbiAgICBjYiA9IGNic1tpXVxuICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XG4gICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtMSlcbiAgICAgIGNicy5zcGxpY2UoaSwgMSlcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbi8qKlxuICogVHJpZ2dlciBhbiBldmVudCBvbiBzZWxmLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICovXG5cbmV4cG9ydHMuJGVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgdmFyIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF1cbiAgdGhpcy5fc2hvdWxkUHJvcGFnYXRlID0gIWNic1xuICBpZiAoY2JzKSB7XG4gICAgY2JzID0gY2JzLmxlbmd0aCA+IDFcbiAgICAgID8gXy50b0FycmF5KGNicylcbiAgICAgIDogY2JzXG4gICAgdmFyIGFyZ3MgPSBfLnRvQXJyYXkoYXJndW1lbnRzLCAxKVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHJlcyA9IGNic1tpXS5hcHBseSh0aGlzLCBhcmdzKVxuICAgICAgaWYgKHJlcyA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLl9zaG91bGRQcm9wYWdhdGUgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbi8qKlxuICogUmVjdXJzaXZlbHkgYnJvYWRjYXN0IGFuIGV2ZW50IHRvIGFsbCBjaGlsZHJlbiBpbnN0YW5jZXMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gKi9cblxuZXhwb3J0cy4kYnJvYWRjYXN0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIC8vIGlmIG5vIGNoaWxkIGhhcyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LFxuICAvLyB0aGVuIHRoZXJlJ3Mgbm8gbmVlZCB0byBicm9hZGNhc3QuXG4gIGlmICghdGhpcy5fZXZlbnRzQ291bnRbZXZlbnRdKSByZXR1cm5cbiAgdmFyIGNoaWxkcmVuID0gdGhpcy4kY2hpbGRyZW5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXVxuICAgIGNoaWxkLiRlbWl0LmFwcGx5KGNoaWxkLCBhcmd1bWVudHMpXG4gICAgaWYgKGNoaWxkLl9zaG91bGRQcm9wYWdhdGUpIHtcbiAgICAgIGNoaWxkLiRicm9hZGNhc3QuYXBwbHkoY2hpbGQsIGFyZ3VtZW50cylcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBSZWN1cnNpdmVseSBwcm9wYWdhdGUgYW4gZXZlbnQgdXAgdGhlIHBhcmVudCBjaGFpbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAqL1xuXG5leHBvcnRzLiRkaXNwYXRjaCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy4kZW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnRcbiAgd2hpbGUgKHBhcmVudCkge1xuICAgIHBhcmVudC4kZW1pdC5hcHBseShwYXJlbnQsIGFyZ3VtZW50cylcbiAgICBwYXJlbnQgPSBwYXJlbnQuX3Nob3VsZFByb3BhZ2F0ZVxuICAgICAgPyBwYXJlbnQuJHBhcmVudFxuICAgICAgOiBudWxsXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBNb2RpZnkgdGhlIGxpc3RlbmVyIGNvdW50cyBvbiBhbGwgcGFyZW50cy5cbiAqIFRoaXMgYm9va2tlZXBpbmcgYWxsb3dzICRicm9hZGNhc3QgdG8gcmV0dXJuIGVhcmx5IHdoZW5cbiAqIG5vIGNoaWxkIGhhcyBsaXN0ZW5lZCB0byBhIGNlcnRhaW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudFxuICovXG5cbnZhciBob29rUkUgPSAvXmhvb2s6L1xuZnVuY3Rpb24gbW9kaWZ5TGlzdGVuZXJDb3VudCAodm0sIGV2ZW50LCBjb3VudCkge1xuICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudFxuICAvLyBob29rcyBkbyBub3QgZ2V0IGJyb2FkY2FzdGVkIHNvIG5vIG5lZWRcbiAgLy8gdG8gZG8gYm9va2tlZXBpbmcgZm9yIHRoZW1cbiAgaWYgKCFwYXJlbnQgfHwgIWNvdW50IHx8IGhvb2tSRS50ZXN0KGV2ZW50KSkgcmV0dXJuXG4gIHdoaWxlIChwYXJlbnQpIHtcbiAgICBwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSA9XG4gICAgICAocGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gfHwgMCkgKyBjb3VudFxuICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50XG4gIH1cbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJylcblxuLyoqXG4gKiBFeHBvc2UgdXNlZnVsIGludGVybmFsc1xuICovXG5cbmV4cG9ydHMudXRpbCA9IF9cbmV4cG9ydHMuY29uZmlnID0gY29uZmlnXG5leHBvcnRzLnNldCA9IF8uc2V0XG5leHBvcnRzLmRlbGV0ZSA9IF8uZGVsZXRlXG5leHBvcnRzLm5leHRUaWNrID0gXy5uZXh0VGlja1xuXG4vKipcbiAqIFRoZSBmb2xsb3dpbmcgYXJlIGV4cG9zZWQgZm9yIGFkdmFuY2VkIHVzYWdlIC8gcGx1Z2luc1xuICovXG5cbmV4cG9ydHMuY29tcGlsZXIgPSByZXF1aXJlKCcuLi9jb21waWxlcicpXG5leHBvcnRzLkZyYWdtZW50RmFjdG9yeSA9IHJlcXVpcmUoJy4uL2ZyYWdtZW50L2ZhY3RvcnknKVxuZXhwb3J0cy5pbnRlcm5hbERpcmVjdGl2ZXMgPSByZXF1aXJlKCcuLi9kaXJlY3RpdmVzL2ludGVybmFsJylcbmV4cG9ydHMucGFyc2VycyA9IHtcbiAgcGF0aDogcmVxdWlyZSgnLi4vcGFyc2Vycy9wYXRoJyksXG4gIHRleHQ6IHJlcXVpcmUoJy4uL3BhcnNlcnMvdGV4dCcpLFxuICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi4vcGFyc2Vycy90ZW1wbGF0ZScpLFxuICBkaXJlY3RpdmU6IHJlcXVpcmUoJy4uL3BhcnNlcnMvZGlyZWN0aXZlJyksXG4gIGV4cHJlc3Npb246IHJlcXVpcmUoJy4uL3BhcnNlcnMvZXhwcmVzc2lvbicpXG59XG5cbi8qKlxuICogRWFjaCBpbnN0YW5jZSBjb25zdHJ1Y3RvciwgaW5jbHVkaW5nIFZ1ZSwgaGFzIGEgdW5pcXVlXG4gKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG4gKiBjb25zdHJ1Y3RvcnNcIiBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZSBhbmQgY2FjaGUgdGhlbS5cbiAqL1xuXG5leHBvcnRzLmNpZCA9IDBcbnZhciBjaWQgPSAxXG5cbi8qKlxuICogQ2xhc3MgaW5oZXJpdGFuY2VcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZXh0ZW5kT3B0aW9uc1xuICovXG5cbmV4cG9ydHMuZXh0ZW5kID0gZnVuY3Rpb24gKGV4dGVuZE9wdGlvbnMpIHtcbiAgZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnMgfHwge31cbiAgdmFyIFN1cGVyID0gdGhpc1xuICB2YXIgaXNGaXJzdEV4dGVuZCA9IFN1cGVyLmNpZCA9PT0gMFxuICBpZiAoaXNGaXJzdEV4dGVuZCAmJiBleHRlbmRPcHRpb25zLl9DdG9yKSB7XG4gICAgcmV0dXJuIGV4dGVuZE9wdGlvbnMuX0N0b3JcbiAgfVxuICB2YXIgbmFtZSA9IGV4dGVuZE9wdGlvbnMubmFtZSB8fCBTdXBlci5vcHRpb25zLm5hbWVcbiAgdmFyIFN1YiA9IGNyZWF0ZUNsYXNzKG5hbWUgfHwgJ1Z1ZUNvbXBvbmVudCcpXG4gIFN1Yi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSlcbiAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1YlxuICBTdWIuY2lkID0gY2lkKytcbiAgU3ViLm9wdGlvbnMgPSBfLm1lcmdlT3B0aW9ucyhcbiAgICBTdXBlci5vcHRpb25zLFxuICAgIGV4dGVuZE9wdGlvbnNcbiAgKVxuICBTdWJbJ3N1cGVyJ10gPSBTdXBlclxuICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvblxuICBTdWIuZXh0ZW5kID0gU3VwZXIuZXh0ZW5kXG4gIC8vIGNyZWF0ZSBhc3NldCByZWdpc3RlcnMsIHNvIGV4dGVuZGVkIGNsYXNzZXNcbiAgLy8gY2FuIGhhdmUgdGhlaXIgcHJpdmF0ZSBhc3NldHMgdG9vLlxuICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgIFN1Ylt0eXBlXSA9IFN1cGVyW3R5cGVdXG4gIH0pXG4gIC8vIGVuYWJsZSByZWN1cnNpdmUgc2VsZi1sb29rdXBcbiAgaWYgKG5hbWUpIHtcbiAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViXG4gIH1cbiAgLy8gY2FjaGUgY29uc3RydWN0b3JcbiAgaWYgKGlzRmlyc3RFeHRlbmQpIHtcbiAgICBleHRlbmRPcHRpb25zLl9DdG9yID0gU3ViXG4gIH1cbiAgcmV0dXJuIFN1YlxufVxuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3ViLWNsYXNzIGNvbnN0cnVjdG9yIHdpdGggdGhlXG4gKiBnaXZlbiBuYW1lLiBUaGlzIGdpdmVzIHVzIG11Y2ggbmljZXIgb3V0cHV0IHdoZW5cbiAqIGxvZ2dpbmcgaW5zdGFuY2VzIGluIHRoZSBjb25zb2xlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVDbGFzcyAobmFtZSkge1xuICByZXR1cm4gbmV3IEZ1bmN0aW9uKFxuICAgICdyZXR1cm4gZnVuY3Rpb24gJyArIF8uY2xhc3NpZnkobmFtZSkgK1xuICAgICcgKG9wdGlvbnMpIHsgdGhpcy5faW5pdChvcHRpb25zKSB9J1xuICApKClcbn1cblxuLyoqXG4gKiBQbHVnaW4gc3lzdGVtXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBsdWdpblxuICovXG5cbmV4cG9ydHMudXNlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHtcbiAgICByZXR1cm5cbiAgfVxuICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcbiAgdmFyIGFyZ3MgPSBfLnRvQXJyYXkoYXJndW1lbnRzLCAxKVxuICBhcmdzLnVuc2hpZnQodGhpcylcbiAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHBsdWdpbi5pbnN0YWxsLmFwcGx5KHBsdWdpbiwgYXJncylcbiAgfSBlbHNlIHtcbiAgICBwbHVnaW4uYXBwbHkobnVsbCwgYXJncylcbiAgfVxuICBwbHVnaW4uaW5zdGFsbGVkID0gdHJ1ZVxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIEFwcGx5IGEgZ2xvYmFsIG1peGluIGJ5IG1lcmdpbmcgaXQgaW50byB0aGUgZGVmYXVsdFxuICogb3B0aW9ucy5cbiAqL1xuXG5leHBvcnRzLm1peGluID0gZnVuY3Rpb24gKG1peGluKSB7XG4gIHZhciBWdWUgPSBfLlZ1ZVxuICBWdWUub3B0aW9ucyA9IF8ubWVyZ2VPcHRpb25zKFZ1ZS5vcHRpb25zLCBtaXhpbilcbn1cblxuLyoqXG4gKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMgd2l0aCB0aGUgZm9sbG93aW5nXG4gKiBzaWduYXR1cmU6XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcGFyYW0geyp9IGRlZmluaXRpb25cbiAqL1xuXG5jb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICBleHBvcnRzW3R5cGVdID0gZnVuY3Rpb24gKGlkLCBkZWZpbml0aW9uKSB7XG4gICAgaWYgKCFkZWZpbml0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXVxuICAgIH0gZWxzZSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBfLmNvbW1vblRhZ1JFLnRlc3QoaWQpKSB7XG4gICAgICAgICAgXy53YXJuKFxuICAgICAgICAgICAgJ0RvIG5vdCB1c2UgYnVpbHQtaW4gSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArXG4gICAgICAgICAgICAnaWQ6ICcgKyBpZFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlID09PSAnY29tcG9uZW50JyAmJlxuICAgICAgICBfLmlzUGxhaW5PYmplY3QoZGVmaW5pdGlvbilcbiAgICAgICkge1xuICAgICAgICBkZWZpbml0aW9uLm5hbWUgPSBpZFxuICAgICAgICBkZWZpbml0aW9uID0gXy5WdWUuZXh0ZW5kKGRlZmluaXRpb24pXG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdID0gZGVmaW5pdGlvblxuICAgICAgcmV0dXJuIGRlZmluaXRpb25cbiAgICB9XG4gIH1cbn0pXG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIGNvbXBpbGVyID0gcmVxdWlyZSgnLi4vY29tcGlsZXInKVxuXG4vKipcbiAqIFNldCBpbnN0YW5jZSB0YXJnZXQgZWxlbWVudCBhbmQga2ljayBvZmYgdGhlIGNvbXBpbGF0aW9uXG4gKiBwcm9jZXNzLiBUaGUgcGFzc2VkIGluIGBlbGAgY2FuIGJlIGEgc2VsZWN0b3Igc3RyaW5nLCBhblxuICogZXhpc3RpbmcgRWxlbWVudCwgb3IgYSBEb2N1bWVudEZyYWdtZW50IChmb3IgYmxvY2tcbiAqIGluc3RhbmNlcykuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR8c3RyaW5nfSBlbFxuICogQHB1YmxpY1xuICovXG5cbmV4cG9ydHMuJG1vdW50ID0gZnVuY3Rpb24gKGVsKSB7XG4gIGlmICh0aGlzLl9pc0NvbXBpbGVkKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAnJG1vdW50KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJ1xuICAgIClcbiAgICByZXR1cm5cbiAgfVxuICBlbCA9IF8ucXVlcnkoZWwpXG4gIGlmICghZWwpIHtcbiAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gIH1cbiAgdGhpcy5fY29tcGlsZShlbClcbiAgdGhpcy5faW5pdERPTUhvb2tzKClcbiAgaWYgKF8uaW5Eb2ModGhpcy4kZWwpKSB7XG4gICAgdGhpcy5fY2FsbEhvb2soJ2F0dGFjaGVkJylcbiAgICByZWFkeS5jYWxsKHRoaXMpXG4gIH0gZWxzZSB7XG4gICAgdGhpcy4kb25jZSgnaG9vazphdHRhY2hlZCcsIHJlYWR5KVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbi8qKlxuICogTWFyayBhbiBpbnN0YW5jZSBhcyByZWFkeS5cbiAqL1xuXG5mdW5jdGlvbiByZWFkeSAoKSB7XG4gIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlXG4gIHRoaXMuX2lzUmVhZHkgPSB0cnVlXG4gIHRoaXMuX2NhbGxIb29rKCdyZWFkeScpXG59XG5cbi8qKlxuICogVGVhcmRvd24gdGhlIGluc3RhbmNlLCBzaW1wbHkgZGVsZWdhdGUgdG8gdGhlIGludGVybmFsXG4gKiBfZGVzdHJveS5cbiAqL1xuXG5leHBvcnRzLiRkZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG4gIHRoaXMuX2Rlc3Ryb3kocmVtb3ZlLCBkZWZlckNsZWFudXApXG59XG5cbi8qKlxuICogUGFydGlhbGx5IGNvbXBpbGUgYSBwaWVjZSBvZiBET00gYW5kIHJldHVybiBhXG4gKiBkZWNvbXBpbGUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5leHBvcnRzLiRjb21waWxlID0gZnVuY3Rpb24gKGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICByZXR1cm4gY29tcGlsZXIuY29tcGlsZShlbCwgdGhpcy4kb3B0aW9ucywgdHJ1ZSkoXG4gICAgdGhpcywgZWwsIGhvc3QsIHNjb3BlLCBmcmFnXG4gIClcbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi91dGlsJylcbnZhciBjb25maWcgPSByZXF1aXJlKCcuL2NvbmZpZycpXG5cbi8vIHdlIGhhdmUgdHdvIHNlcGFyYXRlIHF1ZXVlczogb25lIGZvciBkaXJlY3RpdmUgdXBkYXRlc1xuLy8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxuLy8gd2Ugd2FudCB0byBndWFyYW50ZWUgZGlyZWN0aXZlIHVwZGF0ZXMgdG8gYmUgY2FsbGVkXG4vLyBiZWZvcmUgdXNlciB3YXRjaGVycyBzbyB0aGF0IHdoZW4gdXNlciB3YXRjaGVycyBhcmVcbi8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXG4vLyBzdGF0ZS5cbnZhciBxdWV1ZSA9IFtdXG52YXIgdXNlclF1ZXVlID0gW11cbnZhciBoYXMgPSB7fVxudmFyIGNpcmN1bGFyID0ge31cbnZhciB3YWl0aW5nID0gZmFsc2VcbnZhciBpbnRlcm5hbFF1ZXVlRGVwbGV0ZWQgPSBmYWxzZVxuXG4vKipcbiAqIFJlc2V0IHRoZSBiYXRjaGVyJ3Mgc3RhdGUuXG4gKi9cblxuZnVuY3Rpb24gcmVzZXRCYXRjaGVyU3RhdGUgKCkge1xuICBxdWV1ZSA9IFtdXG4gIHVzZXJRdWV1ZSA9IFtdXG4gIGhhcyA9IHt9XG4gIGNpcmN1bGFyID0ge31cbiAgd2FpdGluZyA9IGludGVybmFsUXVldWVEZXBsZXRlZCA9IGZhbHNlXG59XG5cbi8qKlxuICogRmx1c2ggYm90aCBxdWV1ZXMgYW5kIHJ1biB0aGUgd2F0Y2hlcnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUgKCkge1xuICBydW5CYXRjaGVyUXVldWUocXVldWUpXG4gIGludGVybmFsUXVldWVEZXBsZXRlZCA9IHRydWVcbiAgcnVuQmF0Y2hlclF1ZXVlKHVzZXJRdWV1ZSlcbiAgLy8gZGV2IHRvb2wgaG9va1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoXy5pbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18pIHtcbiAgICAgIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fLmVtaXQoJ2ZsdXNoJylcbiAgICB9XG4gIH1cbiAgcmVzZXRCYXRjaGVyU3RhdGUoKVxufVxuXG4vKipcbiAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcXVldWVcbiAqL1xuXG5mdW5jdGlvbiBydW5CYXRjaGVyUXVldWUgKHF1ZXVlKSB7XG4gIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZFxuICAvLyBhcyB3ZSBydW4gZXhpc3Rpbmcgd2F0Y2hlcnNcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV1cbiAgICB2YXIgaWQgPSB3YXRjaGVyLmlkXG4gICAgaGFzW2lkXSA9IG51bGxcbiAgICB3YXRjaGVyLnJ1bigpXG4gICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDFcbiAgICAgIGlmIChjaXJjdWxhcltpZF0gPiBjb25maWcuX21heFVwZGF0ZUNvdW50KSB7XG4gICAgICAgIHF1ZXVlLnNwbGljZShoYXNbaWRdLCAxKVxuICAgICAgICBfLndhcm4oXG4gICAgICAgICAgJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCBmb3Igd2F0Y2hlciAnICtcbiAgICAgICAgICAnd2l0aCBleHByZXNzaW9uOiAnICsgd2F0Y2hlci5leHByZXNzaW9uXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLlxuICogSm9icyB3aXRoIGR1cGxpY2F0ZSBJRHMgd2lsbCBiZSBza2lwcGVkIHVubGVzcyBpdCdzXG4gKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC5cbiAqXG4gKiBAcGFyYW0ge1dhdGNoZXJ9IHdhdGNoZXJcbiAqICAgcHJvcGVydGllczpcbiAqICAgLSB7TnVtYmVyfSBpZFxuICogICAtIHtGdW5jdGlvbn0gcnVuXG4gKi9cblxuZXhwb3J0cy5wdXNoID0gZnVuY3Rpb24gKHdhdGNoZXIpIHtcbiAgdmFyIGlkID0gd2F0Y2hlci5pZFxuICBpZiAoaGFzW2lkXSA9PSBudWxsKSB7XG4gICAgLy8gaWYgYW4gaW50ZXJuYWwgd2F0Y2hlciBpcyBwdXNoZWQsIGJ1dCB0aGUgaW50ZXJuYWxcbiAgICAvLyBxdWV1ZSBpcyBhbHJlYWR5IGRlcGxldGVkLCB3ZSBydW4gaXQgaW1tZWRpYXRlbHkuXG4gICAgaWYgKGludGVybmFsUXVldWVEZXBsZXRlZCAmJiAhd2F0Y2hlci51c2VyKSB7XG4gICAgICB3YXRjaGVyLnJ1bigpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgLy8gcHVzaCB3YXRjaGVyIGludG8gYXBwcm9wcmlhdGUgcXVldWVcbiAgICB2YXIgcSA9IHdhdGNoZXIudXNlciA/IHVzZXJRdWV1ZSA6IHF1ZXVlXG4gICAgaGFzW2lkXSA9IHEubGVuZ3RoXG4gICAgcS5wdXNoKHdhdGNoZXIpXG4gICAgLy8gcXVldWUgdGhlIGZsdXNoXG4gICAgaWYgKCF3YWl0aW5nKSB7XG4gICAgICB3YWl0aW5nID0gdHJ1ZVxuICAgICAgXy5uZXh0VGljayhmbHVzaEJhdGNoZXJRdWV1ZSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQSBkb3VibHkgbGlua2VkIGxpc3QtYmFzZWQgTGVhc3QgUmVjZW50bHkgVXNlZCAoTFJVKVxuICogY2FjaGUuIFdpbGwga2VlcCBtb3N0IHJlY2VudGx5IHVzZWQgaXRlbXMgd2hpbGVcbiAqIGRpc2NhcmRpbmcgbGVhc3QgcmVjZW50bHkgdXNlZCBpdGVtcyB3aGVuIGl0cyBsaW1pdCBpc1xuICogcmVhY2hlZC4gVGhpcyBpcyBhIGJhcmUtYm9uZSB2ZXJzaW9uIG9mXG4gKiBSYXNtdXMgQW5kZXJzc29uJ3MganMtbHJ1OlxuICpcbiAqICAgaHR0cHM6Ly9naXRodWIuY29tL3JzbXMvanMtbHJ1XG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGxpbWl0XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuXG5mdW5jdGlvbiBDYWNoZSAobGltaXQpIHtcbiAgdGhpcy5zaXplID0gMFxuICB0aGlzLmxpbWl0ID0gbGltaXRcbiAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkXG4gIHRoaXMuX2tleW1hcCA9IE9iamVjdC5jcmVhdGUobnVsbClcbn1cblxudmFyIHAgPSBDYWNoZS5wcm90b3R5cGVcblxuLyoqXG4gKiBQdXQgPHZhbHVlPiBpbnRvIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHdpdGggPGtleT4uXG4gKiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXMgcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yXG4gKiB0aGUgbmV3IGVudHJ5LiBPdGhlcndpc2UgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICogKGkuZS4gaWYgdGhlcmUgd2FzIGVub3VnaCByb29tIGFscmVhZHkpLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge0VudHJ5fHVuZGVmaW5lZH1cbiAqL1xuXG5wLnB1dCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIHZhciBlbnRyeSA9IHtcbiAgICBrZXk6IGtleSxcbiAgICB2YWx1ZTogdmFsdWVcbiAgfVxuICB0aGlzLl9rZXltYXBba2V5XSA9IGVudHJ5XG4gIGlmICh0aGlzLnRhaWwpIHtcbiAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeVxuICAgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsXG4gIH0gZWxzZSB7XG4gICAgdGhpcy5oZWFkID0gZW50cnlcbiAgfVxuICB0aGlzLnRhaWwgPSBlbnRyeVxuICBpZiAodGhpcy5zaXplID09PSB0aGlzLmxpbWl0KSB7XG4gICAgcmV0dXJuIHRoaXMuc2hpZnQoKVxuICB9IGVsc2Uge1xuICAgIHRoaXMuc2l6ZSsrXG4gIH1cbn1cblxuLyoqXG4gKiBQdXJnZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCAob2xkZXN0KSBlbnRyeSBmcm9tIHRoZVxuICogY2FjaGUuIFJldHVybnMgdGhlIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZVxuICogY2FjaGUgd2FzIGVtcHR5LlxuICovXG5cbnAuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBlbnRyeSA9IHRoaXMuaGVhZFxuICBpZiAoZW50cnkpIHtcbiAgICB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV3ZXJcbiAgICB0aGlzLmhlYWQub2xkZXIgPSB1bmRlZmluZWRcbiAgICBlbnRyeS5uZXdlciA9IGVudHJ5Lm9sZGVyID0gdW5kZWZpbmVkXG4gICAgdGhpcy5fa2V5bWFwW2VudHJ5LmtleV0gPSB1bmRlZmluZWRcbiAgfVxuICByZXR1cm4gZW50cnlcbn1cblxuLyoqXG4gKiBHZXQgYW5kIHJlZ2lzdGVyIHJlY2VudCB1c2Ugb2YgPGtleT4uIFJldHVybnMgdGhlIHZhbHVlXG4gKiBhc3NvY2lhdGVkIHdpdGggPGtleT4gb3IgdW5kZWZpbmVkIGlmIG5vdCBpbiBjYWNoZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHJldHVybkVudHJ5XG4gKiBAcmV0dXJuIHtFbnRyeXwqfVxuICovXG5cbnAuZ2V0ID0gZnVuY3Rpb24gKGtleSwgcmV0dXJuRW50cnkpIHtcbiAgdmFyIGVudHJ5ID0gdGhpcy5fa2V5bWFwW2tleV1cbiAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpIHJldHVyblxuICBpZiAoZW50cnkgPT09IHRoaXMudGFpbCkge1xuICAgIHJldHVybiByZXR1cm5FbnRyeVxuICAgICAgPyBlbnRyeVxuICAgICAgOiBlbnRyeS52YWx1ZVxuICB9XG4gIC8vIEhFQUQtLS0tLS0tLS0tLS0tLVRBSUxcbiAgLy8gICA8Lm9sZGVyICAgLm5ld2VyPlxuICAvLyAgPC0tLSBhZGQgZGlyZWN0aW9uIC0tXG4gIC8vICAgQSAgQiAgQyAgPEQ+ICBFXG4gIGlmIChlbnRyeS5uZXdlcikge1xuICAgIGlmIChlbnRyeSA9PT0gdGhpcy5oZWFkKSB7XG4gICAgICB0aGlzLmhlYWQgPSBlbnRyeS5uZXdlclxuICAgIH1cbiAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyIC8vIEMgPC0tIEUuXG4gIH1cbiAgaWYgKGVudHJ5Lm9sZGVyKSB7XG4gICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlciAvLyBDLiAtLT4gRVxuICB9XG4gIGVudHJ5Lm5ld2VyID0gdW5kZWZpbmVkIC8vIEQgLS14XG4gIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsIC8vIEQuIC0tPiBFXG4gIGlmICh0aGlzLnRhaWwpIHtcbiAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeSAvLyBFLiA8LS0gRFxuICB9XG4gIHRoaXMudGFpbCA9IGVudHJ5XG4gIHJldHVybiByZXR1cm5FbnRyeVxuICAgID8gZW50cnlcbiAgICA6IGVudHJ5LnZhbHVlXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ2FjaGVcbiIsInZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgZGlyUGFyc2VyID0gcmVxdWlyZSgnLi4vcGFyc2Vycy9kaXJlY3RpdmUnKVxudmFyIHByb3BEZWYgPSByZXF1aXJlKCcuLi9kaXJlY3RpdmVzL2ludGVybmFsL3Byb3AnKVxudmFyIHByb3BCaW5kaW5nTW9kZXMgPSByZXF1aXJlKCcuLi9jb25maWcnKS5fcHJvcEJpbmRpbmdNb2Rlc1xudmFyIGVtcHR5ID0ge31cblxuLy8gcmVnZXhlc1xudmFyIGlkZW50UkUgPSByZXF1aXJlKCcuLi9wYXJzZXJzL3BhdGgnKS5pZGVudFJFXG52YXIgc2V0dGFibGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKFxcLltBLVphLXpfJF1bXFx3JF0qfFxcW1teXFxbXFxdXStcXF0pKiQvXG5cbi8qKlxuICogQ29tcGlsZSBwcm9wcyBvbiBhIHJvb3QgZWxlbWVudCBhbmQgcmV0dXJuXG4gKiBhIHByb3BzIGxpbmsgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wT3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjb21waWxlUHJvcHMgKGVsLCBwcm9wT3B0aW9ucykge1xuICB2YXIgcHJvcHMgPSBbXVxuICB2YXIgbmFtZXMgPSBPYmplY3Qua2V5cyhwcm9wT3B0aW9ucylcbiAgdmFyIGkgPSBuYW1lcy5sZW5ndGhcbiAgdmFyIG9wdGlvbnMsIG5hbWUsIGF0dHIsIHZhbHVlLCBwYXRoLCBwYXJzZWQsIHByb3BcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBuYW1lc1tpXVxuICAgIG9wdGlvbnMgPSBwcm9wT3B0aW9uc1tuYW1lXSB8fCBlbXB0eVxuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbmFtZSA9PT0gJyRkYXRhJykge1xuICAgICAgXy53YXJuKCdEbyBub3QgdXNlICRkYXRhIGFzIHByb3AuJylcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgLy8gcHJvcHMgY291bGQgY29udGFpbiBkYXNoZXMsIHdoaWNoIHdpbGwgYmVcbiAgICAvLyBpbnRlcnByZXRlZCBhcyBtaW51cyBjYWxjdWxhdGlvbnMgYnkgdGhlIHBhcnNlclxuICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FtZWxpemUgdGhlIHBhdGggaGVyZVxuICAgIHBhdGggPSBfLmNhbWVsaXplKG5hbWUpXG4gICAgaWYgKCFpZGVudFJFLnRlc3QocGF0aCkpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAnSW52YWxpZCBwcm9wIGtleTogXCInICsgbmFtZSArICdcIi4gUHJvcCBrZXlzICcgK1xuICAgICAgICAnbXVzdCBiZSB2YWxpZCBpZGVudGlmaWVycy4nXG4gICAgICApXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIHByb3AgPSB7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgcGF0aDogcGF0aCxcbiAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICBtb2RlOiBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVksXG4gICAgICByYXc6IG51bGxcbiAgICB9XG5cbiAgICBhdHRyID0gXy5oeXBoZW5hdGUobmFtZSlcbiAgICAvLyBmaXJzdCBjaGVjayBkeW5hbWljIHZlcnNpb25cbiAgICBpZiAoKHZhbHVlID0gXy5nZXRCaW5kQXR0cihlbCwgYXR0cikpID09PSBudWxsKSB7XG4gICAgICBpZiAoKHZhbHVlID0gXy5nZXRCaW5kQXR0cihlbCwgYXR0ciArICcuc3luYycpKSAhPT0gbnVsbCkge1xuICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVlcbiAgICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gXy5nZXRCaW5kQXR0cihlbCwgYXR0ciArICcub25jZScpKSAhPT0gbnVsbCkge1xuICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgLy8gaGFzIGR5bmFtaWMgYmluZGluZyFcbiAgICAgIHByb3AucmF3ID0gdmFsdWVcbiAgICAgIHBhcnNlZCA9IGRpclBhcnNlci5wYXJzZSh2YWx1ZSlcbiAgICAgIHZhbHVlID0gcGFyc2VkLmV4cHJlc3Npb25cbiAgICAgIHByb3AuZmlsdGVycyA9IHBhcnNlZC5maWx0ZXJzXG4gICAgICAvLyBjaGVjayBiaW5kaW5nIHR5cGVcbiAgICAgIGlmIChfLmlzTGl0ZXJhbCh2YWx1ZSkpIHtcbiAgICAgICAgLy8gZm9yIGV4cHJlc3Npb25zIGNvbnRhaW5pbmcgbGl0ZXJhbCBudW1iZXJzIGFuZFxuICAgICAgICAvLyBib29sZWFucywgdGhlcmUncyBubyBuZWVkIHRvIHNldHVwIGEgcHJvcCBiaW5kaW5nLFxuICAgICAgICAvLyBzbyB3ZSBjYW4gb3B0aW1pemUgdGhlbSBhcyBhIG9uZS10aW1lIHNldC5cbiAgICAgICAgcHJvcC5vcHRpbWl6ZWRMaXRlcmFsID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvcC5keW5hbWljID0gdHJ1ZVxuICAgICAgICAvLyBjaGVjayBub24tc2V0dGFibGUgcGF0aCBmb3IgdHdvLXdheSBiaW5kaW5nc1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICAgICAgcHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkgJiZcbiAgICAgICAgICAgICFzZXR0YWJsZVBhdGhSRS50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWVxuICAgICAgICAgIF8ud2FybihcbiAgICAgICAgICAgICdDYW5ub3QgYmluZCB0d28td2F5IHByb3Agd2l0aCBub24tc2V0dGFibGUgJyArXG4gICAgICAgICAgICAncGFyZW50IHBhdGg6ICcgKyB2YWx1ZVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcHJvcC5wYXJlbnRQYXRoID0gdmFsdWVcblxuICAgICAgLy8gd2FybiByZXF1aXJlZCB0d28td2F5XG4gICAgICBpZiAoXG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAgICAgb3B0aW9ucy50d29XYXkgJiZcbiAgICAgICAgcHJvcC5tb2RlICE9PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVlcbiAgICAgICkge1xuICAgICAgICBfLndhcm4oXG4gICAgICAgICAgJ1Byb3AgXCInICsgbmFtZSArICdcIiBleHBlY3RzIGEgdHdvLXdheSBiaW5kaW5nIHR5cGUuJ1xuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgodmFsdWUgPSBfLmF0dHIoZWwsIGF0dHIpKSAhPT0gbnVsbCkge1xuICAgICAgLy8gaGFzIGxpdGVyYWwgYmluZGluZyFcbiAgICAgIHByb3AucmF3ID0gdmFsdWVcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVxdWlyZWQpIHtcbiAgICAgIC8vIHdhcm4gbWlzc2luZyByZXF1aXJlZFxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICdNaXNzaW5nIHJlcXVpcmVkIHByb3A6ICcgKyBuYW1lXG4gICAgICApXG4gICAgfVxuICAgIC8vIHB1c2ggcHJvcFxuICAgIHByb3BzLnB1c2gocHJvcClcbiAgfVxuICByZXR1cm4gbWFrZVByb3BzTGlua0ZuKHByb3BzKVxufVxuXG4vKipcbiAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBhcHBsaWVzIHByb3BzIHRvIGEgdm0uXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcHJvcHNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VQcm9wc0xpbmtGbiAocHJvcHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHByb3BzTGlua0ZuICh2bSwgc2NvcGUpIHtcbiAgICAvLyBzdG9yZSByZXNvbHZlZCBwcm9wcyBpbmZvXG4gICAgdm0uX3Byb3BzID0ge31cbiAgICB2YXIgaSA9IHByb3BzLmxlbmd0aFxuICAgIHZhciBwcm9wLCBwYXRoLCBvcHRpb25zLCB2YWx1ZSwgcmF3XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcHJvcCA9IHByb3BzW2ldXG4gICAgICByYXcgPSBwcm9wLnJhd1xuICAgICAgcGF0aCA9IHByb3AucGF0aFxuICAgICAgb3B0aW9ucyA9IHByb3Aub3B0aW9uc1xuICAgICAgdm0uX3Byb3BzW3BhdGhdID0gcHJvcFxuICAgICAgaWYgKHJhdyA9PT0gbnVsbCkge1xuICAgICAgICAvLyBpbml0aWFsaXplIGFic2VudCBwcm9wXG4gICAgICAgIF8uaW5pdFByb3Aodm0sIHByb3AsIGdldERlZmF1bHQodm0sIG9wdGlvbnMpKVxuICAgICAgfSBlbHNlIGlmIChwcm9wLmR5bmFtaWMpIHtcbiAgICAgICAgLy8gZHluYW1pYyBwcm9wXG4gICAgICAgIGlmICh2bS5fY29udGV4dCkge1xuICAgICAgICAgIGlmIChwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUUpIHtcbiAgICAgICAgICAgIC8vIG9uZSB0aW1lIGJpbmRpbmdcbiAgICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtLl9jb250ZXh0KS4kZ2V0KHByb3AucGFyZW50UGF0aClcbiAgICAgICAgICAgIF8uaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBkeW5hbWljIGJpbmRpbmdcbiAgICAgICAgICAgIHZtLl9iaW5kRGlyKHtcbiAgICAgICAgICAgICAgbmFtZTogJ3Byb3AnLFxuICAgICAgICAgICAgICBkZWY6IHByb3BEZWYsXG4gICAgICAgICAgICAgIHByb3A6IHByb3BcbiAgICAgICAgICAgIH0sIG51bGwsIG51bGwsIHNjb3BlKSAvLyBlbCwgaG9zdCwgc2NvcGVcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICAgICAnQ2Fubm90IGJpbmQgZHluYW1pYyBwcm9wIG9uIGEgcm9vdCBpbnN0YW5jZScgK1xuICAgICAgICAgICAgJyB3aXRoIG5vIHBhcmVudDogJyArIHByb3AubmFtZSArICc9XCInICtcbiAgICAgICAgICAgIHJhdyArICdcIidcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocHJvcC5vcHRpbWl6ZWRMaXRlcmFsKSB7XG4gICAgICAgIC8vIG9wdGltaXplZCBsaXRlcmFsLCBjYXN0IGl0IGFuZCBqdXN0IHNldCBvbmNlXG4gICAgICAgIHZhciBzdHJpcHBlZCA9IF8uc3RyaXBRdW90ZXMocmF3KVxuICAgICAgICB2YWx1ZSA9IHN0cmlwcGVkID09PSByYXdcbiAgICAgICAgICA/IF8udG9Cb29sZWFuKF8udG9OdW1iZXIocmF3KSlcbiAgICAgICAgICA6IHN0cmlwcGVkXG4gICAgICAgIF8uaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3RyaW5nIGxpdGVyYWwsIGJ1dCB3ZSBuZWVkIHRvIGNhdGVyIGZvclxuICAgICAgICAvLyBCb29sZWFuIHByb3BzIHdpdGggbm8gdmFsdWVcbiAgICAgICAgdmFsdWUgPSBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gJiYgcmF3ID09PSAnJ1xuICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgIDogcmF3XG4gICAgICAgIF8uaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7Kn1cbiAqL1xuXG5mdW5jdGlvbiBnZXREZWZhdWx0ICh2bSwgb3B0aW9ucykge1xuICAvLyBubyBkZWZhdWx0LCByZXR1cm4gdW5kZWZpbmVkXG4gIGlmICghb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpKSB7XG4gICAgLy8gYWJzZW50IGJvb2xlYW4gdmFsdWUgZGVmYXVsdHMgdG8gZmFsc2VcbiAgICByZXR1cm4gb3B0aW9ucy50eXBlID09PSBCb29sZWFuXG4gICAgICA/IGZhbHNlXG4gICAgICA6IHVuZGVmaW5lZFxuICB9XG4gIHZhciBkZWYgPSBvcHRpb25zLmRlZmF1bHRcbiAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheVxuICBpZiAoXy5pc09iamVjdChkZWYpKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAnT2JqZWN0L0FycmF5IGFzIGRlZmF1bHQgcHJvcCB2YWx1ZXMgd2lsbCBiZSBzaGFyZWQgJyArXG4gICAgICAnYWNyb3NzIG11bHRpcGxlIGluc3RhbmNlcy4gVXNlIGEgZmFjdG9yeSBmdW5jdGlvbiAnICtcbiAgICAgICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUgaW5zdGVhZC4nXG4gICAgKVxuICB9XG4gIC8vIGNhbGwgZmFjdG9yeSBmdW5jdGlvbiBmb3Igbm9uLUZ1bmN0aW9uIHR5cGVzXG4gIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMudHlwZSAhPT0gRnVuY3Rpb25cbiAgICA/IGRlZi5jYWxsKHZtKVxuICAgIDogZGVmXG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIHB1YmxpY0RpcmVjdGl2ZXMgPSByZXF1aXJlKCcuLi9kaXJlY3RpdmVzL3B1YmxpYycpXG52YXIgaW50ZXJuYWxEaXJlY3RpdmVzID0gcmVxdWlyZSgnLi4vZGlyZWN0aXZlcy9pbnRlcm5hbCcpXG52YXIgY29tcGlsZVByb3BzID0gcmVxdWlyZSgnLi9jb21waWxlLXByb3BzJylcbnZhciB0ZXh0UGFyc2VyID0gcmVxdWlyZSgnLi4vcGFyc2Vycy90ZXh0JylcbnZhciBkaXJQYXJzZXIgPSByZXF1aXJlKCcuLi9wYXJzZXJzL2RpcmVjdGl2ZScpXG52YXIgdGVtcGxhdGVQYXJzZXIgPSByZXF1aXJlKCcuLi9wYXJzZXJzL3RlbXBsYXRlJylcbnZhciByZXNvbHZlQXNzZXQgPSBfLnJlc29sdmVBc3NldFxuXG4vLyBzcGVjaWFsIGJpbmRpbmcgcHJlZml4ZXNcbnZhciBiaW5kUkUgPSAvXnYtYmluZDp8XjovXG52YXIgb25SRSA9IC9edi1vbjp8XkAvXG52YXIgYXJnUkUgPSAvOiguKikkL1xudmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nXG52YXIgdHJhbnNpdGlvblJFID0gL14odi1iaW5kOnw6KT90cmFuc2l0aW9uJC9cblxuLy8gdGVybWluYWwgZGlyZWN0aXZlc1xudmFyIHRlcm1pbmFsRGlyZWN0aXZlcyA9IFtcbiAgJ2ZvcicsXG4gICdpZidcbl1cblxuLy8gZGVmYXVsdCBkaXJlY3RpdmUgcHJpb3JpdHlcbnZhciBERUZBVUxUX1BSSU9SSVRZID0gMTAwMFxuXG4vKipcbiAqIENvbXBpbGUgYSB0ZW1wbGF0ZSBhbmQgcmV0dXJuIGEgcmV1c2FibGUgY29tcG9zaXRlIGxpbmtcbiAqIGZ1bmN0aW9uLCB3aGljaCByZWN1cnNpdmVseSBjb250YWlucyBtb3JlIGxpbmsgZnVuY3Rpb25zXG4gKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcbiAqIGJlIGNhbGxlZCBvbiBpbnN0YW5jZSByb290IG5vZGVzLCBidXQgY2FuIGFsc28gYmUgdXNlZFxuICogZm9yIHBhcnRpYWwgY29tcGlsYXRpb24gaWYgdGhlIHBhcnRpYWwgYXJndW1lbnQgaXMgdHJ1ZS5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgY29tcG9zaXRlIGxpbmsgZnVuY3Rpb24sIHdoZW4gY2FsbGVkLCB3aWxsXG4gKiByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzXG4gKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHBhcnRpYWxcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMuY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgb3B0aW9ucywgcGFydGlhbCkge1xuICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSBpdHNlbGYuXG4gIHZhciBub2RlTGlua0ZuID0gcGFydGlhbCB8fCAhb3B0aW9ucy5fYXNDb21wb25lbnRcbiAgICA/IGNvbXBpbGVOb2RlKGVsLCBvcHRpb25zKVxuICAgIDogbnVsbFxuICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgY2hpbGROb2Rlc1xuICB2YXIgY2hpbGRMaW5rRm4gPVxuICAgICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJlxuICAgIGVsLnRhZ05hbWUgIT09ICdTQ1JJUFQnICYmXG4gICAgZWwuaGFzQ2hpbGROb2RlcygpXG4gICAgICA/IGNvbXBpbGVOb2RlTGlzdChlbC5jaGlsZE5vZGVzLCBvcHRpb25zKVxuICAgICAgOiBudWxsXG5cbiAgLyoqXG4gICAqIEEgY29tcG9zaXRlIGxpbmtlciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYSBhbHJlYWR5XG4gICAqIGNvbXBpbGVkIHBpZWNlIG9mIERPTSwgd2hpY2ggaW5zdGFudGlhdGVzIGFsbCBkaXJlY3RpdmVcbiAgICogaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSBob3N0IHZtIG9mIHRyYW5zY2x1ZGVkIGNvbnRlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBsaW5rIGNvbnRleHQgZnJhZ21lbnRcbiAgICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICAgKi9cblxuICByZXR1cm4gZnVuY3Rpb24gY29tcG9zaXRlTGlua0ZuICh2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBfLnRvQXJyYXkoZWwuY2hpbGROb2RlcylcbiAgICAvLyBsaW5rXG4gICAgdmFyIGRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiBjb21wb3NpdGVMaW5rQ2FwdHVyZXIgKCkge1xuICAgICAgaWYgKG5vZGVMaW5rRm4pIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZylcbiAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKVxuICAgIH0sIHZtKVxuICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIGRpcnMpXG4gIH1cbn1cblxuLyoqXG4gKiBBcHBseSBhIGxpbmtlciB0byBhIHZtL2VsZW1lbnQgcGFpciBhbmQgY2FwdHVyZSB0aGVcbiAqIGRpcmVjdGl2ZXMgY3JlYXRlZCBkdXJpbmcgdGhlIHByb2Nlc3MuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiBsaW5rQW5kQ2FwdHVyZSAobGlua2VyLCB2bSkge1xuICB2YXIgb3JpZ2luYWxEaXJDb3VudCA9IHZtLl9kaXJlY3RpdmVzLmxlbmd0aFxuICBsaW5rZXIoKVxuICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpXG4gIGRpcnMuc29ydChkaXJlY3RpdmVDb21wYXJhdG9yKVxuICBmb3IgKHZhciBpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZGlyc1tpXS5fYmluZCgpXG4gIH1cbiAgcmV0dXJuIGRpcnNcbn1cblxuLyoqXG4gKiBEaXJlY3RpdmUgcHJpb3JpdHkgc29ydCBjb21wYXJhdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFcbiAqIEBwYXJhbSB7T2JqZWN0fSBiXG4gKi9cblxuZnVuY3Rpb24gZGlyZWN0aXZlQ29tcGFyYXRvciAoYSwgYikge1xuICBhID0gYS5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZXG4gIGIgPSBiLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFlcbiAgcmV0dXJuIGEgPiBiID8gLTEgOiBhID09PSBiID8gMCA6IDFcbn1cblxuLyoqXG4gKiBMaW5rZXIgZnVuY3Rpb25zIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdFxuICogdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzIGluc3RhbmNlcyBnZW5lcmF0ZWQgZHVyaW5nXG4gKiB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBXZSBjcmVhdGUgdW5saW5rIGZ1bmN0aW9ucyB3aXRoIG9ubHkgdGhlIG5lY2Vzc2FyeVxuICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJzXG4gKiBAcGFyYW0ge1Z1ZX0gW2NvbnRleHRdXG4gKiBAcGFyYW0ge0FycmF5fSBbY29udGV4dERpcnNdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlVW5saW5rRm4gKHZtLCBkaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycykge1xuICByZXR1cm4gZnVuY3Rpb24gdW5saW5rIChkZXN0cm95aW5nKSB7XG4gICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKVxuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHREaXJzKSB7XG4gICAgICB0ZWFyZG93bkRpcnMoY29udGV4dCwgY29udGV4dERpcnMpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVGVhcmRvd24gcGFydGlhbCBsaW5rZWQgZGlyZWN0aXZlcy5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVzdHJveWluZ1xuICovXG5cbmZ1bmN0aW9uIHRlYXJkb3duRGlycyAodm0sIGRpcnMsIGRlc3Ryb3lpbmcpIHtcbiAgdmFyIGkgPSBkaXJzLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgZGlyc1tpXS5fdGVhcmRvd24oKVxuICAgIGlmICghZGVzdHJveWluZykge1xuICAgICAgdm0uX2RpcmVjdGl2ZXMuJHJlbW92ZShkaXJzW2ldKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgbGluayBwcm9wcyBvbiBhbiBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMuY29tcGlsZUFuZExpbmtQcm9wcyA9IGZ1bmN0aW9uICh2bSwgZWwsIHByb3BzLCBzY29wZSkge1xuICB2YXIgcHJvcHNMaW5rRm4gPSBjb21waWxlUHJvcHMoZWwsIHByb3BzKVxuICB2YXIgcHJvcERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgcHJvcHNMaW5rRm4odm0sIHNjb3BlKVxuICB9LCB2bSlcbiAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgcHJvcERpcnMpXG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgcm9vdCBlbGVtZW50IG9mIGFuIGluc3RhbmNlLlxuICpcbiAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuICogMi4gYXR0cnMgb24gdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSByb290IG5vZGUsIGlmXG4gKiAgICByZXBsYWNlOnRydWUgKGNoaWxkIHNjb3BlKVxuICpcbiAqIElmIHRoaXMgaXMgYSBmcmFnbWVudCBpbnN0YW5jZSwgd2Ugb25seSBuZWVkIHRvIGNvbXBpbGUgMS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dE9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMuY29tcGlsZVJvb3QgPSBmdW5jdGlvbiAoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKSB7XG4gIHZhciBjb250YWluZXJBdHRycyA9IG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzXG4gIHZhciByZXBsYWNlckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRyc1xuICB2YXIgY29udGV4dExpbmtGbiwgcmVwbGFjZXJMaW5rRm5cblxuICAvLyBvbmx5IG5lZWQgdG8gY29tcGlsZSBvdGhlciBhdHRyaWJ1dGVzIGZvclxuICAvLyBub24tZnJhZ21lbnQgaW5zdGFuY2VzXG4gIGlmIChlbC5ub2RlVHlwZSAhPT0gMTEpIHtcbiAgICAvLyBmb3IgY29tcG9uZW50cywgY29udGFpbmVyIGFuZCByZXBsYWNlciBuZWVkIHRvIGJlXG4gICAgLy8gY29tcGlsZWQgc2VwYXJhdGVseSBhbmQgbGlua2VkIGluIGRpZmZlcmVudCBzY29wZXMuXG4gICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG4gICAgICAvLyAyLiBjb250YWluZXIgYXR0cmlidXRlc1xuICAgICAgaWYgKGNvbnRhaW5lckF0dHJzICYmIGNvbnRleHRPcHRpb25zKSB7XG4gICAgICAgIGNvbnRleHRMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhjb250YWluZXJBdHRycywgY29udGV4dE9wdGlvbnMpXG4gICAgICB9XG4gICAgICBpZiAocmVwbGFjZXJBdHRycykge1xuICAgICAgICAvLyAzLiByZXBsYWNlciBhdHRyaWJ1dGVzXG4gICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9uLWNvbXBvbmVudCwganVzdCBjb21waWxlIGFzIGEgbm9ybWFsIGVsZW1lbnQuXG4gICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGVsLmF0dHJpYnV0ZXMsIG9wdGlvbnMpXG4gICAgfVxuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29udGFpbmVyQXR0cnMpIHtcbiAgICAvLyB3YXJuIGNvbnRhaW5lciBkaXJlY3RpdmVzIGZvciBmcmFnbWVudCBpbnN0YW5jZXNcbiAgICB2YXIgbmFtZXMgPSBjb250YWluZXJBdHRyc1xuICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYXR0cikge1xuICAgICAgICAvLyBhbGxvdyB2dWUtbG9hZGVyL3Z1ZWlmeSBzY29wZWQgY3NzIGF0dHJpYnV0ZXNcbiAgICAgICAgcmV0dXJuIGF0dHIubmFtZS5pbmRleE9mKCdfdi0nKSA8IDAgJiZcbiAgICAgICAgICAvLyBhbGxvdyBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgICAhb25SRS50ZXN0KGF0dHIubmFtZSkgJiZcbiAgICAgICAgICAvLyBhbGxvdyBzbG90c1xuICAgICAgICAgIGF0dHIubmFtZSAhPT0gJ3Nsb3QnXG4gICAgICB9KVxuICAgICAgLm1hcChmdW5jdGlvbiAoYXR0cikge1xuICAgICAgICByZXR1cm4gJ1wiJyArIGF0dHIubmFtZSArICdcIidcbiAgICAgIH0pXG4gICAgaWYgKG5hbWVzLmxlbmd0aCkge1xuICAgICAgdmFyIHBsdXJhbCA9IG5hbWVzLmxlbmd0aCA+IDFcbiAgICAgIF8ud2FybihcbiAgICAgICAgJ0F0dHJpYnV0ZScgKyAocGx1cmFsID8gJ3MgJyA6ICcgJykgKyBuYW1lcy5qb2luKCcsICcpICtcbiAgICAgICAgKHBsdXJhbCA/ICcgYXJlJyA6ICcgaXMnKSArICcgaWdub3JlZCBvbiBjb21wb25lbnQgJyArXG4gICAgICAgICc8JyArIG9wdGlvbnMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4gYmVjYXVzZSAnICtcbiAgICAgICAgJ3RoZSBjb21wb25lbnQgaXMgYSBmcmFnbWVudCBpbnN0YW5jZTogJyArXG4gICAgICAgICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNGcmFnbWVudF9JbnN0YW5jZSdcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gcm9vdExpbmtGbiAodm0sIGVsLCBzY29wZSkge1xuICAgIC8vIGxpbmsgY29udGV4dCBzY29wZSBkaXJzXG4gICAgdmFyIGNvbnRleHQgPSB2bS5fY29udGV4dFxuICAgIHZhciBjb250ZXh0RGlyc1xuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHRMaW5rRm4pIHtcbiAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0TGlua0ZuKGNvbnRleHQsIGVsLCBudWxsLCBzY29wZSlcbiAgICAgIH0sIGNvbnRleHQpXG4gICAgfVxuXG4gICAgLy8gbGluayBzZWxmXG4gICAgdmFyIHNlbGZEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHJlcGxhY2VyTGlua0ZuKSByZXBsYWNlckxpbmtGbih2bSwgZWwpXG4gICAgfSwgdm0pXG5cbiAgICAvLyByZXR1cm4gdGhlIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBjb250ZXh0XG4gICAgLy8gY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgc2VsZkRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKVxuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4gYmFzZWQgb24gdGhlXG4gKiBub2RlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlTm9kZSAobm9kZSwgb3B0aW9ucykge1xuICB2YXIgdHlwZSA9IG5vZGUubm9kZVR5cGVcbiAgaWYgKHR5cGUgPT09IDEgJiYgbm9kZS50YWdOYW1lICE9PSAnU0NSSVBUJykge1xuICAgIHJldHVybiBjb21waWxlRWxlbWVudChub2RlLCBvcHRpb25zKVxuICB9IGVsc2UgaWYgKHR5cGUgPT09IDMgJiYgbm9kZS5kYXRhLnRyaW0oKSkge1xuICAgIHJldHVybiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucylcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVFbGVtZW50IChlbCwgb3B0aW9ucykge1xuICAvLyBwcmVwcm9jZXNzIHRleHRhcmVhcy5cbiAgLy8gdGV4dGFyZWEgdHJlYXRzIGl0cyB0ZXh0IGNvbnRlbnQgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG4gIC8vIGp1c3QgYmluZCBpdCBhcyBhbiBhdHRyIGRpcmVjdGl2ZSBmb3IgdmFsdWUuXG4gIGlmIChlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgdmFyIHRva2VucyA9IHRleHRQYXJzZXIucGFyc2UoZWwudmFsdWUpXG4gICAgaWYgKHRva2Vucykge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCc6dmFsdWUnLCB0ZXh0UGFyc2VyLnRva2Vuc1RvRXhwKHRva2VucykpXG4gICAgICBlbC52YWx1ZSA9ICcnXG4gICAgfVxuICB9XG4gIHZhciBsaW5rRm5cbiAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpXG4gIC8vIGNoZWNrIHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGZvciAmIGlmKVxuICBpZiAoaGFzQXR0cnMpIHtcbiAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgb3B0aW9ucylcbiAgfVxuICAvLyBjaGVjayBlbGVtZW50IGRpcmVjdGl2ZXNcbiAgaWYgKCFsaW5rRm4pIHtcbiAgICBsaW5rRm4gPSBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKVxuICB9XG4gIC8vIGNoZWNrIGNvbXBvbmVudFxuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKVxuICB9XG4gIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gIGlmICghbGlua0ZuICYmIGhhc0F0dHJzKSB7XG4gICAgbGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoZWwuYXR0cmlidXRlcywgb3B0aW9ucylcbiAgfVxuICByZXR1cm4gbGlua0ZuXG59XG5cbi8qKlxuICogQ29tcGlsZSBhIHRleHROb2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7VGV4dE5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfSB0ZXh0Tm9kZUxpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVUZXh0Tm9kZSAobm9kZSwgb3B0aW9ucykge1xuICAvLyBza2lwIG1hcmtlZCB0ZXh0IG5vZGVzXG4gIGlmIChub2RlLl9za2lwKSB7XG4gICAgcmV0dXJuIHJlbW92ZVRleHRcbiAgfVxuXG4gIHZhciB0b2tlbnMgPSB0ZXh0UGFyc2VyLnBhcnNlKG5vZGUud2hvbGVUZXh0KVxuICBpZiAoIXRva2Vucykge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvLyBtYXJrIGFkamFjZW50IHRleHQgbm9kZXMgYXMgc2tpcHBlZCxcbiAgLy8gYmVjYXVzZSB3ZSBhcmUgdXNpbmcgbm9kZS53aG9sZVRleHQgdG8gY29tcGlsZVxuICAvLyBhbGwgYWRqYWNlbnQgdGV4dCBub2RlcyB0b2dldGhlci4gVGhpcyBmaXhlc1xuICAvLyBpc3N1ZXMgaW4gSUUgd2hlcmUgc29tZXRpbWVzIGl0IHNwbGl0cyB1cCBhIHNpbmdsZVxuICAvLyB0ZXh0IG5vZGUgaW50byBtdWx0aXBsZSBvbmVzLlxuICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmdcbiAgd2hpbGUgKG5leHQgJiYgbmV4dC5ub2RlVHlwZSA9PT0gMykge1xuICAgIG5leHQuX3NraXAgPSB0cnVlXG4gICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmdcbiAgfVxuXG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG4gIHZhciBlbCwgdG9rZW5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdG9rZW4gPSB0b2tlbnNbaV1cbiAgICBlbCA9IHRva2VuLnRhZ1xuICAgICAgPyBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKVxuICAgICAgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSlcbiAgICBmcmFnLmFwcGVuZENoaWxkKGVsKVxuICB9XG4gIHJldHVybiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnLCBvcHRpb25zKVxufVxuXG4vKipcbiAqIExpbmtlciBmb3IgYW4gc2tpcHBlZCB0ZXh0IG5vZGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1RleHR9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVUZXh0ICh2bSwgbm9kZSkge1xuICBfLnJlbW92ZShub2RlKVxufVxuXG4vKipcbiAqIFByb2Nlc3MgYSBzaW5nbGUgdGV4dCB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtOb2RlfVxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NUZXh0VG9rZW4gKHRva2VuLCBvcHRpb25zKSB7XG4gIHZhciBlbFxuICBpZiAodG9rZW4ub25lVGltZSkge1xuICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpXG4gIH0gZWxzZSB7XG4gICAgaWYgKHRva2VuLmh0bWwpIHtcbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgndi1odG1sJylcbiAgICAgIHNldFRva2VuVHlwZSgnaHRtbCcpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElFIHdpbGwgY2xlYW4gdXAgZW1wdHkgdGV4dE5vZGVzIGR1cmluZ1xuICAgICAgLy8gZnJhZy5jbG9uZU5vZGUodHJ1ZSksIHNvIHdlIGhhdmUgdG8gZ2l2ZSBpdFxuICAgICAgLy8gc29tZXRoaW5nIGhlcmUuLi5cbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyAnKVxuICAgICAgc2V0VG9rZW5UeXBlKCd0ZXh0JylcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gc2V0VG9rZW5UeXBlICh0eXBlKSB7XG4gICAgaWYgKHRva2VuLmRlc2NyaXB0b3IpIHJldHVyblxuICAgIHZhciBwYXJzZWQgPSBkaXJQYXJzZXIucGFyc2UodG9rZW4udmFsdWUpXG4gICAgdG9rZW4uZGVzY3JpcHRvciA9IHtcbiAgICAgIG5hbWU6IHR5cGUsXG4gICAgICBkZWY6IHB1YmxpY0RpcmVjdGl2ZXNbdHlwZV0sXG4gICAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXG4gICAgfVxuICB9XG4gIHJldHVybiBlbFxufVxuXG4vKipcbiAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBwcm9jZXNzZXMgYSB0ZXh0Tm9kZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHRva2Vuc1xuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKi9cblxuZnVuY3Rpb24gbWFrZVRleHROb2RlTGlua0ZuICh0b2tlbnMsIGZyYWcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHRleHROb2RlTGlua0ZuICh2bSwgZWwsIGhvc3QsIHNjb3BlKSB7XG4gICAgdmFyIGZyYWdDbG9uZSA9IGZyYWcuY2xvbmVOb2RlKHRydWUpXG4gICAgdmFyIGNoaWxkTm9kZXMgPSBfLnRvQXJyYXkoZnJhZ0Nsb25lLmNoaWxkTm9kZXMpXG4gICAgdmFyIHRva2VuLCB2YWx1ZSwgbm9kZVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdG9rZW4gPSB0b2tlbnNbaV1cbiAgICAgIHZhbHVlID0gdG9rZW4udmFsdWVcbiAgICAgIGlmICh0b2tlbi50YWcpIHtcbiAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV1cbiAgICAgICAgaWYgKHRva2VuLm9uZVRpbWUpIHtcbiAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bSkuJGV2YWwodmFsdWUpXG4gICAgICAgICAgaWYgKHRva2VuLmh0bWwpIHtcbiAgICAgICAgICAgIF8ucmVwbGFjZShub2RlLCB0ZW1wbGF0ZVBhcnNlci5wYXJzZSh2YWx1ZSwgdHJ1ZSkpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IHZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIF8ucmVwbGFjZShlbCwgZnJhZ0Nsb25lKVxuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgbGlzdCBhbmQgcmV0dXJuIGEgY2hpbGRMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZUxpc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZU5vZGVMaXN0IChub2RlTGlzdCwgb3B0aW9ucykge1xuICB2YXIgbGlua0ZucyA9IFtdXG4gIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZVxuICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG5vZGUgPSBub2RlTGlzdFtpXVxuICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKVxuICAgIGNoaWxkTGlua0ZuID1cbiAgICAgICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJlxuICAgICAgbm9kZS50YWdOYW1lICE9PSAnU0NSSVBUJyAmJlxuICAgICAgbm9kZS5oYXNDaGlsZE5vZGVzKClcbiAgICAgICAgPyBjb21waWxlTm9kZUxpc3Qobm9kZS5jaGlsZE5vZGVzLCBvcHRpb25zKVxuICAgICAgICA6IG51bGxcbiAgICBsaW5rRm5zLnB1c2gobm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pXG4gIH1cbiAgcmV0dXJuIGxpbmtGbnMubGVuZ3RoXG4gICAgPyBtYWtlQ2hpbGRMaW5rRm4obGlua0ZucylcbiAgICA6IG51bGxcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2hpbGQgbGluayBmdW5jdGlvbiBmb3IgYSBub2RlJ3MgY2hpbGROb2Rlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gbGlua0Zuc1xuICogQHJldHVybiB7RnVuY3Rpb259IGNoaWxkTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuIChsaW5rRm5zKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjaGlsZExpbmtGbiAodm0sIG5vZGVzLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIHZhciBub2RlLCBub2RlTGlua0ZuLCBjaGlsZHJlbkxpbmtGblxuICAgIGZvciAodmFyIGkgPSAwLCBuID0gMCwgbCA9IGxpbmtGbnMubGVuZ3RoOyBpIDwgbDsgbisrKSB7XG4gICAgICBub2RlID0gbm9kZXNbbl1cbiAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK11cbiAgICAgIGNoaWxkcmVuTGlua0ZuID0gbGlua0Zuc1tpKytdXG4gICAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcbiAgICAgIHZhciBjaGlsZE5vZGVzID0gXy50b0FycmF5KG5vZGUuY2hpbGROb2RlcylcbiAgICAgIGlmIChub2RlTGlua0ZuKSB7XG4gICAgICAgIG5vZGVMaW5rRm4odm0sIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKVxuICAgICAgfVxuICAgICAgaWYgKGNoaWxkcmVuTGlua0ZuKSB7XG4gICAgICAgIGNoaWxkcmVuTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZylcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBmb3IgZWxlbWVudCBkaXJlY3RpdmVzIChjdXN0b20gZWxlbWVudHMgdGhhdCBzaG91bGRcbiAqIGJlIHJlc292bGVkIGFzIHRlcm1pbmFsIGRpcmVjdGl2ZXMpLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyAoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKVxuICBpZiAoXy5jb21tb25UYWdSRS50ZXN0KHRhZykpIHJldHVyblxuICB2YXIgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZylcbiAgaWYgKGRlZikge1xuICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCB0YWcsICcnLCBvcHRpb25zLCBkZWYpXG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LiBJZiB5ZXMsIHJldHVyblxuICogYSBjb21wb25lbnQgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50IChlbCwgb3B0aW9ucykge1xuICB2YXIgY29tcG9uZW50ID0gXy5jaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucylcbiAgaWYgKGNvbXBvbmVudCkge1xuICAgIHZhciByZWYgPSBfLmZpbmRSZWYoZWwpXG4gICAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgICBuYW1lOiAnY29tcG9uZW50JyxcbiAgICAgIHJlZjogcmVmLFxuICAgICAgZXhwcmVzc2lvbjogY29tcG9uZW50LmlkLFxuICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuICAgICAgbW9kaWZpZXJzOiB7XG4gICAgICAgIGxpdGVyYWw6ICFjb21wb25lbnQuZHluYW1pY1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgY29tcG9uZW50TGlua0ZuID0gZnVuY3Rpb24gKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAgIGlmIChyZWYpIHtcbiAgICAgICAgXy5kZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCByZWYsIG51bGwpXG4gICAgICB9XG4gICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpXG4gICAgfVxuICAgIGNvbXBvbmVudExpbmtGbi50ZXJtaW5hbCA9IHRydWVcbiAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuXG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBhbiBlbGVtZW50IGZvciB0ZXJtaW5hbCBkaXJlY3RpdmVzIGluIGZpeGVkIG9yZGVyLlxuICogSWYgaXQgZmluZHMgb25lLCByZXR1cm4gYSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyAoZWwsIG9wdGlvbnMpIHtcbiAgLy8gc2tpcCB2LXByZVxuICBpZiAoXy5hdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuICAgIHJldHVybiBza2lwXG4gIH1cbiAgLy8gc2tpcCB2LWVsc2UgYmxvY2ssIGJ1dCBvbmx5IGlmIGZvbGxvd2luZyB2LWlmXG4gIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3YtZWxzZScpKSB7XG4gICAgdmFyIHByZXYgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXG4gICAgaWYgKHByZXYgJiYgcHJldi5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgcmV0dXJuIHNraXBcbiAgICB9XG4gIH1cbiAgdmFyIHZhbHVlLCBkaXJOYW1lXG4gIGZvciAodmFyIGkgPSAwLCBsID0gdGVybWluYWxEaXJlY3RpdmVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGRpck5hbWUgPSB0ZXJtaW5hbERpcmVjdGl2ZXNbaV1cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGlmICh2YWx1ZSA9IGVsLmdldEF0dHJpYnV0ZSgndi0nICsgZGlyTmFtZSkpIHtcbiAgICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucylcbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICB9XG59XG5cbmZ1bmN0aW9uIHNraXAgKCkge31cbnNraXAudGVybWluYWwgPSB0cnVlXG5cbi8qKlxuICogQnVpbGQgYSBub2RlIGxpbmsgZnVuY3Rpb24gZm9yIGEgdGVybWluYWwgZGlyZWN0aXZlLlxuICogQSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uIHRlcm1pbmF0ZXMgdGhlIGN1cnJlbnRcbiAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcbiAqIHN1YnRyZWUgaW4gdGhlIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IFtkZWZdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlVGVybWluYWxOb2RlTGlua0ZuIChlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIGRlZikge1xuICB2YXIgcGFyc2VkID0gZGlyUGFyc2VyLnBhcnNlKHZhbHVlKVxuICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICBuYW1lOiBkaXJOYW1lLFxuICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzLFxuICAgIHJhdzogdmFsdWUsXG4gICAgLy8gZWl0aGVyIGFuIGVsZW1lbnQgZGlyZWN0aXZlLCBvciBpZi9mb3JcbiAgICBkZWY6IGRlZiB8fCBwdWJsaWNEaXJlY3RpdmVzW2Rpck5hbWVdXG4gIH1cbiAgLy8gY2hlY2sgcmVmIGZvciB2LWZvciBhbmQgcm91dGVyLXZpZXdcbiAgaWYgKGRpck5hbWUgPT09ICdmb3InIHx8IGRpck5hbWUgPT09ICdyb3V0ZXItdmlldycpIHtcbiAgICBkZXNjcmlwdG9yLnJlZiA9IF8uZmluZFJlZihlbClcbiAgfVxuICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4gKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICBpZiAoZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgIF8uZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgZGVzY3JpcHRvci5yZWYsIG51bGwpXG4gICAgfVxuICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZylcbiAgfVxuICBmbi50ZXJtaW5hbCA9IHRydWVcbiAgcmV0dXJuIGZuXG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgZGlyZWN0aXZlcyBvbiBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBsaW5rZXIuXG4gKlxuICogQHBhcmFtIHtBcnJheXxOYW1lZE5vZGVNYXB9IGF0dHJzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZURpcmVjdGl2ZXMgKGF0dHJzLCBvcHRpb25zKSB7XG4gIHZhciBpID0gYXR0cnMubGVuZ3RoXG4gIHZhciBkaXJzID0gW11cbiAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zXG4gIHdoaWxlIChpLS0pIHtcbiAgICBhdHRyID0gYXR0cnNbaV1cbiAgICBuYW1lID0gcmF3TmFtZSA9IGF0dHIubmFtZVxuICAgIHZhbHVlID0gcmF3VmFsdWUgPSBhdHRyLnZhbHVlXG4gICAgdG9rZW5zID0gdGV4dFBhcnNlci5wYXJzZSh2YWx1ZSlcbiAgICAvLyByZXNldCBhcmdcbiAgICBhcmcgPSBudWxsXG4gICAgLy8gY2hlY2sgbW9kaWZpZXJzXG4gICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMobmFtZSlcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKVxuXG4gICAgLy8gYXR0cmlidXRlIGludGVycG9sYXRpb25zXG4gICAgaWYgKHRva2Vucykge1xuICAgICAgdmFsdWUgPSB0ZXh0UGFyc2VyLnRva2Vuc1RvRXhwKHRva2VucylcbiAgICAgIGFyZyA9IG5hbWVcbiAgICAgIHB1c2hEaXIoJ2JpbmQnLCBwdWJsaWNEaXJlY3RpdmVzLmJpbmQsIHRydWUpXG4gICAgICAvLyB3YXJuIGFnYWluc3QgbWl4aW5nIG11c3RhY2hlcyB3aXRoIHYtYmluZFxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgICAgICByZXR1cm4gYXR0ci5uYW1lID09PSAnOmNsYXNzJyB8fCBhdHRyLm5hbWUgPT09ICd2LWJpbmQ6Y2xhc3MnXG4gICAgICAgIH0pKSB7XG4gICAgICAgICAgXy53YXJuKFxuICAgICAgICAgICAgJ2NsYXNzPVwiJyArIHJhd1ZhbHVlICsgJ1wiOiBEbyBub3QgbWl4IG11c3RhY2hlIGludGVycG9sYXRpb24gJyArXG4gICAgICAgICAgICAnYW5kIHYtYmluZCBmb3IgXCJjbGFzc1wiIG9uIHRoZSBzYW1lIGVsZW1lbnQuIFVzZSBvbmUgb3IgdGhlIG90aGVyLidcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2VcblxuICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXG4gICAgaWYgKHRyYW5zaXRpb25SRS50ZXN0KG5hbWUpKSB7XG4gICAgICBtb2RpZmllcnMubGl0ZXJhbCA9ICFiaW5kUkUudGVzdChuYW1lKVxuICAgICAgcHVzaERpcigndHJhbnNpdGlvbicsIGludGVybmFsRGlyZWN0aXZlcy50cmFuc2l0aW9uKVxuICAgIH0gZWxzZVxuXG4gICAgLy8gZXZlbnQgaGFuZGxlcnNcbiAgICBpZiAob25SRS50ZXN0KG5hbWUpKSB7XG4gICAgICBhcmcgPSBuYW1lLnJlcGxhY2Uob25SRSwgJycpXG4gICAgICBwdXNoRGlyKCdvbicsIHB1YmxpY0RpcmVjdGl2ZXMub24pXG4gICAgfSBlbHNlXG5cbiAgICAvLyBhdHRyaWJ1dGUgYmluZGluZ3NcbiAgICBpZiAoYmluZFJFLnRlc3QobmFtZSkpIHtcbiAgICAgIGRpck5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJylcbiAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgICAgcHVzaERpcihkaXJOYW1lLCBpbnRlcm5hbERpcmVjdGl2ZXNbZGlyTmFtZV0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmcgPSBkaXJOYW1lXG4gICAgICAgIHB1c2hEaXIoJ2JpbmQnLCBwdWJsaWNEaXJlY3RpdmVzLmJpbmQpXG4gICAgICB9XG4gICAgfSBlbHNlXG5cbiAgICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuICAgIGlmIChuYW1lLmluZGV4T2YoJ3YtJykgPT09IDApIHtcbiAgICAgIC8vIGNoZWNrIGFyZ1xuICAgICAgYXJnID0gKGFyZyA9IG5hbWUubWF0Y2goYXJnUkUpKSAmJiBhcmdbMV1cbiAgICAgIGlmIChhcmcpIHtcbiAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShhcmdSRSwgJycpXG4gICAgICB9XG4gICAgICAvLyBleHRyYWN0IGRpcmVjdGl2ZSBuYW1lXG4gICAgICBkaXJOYW1lID0gbmFtZS5zbGljZSgyKVxuXG4gICAgICAvLyBza2lwIHYtZWxzZSAod2hlbiB1c2VkIHdpdGggdi1zaG93KVxuICAgICAgaWYgKGRpck5hbWUgPT09ICdlbHNlJykge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lKVxuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBfLmFzc2VydEFzc2V0KGRpckRlZiwgJ2RpcmVjdGl2ZScsIGRpck5hbWUpXG4gICAgICB9XG5cbiAgICAgIGlmIChkaXJEZWYpIHtcbiAgICAgICAgcHVzaERpcihkaXJOYW1lLCBkaXJEZWYpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFB1c2ggYSBkaXJlY3RpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBkZWZcbiAgICogQHBhcmFtIHtCb29sZWFufSBbaW50ZXJwXVxuICAgKi9cblxuICBmdW5jdGlvbiBwdXNoRGlyIChkaXJOYW1lLCBkZWYsIGludGVycCkge1xuICAgIHZhciBwYXJzZWQgPSBkaXJQYXJzZXIucGFyc2UodmFsdWUpXG4gICAgZGlycy5wdXNoKHtcbiAgICAgIG5hbWU6IGRpck5hbWUsXG4gICAgICBhdHRyOiByYXdOYW1lLFxuICAgICAgcmF3OiByYXdWYWx1ZSxcbiAgICAgIGRlZjogZGVmLFxuICAgICAgYXJnOiBhcmcsXG4gICAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcbiAgICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuICAgICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnMsXG4gICAgICBpbnRlcnA6IGludGVycFxuICAgIH0pXG4gIH1cblxuICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycylcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIG1vZGlmaWVycyBmcm9tIGRpcmVjdGl2ZSBhdHRyaWJ1dGUgbmFtZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlTW9kaWZpZXJzIChuYW1lKSB7XG4gIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpXG4gIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSlcbiAgaWYgKG1hdGNoKSB7XG4gICAgdmFyIGkgPSBtYXRjaC5sZW5ndGhcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qKlxuICogQnVpbGQgYSBsaW5rIGZ1bmN0aW9uIGZvciBhbGwgZGlyZWN0aXZlcyBvbiBhIHNpbmdsZSBub2RlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBkaXJlY3RpdmVzTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZU5vZGVMaW5rRm4gKGRpcmVjdGl2ZXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVMaW5rRm4gKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAvLyByZXZlcnNlIGFwcGx5IGJlY2F1c2UgaXQncyBzb3J0ZWQgbG93IHRvIGhpZ2hcbiAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdm0uX2JpbmREaXIoZGlyZWN0aXZlc1tpXSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKVxuICAgIH1cbiAgfVxufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcblxuXy5leHRlbmQoZXhwb3J0cywgcmVxdWlyZSgnLi9jb21waWxlJykpXG5fLmV4dGVuZChleHBvcnRzLCByZXF1aXJlKCcuL3RyYW5zY2x1ZGUnKSlcbiIsInZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgdGVtcGxhdGVQYXJzZXIgPSByZXF1aXJlKCcuLi9wYXJzZXJzL3RlbXBsYXRlJylcbnZhciBzcGVjaWFsQ2hhclJFID0gL1teXFx3XFwtOlxcLl0vXG5cbi8qKlxuICogUHJvY2VzcyBhbiBlbGVtZW50IG9yIGEgRG9jdW1lbnRGcmFnbWVudCBiYXNlZCBvbiBhXG4gKiBpbnN0YW5jZSBvcHRpb24gb2JqZWN0LiBUaGlzIGFsbG93cyB1cyB0byB0cmFuc2NsdWRlXG4gKiBhIHRlbXBsYXRlIG5vZGUvZnJhZ21lbnQgYmVmb3JlIHRoZSBpbnN0YW5jZSBpcyBjcmVhdGVkLFxuICogc28gdGhlIHByb2Nlc3NlZCBmcmFnbWVudCBjYW4gdGhlbiBiZSBjbG9uZWQgYW5kIHJldXNlZFxuICogaW4gdi1mb3IuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5leHBvcnRzLnRyYW5zY2x1ZGUgPSBmdW5jdGlvbiAoZWwsIG9wdGlvbnMpIHtcbiAgLy8gZXh0cmFjdCBjb250YWluZXIgYXR0cmlidXRlcyB0byBwYXNzIHRoZW0gZG93blxuICAvLyB0byBjb21waWxlciwgYmVjYXVzZSB0aGV5IG5lZWQgdG8gYmUgY29tcGlsZWQgaW5cbiAgLy8gcGFyZW50IHNjb3BlLiB3ZSBhcmUgbXV0YXRpbmcgdGhlIG9wdGlvbnMgb2JqZWN0IGhlcmVcbiAgLy8gYXNzdW1pbmcgdGhlIHNhbWUgb2JqZWN0IHdpbGwgYmUgdXNlZCBmb3IgY29tcGlsZVxuICAvLyByaWdodCBhZnRlciB0aGlzLlxuICBpZiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gZXh0cmFjdEF0dHJzKGVsKVxuICB9XG4gIC8vIGZvciB0ZW1wbGF0ZSB0YWdzLCB3aGF0IHdlIHdhbnQgaXMgaXRzIGNvbnRlbnQgYXNcbiAgLy8gYSBkb2N1bWVudEZyYWdtZW50IChmb3IgZnJhZ21lbnQgaW5zdGFuY2VzKVxuICBpZiAoXy5pc1RlbXBsYXRlKGVsKSkge1xuICAgIGVsID0gdGVtcGxhdGVQYXJzZXIucGFyc2UoZWwpXG4gIH1cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQgJiYgIW9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSAnPHNsb3Q+PC9zbG90PidcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgIG9wdGlvbnMuX2NvbnRlbnQgPSBfLmV4dHJhY3RDb250ZW50KGVsKVxuICAgICAgZWwgPSB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpXG4gICAgfVxuICB9XG4gIGlmIChlbCBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAvLyBhbmNob3JzIGZvciBmcmFnbWVudCBpbnN0YW5jZVxuICAgIC8vIHBhc3NpbmcgaW4gYHBlcnNpc3Q6IHRydWVgIHRvIGF2b2lkIHRoZW0gYmVpbmdcbiAgICAvLyBkaXNjYXJkZWQgYnkgSUUgZHVyaW5nIHRlbXBsYXRlIGNsb25pbmdcbiAgICBfLnByZXBlbmQoXy5jcmVhdGVBbmNob3IoJ3Ytc3RhcnQnLCB0cnVlKSwgZWwpXG4gICAgZWwuYXBwZW5kQ2hpbGQoXy5jcmVhdGVBbmNob3IoJ3YtZW5kJywgdHJ1ZSkpXG4gIH1cbiAgcmV0dXJuIGVsXG59XG5cbi8qKlxuICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uLlxuICogSWYgdGhlIHJlcGxhY2Ugb3B0aW9uIGlzIHRydWUgdGhpcyB3aWxsIHN3YXAgdGhlICRlbC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHRyYW5zY2x1ZGVUZW1wbGF0ZSAoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZVxuICB2YXIgZnJhZyA9IHRlbXBsYXRlUGFyc2VyLnBhcnNlKHRlbXBsYXRlLCB0cnVlKVxuICBpZiAoZnJhZykge1xuICAgIHZhciByZXBsYWNlciA9IGZyYWcuZmlyc3RDaGlsZFxuICAgIHZhciB0YWcgPSByZXBsYWNlci50YWdOYW1lICYmIHJlcGxhY2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKVxuICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGVsID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAgICdZb3UgYXJlIG1vdW50aW5nIGFuIGluc3RhbmNlIHdpdGggYSB0ZW1wbGF0ZSB0byAnICtcbiAgICAgICAgICAnPGJvZHk+LiBUaGlzIHdpbGwgcmVwbGFjZSA8Ym9keT4gZW50aXJlbHkuIFlvdSAnICtcbiAgICAgICAgICAnc2hvdWxkIHByb2JhYmx5IHVzZSBgcmVwbGFjZTogZmFsc2VgIGhlcmUuJ1xuICAgICAgICApXG4gICAgICB9XG4gICAgICAvLyB0aGVyZSBhcmUgbWFueSBjYXNlcyB3aGVyZSB0aGUgaW5zdGFuY2UgbXVzdFxuICAgICAgLy8gYmVjb21lIGEgZnJhZ21lbnQgaW5zdGFuY2U6IGJhc2ljYWxseSBhbnl0aGluZyB0aGF0XG4gICAgICAvLyBjYW4gY3JlYXRlIG1vcmUgdGhhbiAxIHJvb3Qgbm9kZXMuXG4gICAgICBpZiAoXG4gICAgICAgIC8vIG11bHRpLWNoaWxkcmVuIHRlbXBsYXRlXG4gICAgICAgIGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPiAxIHx8XG4gICAgICAgIC8vIG5vbi1lbGVtZW50IHRlbXBsYXRlXG4gICAgICAgIHJlcGxhY2VyLm5vZGVUeXBlICE9PSAxIHx8XG4gICAgICAgIC8vIHNpbmdsZSBuZXN0ZWQgY29tcG9uZW50XG4gICAgICAgIHRhZyA9PT0gJ2NvbXBvbmVudCcgfHxcbiAgICAgICAgXy5yZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpIHx8XG4gICAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgnaXMnKSB8fFxuICAgICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJzppcycpIHx8XG4gICAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1iaW5kOmlzJykgfHxcbiAgICAgICAgLy8gZWxlbWVudCBkaXJlY3RpdmVcbiAgICAgICAgXy5yZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKSB8fFxuICAgICAgICAvLyBmb3IgYmxvY2tcbiAgICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWZvcicpIHx8XG4gICAgICAgIC8vIGlmIGJsb2NrXG4gICAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1pZicpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZyYWdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBleHRyYWN0QXR0cnMocmVwbGFjZXIpXG4gICAgICAgIG1lcmdlQXR0cnMoZWwsIHJlcGxhY2VyKVxuICAgICAgICByZXR1cm4gcmVwbGFjZXJcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwuYXBwZW5kQ2hpbGQoZnJhZylcbiAgICAgIHJldHVybiBlbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICdJbnZhbGlkIHRlbXBsYXRlIG9wdGlvbjogJyArIHRlbXBsYXRlXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGV4dHJhY3QgYSBjb21wb25lbnQgY29udGFpbmVyJ3MgYXR0cmlidXRlc1xuICogaW50byBhIHBsYWluIG9iamVjdCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0QXR0cnMgKGVsKSB7XG4gIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBlbC5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICByZXR1cm4gXy50b0FycmF5KGVsLmF0dHJpYnV0ZXMpXG4gIH1cbn1cblxuLyoqXG4gKiBNZXJnZSB0aGUgYXR0cmlidXRlcyBvZiB0d28gZWxlbWVudHMsIGFuZCBtYWtlIHN1cmVcbiAqIHRoZSBjbGFzcyBuYW1lcyBhcmUgbWVyZ2VkIHByb3Blcmx5LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZnJvbVxuICogQHBhcmFtIHtFbGVtZW50fSB0b1xuICovXG5cbmZ1bmN0aW9uIG1lcmdlQXR0cnMgKGZyb20sIHRvKSB7XG4gIHZhciBhdHRycyA9IGZyb20uYXR0cmlidXRlc1xuICB2YXIgaSA9IGF0dHJzLmxlbmd0aFxuICB2YXIgbmFtZSwgdmFsdWVcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lXG4gICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZVxuICAgIGlmICghdG8uaGFzQXR0cmlidXRlKG5hbWUpICYmICFzcGVjaWFsQ2hhclJFLnRlc3QobmFtZSkpIHtcbiAgICAgIHRvLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSlcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgIHZhbHVlID0gdG8uZ2V0QXR0cmlidXRlKG5hbWUpICsgJyAnICsgdmFsdWVcbiAgICAgIHRvLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSlcbiAgICB9XG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByaW50IGRlYnVnIG1lc3NhZ2VzLlxuICAgKiBBbHNvIGVuYWJsZXMgc3RhY2sgdHJhY2UgZm9yIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZGVidWc6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgc2lsZW50OiBmYWxzZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB1c2UgYXN5bmMgcmVuZGVyaW5nLlxuICAgKi9cblxuICBhc3luYzogdHJ1ZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB3YXJuIGFnYWluc3QgZXJyb3JzIGNhdWdodCB3aGVuIGV2YWx1YXRpbmdcbiAgICogZXhwcmVzc2lvbnMuXG4gICAqL1xuXG4gIHdhcm5FeHByZXNzaW9uRXJyb3JzOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0byBoYW5kbGUgZnVsbHkgb2JqZWN0IHByb3BlcnRpZXMgd2hpY2hcbiAgICogYXJlIGFscmVhZHkgYmFja2VkIGJ5IGdldHRlcnMgYW5kIHNldGVycy4gRGVwZW5kaW5nIG9uXG4gICAqIHVzZSBjYXNlIGFuZCBlbnZpcm9ubWVudCwgdGhpcyBtaWdodCBpbnRyb2R1Y2Ugbm9uLW5lZ2xpYmxlXG4gICAqIHBlcmZvcm1hbmNlIHBlbmFsdGllcy5cbiAgICovXG4gIGNvbnZlcnRBbGxQcm9wZXJ0aWVzOiBmYWxzZSxcblxuICAvKipcbiAgICogSW50ZXJuYWwgZmxhZyB0byBpbmRpY2F0ZSB0aGUgZGVsaW1pdGVycyBoYXZlIGJlZW5cbiAgICogY2hhbmdlZC5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIF9kZWxpbWl0ZXJzQ2hhbmdlZDogdHJ1ZSxcblxuICAvKipcbiAgICogTGlzdCBvZiBhc3NldCB0eXBlcyB0aGF0IGEgY29tcG9uZW50IGNhbiBvd24uXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheX1cbiAgICovXG5cbiAgX2Fzc2V0VHlwZXM6IFtcbiAgICAnY29tcG9uZW50JyxcbiAgICAnZGlyZWN0aXZlJyxcbiAgICAnZWxlbWVudERpcmVjdGl2ZScsXG4gICAgJ2ZpbHRlcicsXG4gICAgJ3RyYW5zaXRpb24nLFxuICAgICdwYXJ0aWFsJ1xuICBdLFxuXG4gIC8qKlxuICAgKiBwcm9wIGJpbmRpbmcgbW9kZXNcbiAgICovXG5cbiAgX3Byb3BCaW5kaW5nTW9kZXM6IHtcbiAgICBPTkVfV0FZOiAwLFxuICAgIFRXT19XQVk6IDEsXG4gICAgT05FX1RJTUU6IDJcbiAgfSxcblxuICAvKipcbiAgICogTWF4IGNpcmN1bGFyIHVwZGF0ZXMgYWxsb3dlZCBpbiBhIGJhdGNoZXIgZmx1c2ggY3ljbGUuXG4gICAqL1xuXG4gIF9tYXhVcGRhdGVDb3VudDogMTAwXG5cbn1cblxuLyoqXG4gKiBJbnRlcnBvbGF0aW9uIGRlbGltaXRlcnMuIENoYW5naW5nIHRoZXNlIHdvdWxkIHRyaWdnZXJcbiAqIHRoZSB0ZXh0IHBhcnNlciB0byByZS1jb21waWxlIHRoZSByZWd1bGFyIGV4cHJlc3Npb25zLlxuICpcbiAqIEB0eXBlIHtBcnJheTxTdHJpbmc+fVxuICovXG5cbnZhciBkZWxpbWl0ZXJzID0gWyd7eycsICd9fSddXG52YXIgdW5zYWZlRGVsaW1pdGVycyA9IFsne3t7JywgJ319fSddXG52YXIgdGV4dFBhcnNlciA9IHJlcXVpcmUoJy4vcGFyc2Vycy90ZXh0JylcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCAnZGVsaW1pdGVycycsIHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRlbGltaXRlcnNcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgZGVsaW1pdGVycyA9IHZhbFxuICAgIHRleHRQYXJzZXIuY29tcGlsZVJlZ2V4KClcbiAgfVxufSlcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCAndW5zYWZlRGVsaW1pdGVycycsIHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHVuc2FmZURlbGltaXRlcnNcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgdW5zYWZlRGVsaW1pdGVycyA9IHZhbFxuICAgIHRleHRQYXJzZXIuY29tcGlsZVJlZ2V4KClcbiAgfVxufSlcbiIsInZhciBfID0gcmVxdWlyZSgnLi91dGlsJylcbnZhciBXYXRjaGVyID0gcmVxdWlyZSgnLi93YXRjaGVyJylcbnZhciBleHBQYXJzZXIgPSByZXF1aXJlKCcuL3BhcnNlcnMvZXhwcmVzc2lvbicpXG5mdW5jdGlvbiBub29wICgpIHt9XG5cbi8qKlxuICogQSBkaXJlY3RpdmUgbGlua3MgYSBET00gZWxlbWVudCB3aXRoIGEgcGllY2Ugb2YgZGF0YSxcbiAqIHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyBhbiBleHByZXNzaW9uLlxuICogSXQgcmVnaXN0ZXJzIGEgd2F0Y2hlciB3aXRoIHRoZSBleHByZXNzaW9uIGFuZCBjYWxsc1xuICogdGhlIERPTSB1cGRhdGUgZnVuY3Rpb24gd2hlbiBhIGNoYW5nZSBpcyB0cmlnZ2VyZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3JcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IG5hbWVcbiAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IGRlZlxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gZXhwcmVzc2lvblxuICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtmaWx0ZXJzXVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxpdGVyYWxcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGF0dHJcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IHJhd1xuICogQHBhcmFtIHtPYmplY3R9IGRlZiAtIGRpcmVjdGl2ZSBkZWZpbml0aW9uIG9iamVjdFxuICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIERpcmVjdGl2ZSAoZGVzY3JpcHRvciwgdm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICB0aGlzLnZtID0gdm1cbiAgdGhpcy5lbCA9IGVsXG4gIC8vIGNvcHkgZGVzY3JpcHRvciBwcm9wZXJ0aWVzXG4gIHRoaXMuZGVzY3JpcHRvciA9IGRlc2NyaXB0b3JcbiAgdGhpcy5uYW1lID0gZGVzY3JpcHRvci5uYW1lXG4gIHRoaXMuZXhwcmVzc2lvbiA9IGRlc2NyaXB0b3IuZXhwcmVzc2lvblxuICB0aGlzLmFyZyA9IGRlc2NyaXB0b3IuYXJnXG4gIHRoaXMubW9kaWZpZXJzID0gZGVzY3JpcHRvci5tb2RpZmllcnNcbiAgdGhpcy5maWx0ZXJzID0gZGVzY3JpcHRvci5maWx0ZXJzXG4gIHRoaXMubGl0ZXJhbCA9IHRoaXMubW9kaWZpZXJzICYmIHRoaXMubW9kaWZpZXJzLmxpdGVyYWxcbiAgLy8gcHJpdmF0ZVxuICB0aGlzLl9sb2NrZWQgPSBmYWxzZVxuICB0aGlzLl9ib3VuZCA9IGZhbHNlXG4gIHRoaXMuX2xpc3RlbmVycyA9IG51bGxcbiAgLy8gbGluayBjb250ZXh0XG4gIHRoaXMuX2hvc3QgPSBob3N0XG4gIHRoaXMuX3Njb3BlID0gc2NvcGVcbiAgdGhpcy5fZnJhZyA9IGZyYWdcbiAgLy8gc3RvcmUgZGlyZWN0aXZlcyBvbiBub2RlIGluIGRldiBtb2RlXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcbiAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyA9IHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzIHx8IFtdXG4gICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMucHVzaCh0aGlzKVxuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgZGlyZWN0aXZlLCBtaXhpbiBkZWZpbml0aW9uIHByb3BlcnRpZXMsXG4gKiBzZXR1cCB0aGUgd2F0Y2hlciwgY2FsbCBkZWZpbml0aW9uIGJpbmQoKSBhbmQgdXBkYXRlKClcbiAqIGlmIHByZXNlbnQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlZlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX2JpbmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBuYW1lID0gdGhpcy5uYW1lXG4gIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yXG5cbiAgLy8gcmVtb3ZlIGF0dHJpYnV0ZVxuICBpZiAoXG4gICAgKG5hbWUgIT09ICdjbG9haycgfHwgdGhpcy52bS5faXNDb21waWxlZCkgJiZcbiAgICB0aGlzLmVsICYmIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlXG4gICkge1xuICAgIHZhciBhdHRyID0gZGVzY3JpcHRvci5hdHRyIHx8ICgndi0nICsgbmFtZSlcbiAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKVxuICB9XG5cbiAgLy8gY29weSBkZWYgcHJvcGVydGllc1xuICB2YXIgZGVmID0gZGVzY3JpcHRvci5kZWZcbiAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLnVwZGF0ZSA9IGRlZlxuICB9IGVsc2Uge1xuICAgIF8uZXh0ZW5kKHRoaXMsIGRlZilcbiAgfVxuXG4gIC8vIHNldHVwIGRpcmVjdGl2ZSBwYXJhbXNcbiAgdGhpcy5fc2V0dXBQYXJhbXMoKVxuXG4gIC8vIGluaXRpYWwgYmluZFxuICBpZiAodGhpcy5iaW5kKSB7XG4gICAgdGhpcy5iaW5kKClcbiAgfVxuXG4gIGlmICh0aGlzLmxpdGVyYWwpIHtcbiAgICB0aGlzLnVwZGF0ZSAmJiB0aGlzLnVwZGF0ZShkZXNjcmlwdG9yLnJhdylcbiAgfSBlbHNlIGlmIChcbiAgICAodGhpcy5leHByZXNzaW9uIHx8IHRoaXMubW9kaWZpZXJzKSAmJlxuICAgICh0aGlzLnVwZGF0ZSB8fCB0aGlzLnR3b1dheSkgJiZcbiAgICAhdGhpcy5fY2hlY2tTdGF0ZW1lbnQoKVxuICApIHtcbiAgICAvLyB3cmFwcGVkIHVwZGF0ZXIgZm9yIGNvbnRleHRcbiAgICB2YXIgZGlyID0gdGhpc1xuICAgIGlmICh0aGlzLnVwZGF0ZSkge1xuICAgICAgdGhpcy5fdXBkYXRlID0gZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG4gICAgICAgIGlmICghZGlyLl9sb2NrZWQpIHtcbiAgICAgICAgICBkaXIudXBkYXRlKHZhbCwgb2xkVmFsKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IG5vb3BcbiAgICB9XG4gICAgdmFyIHByZVByb2Nlc3MgPSB0aGlzLl9wcmVQcm9jZXNzXG4gICAgICA/IF8uYmluZCh0aGlzLl9wcmVQcm9jZXNzLCB0aGlzKVxuICAgICAgOiBudWxsXG4gICAgdmFyIHBvc3RQcm9jZXNzID0gdGhpcy5fcG9zdFByb2Nlc3NcbiAgICAgID8gXy5iaW5kKHRoaXMuX3Bvc3RQcm9jZXNzLCB0aGlzKVxuICAgICAgOiBudWxsXG4gICAgdmFyIHdhdGNoZXIgPSB0aGlzLl93YXRjaGVyID0gbmV3IFdhdGNoZXIoXG4gICAgICB0aGlzLnZtLFxuICAgICAgdGhpcy5leHByZXNzaW9uLFxuICAgICAgdGhpcy5fdXBkYXRlLCAvLyBjYWxsYmFja1xuICAgICAge1xuICAgICAgICBmaWx0ZXJzOiB0aGlzLmZpbHRlcnMsXG4gICAgICAgIHR3b1dheTogdGhpcy50d29XYXksXG4gICAgICAgIGRlZXA6IHRoaXMuZGVlcCxcbiAgICAgICAgcHJlUHJvY2VzczogcHJlUHJvY2VzcyxcbiAgICAgICAgcG9zdFByb2Nlc3M6IHBvc3RQcm9jZXNzLFxuICAgICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICAgIH1cbiAgICApXG4gICAgLy8gdi1tb2RlbCB3aXRoIGluaXRhbCBpbmxpbmUgdmFsdWUgbmVlZCB0byBzeW5jIGJhY2sgdG9cbiAgICAvLyBtb2RlbCBpbnN0ZWFkIG9mIHVwZGF0ZSB0byBET00gb24gaW5pdC4gVGhleSB3b3VsZFxuICAgIC8vIHNldCB0aGUgYWZ0ZXJCaW5kIGhvb2sgdG8gaW5kaWNhdGUgdGhhdC5cbiAgICBpZiAodGhpcy5hZnRlckJpbmQpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kKClcbiAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh3YXRjaGVyLnZhbHVlKVxuICAgIH1cbiAgfVxuICB0aGlzLl9ib3VuZCA9IHRydWVcbn1cblxuLyoqXG4gKiBTZXR1cCBhbGwgcGFyYW0gYXR0cmlidXRlcywgZS5nLiB0cmFjay1ieSxcbiAqIHRyYW5zaXRpb24tbW9kZSwgZXRjLi4uXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5wYXJhbXMpIHtcbiAgICByZXR1cm5cbiAgfVxuICB2YXIgcGFyYW1zID0gdGhpcy5wYXJhbXNcbiAgLy8gc3dhcCB0aGUgcGFyYW1zIGFycmF5IHdpdGggYSBmcmVzaCBvYmplY3QuXG4gIHRoaXMucGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuICB2YXIgaSA9IHBhcmFtcy5sZW5ndGhcbiAgdmFyIGtleSwgdmFsLCBtYXBwZWRLZXlcbiAgd2hpbGUgKGktLSkge1xuICAgIGtleSA9IHBhcmFtc1tpXVxuICAgIG1hcHBlZEtleSA9IF8uY2FtZWxpemUoa2V5KVxuICAgIHZhbCA9IF8uZ2V0QmluZEF0dHIodGhpcy5lbCwga2V5KVxuICAgIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgLy8gZHluYW1pY1xuICAgICAgdGhpcy5fc2V0dXBQYXJhbVdhdGNoZXIobWFwcGVkS2V5LCB2YWwpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHN0YXRpY1xuICAgICAgdmFsID0gXy5hdHRyKHRoaXMuZWwsIGtleSlcbiAgICAgIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhcmFtc1ttYXBwZWRLZXldID0gdmFsID09PSAnJyA/IHRydWUgOiB2YWxcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTZXR1cCBhIHdhdGNoZXIgZm9yIGEgZHluYW1pYyBwYXJhbS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwcmVzc2lvblxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1XYXRjaGVyID0gZnVuY3Rpb24gKGtleSwgZXhwcmVzc2lvbikge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgdmFyIGNhbGxlZCA9IGZhbHNlXG4gIHZhciB1bndhdGNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiR3YXRjaChleHByZXNzaW9uLCBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcbiAgICBzZWxmLnBhcmFtc1trZXldID0gdmFsXG4gICAgLy8gc2luY2Ugd2UgYXJlIGluIGltbWVkaWF0ZSBtb2RlLFxuICAgIC8vIG9ubHkgY2FsbCB0aGUgcGFyYW0gY2hhbmdlIGNhbGxiYWNrcyBpZiB0aGlzIGlzIG5vdCB0aGUgZmlyc3QgdXBkYXRlLlxuICAgIGlmIChjYWxsZWQpIHtcbiAgICAgIHZhciBjYiA9IHNlbGYucGFyYW1XYXRjaGVycyAmJiBzZWxmLnBhcmFtV2F0Y2hlcnNba2V5XVxuICAgICAgaWYgKGNiKSB7XG4gICAgICAgIGNiLmNhbGwoc2VsZiwgdmFsLCBvbGRWYWwpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxlZCA9IHRydWVcbiAgICB9XG4gIH0sIHtcbiAgICBpbW1lZGlhdGU6IHRydWVcbiAgfSlcbiAgOyh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgfHwgKHRoaXMuX3BhcmFtVW53YXRjaEZucyA9IFtdKSkucHVzaCh1bndhdGNoKVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBkaXJlY3RpdmUgaXMgYSBmdW5jdGlvbiBjYWxsZXJcbiAqIGFuZCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIGNhbGxhYmxlIG9uZS4gSWYgYm90aCB0cnVlLFxuICogd2Ugd3JhcCB1cCB0aGUgZXhwcmVzc2lvbiBhbmQgdXNlIGl0IGFzIHRoZSBldmVudFxuICogaGFuZGxlci5cbiAqXG4gKiBlLmcuIG9uLWNsaWNrPVwiYSsrXCJcbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX2NoZWNrU3RhdGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMuZXhwcmVzc2lvblxuICBpZiAoXG4gICAgZXhwcmVzc2lvbiAmJiB0aGlzLmFjY2VwdFN0YXRlbWVudCAmJlxuICAgICFleHBQYXJzZXIuaXNTaW1wbGVQYXRoKGV4cHJlc3Npb24pXG4gICkge1xuICAgIHZhciBmbiA9IGV4cFBhcnNlci5wYXJzZShleHByZXNzaW9uKS5nZXRcbiAgICB2YXIgc2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtXG4gICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgc2NvcGUuJGV2ZW50ID0gZVxuICAgICAgZm4uY2FsbChzY29wZSwgc2NvcGUpXG4gICAgICBzY29wZS4kZXZlbnQgPSBudWxsXG4gICAgfVxuICAgIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICAgIGhhbmRsZXIgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKGhhbmRsZXIsIG51bGwsIHRoaXMuZmlsdGVycylcbiAgICB9XG4gICAgdGhpcy51cGRhdGUoaGFuZGxlcilcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG59XG5cbi8qKlxuICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cbiAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0d28td2F5IGRpcmVjdGl2ZXNcbiAqIGUuZy4gdi1tb2RlbC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcHVibGljXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKHRoaXMudHdvV2F5KSB7XG4gICAgdGhpcy5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fd2F0Y2hlci5zZXQodmFsdWUpXG4gICAgfSlcbiAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXy53YXJuKFxuICAgICAgJ0RpcmVjdGl2ZS5zZXQoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSB0d29XYXknICtcbiAgICAgICdkaXJlY3RpdmVzLidcbiAgICApXG4gIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlIGEgZnVuY3Rpb24gd2hpbGUgcHJldmVudGluZyB0aGF0IGZ1bmN0aW9uIGZyb21cbiAqIHRyaWdnZXJpbmcgdXBkYXRlcyBvbiB0aGlzIGRpcmVjdGl2ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3dpdGhMb2NrID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBzZWxmLl9sb2NrZWQgPSB0cnVlXG4gIGZuLmNhbGwoc2VsZilcbiAgXy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fbG9ja2VkID0gZmFsc2VcbiAgfSlcbn1cblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdGhhdCBhdHRhY2hlcyBhIERPTSBldmVudCBsaXN0ZW5lclxuICogdG8gdGhlIGRpcmVjdGl2ZSBlbGVtZW50IGFuZCBhdXRvbWV0aWNhbGx5IHRlYXJzIGl0IGRvd25cbiAqIGR1cmluZyB1bmJpbmQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgaGFuZGxlcikge1xuICBfLm9uKHRoaXMuZWwsIGV2ZW50LCBoYW5kbGVyKVxuICA7KHRoaXMuX2xpc3RlbmVycyB8fCAodGhpcy5fbGlzdGVuZXJzID0gW10pKVxuICAgIC5wdXNoKFtldmVudCwgaGFuZGxlcl0pXG59XG5cbi8qKlxuICogVGVhcmRvd24gdGhlIHdhdGNoZXIgYW5kIGNhbGwgdW5iaW5kLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3RlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5fYm91bmQpIHtcbiAgICB0aGlzLl9ib3VuZCA9IGZhbHNlXG4gICAgaWYgKHRoaXMudW5iaW5kKSB7XG4gICAgICB0aGlzLnVuYmluZCgpXG4gICAgfVxuICAgIGlmICh0aGlzLl93YXRjaGVyKSB7XG4gICAgICB0aGlzLl93YXRjaGVyLnRlYXJkb3duKClcbiAgICB9XG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc1xuICAgIHZhciBpXG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgaSA9IGxpc3RlbmVycy5sZW5ndGhcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgXy5vZmYodGhpcy5lbCwgbGlzdGVuZXJzW2ldWzBdLCBsaXN0ZW5lcnNbaV1bMV0pXG4gICAgICB9XG4gICAgfVxuICAgIHZhciB1bndhdGNoRm5zID0gdGhpcy5fcGFyYW1VbndhdGNoRm5zXG4gICAgaWYgKHVud2F0Y2hGbnMpIHtcbiAgICAgIGkgPSB1bndhdGNoRm5zLmxlbmd0aFxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB1bndhdGNoRm5zW2ldKClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuICAgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMuJHJlbW92ZSh0aGlzKVxuICAgIH1cbiAgICB0aGlzLnZtID0gdGhpcy5lbCA9IHRoaXMuX3dhdGNoZXIgPSB0aGlzLl9saXN0ZW5lcnMgPSBudWxsXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBEaXJlY3RpdmVcbiIsImV4cG9ydHMuc2xvdCA9IHJlcXVpcmUoJy4vc2xvdCcpXG5leHBvcnRzLnBhcnRpYWwgPSByZXF1aXJlKCcuL3BhcnRpYWwnKVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi8uLi91dGlsJylcbnZhciB2SWYgPSByZXF1aXJlKCcuLi9wdWJsaWMvaWYnKVxudmFyIEZyYWdtZW50RmFjdG9yeSA9IHJlcXVpcmUoJy4uLy4uL2ZyYWdtZW50L2ZhY3RvcnknKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBwcmlvcml0eTogMTc1MCxcblxuICBwYXJhbXM6IFsnbmFtZSddLFxuXG4gIC8vIHdhdGNoIGNoYW5nZXMgdG8gbmFtZSBmb3IgZHluYW1pYyBwYXJ0aWFsc1xuICBwYXJhbVdhdGNoZXJzOiB7XG4gICAgbmFtZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB2SWYucmVtb3ZlLmNhbGwodGhpcylcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmluc2VydCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYW5jaG9yID0gXy5jcmVhdGVBbmNob3IoJ3YtcGFydGlhbCcpXG4gICAgXy5yZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKVxuICAgIHRoaXMuaW5zZXJ0KHRoaXMucGFyYW1zLm5hbWUpXG4gIH0sXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiAoaWQpIHtcbiAgICB2YXIgcGFydGlhbCA9IF8ucmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdwYXJ0aWFscycsIGlkKVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBfLmFzc2VydEFzc2V0KHBhcnRpYWwsICdwYXJ0aWFsJywgaWQpXG4gICAgfVxuICAgIGlmIChwYXJ0aWFsKSB7XG4gICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHBhcnRpYWwpXG4gICAgICB2SWYuaW5zZXJ0LmNhbGwodGhpcylcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZnJhZykge1xuICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKVxuICAgIH1cbiAgfVxufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi8uLi91dGlsJylcbnZhciB0ZW1wbGF0ZVBhcnNlciA9IHJlcXVpcmUoJy4uLy4uL3BhcnNlcnMvdGVtcGxhdGUnKVxuXG4vLyBUaGlzIGlzIHRoZSBlbGVtZW50RGlyZWN0aXZlIHRoYXQgaGFuZGxlcyA8Y29udGVudD5cbi8vIHRyYW5zY2x1c2lvbnMuIEl0IHJlbGllcyBvbiB0aGUgcmF3IGNvbnRlbnQgb2YgYW5cbi8vIGluc3RhbmNlIGJlaW5nIHN0b3JlZCBhcyBgJG9wdGlvbnMuX2NvbnRlbnRgIGR1cmluZ1xuLy8gdGhlIHRyYW5zY2x1ZGUgcGhhc2UuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIHByaW9yaXR5OiAxNzUwLFxuXG4gIHBhcmFtczogWyduYW1lJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBob3N0ID0gdGhpcy52bVxuICAgIHZhciByYXcgPSBob3N0LiRvcHRpb25zLl9jb250ZW50XG4gICAgdmFyIGNvbnRlbnRcbiAgICBpZiAoIXJhdykge1xuICAgICAgdGhpcy5mYWxsYmFjaygpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdmFyIGNvbnRleHQgPSBob3N0Ll9jb250ZXh0XG4gICAgdmFyIHNsb3ROYW1lID0gdGhpcy5wYXJhbXMubmFtZVxuICAgIGlmICghc2xvdE5hbWUpIHtcbiAgICAgIC8vIERlZmF1bHQgY29udGVudFxuICAgICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgICB2YXIgY29tcGlsZURlZmF1bHRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmNvbXBpbGUoXG4gICAgICAgICAgZXh0cmFjdEZyYWdtZW50KHJhdy5jaGlsZE5vZGVzLCByYXcsIHRydWUpLFxuICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgaG9zdFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoIWhvc3QuX2lzQ29tcGlsZWQpIHtcbiAgICAgICAgLy8gZGVmZXIgdW50aWwgdGhlIGVuZCBvZiBpbnN0YW5jZSBjb21waWxhdGlvbixcbiAgICAgICAgLy8gYmVjYXVzZSB0aGUgZGVmYXVsdCBvdXRsZXQgbXVzdCB3YWl0IHVudGlsIGFsbFxuICAgICAgICAvLyBvdGhlciBwb3NzaWJsZSBvdXRsZXRzIHdpdGggc2VsZWN0b3JzIGhhdmUgcGlja2VkXG4gICAgICAgIC8vIG91dCB0aGVpciBjb250ZW50cy5cbiAgICAgICAgaG9zdC4kb25jZSgnaG9vazpjb21waWxlZCcsIGNvbXBpbGVEZWZhdWx0Q29udGVudClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBpbGVEZWZhdWx0Q29udGVudCgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzZWxlY3RvciA9ICdbc2xvdD1cIicgKyBzbG90TmFtZSArICdcIl0nXG4gICAgICB2YXIgbm9kZXMgPSByYXcucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcilcbiAgICAgIGlmIChub2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgY29udGVudCA9IGV4dHJhY3RGcmFnbWVudChub2RlcywgcmF3KVxuICAgICAgICBpZiAoY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICB0aGlzLmNvbXBpbGUoY29udGVudCwgY29udGV4dCwgaG9zdClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmZhbGxiYWNrKClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mYWxsYmFjaygpXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGZhbGxiYWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jb21waWxlKF8uZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSksIHRoaXMudm0pXG4gIH0sXG5cbiAgY29tcGlsZTogZnVuY3Rpb24gKGNvbnRlbnQsIGNvbnRleHQsIGhvc3QpIHtcbiAgICBpZiAoY29udGVudCAmJiBjb250ZXh0KSB7XG4gICAgICB2YXIgc2NvcGUgPSBob3N0XG4gICAgICAgID8gaG9zdC5fc2NvcGVcbiAgICAgICAgOiB0aGlzLl9zY29wZVxuICAgICAgdGhpcy51bmxpbmsgPSBjb250ZXh0LiRjb21waWxlKFxuICAgICAgICBjb250ZW50LCBob3N0LCBzY29wZSwgdGhpcy5fZnJhZ1xuICAgICAgKVxuICAgIH1cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgXy5yZXBsYWNlKHRoaXMuZWwsIGNvbnRlbnQpXG4gICAgfSBlbHNlIHtcbiAgICAgIF8ucmVtb3ZlKHRoaXMuZWwpXG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnVubGluaykge1xuICAgICAgdGhpcy51bmxpbmsoKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgcXVhbGlmaWVkIGNvbnRlbnQgbm9kZXMgZnJvbSBhIG5vZGUgbGlzdC5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fSBub2Rlc1xuICogQHBhcmFtIHtFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbWFpblxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQgKG5vZGVzLCBwYXJlbnQsIG1haW4pIHtcbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgbm9kZSA9IG5vZGVzW2ldXG4gICAgLy8gaWYgdGhpcyBpcyB0aGUgbWFpbiBvdXRsZXQsIHdlIHdhbnQgdG8gc2tpcCBhbGxcbiAgICAvLyBwcmV2aW91c2x5IHNlbGVjdGVkIG5vZGVzO1xuICAgIC8vIG90aGVyd2lzZSwgd2Ugd2FudCB0byBtYXJrIHRoZSBub2RlIGFzIHNlbGVjdGVkLlxuICAgIC8vIGNsb25lIHRoZSBub2RlIHNvIHRoZSBvcmlnaW5hbCByYXcgY29udGVudCByZW1haW5zXG4gICAgLy8gaW50YWN0LiB0aGlzIGVuc3VyZXMgcHJvcGVyIHJlLWNvbXBpbGF0aW9uIGluIGNhc2VzXG4gICAgLy8gd2hlcmUgdGhlIG91dGxldCBpcyBpbnNpZGUgYSBjb25kaXRpb25hbCBibG9ja1xuICAgIGlmIChtYWluICYmICFub2RlLl9fdl9zZWxlY3RlZCkge1xuICAgICAgYXBwZW5kKG5vZGUpXG4gICAgfSBlbHNlIGlmICghbWFpbiAmJiBub2RlLnBhcmVudE5vZGUgPT09IHBhcmVudCkge1xuICAgICAgbm9kZS5fX3Zfc2VsZWN0ZWQgPSB0cnVlXG4gICAgICBhcHBlbmQobm9kZSlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZyYWdcblxuICBmdW5jdGlvbiBhcHBlbmQgKG5vZGUpIHtcbiAgICBpZiAoXy5pc1RlbXBsYXRlKG5vZGUpICYmXG4gICAgICAgICFub2RlLmhhc0F0dHJpYnV0ZSgndi1pZicpICYmXG4gICAgICAgICFub2RlLmhhc0F0dHJpYnV0ZSgndi1mb3InKSkge1xuICAgICAgbm9kZSA9IHRlbXBsYXRlUGFyc2VyLnBhcnNlKG5vZGUpXG4gICAgfVxuICAgIG5vZGUgPSB0ZW1wbGF0ZVBhcnNlci5jbG9uZShub2RlKVxuICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSlcbiAgfVxufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi8uLi91dGlsJylcbnZhciBhZGRDbGFzcyA9IF8uYWRkQ2xhc3NcbnZhciByZW1vdmVDbGFzcyA9IF8ucmVtb3ZlQ2xhc3NcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgZGVlcDogdHJ1ZSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdChzdHJpbmdUb09iamVjdCh2YWx1ZSkpXG4gICAgfSBlbHNlIGlmIChfLmlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSlcbiAgICB9IGVsc2UgaWYgKF8uaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHRoaXMuaGFuZGxlQXJyYXkodmFsdWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2xlYW51cCgpXG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZU9iamVjdDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5jbGVhbnVwKHZhbHVlKVxuICAgIHZhciBrZXlzID0gdGhpcy5wcmV2S2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldXG4gICAgICBpZiAodmFsdWVba2V5XSkge1xuICAgICAgICBhZGRDbGFzcyh0aGlzLmVsLCBrZXkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCBrZXkpXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZUFycmF5OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLmNsZWFudXAodmFsdWUpXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGlmICh2YWx1ZVtpXSkge1xuICAgICAgICBhZGRDbGFzcyh0aGlzLmVsLCB2YWx1ZVtpXSlcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5wcmV2S2V5cyA9IHZhbHVlLnNsaWNlKClcbiAgfSxcblxuICBjbGVhbnVwOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodGhpcy5wcmV2S2V5cykge1xuICAgICAgdmFyIGkgPSB0aGlzLnByZXZLZXlzLmxlbmd0aFxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5wcmV2S2V5c1tpXVxuICAgICAgICBpZiAoa2V5ICYmICghdmFsdWUgfHwgIWNvbnRhaW5zKHZhbHVlLCBrZXkpKSkge1xuICAgICAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIGtleSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzdHJpbmdUb09iamVjdCAodmFsdWUpIHtcbiAgdmFyIHJlcyA9IHt9XG4gIHZhciBrZXlzID0gdmFsdWUudHJpbSgpLnNwbGl0KC9cXHMrLylcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgcmVzW2tleXNbaV1dID0gdHJ1ZVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gY29udGFpbnMgKHZhbHVlLCBrZXkpIHtcbiAgcmV0dXJuIF8uaXNBcnJheSh2YWx1ZSlcbiAgICA/IHZhbHVlLmluZGV4T2Yoa2V5KSA+IC0xXG4gICAgOiB2YWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpXG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxudmFyIHRlbXBsYXRlUGFyc2VyID0gcmVxdWlyZSgnLi4vLi4vcGFyc2Vycy90ZW1wbGF0ZScpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIHByaW9yaXR5OiAxNTAwLFxuXG4gIHBhcmFtczogW1xuICAgICdrZWVwLWFsaXZlJyxcbiAgICAndHJhbnNpdGlvbi1tb2RlJyxcbiAgICAnaW5saW5lLXRlbXBsYXRlJ1xuICBdLFxuXG4gIC8qKlxuICAgKiBTZXR1cC4gVHdvIHBvc3NpYmxlIHVzYWdlczpcbiAgICpcbiAgICogLSBzdGF0aWM6XG4gICAqICAgPGNvbXA+IG9yIDxkaXYgdi1jb21wb25lbnQ9XCJjb21wXCI+XG4gICAqXG4gICAqIC0gZHluYW1pYzpcbiAgICogICA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cbiAgICovXG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5lbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXG4gICAgICB0aGlzLmtlZXBBbGl2ZSA9IHRoaXMucGFyYW1zLmtlZXBBbGl2ZVxuICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSB7fVxuICAgICAgfVxuICAgICAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlXG4gICAgICBpZiAodGhpcy5wYXJhbXMuaW5saW5lVGVtcGxhdGUpIHtcbiAgICAgICAgLy8gZXh0cmFjdCBpbmxpbmUgdGVtcGxhdGUgYXMgYSBEb2N1bWVudEZyYWdtZW50XG4gICAgICAgIHRoaXMuaW5saW5lVGVtcGxhdGUgPSBfLmV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpXG4gICAgICB9XG4gICAgICAvLyBjb21wb25lbnQgcmVzb2x1dGlvbiByZWxhdGVkIHN0YXRlXG4gICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9XG4gICAgICB0aGlzLkNvbXBvbmVudCA9IG51bGxcbiAgICAgIC8vIHRyYW5zaXRpb24gcmVsYXRlZCBzdGF0ZVxuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMgPSAwXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsXG4gICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXG4gICAgICB0aGlzLmFuY2hvciA9IF8uY3JlYXRlQW5jaG9yKCd2LWNvbXBvbmVudCcpXG4gICAgICBfLnJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpXG4gICAgICAvLyByZW1vdmUgaXMgYXR0cmlidXRlLlxuICAgICAgLy8gdGhpcyBpcyByZW1vdmVkIGR1cmluZyBjb21waWxhdGlvbiwgYnV0IGJlY2F1c2UgY29tcGlsYXRpb24gaXNcbiAgICAgIC8vIGNhY2hlZCwgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVzZWQgZWxzZXdoZXJlIHRoaXMgYXR0cmlidXRlXG4gICAgICAvLyB3aWxsIHJlbWFpbiBhdCBsaW5rIHRpbWUuXG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKVxuICAgICAgLy8gcmVtb3ZlIHJlZiwgc2FtZSBhcyBhYm92ZVxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtcmVmOicgKyBfLmh5cGhlbmF0ZSh0aGlzLmRlc2NyaXB0b3IucmVmKSlcbiAgICAgIH1cbiAgICAgIC8vIGlmIHN0YXRpYywgYnVpbGQgcmlnaHQgbm93LlxuICAgICAgaWYgKHRoaXMubGl0ZXJhbCkge1xuICAgICAgICB0aGlzLnNldENvbXBvbmVudCh0aGlzLmV4cHJlc3Npb24pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAnY2Fubm90IG1vdW50IGNvbXBvbmVudCBcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgJyArXG4gICAgICAgICdvbiBhbHJlYWR5IG1vdW50ZWQgZWxlbWVudDogJyArIHRoaXMuZWxcbiAgICAgIClcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFB1YmxpYyB1cGRhdGUsIGNhbGxlZCBieSB0aGUgd2F0Y2hlciBpbiB0aGUgZHluYW1pY1xuICAgKiBsaXRlcmFsIHNjZW5hcmlvLCBlLmcuIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuICAgKi9cblxuICB1cGRhdGU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICghdGhpcy5saXRlcmFsKSB7XG4gICAgICB0aGlzLnNldENvbXBvbmVudCh2YWx1ZSlcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFN3aXRjaCBkeW5hbWljIGNvbXBvbmVudHMuIE1heSByZXNvbHZlIHRoZSBjb21wb25lbnRcbiAgICogYXN5bmNocm9ub3VzbHksIGFuZCBwZXJmb3JtIHRyYW5zaXRpb24gYmFzZWQgb25cbiAgICogc3BlY2lmaWVkIHRyYW5zaXRpb24gbW9kZS4gQWNjZXB0cyBhIGZldyBhZGRpdGlvbmFsXG4gICAqIGFyZ3VtZW50cyBzcGVjaWZpY2FsbHkgZm9yIHZ1ZS1yb3V0ZXIuXG4gICAqXG4gICAqIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgZnVsbCB0cmFuc2l0aW9uIGlzXG4gICAqIGZpbmlzaGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBzZXRDb21wb25lbnQ6IGZ1bmN0aW9uICh2YWx1ZSwgY2IpIHtcbiAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKClcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAvLyBqdXN0IHJlbW92ZSBjdXJyZW50XG4gICAgICB0aGlzLnVuYnVpbGQodHJ1ZSlcbiAgICAgIHRoaXMucmVtb3ZlKHRoaXMuY2hpbGRWTSwgY2IpXG4gICAgICB0aGlzLmNoaWxkVk0gPSBudWxsXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzZWxmID0gdGhpc1xuICAgICAgdGhpcy5yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYubW91bnRDb21wb25lbnQoY2IpXG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG4gICAqIHRoZSBjaGlsZCB2bS5cbiAgICovXG5cbiAgcmVzb2x2ZUNvbXBvbmVudDogZnVuY3Rpb24gKGlkLCBjYikge1xuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gXy5jYW5jZWxsYWJsZShmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgICBzZWxmLkNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQub3B0aW9ucy5uYW1lIHx8IGlkXG4gICAgICBzZWxmLkNvbXBvbmVudCA9IENvbXBvbmVudFxuICAgICAgY2IoKVxuICAgIH0pXG4gICAgdGhpcy52bS5fcmVzb2x2ZUNvbXBvbmVudChpZCwgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpXG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSB1c2luZyB0aGUgY3VycmVudCBjb25zdHJ1Y3RvciBhbmRcbiAgICogcmVwbGFjZSB0aGUgZXhpc3RpbmcgaW5zdGFuY2UuIFRoaXMgbWV0aG9kIGRvZXNuJ3QgY2FyZVxuICAgKiB3aGV0aGVyIHRoZSBuZXcgY29tcG9uZW50IGFuZCB0aGUgb2xkIG9uZSBhcmUgYWN0dWFsbHlcbiAgICogdGhlIHNhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChjYikge1xuICAgIC8vIGFjdHVhbCBtb3VudFxuICAgIHRoaXMudW5idWlsZCh0cnVlKVxuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHZhciBhY3RpdmF0ZUhvb2sgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlXG4gICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKClcbiAgICB2YXIgbmV3Q29tcG9uZW50ID0gdGhpcy5idWlsZCgpXG4gICAgaWYgKGFjdGl2YXRlSG9vayAmJiAhY2FjaGVkKSB7XG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBuZXdDb21wb25lbnRcbiAgICAgIGFjdGl2YXRlSG9vay5jYWxsKG5ld0NvbXBvbmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsXG4gICAgICAgIHNlbGYudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIHJlZiBmb3Iga2VwdC1hbGl2ZSBjb21wb25lbnRcbiAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKVxuICAgICAgfVxuICAgICAgdGhpcy50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBjb21wb25lbnQgY2hhbmdlcyBvciB1bmJpbmRzIGJlZm9yZSBhbiBhc3luY1xuICAgKiBjb25zdHJ1Y3RvciBpcyByZXNvbHZlZCwgd2UgbmVlZCB0byBpbnZhbGlkYXRlIGl0c1xuICAgKiBwZW5kaW5nIGNhbGxiYWNrLlxuICAgKi9cblxuICBpbnZhbGlkYXRlUGVuZGluZzogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnBlbmRpbmdDb21wb25lbnRDYikge1xuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IuY2FuY2VsKClcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gbnVsbFxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5zdGFudGlhdGUvaW5zZXJ0IGEgbmV3IGNoaWxkIHZtLlxuICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxuICAgKiBpbnN0YW5jZTsgb3RoZXJ3aXNlIGJ1aWxkIGEgbmV3IG9uZSBhbmQgY2FjaGUgaXQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxuICAgKiBAcmV0dXJuIHtWdWV9IC0gdGhlIGNyZWF0ZWQgaW5zdGFuY2VcbiAgICovXG5cbiAgYnVpbGQ6IGZ1bmN0aW9uIChleHRyYU9wdGlvbnMpIHtcbiAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKVxuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgIHJldHVybiBjYWNoZWRcbiAgICB9XG4gICAgaWYgKHRoaXMuQ29tcG9uZW50KSB7XG4gICAgICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBuYW1lOiB0aGlzLkNvbXBvbmVudE5hbWUsXG4gICAgICAgIGVsOiB0ZW1wbGF0ZVBhcnNlci5jbG9uZSh0aGlzLmVsKSxcbiAgICAgICAgdGVtcGxhdGU6IHRoaXMuaW5saW5lVGVtcGxhdGUsXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0byBhZGQgdGhlIGNoaWxkIHdpdGggY29ycmVjdCBwYXJlbnRcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgaXRzIHBhcmVudFxuICAgICAgICAvLyBzaG91bGQgYmUgdGhlIHRyYW5zY2x1c2lvbiBob3N0LlxuICAgICAgICBwYXJlbnQ6IHRoaXMuX2hvc3QgfHwgdGhpcy52bSxcbiAgICAgICAgLy8gaWYgbm8gaW5saW5lLXRlbXBsYXRlLCB0aGVuIHRoZSBjb21waWxlZFxuICAgICAgICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLlxuICAgICAgICBfbGlua2VyQ2FjaGFibGU6ICF0aGlzLmlubGluZVRlbXBsYXRlLFxuICAgICAgICBfcmVmOiB0aGlzLmRlc2NyaXB0b3IucmVmLFxuICAgICAgICBfYXNDb21wb25lbnQ6IHRydWUsXG4gICAgICAgIF9pc1JvdXRlclZpZXc6IHRoaXMuX2lzUm91dGVyVmlldyxcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuICAgICAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgICAgICAgLy8gYW5kIGl0cyBob3N0LlxuICAgICAgICBfY29udGV4dDogdGhpcy52bSxcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcbiAgICAgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcbiAgICAgICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcbiAgICAgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgICAgICBfc2NvcGU6IHRoaXMuX3Njb3BlLFxuICAgICAgICAvLyBwYXNzIGluIHRoZSBvd25lciBmcmFnbWVudCBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3Nhcnkgc28gdGhhdCB0aGUgZnJhZ21lbnQgY2FuIGtlZXBcbiAgICAgICAgLy8gdHJhY2sgb2YgaXRzIGNvbnRhaW5lZCBjb21wb25lbnRzIGluIG9yZGVyIHRvXG4gICAgICAgIC8vIGNhbGwgYXR0YWNoL2RldGFjaCBob29rcyBmb3IgdGhlbS5cbiAgICAgICAgX2ZyYWc6IHRoaXMuX2ZyYWdcbiAgICAgIH1cbiAgICAgIC8vIGV4dHJhIG9wdGlvbnNcbiAgICAgIC8vIGluIDEuMC4wIHRoaXMgaXMgdXNlZCBieSB2dWUtcm91dGVyIG9ubHlcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGV4dHJhT3B0aW9ucykge1xuICAgICAgICBfLmV4dGVuZChvcHRpb25zLCBleHRyYU9wdGlvbnMpXG4gICAgICB9XG4gICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5Db21wb25lbnQob3B0aW9ucylcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZFxuICAgICAgfVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICAgIHRoaXMuZWwuaGFzQXR0cmlidXRlKCd0cmFuc2l0aW9uJykgJiZcbiAgICAgICAgICBjaGlsZC5faXNGcmFnbWVudCkge1xuICAgICAgICBfLndhcm4oXG4gICAgICAgICAgJ1RyYW5zaXRpb25zIHdpbGwgbm90IHdvcmsgb24gYSBmcmFnbWVudCBpbnN0YW5jZS4gJyArXG4gICAgICAgICAgJ1RlbXBsYXRlOiAnICsgY2hpbGQuJG9wdGlvbnMudGVtcGxhdGVcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNoaWxkXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUcnkgdG8gZ2V0IGEgY2FjaGVkIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IGNvbXBvbmVudC5cbiAgICpcbiAgICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cbiAgICovXG5cbiAgZ2V0Q2FjaGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMua2VlcEFsaXZlICYmIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXVxuICB9LFxuXG4gIC8qKlxuICAgKiBUZWFyZG93biB0aGUgY3VycmVudCBjaGlsZCwgYnV0IGRlZmVycyBjbGVhbnVwIHNvXG4gICAqIHRoYXQgd2UgY2FuIHNlcGFyYXRlIHRoZSBkZXN0cm95IGFuZCByZW1vdmFsIHN0ZXBzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyXG4gICAqL1xuXG4gIHVuYnVpbGQ6IGZ1bmN0aW9uIChkZWZlcikge1xuICAgIGlmICh0aGlzLndhaXRpbmdGb3IpIHtcbiAgICAgIHRoaXMud2FpdGluZ0Zvci4kZGVzdHJveSgpXG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBudWxsXG4gICAgfVxuICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRWTVxuICAgIGlmICghY2hpbGQgfHwgdGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAvLyByZW1vdmUgcmVmXG4gICAgICAgIGNoaWxkLl91cGRhdGVSZWYodHJ1ZSlcbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cbiAgICAvLyB0aGUgc29sZSBwdXJwb3NlIG9mIGBkZWZlckNsZWFudXBgIGlzIHNvIHRoYXQgd2UgY2FuXG4gICAgLy8gXCJkZWFjdGl2YXRlXCIgdGhlIHZtIHJpZ2h0IG5vdyBhbmQgcGVyZm9ybSBET00gcmVtb3ZhbFxuICAgIC8vIGxhdGVyLlxuICAgIGNoaWxkLiRkZXN0cm95KGZhbHNlLCBkZWZlcilcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGN1cnJlbnQgZGVzdHJveWVkIGNoaWxkIGFuZCBtYW51YWxseSBkb1xuICAgKiB0aGUgY2xlYW51cCBhZnRlciByZW1vdmFsLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICByZW1vdmU6IGZ1bmN0aW9uIChjaGlsZCwgY2IpIHtcbiAgICB2YXIga2VlcEFsaXZlID0gdGhpcy5rZWVwQWxpdmVcbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIC8vIHdlIG1heSBoYXZlIGEgY29tcG9uZW50IHN3aXRjaCB3aGVuIGEgcHJldmlvdXNcbiAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxuICAgICAgLy8gd2Ugd2FudCB0byB0cmlnZ2VyIG9ubHkgb25lIGxhc3Rlc3QgaW5zZXJ0aW9uIGNiXG4gICAgICAvLyB3aGVuIHRoZSBleGlzdGluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLiAoIzExMTkpXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBjYlxuICAgICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbHMtLVxuICAgICAgICBpZiAoIWtlZXBBbGl2ZSkgY2hpbGQuX2NsZWFudXAoKVxuICAgICAgICBpZiAoIXNlbGYucGVuZGluZ1JlbW92YWxzICYmIHNlbGYucGVuZGluZ1JlbW92YWxDYikge1xuICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYigpXG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoY2IpIHtcbiAgICAgIGNiKClcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFjdHVhbGx5IHN3YXAgdGhlIGNvbXBvbmVudHMsIGRlcGVuZGluZyBvbiB0aGVcbiAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICB0cmFuc2l0aW9uOiBmdW5jdGlvbiAodGFyZ2V0LCBjYikge1xuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHZhciBjdXJyZW50ID0gdGhpcy5jaGlsZFZNXG4gICAgLy8gZm9yIGRldnRvb2wgaW5zcGVjdGlvblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY3VycmVudCkgY3VycmVudC5faW5hY3RpdmUgPSB0cnVlXG4gICAgICB0YXJnZXQuX2luYWN0aXZlID0gZmFsc2VcbiAgICB9XG4gICAgdGhpcy5jaGlsZFZNID0gdGFyZ2V0XG4gICAgc3dpdGNoIChzZWxmLnBhcmFtcy50cmFuc2l0aW9uTW9kZSkge1xuICAgICAgY2FzZSAnaW4tb3V0JzpcbiAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBjYilcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ291dC1pbic6XG4gICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50KVxuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBVbmJpbmQuXG4gICAqL1xuXG4gIHVuYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKVxuICAgIC8vIERvIG5vdCBkZWZlciBjbGVhbnVwIHdoZW4gdW5iaW5kaW5nXG4gICAgdGhpcy51bmJ1aWxkKClcbiAgICAvLyBkZXN0cm95IGFsbCBrZWVwLWFsaXZlIGNhY2hlZCBpbnN0YW5jZXNcbiAgICBpZiAodGhpcy5jYWNoZSkge1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHtcbiAgICAgICAgdGhpcy5jYWNoZVtrZXldLiRkZXN0cm95KClcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FjaGUgPSBudWxsXG4gICAgfVxuICB9XG59XG4iLCJleHBvcnRzLnN0eWxlID0gcmVxdWlyZSgnLi9zdHlsZScpXG5leHBvcnRzWydjbGFzcyddID0gcmVxdWlyZSgnLi9jbGFzcycpXG5leHBvcnRzLmNvbXBvbmVudCA9IHJlcXVpcmUoJy4vY29tcG9uZW50JylcbmV4cG9ydHMucHJvcCA9IHJlcXVpcmUoJy4vcHJvcCcpXG5leHBvcnRzLnRyYW5zaXRpb24gPSByZXF1aXJlKCcuL3RyYW5zaXRpb24nKVxuIiwiLy8gTk9URTogdGhlIHByb3AgaW50ZXJuYWwgZGlyZWN0aXZlIGlzIGNvbXBpbGVkIGFuZCBsaW5rZWRcbi8vIGR1cmluZyBfaW5pdFNjb3BlKCksIGJlZm9yZSB0aGUgY3JlYXRlZCBob29rIGlzIGNhbGxlZC5cbi8vIFRoZSBwdXJwb3NlIGlzIHRvIG1ha2UgdGhlIGluaXRpYWwgcHJvcCB2YWx1ZXMgYXZhaWxhYmxlXG4vLyBpbnNpZGUgYGNyZWF0ZWRgIGhvb2tzIGFuZCBgZGF0YWAgZnVuY3Rpb25zLlxuXG52YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxudmFyIFdhdGNoZXIgPSByZXF1aXJlKCcuLi8uLi93YXRjaGVyJylcbnZhciBiaW5kaW5nTW9kZXMgPSByZXF1aXJlKCcuLi8uLi9jb25maWcnKS5fcHJvcEJpbmRpbmdNb2Rlc1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgY2hpbGQgPSB0aGlzLnZtXG4gICAgdmFyIHBhcmVudCA9IGNoaWxkLl9jb250ZXh0XG4gICAgLy8gcGFzc2VkIGluIGZyb20gY29tcGlsZXIgZGlyZWN0bHlcbiAgICB2YXIgcHJvcCA9IHRoaXMuZGVzY3JpcHRvci5wcm9wXG4gICAgdmFyIGNoaWxkS2V5ID0gcHJvcC5wYXRoXG4gICAgdmFyIHBhcmVudEtleSA9IHByb3AucGFyZW50UGF0aFxuICAgIHZhciB0d29XYXkgPSBwcm9wLm1vZGUgPT09IGJpbmRpbmdNb2Rlcy5UV09fV0FZXG5cbiAgICB2YXIgcGFyZW50V2F0Y2hlciA9IHRoaXMucGFyZW50V2F0Y2hlciA9IG5ldyBXYXRjaGVyKFxuICAgICAgcGFyZW50LFxuICAgICAgcGFyZW50S2V5LFxuICAgICAgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBpZiAoXy5hc3NlcnRQcm9wKHByb3AsIHZhbCkpIHtcbiAgICAgICAgICBjaGlsZFtjaGlsZEtleV0gPSB2YWxcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICB0d29XYXk6IHR3b1dheSxcbiAgICAgICAgZmlsdGVyczogcHJvcC5maWx0ZXJzLFxuICAgICAgICAvLyBpbXBvcnRhbnQ6IHByb3BzIG5lZWQgdG8gYmUgb2JzZXJ2ZWQgb24gdGhlXG4gICAgICAgIC8vIHYtZm9yIHNjb3BlIGlmIHByZXNlbnRcbiAgICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG4gICAgICB9XG4gICAgKVxuXG4gICAgLy8gc2V0IHRoZSBjaGlsZCBpbml0aWFsIHZhbHVlLlxuICAgIF8uaW5pdFByb3AoY2hpbGQsIHByb3AsIHBhcmVudFdhdGNoZXIudmFsdWUpXG5cbiAgICAvLyBzZXR1cCB0d28td2F5IGJpbmRpbmdcbiAgICBpZiAodHdvV2F5KSB7XG4gICAgICAvLyBpbXBvcnRhbnQ6IGRlZmVyIHRoZSBjaGlsZCB3YXRjaGVyIGNyZWF0aW9uIHVudGlsXG4gICAgICAvLyB0aGUgY3JlYXRlZCBob29rIChhZnRlciBkYXRhIG9ic2VydmF0aW9uKVxuICAgICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgICBjaGlsZC4kb25jZSgnaG9vazpjcmVhdGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmNoaWxkV2F0Y2hlciA9IG5ldyBXYXRjaGVyKFxuICAgICAgICAgIGNoaWxkLFxuICAgICAgICAgIGNoaWxkS2V5LFxuICAgICAgICAgIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHBhcmVudFdhdGNoZXIuc2V0KHZhbClcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAvLyBlbnN1cmUgc3luYyB1cHdhcmQgYmVmb3JlIHBhcmVudCBzeW5jIGRvd24uXG4gICAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlcyBlLmcuIHRoZSBjaGlsZFxuICAgICAgICAgICAgLy8gbXV0YXRlcyBhIHByb3AgYXJyYXksIHRoZW4gcmVwbGFjZXMgaXQuICgjMTY4MylcbiAgICAgICAgICAgIHN5bmM6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucGFyZW50V2F0Y2hlci50ZWFyZG93bigpXG4gICAgaWYgKHRoaXMuY2hpbGRXYXRjaGVyKSB7XG4gICAgICB0aGlzLmNoaWxkV2F0Y2hlci50ZWFyZG93bigpXG4gICAgfVxuICB9XG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxudmFyIHByZWZpeGVzID0gWyctd2Via2l0LScsICctbW96LScsICctbXMtJ11cbnZhciBjYW1lbFByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ11cbnZhciBpbXBvcnRhbnRSRSA9IC8haW1wb3J0YW50Oz8kL1xudmFyIHRlc3RFbCA9IG51bGxcbnZhciBwcm9wQ2FjaGUgPSB7fVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBkZWVwOiB0cnVlLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUuY3NzVGV4dCA9IHZhbHVlXG4gICAgfSBlbHNlIGlmIChfLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZS5yZWR1Y2UoXy5leHRlbmQsIHt9KSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pXG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZU9iamVjdDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gY2FjaGUgb2JqZWN0IHN0eWxlcyBzbyB0aGF0IG9ubHkgY2hhbmdlZCBwcm9wc1xuICAgIC8vIGFyZSBhY3R1YWxseSB1cGRhdGVkLlxuICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGUgfHwgKHRoaXMuY2FjaGUgPSB7fSlcbiAgICB2YXIgbmFtZSwgdmFsXG4gICAgZm9yIChuYW1lIGluIGNhY2hlKSB7XG4gICAgICBpZiAoIShuYW1lIGluIHZhbHVlKSkge1xuICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCBudWxsKVxuICAgICAgICBkZWxldGUgY2FjaGVbbmFtZV1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChuYW1lIGluIHZhbHVlKSB7XG4gICAgICB2YWwgPSB2YWx1ZVtuYW1lXVxuICAgICAgaWYgKHZhbCAhPT0gY2FjaGVbbmFtZV0pIHtcbiAgICAgICAgY2FjaGVbbmFtZV0gPSB2YWxcbiAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgdmFsKVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIChwcm9wLCB2YWx1ZSkge1xuICAgIHByb3AgPSBub3JtYWxpemUocHJvcClcbiAgICBpZiAoIXByb3ApIHJldHVybiAvLyB1bnN1cHBvcnRlZCBwcm9wXG4gICAgLy8gY2FzdCBwb3NzaWJsZSBudW1iZXJzL2Jvb2xlYW5zIGludG8gc3RyaW5nc1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB2YWx1ZSArPSAnJ1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdmFyIGlzSW1wb3J0YW50ID0gaW1wb3J0YW50UkUudGVzdCh2YWx1ZSlcbiAgICAgICAgPyAnaW1wb3J0YW50J1xuICAgICAgICA6ICcnXG4gICAgICBpZiAoaXNJbXBvcnRhbnQpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGltcG9ydGFudFJFLCAnJykudHJpbSgpXG4gICAgICB9XG4gICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHByb3AsIHZhbHVlLCBpc0ltcG9ydGFudClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShwcm9wKVxuICAgIH1cbiAgfVxuXG59XG5cbi8qKlxuICogTm9ybWFsaXplIGEgQ1NTIHByb3BlcnR5IG5hbWUuXG4gKiAtIGNhY2hlIHJlc3VsdFxuICogLSBhdXRvIHByZWZpeFxuICogLSBjYW1lbENhc2UgLT4gZGFzaC1jYXNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUgKHByb3ApIHtcbiAgaWYgKHByb3BDYWNoZVtwcm9wXSkge1xuICAgIHJldHVybiBwcm9wQ2FjaGVbcHJvcF1cbiAgfVxuICB2YXIgcmVzID0gcHJlZml4KHByb3ApXG4gIHByb3BDYWNoZVtwcm9wXSA9IHByb3BDYWNoZVtyZXNdID0gcmVzXG4gIHJldHVybiByZXNcbn1cblxuLyoqXG4gKiBBdXRvIGRldGVjdCB0aGUgYXBwcm9wcmlhdGUgcHJlZml4IGZvciBhIENTUyBwcm9wZXJ0eS5cbiAqIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3BhdWxpcmlzaC81MjM2OTJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHByZWZpeCAocHJvcCkge1xuICBwcm9wID0gXy5oeXBoZW5hdGUocHJvcClcbiAgdmFyIGNhbWVsID0gXy5jYW1lbGl6ZShwcm9wKVxuICB2YXIgdXBwZXIgPSBjYW1lbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsLnNsaWNlKDEpXG4gIGlmICghdGVzdEVsKSB7XG4gICAgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgfVxuICBpZiAoY2FtZWwgaW4gdGVzdEVsLnN0eWxlKSB7XG4gICAgcmV0dXJuIHByb3BcbiAgfVxuICB2YXIgaSA9IHByZWZpeGVzLmxlbmd0aFxuICB2YXIgcHJlZml4ZWRcbiAgd2hpbGUgKGktLSkge1xuICAgIHByZWZpeGVkID0gY2FtZWxQcmVmaXhlc1tpXSArIHVwcGVyXG4gICAgaWYgKHByZWZpeGVkIGluIHRlc3RFbC5zdHlsZSkge1xuICAgICAgcmV0dXJuIHByZWZpeGVzW2ldICsgcHJvcFxuICAgIH1cbiAgfVxufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi8uLi91dGlsJylcbnZhciBUcmFuc2l0aW9uID0gcmVxdWlyZSgnLi4vLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uJylcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgcHJpb3JpdHk6IDExMDAsXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAoaWQsIG9sZElkKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbFxuICAgIC8vIHJlc29sdmUgb24gb3duZXIgdm1cbiAgICB2YXIgaG9va3MgPSBfLnJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAndHJhbnNpdGlvbnMnLCBpZClcbiAgICBpZCA9IGlkIHx8ICd2J1xuICAgIC8vIGFwcGx5IG9uIGNsb3Nlc3Qgdm1cbiAgICBlbC5fX3ZfdHJhbnMgPSBuZXcgVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB0aGlzLmVsLl9fdnVlX18gfHwgdGhpcy52bSlcbiAgICBpZiAob2xkSWQpIHtcbiAgICAgIF8ucmVtb3ZlQ2xhc3MoZWwsIG9sZElkICsgJy10cmFuc2l0aW9uJylcbiAgICB9XG4gICAgXy5hZGRDbGFzcyhlbCwgaWQgKyAnLXRyYW5zaXRpb24nKVxuICB9XG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxuXG4vLyB4bGlua1xudmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaydcbnZhciB4bGlua1JFID0gL154bGluazovXG5cbi8vIHRoZXNlIGlucHV0IGVsZW1lbnQgYXR0cmlidXRlcyBzaG91bGQgYWxzbyBzZXQgdGhlaXJcbi8vIGNvcnJlc3BvbmRpbmcgcHJvcGVydGllc1xudmFyIGlucHV0UHJvcHMgPSB7XG4gIHZhbHVlOiAxLFxuICBjaGVja2VkOiAxLFxuICBzZWxlY3RlZDogMVxufVxuXG4vLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBzZXQgYSBoaWRkZW4gcHJvcGVydHkgZm9yXG4vLyBiaW5kaW5nIHYtbW9kZWwgdG8gb2JqZWN0IHZhbHVlc1xudmFyIG1vZGVsUHJvcHMgPSB7XG4gIHZhbHVlOiAnX3ZhbHVlJyxcbiAgJ3RydWUtdmFsdWUnOiAnX3RydWVWYWx1ZScsXG4gICdmYWxzZS12YWx1ZSc6ICdfZmFsc2VWYWx1ZSdcbn1cblxuLy8gY2hlY2sgZm9yIGF0dHJpYnV0ZXMgdGhhdCBwcm9oaWJpdCBpbnRlcnBvbGF0aW9uc1xudmFyIGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUgPSAvXnYtfF46fF5AfF4oaXN8dHJhbnNpdGlvbnx0cmFuc2l0aW9uLW1vZGV8ZGVib3VuY2V8dHJhY2stYnl8c3RhZ2dlcnxlbnRlci1zdGFnZ2VyfGxlYXZlLXN0YWdnZXIpJC9cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgcHJpb3JpdHk6IDg1MCxcblxuICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGF0dHIgPSB0aGlzLmFyZ1xuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWVcbiAgICAvLyBzaG91bGQgYmUgZGVlcCB3YXRjaCBvbiBvYmplY3QgbW9kZVxuICAgIGlmICghYXR0cikge1xuICAgICAgdGhpcy5kZWVwID0gdHJ1ZVxuICAgIH1cbiAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbiBiaW5kaW5nc1xuICAgIGlmICh0aGlzLmRlc2NyaXB0b3IuaW50ZXJwKSB7XG4gICAgICAvLyBvbmx5IGFsbG93IGJpbmRpbmcgb24gbmF0aXZlIGF0dHJpYnV0ZXNcbiAgICAgIGlmIChcbiAgICAgICAgZGlzYWxsb3dlZEludGVycEF0dHJSRS50ZXN0KGF0dHIpIHx8XG4gICAgICAgIChhdHRyID09PSAnbmFtZScgJiYgKHRhZyA9PT0gJ1BBUlRJQUwnIHx8IHRhZyA9PT0gJ1NMT1QnKSlcbiAgICAgICkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICAgICBhdHRyICsgJz1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICtcbiAgICAgICAgICAnYXR0cmlidXRlIGludGVycG9sYXRpb24gaXMgbm90IGFsbG93ZWQgaW4gVnVlLmpzICcgK1xuICAgICAgICAgICdkaXJlY3RpdmVzIGFuZCBzcGVjaWFsIGF0dHJpYnV0ZXMuJ1xuICAgICAgICApXG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpXG4gICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YXIgcmF3ID0gYXR0ciArICc9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJ1xuICAgICAgICAvLyB3YXJuIHNyY1xuICAgICAgICBpZiAoYXR0ciA9PT0gJ3NyYycpIHtcbiAgICAgICAgICBfLndhcm4oXG4gICAgICAgICAgICByYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInNyY1wiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgK1xuICAgICAgICAgICAgJ2EgNDA0IHJlcXVlc3QuIFVzZSB2LWJpbmQ6c3JjIGluc3RlYWQuJ1xuICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdhcm4gc3R5bGVcbiAgICAgICAgaWYgKGF0dHIgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICBfLndhcm4oXG4gICAgICAgICAgICByYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInN0eWxlXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArXG4gICAgICAgICAgICAndGhlIGF0dHJpYnV0ZSB0byBiZSBkaXNjYXJkZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuICcgK1xuICAgICAgICAgICAgJ1VzZSB2LWJpbmQ6c3R5bGUgaW5zdGVhZC4nXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuaW52YWxpZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHZhciBhdHRyID0gdGhpcy5hcmdcbiAgICBpZiAodGhpcy5hcmcpIHtcbiAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSlcbiAgICB9XG4gIH0sXG5cbiAgLy8gc2hhcmUgb2JqZWN0IGhhbmRsZXIgd2l0aCB2LWJpbmQ6Y2xhc3NcbiAgaGFuZGxlT2JqZWN0OiByZXF1aXJlKCcuLi9pbnRlcm5hbC9zdHlsZScpLmhhbmRsZU9iamVjdCxcblxuICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIChhdHRyLCB2YWx1ZSkge1xuICAgIGlmIChpbnB1dFByb3BzW2F0dHJdICYmIGF0dHIgaW4gdGhpcy5lbCkge1xuICAgICAgdGhpcy5lbFthdHRyXSA9IGF0dHIgPT09ICd2YWx1ZSdcbiAgICAgICAgPyAodmFsdWUgfHwgJycpIC8vIElFOSB3aWxsIHNldCBpbnB1dC52YWx1ZSB0byBcIm51bGxcIiBmb3IgbnVsbC4uLlxuICAgICAgICA6IHZhbHVlXG4gICAgfVxuICAgIC8vIHNldCBtb2RlbCBwcm9wc1xuICAgIHZhciBtb2RlbFByb3AgPSBtb2RlbFByb3BzW2F0dHJdXG4gICAgaWYgKG1vZGVsUHJvcCkge1xuICAgICAgdGhpcy5lbFttb2RlbFByb3BdID0gdmFsdWVcbiAgICAgIC8vIHVwZGF0ZSB2LW1vZGVsIGlmIHByZXNlbnRcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuZWwuX192X21vZGVsXG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgbW9kZWwubGlzdGVuZXIoKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBkbyBub3Qgc2V0IHZhbHVlIGF0dHJpYnV0ZSBmb3IgdGV4dGFyZWFcbiAgICBpZiAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiB0aGlzLmVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgLy8gdXBkYXRlIGF0dHJpYnV0ZVxuICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBmYWxzZSkge1xuICAgICAgaWYgKHhsaW5rUkUudGVzdChhdHRyKSkge1xuICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGF0dHIsIHZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpXG4gICAgfVxuICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWxcbiAgICB0aGlzLnZtLiRvbmNlKCdob29rOmNvbXBpbGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCd2LWNsb2FrJylcbiAgICB9KVxuICB9XG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBwcmlvcml0eTogMTUwMCxcblxuICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCF0aGlzLmFyZykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHZhciBpZCA9IHRoaXMuaWQgPSBfLmNhbWVsaXplKHRoaXMuYXJnKVxuICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHNcbiAgICBpZiAocmVmcy5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgIHJlZnNbaWRdID0gdGhpcy5lbFxuICAgIH0gZWxzZSB7XG4gICAgICBfLmRlZmluZVJlYWN0aXZlKHJlZnMsIGlkLCB0aGlzLmVsKVxuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzXG4gICAgaWYgKHJlZnNbdGhpcy5pZF0gPT09IHRoaXMuZWwpIHtcbiAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsXG4gICAgfVxuICB9XG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxudmFyIEZyYWdtZW50RmFjdG9yeSA9IHJlcXVpcmUoJy4uLy4uL2ZyYWdtZW50L2ZhY3RvcnknKVxudmFyIGlzT2JqZWN0ID0gXy5pc09iamVjdFxudmFyIHVpZCA9IDBcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgcHJpb3JpdHk6IDIwMDAsXG5cbiAgcGFyYW1zOiBbXG4gICAgJ3RyYWNrLWJ5JyxcbiAgICAnc3RhZ2dlcicsXG4gICAgJ2VudGVyLXN0YWdnZXInLFxuICAgICdsZWF2ZS1zdGFnZ2VyJ1xuICBdLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBzdXBwb3J0IFwiaXRlbSBpbiBpdGVtc1wiIHN5bnRheFxuICAgIHZhciBpbk1hdGNoID0gdGhpcy5leHByZXNzaW9uLm1hdGNoKC8oLiopIGluICguKikvKVxuICAgIGlmIChpbk1hdGNoKSB7XG4gICAgICB2YXIgaXRNYXRjaCA9IGluTWF0Y2hbMV0ubWF0Y2goL1xcKCguKiksKC4qKVxcKS8pXG4gICAgICBpZiAoaXRNYXRjaCkge1xuICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRNYXRjaFsxXS50cmltKClcbiAgICAgICAgdGhpcy5hbGlhcyA9IGl0TWF0Y2hbMl0udHJpbSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFsaWFzID0gaW5NYXRjaFsxXS50cmltKClcbiAgICAgIH1cbiAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGluTWF0Y2hbMl1cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuYWxpYXMpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAnQWxpYXMgaXMgcmVxdWlyZWQgaW4gdi1mb3IuJ1xuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gdWlkIGFzIGEgY2FjaGUgaWRlbnRpZmllclxuICAgIHRoaXMuaWQgPSAnX192LWZvcl9fJyArICgrK3VpZClcblxuICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYW4gb3B0aW9uIGxpc3QsXG4gICAgLy8gc28gdGhhdCB3ZSBrbm93IGlmIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSA8c2VsZWN0PidzXG4gICAgLy8gdi1tb2RlbCB3aGVuIHRoZSBvcHRpb24gbGlzdCBoYXMgY2hhbmdlZC5cbiAgICAvLyBiZWNhdXNlIHYtbW9kZWwgaGFzIGEgbG93ZXIgcHJpb3JpdHkgdGhhbiB2LWZvcixcbiAgICAvLyB0aGUgdi1tb2RlbCBpcyBub3QgYm91bmQgaGVyZSB5ZXQsIHNvIHdlIGhhdmUgdG9cbiAgICAvLyByZXRyaXZlIGl0IGluIHRoZSBhY3R1YWwgdXBkYXRlTW9kZWwoKSBmdW5jdGlvbi5cbiAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lXG4gICAgdGhpcy5pc09wdGlvbiA9XG4gICAgICAodGFnID09PSAnT1BUSU9OJyB8fCB0YWcgPT09ICdPUFRHUk9VUCcpICYmXG4gICAgICB0aGlzLmVsLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ1NFTEVDVCdcblxuICAgIC8vIHNldHVwIGFuY2hvciBub2Rlc1xuICAgIHRoaXMuc3RhcnQgPSBfLmNyZWF0ZUFuY2hvcigndi1mb3Itc3RhcnQnKVxuICAgIHRoaXMuZW5kID0gXy5jcmVhdGVBbmNob3IoJ3YtZm9yLWVuZCcpXG4gICAgXy5yZXBsYWNlKHRoaXMuZWwsIHRoaXMuZW5kKVxuICAgIF8uYmVmb3JlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKVxuXG4gICAgLy8gY2FjaGVcbiAgICB0aGlzLmNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuXG4gICAgLy8gZnJhZ21lbnQgZmFjdG9yeVxuICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbClcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgdGhpcy5kaWZmKGRhdGEpXG4gICAgdGhpcy51cGRhdGVSZWYoKVxuICAgIHRoaXMudXBkYXRlTW9kZWwoKVxuICB9LFxuXG4gIC8qKlxuICAgKiBEaWZmLCBiYXNlZCBvbiBuZXcgZGF0YSBhbmQgb2xkIGRhdGEsIGRldGVybWluZSB0aGVcbiAgICogbWluaW11bSBhbW91bnQgb2YgRE9NIG1hbmlwdWxhdGlvbnMgbmVlZGVkIHRvIG1ha2UgdGhlXG4gICAqIERPTSByZWZsZWN0IHRoZSBuZXcgZGF0YSBBcnJheS5cbiAgICpcbiAgICogVGhlIGFsZ29yaXRobSBkaWZmcyB0aGUgbmV3IGRhdGEgQXJyYXkgYnkgc3RvcmluZyBhXG4gICAqIGhpZGRlbiByZWZlcmVuY2UgdG8gYW4gb3duZXIgdm0gaW5zdGFuY2Ugb24gcHJldmlvdXNseVxuICAgKiBzZWVuIGRhdGEuIFRoaXMgYWxsb3dzIHVzIHRvIGFjaGlldmUgTyhuKSB3aGljaCBpc1xuICAgKiBiZXR0ZXIgdGhhbiBhIGxldmVuc2h0ZWluIGRpc3RhbmNlIGJhc2VkIGFsZ29yaXRobSxcbiAgICogd2hpY2ggaXMgTyhtICogbikuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGRhdGFcbiAgICovXG5cbiAgZGlmZjogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAvLyBjaGVjayBpZiB0aGUgQXJyYXkgd2FzIGNvbnZlcnRlZCBmcm9tIGFuIE9iamVjdFxuICAgIHZhciBpdGVtID0gZGF0YVswXVxuICAgIHZhciBjb252ZXJ0ZWRGcm9tT2JqZWN0ID0gdGhpcy5mcm9tT2JqZWN0ID1cbiAgICAgIGlzT2JqZWN0KGl0ZW0pICYmXG4gICAgICBpdGVtLmhhc093blByb3BlcnR5KCcka2V5JykgJiZcbiAgICAgIGl0ZW0uaGFzT3duUHJvcGVydHkoJyR2YWx1ZScpXG5cbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnlcbiAgICB2YXIgb2xkRnJhZ3MgPSB0aGlzLmZyYWdzXG4gICAgdmFyIGZyYWdzID0gdGhpcy5mcmFncyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aClcbiAgICB2YXIgYWxpYXMgPSB0aGlzLmFsaWFzXG4gICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5pdGVyYXRvclxuICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnRcbiAgICB2YXIgZW5kID0gdGhpcy5lbmRcbiAgICB2YXIgaW5Eb2MgPSBfLmluRG9jKHN0YXJ0KVxuICAgIHZhciBpbml0ID0gIW9sZEZyYWdzXG4gICAgdmFyIGksIGwsIGZyYWcsIGtleSwgdmFsdWUsIHByaW1pdGl2ZVxuXG4gICAgLy8gRmlyc3QgcGFzcywgZ28gdGhyb3VnaCB0aGUgbmV3IEFycmF5IGFuZCBmaWxsIHVwXG4gICAgLy8gdGhlIG5ldyBmcmFncyBhcnJheS4gSWYgYSBwaWVjZSBvZiBkYXRhIGhhcyBhIGNhY2hlZFxuICAgIC8vIGluc3RhbmNlIGZvciBpdCwgd2UgcmV1c2UgaXQuIE90aGVyd2lzZSBidWlsZCBhIG5ld1xuICAgIC8vIGluc3RhbmNlLlxuICAgIGZvciAoaSA9IDAsIGwgPSBkYXRhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgaXRlbSA9IGRhdGFbaV1cbiAgICAgIGtleSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiRrZXkgOiBudWxsXG4gICAgICB2YWx1ZSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiR2YWx1ZSA6IGl0ZW1cbiAgICAgIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSlcbiAgICAgIGZyYWcgPSAhaW5pdCAmJiB0aGlzLmdldENhY2hlZEZyYWcodmFsdWUsIGksIGtleSlcbiAgICAgIGlmIChmcmFnKSB7IC8vIHJldXNhYmxlIGZyYWdtZW50XG4gICAgICAgIGZyYWcucmV1c2VkID0gdHJ1ZVxuICAgICAgICAvLyB1cGRhdGUgJGluZGV4XG4gICAgICAgIGZyYWcuc2NvcGUuJGluZGV4ID0gaVxuICAgICAgICAvLyB1cGRhdGUgJGtleVxuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgZnJhZy5zY29wZS4ka2V5ID0ga2V5XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGl0ZXJhdG9yXG4gICAgICAgIGlmIChpdGVyYXRvcikge1xuICAgICAgICAgIGZyYWcuc2NvcGVbaXRlcmF0b3JdID0ga2V5ICE9PSBudWxsID8ga2V5IDogaVxuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSBkYXRhIGZvciB0cmFjay1ieSwgb2JqZWN0IHJlcGVhdCAmXG4gICAgICAgIC8vIHByaW1pdGl2ZSB2YWx1ZXMuXG4gICAgICAgIGlmICh0cmFja0J5S2V5IHx8IGNvbnZlcnRlZEZyb21PYmplY3QgfHwgcHJpbWl0aXZlKSB7XG4gICAgICAgICAgZnJhZy5zY29wZVthbGlhc10gPSB2YWx1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgeyAvLyBuZXcgaXNudGFuY2VcbiAgICAgICAgZnJhZyA9IHRoaXMuY3JlYXRlKHZhbHVlLCBhbGlhcywgaSwga2V5KVxuICAgICAgICBmcmFnLmZyZXNoID0gIWluaXRcbiAgICAgIH1cbiAgICAgIGZyYWdzW2ldID0gZnJhZ1xuICAgICAgaWYgKGluaXQpIHtcbiAgICAgICAgZnJhZy5iZWZvcmUoZW5kKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHdlJ3JlIGRvbmUgZm9yIHRoZSBpbml0aWFsIHJlbmRlci5cbiAgICBpZiAoaW5pdCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gU2Vjb25kIHBhc3MsIGdvIHRocm91Z2ggdGhlIG9sZCBmcmFnbWVudHMgYW5kXG4gICAgLy8gZGVzdHJveSB0aG9zZSB3aG8gYXJlIG5vdCByZXVzZWQgKGFuZCByZW1vdmUgdGhlbVxuICAgIC8vIGZyb20gY2FjaGUpXG4gICAgdmFyIHJlbW92YWxJbmRleCA9IDBcbiAgICB2YXIgdG90YWxSZW1vdmVkID0gb2xkRnJhZ3MubGVuZ3RoIC0gZnJhZ3MubGVuZ3RoXG4gICAgZm9yIChpID0gMCwgbCA9IG9sZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZnJhZyA9IG9sZEZyYWdzW2ldXG4gICAgICBpZiAoIWZyYWcucmV1c2VkKSB7XG4gICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKVxuICAgICAgICB0aGlzLnJlbW92ZShmcmFnLCByZW1vdmFsSW5kZXgrKywgdG90YWxSZW1vdmVkLCBpbkRvYylcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaW5hbCBwYXNzLCBtb3ZlL2luc2VydCBuZXcgZnJhZ21lbnRzIGludG8gdGhlXG4gICAgLy8gcmlnaHQgcGxhY2UuXG4gICAgdmFyIHRhcmdldFByZXYsIHByZXZFbCwgY3VycmVudFByZXZcbiAgICB2YXIgaW5zZXJ0aW9uSW5kZXggPSAwXG4gICAgZm9yIChpID0gMCwgbCA9IGZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZnJhZyA9IGZyYWdzW2ldXG4gICAgICAvLyB0aGlzIGlzIHRoZSBmcmFnIHRoYXQgd2Ugc2hvdWxkIGJlIGFmdGVyXG4gICAgICB0YXJnZXRQcmV2ID0gZnJhZ3NbaSAtIDFdXG4gICAgICBwcmV2RWwgPSB0YXJnZXRQcmV2XG4gICAgICAgID8gdGFyZ2V0UHJldi5zdGFnZ2VyQ2JcbiAgICAgICAgICA/IHRhcmdldFByZXYuc3RhZ2dlckFuY2hvclxuICAgICAgICAgIDogdGFyZ2V0UHJldi5lbmQgfHwgdGFyZ2V0UHJldi5ub2RlXG4gICAgICAgIDogc3RhcnRcbiAgICAgIGlmIChmcmFnLnJldXNlZCAmJiAhZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgICAgY3VycmVudFByZXYgPSBmaW5kUHJldkZyYWcoZnJhZywgc3RhcnQsIHRoaXMuaWQpXG4gICAgICAgIGlmIChjdXJyZW50UHJldiAhPT0gdGFyZ2V0UHJldikge1xuICAgICAgICAgIHRoaXMubW92ZShmcmFnLCBwcmV2RWwpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5ldyBpbnN0YW5jZSwgb3Igc3RpbGwgaW4gc3RhZ2dlci5cbiAgICAgICAgLy8gaW5zZXJ0IHdpdGggdXBkYXRlZCBzdGFnZ2VyIGluZGV4LlxuICAgICAgICB0aGlzLmluc2VydChmcmFnLCBpbnNlcnRpb25JbmRleCsrLCBwcmV2RWwsIGluRG9jKVxuICAgICAgfVxuICAgICAgZnJhZy5yZXVzZWQgPSBmcmFnLmZyZXNoID0gZmFsc2VcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBmcmFnbWVudCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAgICovXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAodmFsdWUsIGFsaWFzLCBpbmRleCwga2V5KSB7XG4gICAgdmFyIGhvc3QgPSB0aGlzLl9ob3N0XG4gICAgLy8gY3JlYXRlIGl0ZXJhdGlvbiBzY29wZVxuICAgIHZhciBwYXJlbnRTY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm1cbiAgICB2YXIgc2NvcGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlKVxuICAgIC8vIHJlZiBob2xkZXIgZm9yIHRoZSBzY29wZVxuICAgIHNjb3BlLiRyZWZzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kcmVmcylcbiAgICBzY29wZS4kZWxzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kZWxzKVxuICAgIC8vIG1ha2Ugc3VyZSBwb2ludCAkcGFyZW50IHRvIHBhcmVudCBzY29wZVxuICAgIHNjb3BlLiRwYXJlbnQgPSBwYXJlbnRTY29wZVxuICAgIC8vIGZvciB0d28td2F5IGJpbmRpbmcgb24gYWxpYXNcbiAgICBzY29wZS4kZm9yQ29udGV4dCA9IHRoaXNcbiAgICAvLyBkZWZpbmUgc2NvcGUgcHJvcGVydGllc1xuICAgIF8uZGVmaW5lUmVhY3RpdmUoc2NvcGUsIGFsaWFzLCB2YWx1ZSlcbiAgICBfLmRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGluZGV4JywgaW5kZXgpXG4gICAgaWYgKGtleSkge1xuICAgICAgXy5kZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRrZXknLCBrZXkpXG4gICAgfSBlbHNlIGlmIChzY29wZS4ka2V5KSB7XG4gICAgICAvLyBhdm9pZCBhY2NpZGVudGFsIGZhbGxiYWNrXG4gICAgICBfLmRlZmluZShzY29wZSwgJyRrZXknLCBudWxsKVxuICAgIH1cbiAgICBpZiAodGhpcy5pdGVyYXRvcikge1xuICAgICAgXy5kZWZpbmVSZWFjdGl2ZShzY29wZSwgdGhpcy5pdGVyYXRvciwga2V5ICE9PSBudWxsID8ga2V5IDogaW5kZXgpXG4gICAgfVxuICAgIHZhciBmcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZShob3N0LCBzY29wZSwgdGhpcy5fZnJhZylcbiAgICBmcmFnLmZvcklkID0gdGhpcy5pZFxuICAgIHRoaXMuY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KVxuICAgIHJldHVybiBmcmFnXG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgdi1yZWYgb24gb3duZXIgdm0uXG4gICAqL1xuXG4gIHVwZGF0ZVJlZjogZnVuY3Rpb24gKCkge1xuICAgIHZhciByZWYgPSB0aGlzLmRlc2NyaXB0b3IucmVmXG4gICAgaWYgKCFyZWYpIHJldHVyblxuICAgIHZhciBoYXNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzXG4gICAgdmFyIHJlZnNcbiAgICBpZiAoIXRoaXMuZnJvbU9iamVjdCkge1xuICAgICAgcmVmcyA9IHRoaXMuZnJhZ3MubWFwKGZpbmRWbUZyb21GcmFnKVxuICAgIH0gZWxzZSB7XG4gICAgICByZWZzID0ge31cbiAgICAgIHRoaXMuZnJhZ3MuZm9yRWFjaChmdW5jdGlvbiAoZnJhZykge1xuICAgICAgICByZWZzW2ZyYWcuc2NvcGUuJGtleV0gPSBmaW5kVm1Gcm9tRnJhZyhmcmFnKVxuICAgICAgfSlcbiAgICB9XG4gICAgaGFzaFtyZWZdID0gcmVmc1xuICB9LFxuXG4gIC8qKlxuICAgKiBGb3Igb3B0aW9uIGxpc3RzLCB1cGRhdGUgdGhlIGNvbnRhaW5pbmcgdi1tb2RlbCBvblxuICAgKiBwYXJlbnQgPHNlbGVjdD4uXG4gICAqL1xuXG4gIHVwZGF0ZU1vZGVsOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuaXNPcHRpb24pIHtcbiAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnN0YXJ0LnBhcmVudE5vZGVcbiAgICAgIHZhciBtb2RlbCA9IHBhcmVudCAmJiBwYXJlbnQuX192X21vZGVsXG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgbW9kZWwuZm9yY2VVcGRhdGUoKVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5zZXJ0IGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY1xuICAgKi9cblxuICBpbnNlcnQ6IGZ1bmN0aW9uIChmcmFnLCBpbmRleCwgcHJldkVsLCBpbkRvYykge1xuICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKClcbiAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbFxuICAgIH1cbiAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgbnVsbCwgJ2VudGVyJylcbiAgICBpZiAoaW5Eb2MgJiYgc3RhZ2dlckFtb3VudCkge1xuICAgICAgLy8gY3JlYXRlIGFuIGFuY2hvciBhbmQgaW5zZXJ0IGl0IHN5bmNocm9ub3VzbHksXG4gICAgICAvLyBzbyB0aGF0IHdlIGNhbiByZXNvbHZlIHRoZSBjb3JyZWN0IG9yZGVyIHdpdGhvdXRcbiAgICAgIC8vIHdvcnJ5aW5nIGFib3V0IHNvbWUgZWxlbWVudHMgbm90IGluc2VydGVkIHlldFxuICAgICAgdmFyIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvclxuICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yID0gXy5jcmVhdGVBbmNob3IoJ3N0YWdnZXItYW5jaG9yJylcbiAgICAgICAgYW5jaG9yLl9fdmZyYWdfXyA9IGZyYWdcbiAgICAgIH1cbiAgICAgIF8uYWZ0ZXIoYW5jaG9yLCBwcmV2RWwpXG4gICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IF8uY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGxcbiAgICAgICAgZnJhZy5iZWZvcmUoYW5jaG9yKVxuICAgICAgICBfLnJlbW92ZShhbmNob3IpXG4gICAgICB9KVxuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudClcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZy5iZWZvcmUocHJldkVsLm5leHRTaWJsaW5nKVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2NcbiAgICovXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiAoZnJhZywgaW5kZXgsIHRvdGFsLCBpbkRvYykge1xuICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKClcbiAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbFxuICAgICAgLy8gaXQncyBub3QgcG9zc2libGUgZm9yIHRoZSBzYW1lIGZyYWcgdG8gYmUgcmVtb3ZlZFxuICAgICAgLy8gdHdpY2UsIHNvIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHN0YWdnZXIgY2FsbGJhY2ssXG4gICAgICAvLyBpdCBtZWFucyB0aGlzIGZyYWcgaXMgcXVldWVkIGZvciBlbnRlciBidXQgcmVtb3ZlZFxuICAgICAgLy8gYmVmb3JlIGl0cyB0cmFuc2l0aW9uIHN0YXJ0ZWQuIFNpbmNlIGl0IGlzIGFscmVhZHlcbiAgICAgIC8vIGRlc3Ryb3llZCwgd2UgY2FuIGp1c3QgbGVhdmUgaXQgaW4gZGV0YWNoZWQgc3RhdGUuXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCAnbGVhdmUnKVxuICAgIGlmIChpbkRvYyAmJiBzdGFnZ2VyQW1vdW50KSB7XG4gICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IF8uY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGxcbiAgICAgICAgZnJhZy5yZW1vdmUoKVxuICAgICAgfSlcbiAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpXG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWcucmVtb3ZlKClcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1vdmUgYSBmcmFnbWVudCB0byBhIG5ldyBwb3NpdGlvbi5cbiAgICogRm9yY2Ugbm8gdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuICAgKi9cblxuICBtb3ZlOiBmdW5jdGlvbiAoZnJhZywgcHJldkVsKSB7XG4gICAgZnJhZy5iZWZvcmUocHJldkVsLm5leHRTaWJsaW5nLCBmYWxzZSlcbiAgfSxcblxuICAvKipcbiAgICogQ2FjaGUgYSBmcmFnbWVudCB1c2luZyB0cmFjay1ieSBvciB0aGUgb2JqZWN0IGtleS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cbiAgICovXG5cbiAgY2FjaGVGcmFnOiBmdW5jdGlvbiAodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnlcbiAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlXG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSlcbiAgICB2YXIgaWRcbiAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICBpZCA9IHRyYWNrQnlLZXlcbiAgICAgICAgPyB0cmFja0J5S2V5ID09PSAnJGluZGV4J1xuICAgICAgICAgID8gaW5kZXhcbiAgICAgICAgICA6IHZhbHVlW3RyYWNrQnlLZXldXG4gICAgICAgIDogKGtleSB8fCB2YWx1ZSlcbiAgICAgIGlmICghY2FjaGVbaWRdKSB7XG4gICAgICAgIGNhY2hlW2lkXSA9IGZyYWdcbiAgICAgIH0gZWxzZSBpZiAodHJhY2tCeUtleSAhPT0gJyRpbmRleCcpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlkID0gdGhpcy5pZFxuICAgICAgaWYgKHZhbHVlLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgICAgICBpZiAodmFsdWVbaWRdID09PSBudWxsKSB7XG4gICAgICAgICAgdmFsdWVbaWRdID0gZnJhZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiZcbiAgICAgICAgICB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF8uZGVmaW5lKHZhbHVlLCBpZCwgZnJhZylcbiAgICAgIH1cbiAgICB9XG4gICAgZnJhZy5yYXcgPSB2YWx1ZVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYSBjYWNoZWQgZnJhZ21lbnQgZnJvbSB0aGUgdmFsdWUvaW5kZXgva2V5XG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7RnJhZ21lbnR9XG4gICAqL1xuXG4gIGdldENhY2hlZEZyYWc6IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGtleSkge1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeVxuICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpXG4gICAgdmFyIGZyYWdcbiAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICB2YXIgaWQgPSB0cmFja0J5S2V5XG4gICAgICAgID8gdHJhY2tCeUtleSA9PT0gJyRpbmRleCdcbiAgICAgICAgICA/IGluZGV4XG4gICAgICAgICAgOiB2YWx1ZVt0cmFja0J5S2V5XVxuICAgICAgICA6IChrZXkgfHwgdmFsdWUpXG4gICAgICBmcmFnID0gdGhpcy5jYWNoZVtpZF1cbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZyA9IHZhbHVlW3RoaXMuaWRdXG4gICAgfVxuICAgIGlmIChmcmFnICYmIChmcmFnLnJldXNlZCB8fCBmcmFnLmZyZXNoKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gZnJhZ1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmcmFnbWVudCBmcm9tIGNhY2hlLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqL1xuXG4gIGRlbGV0ZUNhY2hlZEZyYWc6IGZ1bmN0aW9uIChmcmFnKSB7XG4gICAgdmFyIHZhbHVlID0gZnJhZy5yYXdcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnlcbiAgICB2YXIgc2NvcGUgPSBmcmFnLnNjb3BlXG4gICAgdmFyIGluZGV4ID0gc2NvcGUuJGluZGV4XG4gICAgLy8gZml4ICM5NDg6IGF2b2lkIGFjY2lkZW50YWxseSBmYWxsIHRocm91Z2ggdG9cbiAgICAvLyBhIHBhcmVudCByZXBlYXRlciB3aGljaCBoYXBwZW5zIHRvIGhhdmUgJGtleS5cbiAgICB2YXIga2V5ID0gc2NvcGUuaGFzT3duUHJvcGVydHkoJyRrZXknKSAmJiBzY29wZS4ka2V5XG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSlcbiAgICBpZiAodHJhY2tCeUtleSB8fCBrZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICB2YXIgaWQgPSB0cmFja0J5S2V5XG4gICAgICAgID8gdHJhY2tCeUtleSA9PT0gJyRpbmRleCdcbiAgICAgICAgICA/IGluZGV4XG4gICAgICAgICAgOiB2YWx1ZVt0cmFja0J5S2V5XVxuICAgICAgICA6IChrZXkgfHwgdmFsdWUpXG4gICAgICB0aGlzLmNhY2hlW2lkXSA9IG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVbdGhpcy5pZF0gPSBudWxsXG4gICAgICBmcmFnLnJhdyA9IG51bGxcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhZ2dlciBhbW91bnQgZm9yIGFuIGluc2VydGlvbi9yZW1vdmFsLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICovXG5cbiAgZ2V0U3RhZ2dlcjogZnVuY3Rpb24gKGZyYWcsIGluZGV4LCB0b3RhbCwgdHlwZSkge1xuICAgIHR5cGUgPSB0eXBlICsgJ1N0YWdnZXInXG4gICAgdmFyIHRyYW5zID0gZnJhZy5ub2RlLl9fdl90cmFuc1xuICAgIHZhciBob29rcyA9IHRyYW5zICYmIHRyYW5zLmhvb2tzXG4gICAgdmFyIGhvb2sgPSBob29rcyAmJiAoaG9va3NbdHlwZV0gfHwgaG9va3Muc3RhZ2dlcilcbiAgICByZXR1cm4gaG9va1xuICAgICAgPyBob29rLmNhbGwoZnJhZywgaW5kZXgsIHRvdGFsKVxuICAgICAgOiBpbmRleCAqIHBhcnNlSW50KHRoaXMucGFyYW1zW3R5cGVdIHx8IHRoaXMucGFyYW1zLnN0YWdnZXIsIDEwKVxuICB9LFxuXG4gIC8qKlxuICAgKiBQcmUtcHJvY2VzcyB0aGUgdmFsdWUgYmVmb3JlIHBpcGluZyBpdCB0aHJvdWdoIHRoZVxuICAgKiBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuICAgKi9cblxuICBfcHJlUHJvY2VzczogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gcmVnYXJkbGVzcyBvZiB0eXBlLCBzdG9yZSB0aGUgdW4tZmlsdGVyZWQgcmF3IHZhbHVlLlxuICAgIHRoaXMucmF3VmFsdWUgPSB2YWx1ZVxuICAgIHJldHVybiB2YWx1ZVxuICB9LFxuXG4gIC8qKlxuICAgKiBQb3N0LXByb2Nlc3MgdGhlIHZhbHVlIGFmdGVyIGl0IGhhcyBiZWVuIHBpcGVkIHRocm91Z2hcbiAgICogdGhlIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG4gICAqXG4gICAqIEl0IGlzIG5lY2Vzc2FyeSBmb3IgdGhpcyB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZVxuICAgKiB3YXRoY2VyJ3MgZGVwZW5kZW5jeSBjb2xsZWN0aW9uIHBoYXNlIGJlY2F1c2Ugd2Ugd2FudFxuICAgKiB0aGUgdi1mb3IgdG8gdXBkYXRlIHdoZW4gdGhlIHNvdXJjZSBPYmplY3QgaXMgbXV0YXRlZC5cbiAgICovXG5cbiAgX3Bvc3RQcm9jZXNzOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAoXy5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSBlbHNlIGlmIChfLmlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAvLyBjb252ZXJ0IHBsYWluIG9iamVjdCB0byBhcnJheS5cbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpXG4gICAgICB2YXIgaSA9IGtleXMubGVuZ3RoXG4gICAgICB2YXIgcmVzID0gbmV3IEFycmF5KGkpXG4gICAgICB2YXIga2V5XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGtleSA9IGtleXNbaV1cbiAgICAgICAgcmVzW2ldID0ge1xuICAgICAgICAgICRrZXk6IGtleSxcbiAgICAgICAgICAkdmFsdWU6IHZhbHVlW2tleV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICB2YWx1ZSA9IHJhbmdlKHZhbHVlKVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlIHx8IFtdXG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG4gICAgICAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNbdGhpcy5kZXNjcmlwdG9yLnJlZl0gPSBudWxsXG4gICAgfVxuICAgIGlmICh0aGlzLmZyYWdzKSB7XG4gICAgICB2YXIgaSA9IHRoaXMuZnJhZ3MubGVuZ3RoXG4gICAgICB2YXIgZnJhZ1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBmcmFnID0gdGhpcy5mcmFnc1tpXVxuICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZylcbiAgICAgICAgZnJhZy5kZXN0cm95KClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZmluZCB0aGUgcHJldmlvdXMgZWxlbWVudCB0aGF0IGlzIGEgZnJhZ21lbnRcbiAqIGFuY2hvci4gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBhIGRlc3Ryb3llZCBmcmFnJ3NcbiAqIGVsZW1lbnQgY291bGQgc3RpbGwgYmUgbGluZ2VyaW5nIGluIHRoZSBET00gYmVmb3JlIGl0c1xuICogbGVhdmluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLCBidXQgaXRzIGluc2VydGVkIGZsYWdcbiAqIHNob3VsZCBoYXZlIGJlZW4gc2V0IHRvIGZhbHNlIHNvIHdlIGNhbiBza2lwIHRoZW0uXG4gKlxuICogSWYgdGhpcyBpcyBhIGJsb2NrIHJlcGVhdCwgd2Ugd2FudCB0byBtYWtlIHN1cmUgd2Ugb25seVxuICogcmV0dXJuIGZyYWcgdGhhdCBpcyBib3VuZCB0byB0aGlzIHYtZm9yLiAoc2VlICM5MjkpXG4gKlxuICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtDb21tZW50fFRleHR9IGFuY2hvclxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBmaW5kUHJldkZyYWcgKGZyYWcsIGFuY2hvciwgaWQpIHtcbiAgdmFyIGVsID0gZnJhZy5ub2RlLnByZXZpb3VzU2libGluZ1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFlbCkgcmV0dXJuXG4gIGZyYWcgPSBlbC5fX3ZmcmFnX19cbiAgd2hpbGUgKFxuICAgICghZnJhZyB8fCBmcmFnLmZvcklkICE9PSBpZCB8fCAhZnJhZy5pbnNlcnRlZCkgJiZcbiAgICBlbCAhPT0gYW5jaG9yXG4gICkge1xuICAgIGVsID0gZWwucHJldmlvdXNTaWJsaW5nXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFlbCkgcmV0dXJuXG4gICAgZnJhZyA9IGVsLl9fdmZyYWdfX1xuICB9XG4gIHJldHVybiBmcmFnXG59XG5cbi8qKlxuICogRmluZCBhIHZtIGZyb20gYSBmcmFnbWVudC5cbiAqXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGZpbmRWbUZyb21GcmFnIChmcmFnKSB7XG4gIHJldHVybiBmcmFnLm5vZGUuX192dWVfXyB8fCBmcmFnLm5vZGUubmV4dFNpYmxpbmcuX192dWVfX1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHJhbmdlIGFycmF5IGZyb20gZ2l2ZW4gbnVtYmVyLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiByYW5nZSAobikge1xuICB2YXIgaSA9IC0xXG4gIHZhciByZXQgPSBuZXcgQXJyYXkobilcbiAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICByZXRbaV0gPSBpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBtb2R1bGUuZXhwb3J0cy53YXJuRHVwbGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgXy53YXJuKFxuICAgICAgJ0R1cGxpY2F0ZSB2YWx1ZSBmb3VuZCBpbiB2LWZvcj1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICtcbiAgICAgIEpTT04uc3RyaW5naWZ5KHZhbHVlKSArICcuIFVzZSB0cmFjay1ieT1cIiRpbmRleFwiIGlmICcgK1xuICAgICAgJ3lvdSBhcmUgZXhwZWN0aW5nIGR1cGxpY2F0ZSB2YWx1ZXMuJ1xuICAgIClcbiAgfVxufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi8uLi91dGlsJylcbnZhciB0ZW1wbGF0ZVBhcnNlciA9IHJlcXVpcmUoJy4uLy4uL3BhcnNlcnMvdGVtcGxhdGUnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgLy8gYSBjb21tZW50IG5vZGUgbWVhbnMgdGhpcyBpcyBhIGJpbmRpbmcgZm9yXG4gICAgLy8ge3t7IGlubGluZSB1bmVzY2FwZWQgaHRtbCB9fX1cbiAgICBpZiAodGhpcy5lbC5ub2RlVHlwZSA9PT0gOCkge1xuICAgICAgLy8gaG9sZCBub2Rlc1xuICAgICAgdGhpcy5ub2RlcyA9IFtdXG4gICAgICAvLyByZXBsYWNlIHRoZSBwbGFjZWhvbGRlciB3aXRoIHByb3BlciBhbmNob3JcbiAgICAgIHRoaXMuYW5jaG9yID0gXy5jcmVhdGVBbmNob3IoJ3YtaHRtbCcpXG4gICAgICBfLnJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpXG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFsdWUgPSBfLnRvU3RyaW5nKHZhbHVlKVxuICAgIGlmICh0aGlzLm5vZGVzKSB7XG4gICAgICB0aGlzLnN3YXAodmFsdWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gdmFsdWVcbiAgICB9XG4gIH0sXG5cbiAgc3dhcDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gcmVtb3ZlIG9sZCBub2Rlc1xuICAgIHZhciBpID0gdGhpcy5ub2Rlcy5sZW5ndGhcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBfLnJlbW92ZSh0aGlzLm5vZGVzW2ldKVxuICAgIH1cbiAgICAvLyBjb252ZXJ0IG5ldyB2YWx1ZSB0byBhIGZyYWdtZW50XG4gICAgLy8gZG8gbm90IGF0dGVtcHQgdG8gcmV0cmlldmUgZnJvbSBpZCBzZWxlY3RvclxuICAgIHZhciBmcmFnID0gdGVtcGxhdGVQYXJzZXIucGFyc2UodmFsdWUsIHRydWUsIHRydWUpXG4gICAgLy8gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGVzZSBub2RlcyBzbyB3ZSBjYW4gcmVtb3ZlIGxhdGVyXG4gICAgdGhpcy5ub2RlcyA9IF8udG9BcnJheShmcmFnLmNoaWxkTm9kZXMpXG4gICAgXy5iZWZvcmUoZnJhZywgdGhpcy5hbmNob3IpXG4gIH1cbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpXG52YXIgRnJhZ21lbnRGYWN0b3J5ID0gcmVxdWlyZSgnLi4vLi4vZnJhZ21lbnQvZmFjdG9yeScpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIHByaW9yaXR5OiAyMDAwLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsXG4gICAgaWYgKCFlbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG4gICAgICB2YXIgbmV4dCA9IGVsLm5leHRFbGVtZW50U2libGluZ1xuICAgICAgaWYgKG5leHQgJiYgXy5hdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgICBfLnJlbW92ZShuZXh0KVxuICAgICAgICB0aGlzLmVsc2VGYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCBuZXh0KVxuICAgICAgfVxuICAgICAgLy8gY2hlY2sgbWFpbiBibG9ja1xuICAgICAgdGhpcy5hbmNob3IgPSBfLmNyZWF0ZUFuY2hvcigndi1pZicpXG4gICAgICBfLnJlcGxhY2UoZWwsIHRoaXMuYW5jaG9yKVxuICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCBlbClcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICd2LWlmPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBjYW5ub3QgYmUgJyArXG4gICAgICAgICd1c2VkIG9uIGFuIGluc3RhbmNlIHJvb3QgZWxlbWVudC4nXG4gICAgICApXG4gICAgICB0aGlzLmludmFsaWQgPSB0cnVlXG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuaW52YWxpZCkgcmV0dXJuXG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBpZiAoIXRoaXMuZnJhZykge1xuICAgICAgICB0aGlzLmluc2VydCgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlKClcbiAgICB9XG4gIH0sXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIHRoaXMuZWxzZUZyYWcucmVtb3ZlKClcbiAgICAgIHRoaXMuZWxzZUZyYWcgPSBudWxsXG4gICAgfVxuICAgIHRoaXMuZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpXG4gICAgdGhpcy5mcmFnLmJlZm9yZSh0aGlzLmFuY2hvcilcbiAgfSxcblxuICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcucmVtb3ZlKClcbiAgICAgIHRoaXMuZnJhZyA9IG51bGxcbiAgICB9XG4gICAgaWYgKHRoaXMuZWxzZUZhY3RvcnkgJiYgIXRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIHRoaXMuZWxzZUZyYWcgPSB0aGlzLmVsc2VGYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZylcbiAgICAgIHRoaXMuZWxzZUZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKVxuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcuZGVzdHJveSgpXG4gICAgfVxuICB9XG59XG4iLCIvLyB0ZXh0ICYgaHRtbFxuZXhwb3J0cy50ZXh0ID0gcmVxdWlyZSgnLi90ZXh0JylcbmV4cG9ydHMuaHRtbCA9IHJlcXVpcmUoJy4vaHRtbCcpXG5cbi8vIGxvZ2ljIGNvbnRyb2xcbmV4cG9ydHNbJ2ZvciddID0gcmVxdWlyZSgnLi9mb3InKVxuZXhwb3J0c1snaWYnXSA9IHJlcXVpcmUoJy4vaWYnKVxuZXhwb3J0cy5zaG93ID0gcmVxdWlyZSgnLi9zaG93JylcblxuLy8gdHdvLXdheSBiaW5kaW5nXG5leHBvcnRzLm1vZGVsID0gcmVxdWlyZSgnLi9tb2RlbCcpXG5cbi8vIGV2ZW50IGhhbmRsaW5nXG5leHBvcnRzLm9uID0gcmVxdWlyZSgnLi9vbicpXG5cbi8vIGF0dHJpYnV0ZXNcbmV4cG9ydHMuYmluZCA9IHJlcXVpcmUoJy4vYmluZCcpXG5cbi8vIHJlZiAmIGVsXG5leHBvcnRzLmVsID0gcmVxdWlyZSgnLi9lbCcpXG5leHBvcnRzLnJlZiA9IHJlcXVpcmUoJy4vcmVmJylcblxuLy8gY2xvYWtcbmV4cG9ydHMuY2xvYWsgPSByZXF1aXJlKCcuL2Nsb2FrJylcbiIsInZhciBfID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbCcpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXNcbiAgICB2YXIgZWwgPSB0aGlzLmVsXG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKVxuICAgICAgICA/IGVsLl92YWx1ZVxuICAgICAgICA6IHNlbGYucGFyYW1zLm51bWJlclxuICAgICAgICAgID8gXy50b051bWJlcihlbC52YWx1ZSlcbiAgICAgICAgICA6IGVsLnZhbHVlXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Qm9vbGVhblZhbHVlICgpIHtcbiAgICAgIHZhciB2YWwgPSBlbC5jaGVja2VkXG4gICAgICBpZiAodmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl90cnVlVmFsdWVcbiAgICAgIH1cbiAgICAgIGlmICghdmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfZmFsc2VWYWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fZmFsc2VWYWx1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbFxuICAgIH1cblxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbW9kZWwgPSBzZWxmLl93YXRjaGVyLnZhbHVlXG4gICAgICBpZiAoXy5pc0FycmF5KG1vZGVsKSkge1xuICAgICAgICB2YXIgdmFsID0gc2VsZi5nZXRWYWx1ZSgpXG4gICAgICAgIGlmIChlbC5jaGVja2VkKSB7XG4gICAgICAgICAgaWYgKF8uaW5kZXhPZihtb2RlbCwgdmFsKSA8IDApIHtcbiAgICAgICAgICAgIG1vZGVsLnB1c2godmFsKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb2RlbC4kcmVtb3ZlKHZhbClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5zZXQoZ2V0Qm9vbGVhblZhbHVlKCkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcilcbiAgICBpZiAoZWwuY2hlY2tlZCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyXG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbFxuICAgIGlmIChfLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBlbC5jaGVja2VkID0gXy5pbmRleE9mKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpID4gLTFcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IF8ubG9vc2VFcXVhbCh2YWx1ZSwgZWwuX3RydWVWYWx1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSAhIXZhbHVlXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uLy4uLy4uL3V0aWwnKVxuXG52YXIgaGFuZGxlcnMgPSB7XG4gIHRleHQ6IHJlcXVpcmUoJy4vdGV4dCcpLFxuICByYWRpbzogcmVxdWlyZSgnLi9yYWRpbycpLFxuICBzZWxlY3Q6IHJlcXVpcmUoJy4vc2VsZWN0JyksXG4gIGNoZWNrYm94OiByZXF1aXJlKCcuL2NoZWNrYm94Jylcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgcHJpb3JpdHk6IDgwMCxcbiAgdHdvV2F5OiB0cnVlLFxuICBoYW5kbGVyczogaGFuZGxlcnMsXG4gIHBhcmFtczogWydsYXp5JywgJ251bWJlcicsICdkZWJvdW5jZSddLFxuXG4gIC8qKlxuICAgKiBQb3NzaWJsZSBlbGVtZW50czpcbiAgICogICA8c2VsZWN0PlxuICAgKiAgIDx0ZXh0YXJlYT5cbiAgICogICA8aW5wdXQgdHlwZT1cIipcIj5cbiAgICogICAgIC0gdGV4dFxuICAgKiAgICAgLSBjaGVja2JveFxuICAgKiAgICAgLSByYWRpb1xuICAgKiAgICAgLSBudW1iZXJcbiAgICovXG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIC8vIGZyaWVuZGx5IHdhcm5pbmcuLi5cbiAgICB0aGlzLmNoZWNrRmlsdGVycygpXG4gICAgaWYgKHRoaXMuaGFzUmVhZCAmJiAhdGhpcy5oYXNXcml0ZSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgK1xuICAgICAgICAndi1tb2RlbC4gWW91IG1pZ2h0IHdhbnQgdG8gdXNlIGEgdHdvLXdheSBmaWx0ZXIgJyArXG4gICAgICAgICd0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvci4nXG4gICAgICApXG4gICAgfVxuICAgIHZhciBlbCA9IHRoaXMuZWxcbiAgICB2YXIgdGFnID0gZWwudGFnTmFtZVxuICAgIHZhciBoYW5kbGVyXG4gICAgaWYgKHRhZyA9PT0gJ0lOUFVUJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzW2VsLnR5cGVdIHx8IGhhbmRsZXJzLnRleHRcbiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy5zZWxlY3RcbiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnRleHRcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICd2LW1vZGVsIGRvZXMgbm90IHN1cHBvcnQgZWxlbWVudCB0eXBlOiAnICsgdGFnXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgZWwuX192X21vZGVsID0gdGhpc1xuICAgIGhhbmRsZXIuYmluZC5jYWxsKHRoaXMpXG4gICAgdGhpcy51cGRhdGUgPSBoYW5kbGVyLnVwZGF0ZVxuICAgIHRoaXMuX3VuYmluZCA9IGhhbmRsZXIudW5iaW5kXG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIHJlYWQvd3JpdGUgZmlsdGVyIHN0YXRzLlxuICAgKi9cblxuICBjaGVja0ZpbHRlcnM6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmlsdGVycyA9IHRoaXMuZmlsdGVyc1xuICAgIGlmICghZmlsdGVycykgcmV0dXJuXG4gICAgdmFyIGkgPSBmaWx0ZXJzLmxlbmd0aFxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBmaWx0ZXIgPSBfLnJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlcnNbaV0ubmFtZSlcbiAgICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nIHx8IGZpbHRlci5yZWFkKSB7XG4gICAgICAgIHRoaXMuaGFzUmVhZCA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXIud3JpdGUpIHtcbiAgICAgICAgdGhpcy5oYXNXcml0ZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5lbC5fX3ZfbW9kZWwgPSBudWxsXG4gICAgdGhpcy5fdW5iaW5kICYmIHRoaXMuX3VuYmluZCgpXG4gIH1cbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbCcpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXNcbiAgICB2YXIgZWwgPSB0aGlzLmVsXG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gdmFsdWUgb3ZlcndyaXRlIHZpYSB2LWJpbmQ6dmFsdWVcbiAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl92YWx1ZVxuICAgICAgfVxuICAgICAgdmFyIHZhbCA9IGVsLnZhbHVlXG4gICAgICBpZiAoc2VsZi5wYXJhbXMubnVtYmVyKSB7XG4gICAgICAgIHZhbCA9IF8udG9OdW1iZXIodmFsKVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbFxuICAgIH1cblxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLnNldChzZWxmLmdldFZhbHVlKCkpXG4gICAgfVxuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpXG5cbiAgICBpZiAoZWwuY2hlY2tlZCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyXG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5lbC5jaGVja2VkID0gXy5sb29zZUVxdWFsKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpXG4gIH1cbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbCcpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXNcbiAgICB2YXIgZWwgPSB0aGlzLmVsXG5cbiAgICAvLyBtZXRob2QgdG8gZm9yY2UgdXBkYXRlIERPTSB1c2luZyBsYXRlc3QgdmFsdWUuXG4gICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZWxmLl93YXRjaGVyKSB7XG4gICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIuZ2V0KCkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxuICAgIHZhciBtdWx0aXBsZSA9IHRoaXMubXVsdGlwbGUgPSBlbC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJylcblxuICAgIC8vIGF0dGFjaCBsaXN0ZW5lclxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUpXG4gICAgICB2YWx1ZSA9IHNlbGYucGFyYW1zLm51bWJlclxuICAgICAgICA/IF8uaXNBcnJheSh2YWx1ZSlcbiAgICAgICAgICA/IHZhbHVlLm1hcChfLnRvTnVtYmVyKVxuICAgICAgICAgIDogXy50b051bWJlcih2YWx1ZSlcbiAgICAgICAgOiB2YWx1ZVxuICAgICAgc2VsZi5zZXQodmFsdWUpXG4gICAgfVxuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpXG5cbiAgICAvLyBpZiBoYXMgaW5pdGlhbCB2YWx1ZSwgc2V0IGFmdGVyQmluZFxuICAgIHZhciBpbml0VmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUsIHRydWUpXG4gICAgaWYgKChtdWx0aXBsZSAmJiBpbml0VmFsdWUubGVuZ3RoKSB8fFxuICAgICAgICAoIW11bHRpcGxlICYmIGluaXRWYWx1ZSAhPT0gbnVsbCkpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lclxuICAgIH1cblxuICAgIC8vIEFsbCBtYWpvciBicm93c2VycyBleGNlcHQgRmlyZWZveCByZXNldHNcbiAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XG4gICAgLy8gaXMgYXBwZW5kZWQgdG8gYSBuZXcgcGFyZW50LCB0aGVyZWZvcmUgd2UgaGF2ZSB0b1xuICAgIC8vIGZvcmNlIGEgRE9NIHVwZGF0ZSB3aGVuZXZlciB0aGF0IGhhcHBlbnMuLi5cbiAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIHRoaXMuZm9yY2VVcGRhdGUpXG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsXG4gICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xXG4gICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBfLmlzQXJyYXkodmFsdWUpXG4gICAgdmFyIG9wdGlvbnMgPSBlbC5vcHRpb25zXG4gICAgdmFyIGkgPSBvcHRpb25zLmxlbmd0aFxuICAgIHZhciBvcCwgdmFsXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgb3AgPSBvcHRpb25zW2ldXG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJylcbiAgICAgICAgPyBvcC5fdmFsdWVcbiAgICAgICAgOiBvcC52YWx1ZVxuICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgICBvcC5zZWxlY3RlZCA9IG11bHRpXG4gICAgICAgID8gaW5kZXhPZih2YWx1ZSwgdmFsKSA+IC0xXG4gICAgICAgIDogXy5sb29zZUVxdWFsKHZhbHVlLCB2YWwpXG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHRoaXMudm0uJG9mZignaG9vazphdHRhY2hlZCcsIHRoaXMuZm9yY2VVcGRhdGUpXG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgc2VsZWN0IHZhbHVlXG4gKlxuICogQHBhcmFtIHtTZWxlY3RFbGVtZW50fSBlbFxuICogQHBhcmFtIHtCb29sZWFufSBtdWx0aVxuICogQHBhcmFtIHtCb29sZWFufSBpbml0XG4gKiBAcmV0dXJuIHtBcnJheXwqfVxuICovXG5cbmZ1bmN0aW9uIGdldFZhbHVlIChlbCwgbXVsdGksIGluaXQpIHtcbiAgdmFyIHJlcyA9IG11bHRpID8gW10gOiBudWxsXG4gIHZhciBvcCwgdmFsLCBzZWxlY3RlZFxuICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgb3AgPSBlbC5vcHRpb25zW2ldXG4gICAgc2VsZWN0ZWQgPSBpbml0XG4gICAgICA/IG9wLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKVxuICAgICAgOiBvcC5zZWxlY3RlZFxuICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpXG4gICAgICAgID8gb3AuX3ZhbHVlXG4gICAgICAgIDogb3AudmFsdWVcbiAgICAgIGlmIChtdWx0aSkge1xuICAgICAgICByZXMucHVzaCh2YWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuLyoqXG4gKiBOYXRpdmUgQXJyYXkuaW5kZXhPZiB1c2VzIHN0cmljdCBlcXVhbCwgYnV0IGluIHRoaXNcbiAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZiAoYXJyLCB2YWwpIHtcbiAgdmFyIGkgPSBhcnIubGVuZ3RoXG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAoXy5sb29zZUVxdWFsKGFycltpXSwgdmFsKSkge1xuICAgICAgcmV0dXJuIGlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xXG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uLy4uLy4uL3V0aWwnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgdmFyIGVsID0gdGhpcy5lbFxuICAgIHZhciBpc1JhbmdlID0gZWwudHlwZSA9PT0gJ3JhbmdlJ1xuICAgIHZhciBsYXp5ID0gdGhpcy5wYXJhbXMubGF6eVxuICAgIHZhciBudW1iZXIgPSB0aGlzLnBhcmFtcy5udW1iZXJcbiAgICB2YXIgZGVib3VuY2UgPSB0aGlzLnBhcmFtcy5kZWJvdW5jZVxuXG4gICAgLy8gaGFuZGxlIGNvbXBvc2l0aW9uIGV2ZW50cy5cbiAgICAvLyAgIGh0dHA6Ly9ibG9nLmV2YW55b3UubWUvMjAxNC8wMS8wMy9jb21wb3NpdGlvbi1ldmVudC9cbiAgICAvLyBza2lwIHRoaXMgZm9yIEFuZHJvaWQgYmVjYXVzZSBpdCBoYW5kbGVzIGNvbXBvc2l0aW9uXG4gICAgLy8gZXZlbnRzIHF1aXRlIGRpZmZlcmVudGx5LiBBbmRyb2lkIGRvZXNuJ3QgdHJpZ2dlclxuICAgIC8vIGNvbXBvc2l0aW9uIGV2ZW50cyBmb3IgbGFuZ3VhZ2UgaW5wdXQgbWV0aG9kcyBlLmcuXG4gICAgLy8gQ2hpbmVzZSwgYnV0IGluc3RlYWQgdHJpZ2dlcnMgdGhlbSBmb3Igc3BlbGxpbmdcbiAgICAvLyBzdWdnZXN0aW9ucy4uLiAoc2VlIERpc2N1c3Npb24vIzE2MilcbiAgICB2YXIgY29tcG9zaW5nID0gZmFsc2VcbiAgICBpZiAoIV8uaXNBbmRyb2lkICYmICFpc1JhbmdlKSB7XG4gICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbnN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21wb3NpbmcgPSB0cnVlXG4gICAgICB9KVxuICAgICAgdGhpcy5vbignY29tcG9zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbXBvc2luZyA9IGZhbHNlXG4gICAgICAgIC8vIGluIElFMTEgdGhlIFwiY29tcG9zaXRpb25lbmRcIiBldmVudCBmaXJlcyBBRlRFUlxuICAgICAgICAvLyB0aGUgXCJpbnB1dFwiIGV2ZW50LCBzbyB0aGUgaW5wdXQgaGFuZGxlciBpcyBibG9ja2VkXG4gICAgICAgIC8vIGF0IHRoZSBlbmQuLi4gaGF2ZSB0byBjYWxsIGl0IGhlcmUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vICMxMzI3OiBpbiBsYXp5IG1vZGUgdGhpcyBpcyB1bmVjZXNzYXJ5LlxuICAgICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgICBzZWxmLmxpc3RlbmVyKClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBwcmV2ZW50IG1lc3Npbmcgd2l0aCB0aGUgaW5wdXQgd2hlbiB1c2VyIGlzIHR5cGluZyxcbiAgICAvLyBhbmQgZm9yY2UgdXBkYXRlIG9uIGJsdXIuXG4gICAgdGhpcy5mb2N1c2VkID0gZmFsc2VcbiAgICBpZiAoIWlzUmFuZ2UpIHtcbiAgICAgIHRoaXMub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmZvY3VzZWQgPSB0cnVlXG4gICAgICB9KVxuICAgICAgdGhpcy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5mb2N1c2VkID0gZmFsc2VcbiAgICAgICAgc2VsZi5saXN0ZW5lcigpXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIE5vdyBhdHRhY2ggdGhlIG1haW4gbGlzdGVuZXJcbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGNvbXBvc2luZykgcmV0dXJuXG4gICAgICB2YXIgdmFsID0gbnVtYmVyIHx8IGlzUmFuZ2VcbiAgICAgICAgPyBfLnRvTnVtYmVyKGVsLnZhbHVlKVxuICAgICAgICA6IGVsLnZhbHVlXG4gICAgICBzZWxmLnNldCh2YWwpXG4gICAgICAvLyBmb3JjZSB1cGRhdGUgb24gbmV4dCB0aWNrIHRvIGF2b2lkIGxvY2sgJiBzYW1lIHZhbHVlXG4gICAgICAvLyBhbHNvIG9ubHkgdXBkYXRlIHdoZW4gdXNlciBpcyBub3QgdHlwaW5nXG4gICAgICBfLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuX2JvdW5kICYmICFzZWxmLmZvY3VzZWQpIHtcbiAgICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLnZhbHVlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIGFwcGx5IGRlYm91bmNlXG4gICAgaWYgKGRlYm91bmNlKSB7XG4gICAgICB0aGlzLmxpc3RlbmVyID0gXy5kZWJvdW5jZSh0aGlzLmxpc3RlbmVyLCBkZWJvdW5jZSlcbiAgICB9XG5cbiAgICAvLyBTdXBwb3J0IGpRdWVyeSBldmVudHMsIHNpbmNlIGpRdWVyeS50cmlnZ2VyKCkgZG9lc24ndFxuICAgIC8vIHRyaWdnZXIgbmF0aXZlIGV2ZW50cyBpbiBzb21lIGNhc2VzIGFuZCBzb21lIHBsdWdpbnNcbiAgICAvLyByZWx5IG9uICQudHJpZ2dlcigpXG4gICAgLy9cbiAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSBpZiBhIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHVzaW5nXG4gICAgLy8galF1ZXJ5LCBpdCBpcyBhbHNvIHJlbW92ZWQgd2l0aCBqUXVlcnksIHRoYXQncyB3aHlcbiAgICAvLyB3ZSBkbyB0aGUgY2hlY2sgZm9yIGVhY2ggZGlyZWN0aXZlIGluc3RhbmNlIGFuZFxuICAgIC8vIHN0b3JlIHRoYXQgY2hlY2sgcmVzdWx0IG9uIGl0c2VsZi4gVGhpcyBhbHNvIGFsbG93c1xuICAgIC8vIGVhc2llciB0ZXN0IGNvdmVyYWdlIGNvbnRyb2wgYnkgdW5zZXR0aW5nIHRoZSBnbG9iYWxcbiAgICAvLyBqUXVlcnkgdmFyaWFibGUgaW4gdGVzdHMuXG4gICAgdGhpcy5oYXNqUXVlcnkgPSB0eXBlb2YgalF1ZXJ5ID09PSAnZnVuY3Rpb24nXG4gICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG4gICAgICBqUXVlcnkoZWwpLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKVxuICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgIGpRdWVyeShlbCkub24oJ2lucHV0JywgdGhpcy5saXN0ZW5lcilcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcilcbiAgICAgIGlmICghbGF6eSkge1xuICAgICAgICB0aGlzLm9uKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSUU5IGRvZXNuJ3QgZmlyZSBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UvZGVsL2N1dFxuICAgIGlmICghbGF6eSAmJiBfLmlzSUU5KSB7XG4gICAgICB0aGlzLm9uKCdjdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF8ubmV4dFRpY2soc2VsZi5saXN0ZW5lcilcbiAgICAgIH0pXG4gICAgICB0aGlzLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQ2IHx8IGUua2V5Q29kZSA9PT0gOCkge1xuICAgICAgICAgIHNlbGYubGlzdGVuZXIoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIHNldCBpbml0aWFsIHZhbHVlIGlmIHByZXNlbnRcbiAgICBpZiAoXG4gICAgICBlbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgfHxcbiAgICAgIChlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnICYmIGVsLnZhbHVlLnRyaW0oKSlcbiAgICApIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lclxuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHRoaXMuZWwudmFsdWUgPSBfLnRvU3RyaW5nKHZhbHVlKVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWxcbiAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcbiAgICAgIGpRdWVyeShlbCkub2ZmKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKVxuICAgICAgalF1ZXJ5KGVsKS5vZmYoJ2lucHV0JywgdGhpcy5saXN0ZW5lcilcbiAgICB9XG4gIH1cbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpXG5cbi8vIGtleUNvZGUgYWxpYXNlc1xudmFyIGtleUNvZGVzID0ge1xuICBlc2M6IDI3LFxuICB0YWI6IDksXG4gIGVudGVyOiAxMyxcbiAgc3BhY2U6IDMyLFxuICAnZGVsZXRlJzogNDYsXG4gIHVwOiAzOCxcbiAgbGVmdDogMzcsXG4gIHJpZ2h0OiAzOSxcbiAgZG93bjogNDBcbn1cblxuZnVuY3Rpb24ga2V5RmlsdGVyIChoYW5kbGVyLCBrZXlzKSB7XG4gIHZhciBjb2RlcyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgY2hhckNvZGUgPSBrZXkuY2hhckNvZGVBdCgwKVxuICAgIGlmIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpIHtcbiAgICAgIHJldHVybiBwYXJzZUludChrZXksIDEwKVxuICAgIH1cbiAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2hhckNvZGUgPSBrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoY2hhckNvZGUgPiA2NCAmJiBjaGFyQ29kZSA8IDkxKSB7XG4gICAgICAgIHJldHVybiBjaGFyQ29kZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5Q29kZXNba2V5XVxuICB9KVxuICByZXR1cm4gZnVuY3Rpb24ga2V5SGFuZGxlciAoZSkge1xuICAgIGlmIChjb2Rlcy5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzdG9wRmlsdGVyIChoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBzdG9wSGFuZGxlciAoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpXG4gIH1cbn1cblxuZnVuY3Rpb24gcHJldmVudEZpbHRlciAoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gcHJldmVudEhhbmRsZXIgKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgYWNjZXB0U3RhdGVtZW50OiB0cnVlLFxuICBwcmlvcml0eTogNzAwLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBkZWFsIHdpdGggaWZyYW1lc1xuICAgIGlmIChcbiAgICAgIHRoaXMuZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScgJiZcbiAgICAgIHRoaXMuYXJnICE9PSAnbG9hZCdcbiAgICApIHtcbiAgICAgIHZhciBzZWxmID0gdGhpc1xuICAgICAgdGhpcy5pZnJhbWVCaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfLm9uKHNlbGYuZWwuY29udGVudFdpbmRvdywgc2VsZi5hcmcsIHNlbGYuaGFuZGxlcilcbiAgICAgIH1cbiAgICAgIHRoaXMub24oJ2xvYWQnLCB0aGlzLmlmcmFtZUJpbmQpXG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAvLyBzdHViIGEgbm9vcCBmb3Igdi1vbiB3aXRoIG5vIHZhbHVlLFxuICAgIC8vIGUuZy4gQG1vdXNlZG93bi5wcmV2ZW50XG4gICAgaWYgKCF0aGlzLmRlc2NyaXB0b3IucmF3KSB7XG4gICAgICBoYW5kbGVyID0gZnVuY3Rpb24gKCkge31cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAndi1vbjonICsgdGhpcy5hcmcgKyAnPVwiJyArXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiArICdcIiBleHBlY3RzIGEgZnVuY3Rpb24gdmFsdWUsICcgK1xuICAgICAgICAnZ290ICcgKyBoYW5kbGVyXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBhcHBseSBtb2RpZmllcnNcbiAgICBpZiAodGhpcy5tb2RpZmllcnMuc3RvcCkge1xuICAgICAgaGFuZGxlciA9IHN0b3BGaWx0ZXIoaGFuZGxlcilcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnByZXZlbnQpIHtcbiAgICAgIGhhbmRsZXIgPSBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpXG4gICAgfVxuICAgIC8vIGtleSBmaWx0ZXJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubW9kaWZpZXJzKVxuICAgICAgLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgIT09ICdzdG9wJyAmJiBrZXkgIT09ICdwcmV2ZW50J1xuICAgICAgfSlcbiAgICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICAgIGhhbmRsZXIgPSBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cylcbiAgICB9XG5cbiAgICB0aGlzLnJlc2V0KClcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyXG5cbiAgICBpZiAodGhpcy5pZnJhbWVCaW5kKSB7XG4gICAgICB0aGlzLmlmcmFtZUJpbmQoKVxuICAgIH0gZWxzZSB7XG4gICAgICBfLm9uKHRoaXMuZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpXG4gICAgfVxuICB9LFxuXG4gIHJlc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5pZnJhbWVCaW5kXG4gICAgICA/IHRoaXMuZWwuY29udGVudFdpbmRvd1xuICAgICAgOiB0aGlzLmVsXG4gICAgaWYgKHRoaXMuaGFuZGxlcikge1xuICAgICAgXy5vZmYoZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpXG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVzZXQoKVxuICB9XG59XG4iLCJpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuLi8uLi91dGlsJykud2FybihcbiAgICAgICAgJ3YtcmVmOicgKyB0aGlzLmFyZyArICcgbXVzdCBiZSB1c2VkIG9uIGEgY2hpbGQgJyArXG4gICAgICAgICdjb21wb25lbnQuIEZvdW5kIG9uIDwnICsgdGhpcy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPi4nXG4gICAgICApXG4gICAgfVxuICB9XG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxudmFyIHRyYW5zaXRpb24gPSByZXF1aXJlKCcuLi8uLi90cmFuc2l0aW9uJylcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gKCkge1xuICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcbiAgICB2YXIgbmV4dCA9IHRoaXMuZWwubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgaWYgKG5leHQgJiYgXy5hdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5hcHBseSh0aGlzLmVsLCB2YWx1ZSlcbiAgICBpZiAodGhpcy5lbHNlRWwpIHtcbiAgICAgIHRoaXMuYXBwbHkodGhpcy5lbHNlRWwsICF2YWx1ZSlcbiAgICB9XG4gIH0sXG5cbiAgYXBwbHk6IGZ1bmN0aW9uIChlbCwgdmFsdWUpIHtcbiAgICB0cmFuc2l0aW9uLmFwcGx5KGVsLCB2YWx1ZSA/IDEgOiAtMSwgZnVuY3Rpb24gKCkge1xuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSdcbiAgICB9LCB0aGlzLnZtKVxuICB9XG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hdHRyID0gdGhpcy5lbC5ub2RlVHlwZSA9PT0gM1xuICAgICAgPyAnZGF0YSdcbiAgICAgIDogJ3RleHRDb250ZW50J1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5lbFt0aGlzLmF0dHJdID0gXy50b1N0cmluZyh2YWx1ZSlcbiAgfVxufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciBQYXRoID0gcmVxdWlyZSgnLi4vcGFyc2Vycy9wYXRoJylcbnZhciB0b0FycmF5ID0gcmVxdWlyZSgnLi4vZGlyZWN0aXZlcy9wdWJsaWMvZm9yJykuX3Bvc3RQcm9jZXNzXG5cbi8qKlxuICogTGltaXQgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAoRGVjaW1hbCBleHBlY3RlZClcbiAqL1xuXG5leHBvcnRzLmxpbWl0QnkgPSBmdW5jdGlvbiAoYXJyLCBuLCBvZmZzZXQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0LCAxMCkgOiAwXG4gIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcidcbiAgICA/IGFyci5zbGljZShvZmZzZXQsIG9mZnNldCArIG4pXG4gICAgOiBhcnJcbn1cblxuLyoqXG4gKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG4gKiBAcGFyYW0ge1N0cmluZ30gW2RlbGltaXRlcl1cbiAqIEBwYXJhbSB7U3RyaW5nfSAuLi5kYXRhS2V5c1xuICovXG5cbmV4cG9ydHMuZmlsdGVyQnkgPSBmdW5jdGlvbiAoYXJyLCBzZWFyY2gsIGRlbGltaXRlcikge1xuICBhcnIgPSB0b0FycmF5KGFycilcbiAgaWYgKHNlYXJjaCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGFyclxuICB9XG4gIGlmICh0eXBlb2Ygc2VhcmNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGFyci5maWx0ZXIoc2VhcmNoKVxuICB9XG4gIC8vIGNhc3QgdG8gbG93ZXJjYXNlIHN0cmluZ1xuICBzZWFyY2ggPSAoJycgKyBzZWFyY2gpLnRvTG93ZXJDYXNlKClcbiAgLy8gYWxsb3cgb3B0aW9uYWwgYGluYCBkZWxpbWl0ZXJcbiAgLy8gYmVjYXVzZSB3aHkgbm90XG4gIHZhciBuID0gZGVsaW1pdGVyID09PSAnaW4nID8gMyA6IDJcbiAgLy8gZXh0cmFjdCBhbmQgZmxhdHRlbiBrZXlzXG4gIHZhciBrZXlzID0gXy50b0FycmF5KGFyZ3VtZW50cywgbikucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXIpIHtcbiAgICByZXR1cm4gcHJldi5jb25jYXQoY3VyKVxuICB9LCBbXSlcbiAgdmFyIHJlcyA9IFtdXG4gIHZhciBpdGVtLCBrZXksIHZhbCwgalxuICBmb3IgKHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpdGVtID0gYXJyW2ldXG4gICAgdmFsID0gKGl0ZW0gJiYgaXRlbS4kdmFsdWUpIHx8IGl0ZW1cbiAgICBqID0ga2V5cy5sZW5ndGhcbiAgICBpZiAoaikge1xuICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICBrZXkgPSBrZXlzW2pdXG4gICAgICAgIGlmICgoa2V5ID09PSAnJGtleScgJiYgY29udGFpbnMoaXRlbS4ka2V5LCBzZWFyY2gpKSB8fFxuICAgICAgICAgICAgY29udGFpbnMoUGF0aC5nZXQodmFsLCBrZXkpLCBzZWFyY2gpKSB7XG4gICAgICAgICAgcmVzLnB1c2goaXRlbSlcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjb250YWlucyhpdGVtLCBzZWFyY2gpKSB7XG4gICAgICByZXMucHVzaChpdGVtKVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qKlxuICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNvcnRLZXlcbiAqIEBwYXJhbSB7U3RyaW5nfSByZXZlcnNlXG4gKi9cblxuZXhwb3J0cy5vcmRlckJ5ID0gZnVuY3Rpb24gKGFyciwgc29ydEtleSwgcmV2ZXJzZSkge1xuICBhcnIgPSB0b0FycmF5KGFycilcbiAgaWYgKCFzb3J0S2V5KSB7XG4gICAgcmV0dXJuIGFyclxuICB9XG4gIHZhciBvcmRlciA9IChyZXZlcnNlICYmIHJldmVyc2UgPCAwKSA/IC0xIDogMVxuICAvLyBzb3J0IG9uIGEgY29weSB0byBhdm9pZCBtdXRhdGluZyBvcmlnaW5hbCBhcnJheVxuICByZXR1cm4gYXJyLnNsaWNlKCkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgIGlmIChzb3J0S2V5ICE9PSAnJGtleScpIHtcbiAgICAgIGlmIChfLmlzT2JqZWN0KGEpICYmICckdmFsdWUnIGluIGEpIGEgPSBhLiR2YWx1ZVxuICAgICAgaWYgKF8uaXNPYmplY3QoYikgJiYgJyR2YWx1ZScgaW4gYikgYiA9IGIuJHZhbHVlXG4gICAgfVxuICAgIGEgPSBfLmlzT2JqZWN0KGEpID8gUGF0aC5nZXQoYSwgc29ydEtleSkgOiBhXG4gICAgYiA9IF8uaXNPYmplY3QoYikgPyBQYXRoLmdldChiLCBzb3J0S2V5KSA6IGJcbiAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiBhID4gYiA/IG9yZGVyIDogLW9yZGVyXG4gIH0pXG59XG5cbi8qKlxuICogU3RyaW5nIGNvbnRhaW4gaGVscGVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcbiAqL1xuXG5mdW5jdGlvbiBjb250YWlucyAodmFsLCBzZWFyY2gpIHtcbiAgdmFyIGlcbiAgaWYgKF8uaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpXG4gICAgaSA9IGtleXMubGVuZ3RoXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtrZXlzW2ldXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChfLmlzQXJyYXkodmFsKSkge1xuICAgIGkgPSB2YWwubGVuZ3RoXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtpXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh2YWwgIT0gbnVsbCkge1xuICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoKSA+IC0xXG4gIH1cbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG5cbi8qKlxuICogU3RyaW5naWZ5IHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRlbnRcbiAqL1xuXG5leHBvcnRzLmpzb24gPSB7XG4gIHJlYWQ6IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZW50KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZydcbiAgICAgID8gdmFsdWVcbiAgICAgIDogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIE51bWJlcihpbmRlbnQpIHx8IDIpXG4gIH0sXG4gIHdyaXRlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogJ2FiYycgPT4gJ0FiYydcbiAqL1xuXG5leHBvcnRzLmNhcGl0YWxpemUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnXG4gIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKVxuICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKVxufVxuXG4vKipcbiAqICdhYmMnID0+ICdBQkMnXG4gKi9cblxuZXhwb3J0cy51cHBlcmNhc2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgcmV0dXJuICh2YWx1ZSB8fCB2YWx1ZSA9PT0gMClcbiAgICA/IHZhbHVlLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKVxuICAgIDogJydcbn1cblxuLyoqXG4gKiAnQWJDJyA9PiAnYWJjJ1xuICovXG5cbmV4cG9ydHMubG93ZXJjYXNlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHJldHVybiAodmFsdWUgfHwgdmFsdWUgPT09IDApXG4gICAgPyB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKClcbiAgICA6ICcnXG59XG5cbi8qKlxuICogMTIzNDUgPT4gJDEyLDM0NS4wMFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzaWduXG4gKi9cblxudmFyIGRpZ2l0c1JFID0gLyhcXGR7M30pKD89XFxkKS9nXG5leHBvcnRzLmN1cnJlbmN5ID0gZnVuY3Rpb24gKHZhbHVlLCBjdXJyZW5jeSkge1xuICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpXG4gIGlmICghaXNGaW5pdGUodmFsdWUpIHx8ICghdmFsdWUgJiYgdmFsdWUgIT09IDApKSByZXR1cm4gJydcbiAgY3VycmVuY3kgPSBjdXJyZW5jeSAhPSBudWxsID8gY3VycmVuY3kgOiAnJCdcbiAgdmFyIHN0cmluZ2lmaWVkID0gTWF0aC5hYnModmFsdWUpLnRvRml4ZWQoMilcbiAgdmFyIF9pbnQgPSBzdHJpbmdpZmllZC5zbGljZSgwLCAtMylcbiAgdmFyIGkgPSBfaW50Lmxlbmd0aCAlIDNcbiAgdmFyIGhlYWQgPSBpID4gMFxuICAgID8gKF9pbnQuc2xpY2UoMCwgaSkgKyAoX2ludC5sZW5ndGggPiAzID8gJywnIDogJycpKVxuICAgIDogJydcbiAgdmFyIF9mbG9hdCA9IHN0cmluZ2lmaWVkLnNsaWNlKC0zKVxuICB2YXIgc2lnbiA9IHZhbHVlIDwgMCA/ICctJyA6ICcnXG4gIHJldHVybiBjdXJyZW5jeSArIHNpZ24gKyBoZWFkICtcbiAgICBfaW50LnNsaWNlKGkpLnJlcGxhY2UoZGlnaXRzUkUsICckMSwnKSArXG4gICAgX2Zsb2F0XG59XG5cbi8qKlxuICogJ2l0ZW0nID0+ICdpdGVtcydcbiAqXG4gKiBAcGFyYW1zXG4gKiAgYW4gYXJyYXkgb2Ygc3RyaW5ncyBjb3JyZXNwb25kaW5nIHRvXG4gKiAgdGhlIHNpbmdsZSwgZG91YmxlLCB0cmlwbGUgLi4uIGZvcm1zIG9mIHRoZSB3b3JkIHRvXG4gKiAgYmUgcGx1cmFsaXplZC4gV2hlbiB0aGUgbnVtYmVyIHRvIGJlIHBsdXJhbGl6ZWRcbiAqICBleGNlZWRzIHRoZSBsZW5ndGggb2YgdGhlIGFyZ3MsIGl0IHdpbGwgdXNlIHRoZSBsYXN0XG4gKiAgZW50cnkgaW4gdGhlIGFycmF5LlxuICpcbiAqICBlLmcuIFsnc2luZ2xlJywgJ2RvdWJsZScsICd0cmlwbGUnLCAnbXVsdGlwbGUnXVxuICovXG5cbmV4cG9ydHMucGx1cmFsaXplID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHZhciBhcmdzID0gXy50b0FycmF5KGFyZ3VtZW50cywgMSlcbiAgcmV0dXJuIGFyZ3MubGVuZ3RoID4gMVxuICAgID8gKGFyZ3NbdmFsdWUgJSAxMCAtIDFdIHx8IGFyZ3NbYXJncy5sZW5ndGggLSAxXSlcbiAgICA6IChhcmdzWzBdICsgKHZhbHVlID09PSAxID8gJycgOiAncycpKVxufVxuXG4vKipcbiAqIERlYm91bmNlIGEgaGFuZGxlciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKiBAcGFyYW0ge051bWJlcn0gZGVsYXkgPSAzMDBcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmV4cG9ydHMuZGVib3VuY2UgPSBmdW5jdGlvbiAoaGFuZGxlciwgZGVsYXkpIHtcbiAgaWYgKCFoYW5kbGVyKSByZXR1cm5cbiAgaWYgKCFkZWxheSkge1xuICAgIGRlbGF5ID0gMzAwXG4gIH1cbiAgcmV0dXJuIF8uZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpXG59XG5cbi8qKlxuICogSW5zdGFsbCBzcGVjaWFsIGFycmF5IGZpbHRlcnNcbiAqL1xuXG5fLmV4dGVuZChleHBvcnRzLCByZXF1aXJlKCcuL2FycmF5LWZpbHRlcnMnKSlcbiIsInZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgY29tcGlsZXIgPSByZXF1aXJlKCcuLi9jb21waWxlcicpXG52YXIgdGVtcGxhdGVQYXJzZXIgPSByZXF1aXJlKCcuLi9wYXJzZXJzL3RlbXBsYXRlJylcbnZhciBGcmFnbWVudCA9IHJlcXVpcmUoJy4vZnJhZ21lbnQnKVxudmFyIENhY2hlID0gcmVxdWlyZSgnLi4vY2FjaGUnKVxudmFyIGxpbmtlckNhY2hlID0gbmV3IENhY2hlKDUwMDApXG5cbi8qKlxuICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG4gKiBmcmFnbWVudC4gQ2FjaGVzIHRoZSBjb21waWxlZCBsaW5rZXIgaWYgcG9zc2libGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBlbFxuICovXG5cbmZ1bmN0aW9uIEZyYWdtZW50RmFjdG9yeSAodm0sIGVsKSB7XG4gIHRoaXMudm0gPSB2bVxuICB2YXIgdGVtcGxhdGVcbiAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIGVsID09PSAnc3RyaW5nJ1xuICBpZiAoaXNTdHJpbmcgfHwgXy5pc1RlbXBsYXRlKGVsKSkge1xuICAgIHRlbXBsYXRlID0gdGVtcGxhdGVQYXJzZXIucGFyc2UoZWwsIHRydWUpXG4gIH0gZWxzZSB7XG4gICAgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZChlbClcbiAgfVxuICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGVcbiAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQsIGJ1dCBvbmx5IGZvciBjb21wb25lbnRzXG4gIHZhciBsaW5rZXJcbiAgdmFyIGNpZCA9IHZtLmNvbnN0cnVjdG9yLmNpZFxuICBpZiAoY2lkID4gMCkge1xuICAgIHZhciBjYWNoZUlkID0gY2lkICsgKGlzU3RyaW5nID8gZWwgOiBlbC5vdXRlckhUTUwpXG4gICAgbGlua2VyID0gbGlua2VyQ2FjaGUuZ2V0KGNhY2hlSWQpXG4gICAgaWYgKCFsaW5rZXIpIHtcbiAgICAgIGxpbmtlciA9IGNvbXBpbGVyLmNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKVxuICAgICAgbGlua2VyQ2FjaGUucHV0KGNhY2hlSWQsIGxpbmtlcilcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGlua2VyID0gY29tcGlsZXIuY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpXG4gIH1cbiAgdGhpcy5saW5rZXIgPSBsaW5rZXJcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBmcmFnbWVudCBpbnN0YW5jZSB3aXRoIGdpdmVuIGhvc3QgYW5kIHNjb3BlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSBob3N0XG4gKiBAcGFyYW0ge09iamVjdH0gc2NvcGVcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IHBhcmVudEZyYWdcbiAqL1xuXG5GcmFnbWVudEZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuICB2YXIgZnJhZyA9IHRlbXBsYXRlUGFyc2VyLmNsb25lKHRoaXMudGVtcGxhdGUpXG4gIHJldHVybiBuZXcgRnJhZ21lbnQodGhpcy5saW5rZXIsIHRoaXMudm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZyYWdtZW50RmFjdG9yeVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciB0cmFuc2l0aW9uID0gcmVxdWlyZSgnLi4vdHJhbnNpdGlvbicpXG5cbi8qKlxuICogQWJzdHJhY3Rpb24gZm9yIGEgcGFydGlhbGx5LWNvbXBpbGVkIGZyYWdtZW50LlxuICogQ2FuIG9wdGlvbmFsbHkgY29tcGlsZSBjb250ZW50IHdpdGggYSBjaGlsZCBzY29wZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuICovXG5cbmZ1bmN0aW9uIEZyYWdtZW50IChsaW5rZXIsIHZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuICB0aGlzLmNoaWxkcmVuID0gW11cbiAgdGhpcy5jaGlsZEZyYWdzID0gW11cbiAgdGhpcy52bSA9IHZtXG4gIHRoaXMuc2NvcGUgPSBzY29wZVxuICB0aGlzLmluc2VydGVkID0gZmFsc2VcbiAgdGhpcy5wYXJlbnRGcmFnID0gcGFyZW50RnJhZ1xuICBpZiAocGFyZW50RnJhZykge1xuICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpXG4gIH1cbiAgdGhpcy51bmxpbmsgPSBsaW5rZXIodm0sIGZyYWcsIGhvc3QsIHNjb3BlLCB0aGlzKVxuICB2YXIgc2luZ2xlID0gdGhpcy5zaW5nbGUgPVxuICAgIGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcbiAgICAvLyBkbyBub3QgZ28gc2luZ2xlIG1vZGUgaWYgdGhlIG9ubHkgbm9kZSBpcyBhbiBhbmNob3JcbiAgICAhKGZyYWcuY2hpbGROb2Rlc1swXS5fX3Z1ZV9hbmNob3IpXG4gIGlmIChzaW5nbGUpIHtcbiAgICB0aGlzLm5vZGUgPSBmcmFnLmNoaWxkTm9kZXNbMF1cbiAgICB0aGlzLmJlZm9yZSA9IHNpbmdsZUJlZm9yZVxuICAgIHRoaXMucmVtb3ZlID0gc2luZ2xlUmVtb3ZlXG4gIH0gZWxzZSB7XG4gICAgdGhpcy5ub2RlID0gXy5jcmVhdGVBbmNob3IoJ2ZyYWdtZW50LXN0YXJ0JylcbiAgICB0aGlzLmVuZCA9IF8uY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1lbmQnKVxuICAgIHRoaXMuZnJhZyA9IGZyYWdcbiAgICBfLnByZXBlbmQodGhpcy5ub2RlLCBmcmFnKVxuICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpXG4gICAgdGhpcy5iZWZvcmUgPSBtdWx0aUJlZm9yZVxuICAgIHRoaXMucmVtb3ZlID0gbXVsdGlSZW1vdmVcbiAgfVxuICB0aGlzLm5vZGUuX192ZnJhZ19fID0gdGhpc1xufVxuXG4vKipcbiAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxuICogdGhpcyBmcmFnbWVudC4gQWxzbyBkbyBzbyByZWN1cnNpdmVseSBmb3IgYWxsIGNoaWxkXG4gKiBmcmFnbWVudHMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG4gIHZhciBpLCBsXG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGhvb2sodGhpcy5jaGlsZHJlbltpXSlcbiAgfVxuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5jYWxsSG9vayhob29rKVxuICB9XG59XG5cbi8qKlxuICogRGVzdHJveSB0aGUgZnJhZ21lbnQuXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnBhcmVudEZyYWcpIHtcbiAgICB0aGlzLnBhcmVudEZyYWcuY2hpbGRGcmFncy4kcmVtb3ZlKHRoaXMpXG4gIH1cbiAgdGhpcy51bmxpbmsoKVxufVxuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBzaW5nbGVCZWZvcmUgKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcbiAgdGhpcy5pbnNlcnRlZCA9IHRydWVcbiAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZVxuICAgID8gdHJhbnNpdGlvbi5iZWZvcmVcbiAgICA6IF8uYmVmb3JlXG4gIG1ldGhvZCh0aGlzLm5vZGUsIHRhcmdldCwgdGhpcy52bSlcbiAgaWYgKF8uaW5Eb2ModGhpcy5ub2RlKSkge1xuICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKVxuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGZyYWdtZW50LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKi9cblxuZnVuY3Rpb24gc2luZ2xlUmVtb3ZlICgpIHtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlXG4gIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gXy5pbkRvYyh0aGlzLm5vZGUpXG4gIHZhciBzZWxmID0gdGhpc1xuICBzZWxmLmNhbGxIb29rKGRlc3Ryb3lDaGlsZClcbiAgdHJhbnNpdGlvbi5yZW1vdmUodGhpcy5ub2RlLCB0aGlzLnZtLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcbiAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKVxuICAgIH1cbiAgICBzZWxmLmRlc3Ryb3koKVxuICB9KVxufVxuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aUJlZm9yZSAodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuICB0aGlzLmluc2VydGVkID0gdHJ1ZVxuICB2YXIgdm0gPSB0aGlzLnZtXG4gIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2VcbiAgICA/IHRyYW5zaXRpb24uYmVmb3JlXG4gICAgOiBfLmJlZm9yZVxuICBfLm1hcE5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIG1ldGhvZChub2RlLCB0YXJnZXQsIHZtKVxuICB9KVxuICBpZiAoXy5pbkRvYyh0aGlzLm5vZGUpKSB7XG4gICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpXG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZnJhZ21lbnQsIG11bHRpLW5vZGVzIHZlcnNpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aVJlbW92ZSAoKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZVxuICB2YXIgc2VsZiA9IHRoaXNcbiAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBfLmluRG9jKHRoaXMubm9kZSlcbiAgc2VsZi5jYWxsSG9vayhkZXN0cm95Q2hpbGQpXG4gIF8ucmVtb3ZlTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIHRoaXMudm0sIHRoaXMuZnJhZywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG4gICAgICBzZWxmLmNhbGxIb29rKGRldGFjaClcbiAgICB9XG4gICAgc2VsZi5kZXN0cm95KClcbiAgfSlcbn1cblxuLyoqXG4gKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBhdHRhY2ggKGNoaWxkKSB7XG4gIGlmICghY2hpbGQuX2lzQXR0YWNoZWQpIHtcbiAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJylcbiAgfVxufVxuXG4vKipcbiAqIENhbGwgZGVzdHJveSBmb3IgYWxsIGNvbnRhaW5lZCBpbnN0YW5jZXMsXG4gKiB3aXRoIHJlbW92ZTpmYWxzZSBhbmQgZGVmZXI6dHJ1ZS5cbiAqIERlZmVyIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIG5lZWQgdG9cbiAqIGtlZXAgdGhlIGNoaWxkcmVuIHRvIGNhbGwgZGV0YWNoIGhvb2tzXG4gKiBvbiB0aGVtLlxuICpcbiAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICovXG5cbmZ1bmN0aW9uIGRlc3Ryb3lDaGlsZCAoY2hpbGQpIHtcbiAgY2hpbGQuJGRlc3Ryb3koZmFsc2UsIHRydWUpXG59XG5cbi8qKlxuICogQ2FsbCBkZXRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gKi9cblxuZnVuY3Rpb24gZGV0YWNoIChjaGlsZCkge1xuICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQpIHtcbiAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJylcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZyYWdtZW50XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIGluRG9jID0gXy5pbkRvY1xudmFyIGV2ZW50UkUgPSAvXnYtb246fF5AL1xuXG4vKipcbiAqIFNldHVwIHRoZSBpbnN0YW5jZSdzIG9wdGlvbiBldmVudHMgJiB3YXRjaGVycy5cbiAqIElmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZywgd2UgcHVsbCBpdCBmcm9tIHRoZVxuICogaW5zdGFuY2UncyBtZXRob2RzIGJ5IG5hbWUuXG4gKi9cblxuZXhwb3J0cy5faW5pdEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zXG4gIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuICAgIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHRoaXMsIG9wdGlvbnMuZWwpXG4gIH1cbiAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyRvbicsIG9wdGlvbnMuZXZlbnRzKVxuICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJHdhdGNoJywgb3B0aW9ucy53YXRjaClcbn1cblxuLyoqXG4gKiBSZWdpc3RlciB2LW9uIGV2ZW50cyBvbiBhIGNoaWxkIGNvbXBvbmVudFxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzICh2bSwgZWwpIHtcbiAgdmFyIGF0dHJzID0gZWwuYXR0cmlidXRlc1xuICB2YXIgbmFtZSwgaGFuZGxlclxuICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lXG4gICAgaWYgKGV2ZW50UkUudGVzdChuYW1lKSkge1xuICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShldmVudFJFLCAnJylcbiAgICAgIGhhbmRsZXIgPSAodm0uX3Njb3BlIHx8IHZtLl9jb250ZXh0KS4kZXZhbChhdHRyc1tpXS52YWx1ZSwgdHJ1ZSlcbiAgICAgIHZtLiRvbihuYW1lLnJlcGxhY2UoZXZlbnRSRSksIGhhbmRsZXIpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXIgY2FsbGJhY2tzIGZvciBvcHRpb24gZXZlbnRzIGFuZCB3YXRjaGVycy5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoXG4gKi9cblxuZnVuY3Rpb24gcmVnaXN0ZXJDYWxsYmFja3MgKHZtLCBhY3Rpb24sIGhhc2gpIHtcbiAgaWYgKCFoYXNoKSByZXR1cm5cbiAgdmFyIGhhbmRsZXJzLCBrZXksIGksIGpcbiAgZm9yIChrZXkgaW4gaGFzaCkge1xuICAgIGhhbmRsZXJzID0gaGFzaFtrZXldXG4gICAgaWYgKF8uaXNBcnJheShoYW5kbGVycykpIHtcbiAgICAgIGZvciAoaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyc1tpXSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVycylcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gcmVnaXN0ZXIgYW4gZXZlbnQvd2F0Y2ggY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ3xPYmplY3R9IGhhbmRsZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqL1xuXG5mdW5jdGlvbiByZWdpc3RlciAodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIGhhbmRsZXJcbiAgaWYgKHR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2bVthY3Rpb25dKGtleSwgaGFuZGxlciwgb3B0aW9ucylcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kc1xuICAgIHZhciBtZXRob2QgPSBtZXRob2RzICYmIG1ldGhvZHNbaGFuZGxlcl1cbiAgICBpZiAobWV0aG9kKSB7XG4gICAgICB2bVthY3Rpb25dKGtleSwgbWV0aG9kLCBvcHRpb25zKVxuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICAgJ1Vua25vd24gbWV0aG9kOiBcIicgKyBoYW5kbGVyICsgJ1wiIHdoZW4gJyArXG4gICAgICAgICdyZWdpc3RlcmluZyBjYWxsYmFjayBmb3IgJyArIGFjdGlvbiArXG4gICAgICAgICc6IFwiJyArIGtleSArICdcIi4nXG4gICAgICApXG4gICAgfVxuICB9IGVsc2UgaWYgKGhhbmRsZXIgJiYgdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIuaGFuZGxlciwgaGFuZGxlcilcbiAgfVxufVxuXG4vKipcbiAqIFNldHVwIHJlY3Vyc2l2ZSBhdHRhY2hlZC9kZXRhY2hlZCBjYWxsc1xuICovXG5cbmV4cG9ydHMuX2luaXRET01Ib29rcyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy4kb24oJ2hvb2s6YXR0YWNoZWQnLCBvbkF0dGFjaGVkKVxuICB0aGlzLiRvbignaG9vazpkZXRhY2hlZCcsIG9uRGV0YWNoZWQpXG59XG5cbi8qKlxuICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBhdHRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG4gKi9cblxuZnVuY3Rpb24gb25BdHRhY2hlZCAoKSB7XG4gIGlmICghdGhpcy5faXNBdHRhY2hlZCkge1xuICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlXG4gICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsQXR0YWNoKVxuICB9XG59XG5cbi8qKlxuICogSXRlcmF0b3IgdG8gY2FsbCBhdHRhY2hlZCBob29rXG4gKlxuICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gKi9cblxuZnVuY3Rpb24gY2FsbEF0dGFjaCAoY2hpbGQpIHtcbiAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpXG4gIH1cbn1cblxuLyoqXG4gKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGRldGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cbiAqL1xuXG5mdW5jdGlvbiBvbkRldGFjaGVkICgpIHtcbiAgaWYgKHRoaXMuX2lzQXR0YWNoZWQpIHtcbiAgICB0aGlzLl9pc0F0dGFjaGVkID0gZmFsc2VcbiAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxEZXRhY2gpXG4gIH1cbn1cblxuLyoqXG4gKiBJdGVyYXRvciB0byBjYWxsIGRldGFjaGVkIGhvb2tcbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBjYWxsRGV0YWNoIChjaGlsZCkge1xuICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJylcbiAgfVxufVxuXG4vKipcbiAqIFRyaWdnZXIgYWxsIGhhbmRsZXJzIGZvciBhIGhvb2tcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaG9va1xuICovXG5cbmV4cG9ydHMuX2NhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcbiAgdmFyIGhhbmRsZXJzID0gdGhpcy4kb3B0aW9uc1tob29rXVxuICBpZiAoaGFuZGxlcnMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgaGFuZGxlcnNbaV0uY2FsbCh0aGlzKVxuICAgIH1cbiAgfVxuICB0aGlzLiRlbWl0KCdob29rOicgKyBob29rKVxufVxuIiwidmFyIG1lcmdlT3B0aW9ucyA9IHJlcXVpcmUoJy4uL3V0aWwnKS5tZXJnZU9wdGlvbnNcbnZhciB1aWQgPSAwXG5cbi8qKlxuICogVGhlIG1haW4gaW5pdCBzZXF1ZW5jZS4gVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5XG4gKiBpbnN0YW5jZSwgaW5jbHVkaW5nIG9uZXMgdGhhdCBhcmUgY3JlYXRlZCBmcm9tIGV4dGVuZGVkXG4gKiBjb25zdHJ1Y3RvcnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSB0aGlzIG9wdGlvbnMgb2JqZWN0IHNob3VsZCBiZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgcmVzdWx0IG9mIG1lcmdpbmcgY2xhc3NcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyBhbmQgdGhlIG9wdGlvbnMgcGFzc2VkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRvIHRoZSBjb25zdHJ1Y3Rvci5cbiAqL1xuXG5leHBvcnRzLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXG4gIHRoaXMuJGVsID0gbnVsbFxuICB0aGlzLiRwYXJlbnQgPSBvcHRpb25zLnBhcmVudFxuICB0aGlzLiRyb290ID0gdGhpcy4kcGFyZW50XG4gICAgPyB0aGlzLiRwYXJlbnQuJHJvb3RcbiAgICA6IHRoaXNcbiAgdGhpcy4kY2hpbGRyZW4gPSBbXVxuICB0aGlzLiRyZWZzID0ge30gICAgICAgLy8gY2hpbGQgdm0gcmVmZXJlbmNlc1xuICB0aGlzLiRlbHMgPSB7fSAgICAgICAgLy8gZWxlbWVudCByZWZlcmVuY2VzXG4gIHRoaXMuX3dhdGNoZXJzID0gW10gICAvLyBhbGwgd2F0Y2hlcnMgYXMgYW4gYXJyYXlcbiAgdGhpcy5fZGlyZWN0aXZlcyA9IFtdIC8vIGFsbCBkaXJlY3RpdmVzXG5cbiAgLy8gYSB1aWRcbiAgdGhpcy5fdWlkID0gdWlkKytcblxuICAvLyBhIGZsYWcgdG8gYXZvaWQgdGhpcyBiZWluZyBvYnNlcnZlZFxuICB0aGlzLl9pc1Z1ZSA9IHRydWVcblxuICAvLyBldmVudHMgYm9va2tlZXBpbmdcbiAgdGhpcy5fZXZlbnRzID0ge30gICAgICAgICAgICAvLyByZWdpc3RlcmVkIGNhbGxiYWNrc1xuICB0aGlzLl9ldmVudHNDb3VudCA9IHt9ICAgICAgIC8vIGZvciAkYnJvYWRjYXN0IG9wdGltaXphdGlvblxuICB0aGlzLl9zaG91bGRQcm9wYWdhdGUgPSBmYWxzZSAvLyBmb3IgZXZlbnQgcHJvcGFnYXRpb25cblxuICAvLyBmcmFnbWVudCBpbnN0YW5jZSBwcm9wZXJ0aWVzXG4gIHRoaXMuX2lzRnJhZ21lbnQgPSBmYWxzZVxuICB0aGlzLl9mcmFnbWVudCA9ICAgICAgICAgLy8gQHR5cGUge0RvY3VtZW50RnJhZ21lbnR9XG4gIHRoaXMuX2ZyYWdtZW50U3RhcnQgPSAgICAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuICB0aGlzLl9mcmFnbWVudEVuZCA9IG51bGwgLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblxuICAvLyBsaWZlY3ljbGUgc3RhdGVcbiAgdGhpcy5faXNDb21waWxlZCA9XG4gIHRoaXMuX2lzRGVzdHJveWVkID1cbiAgdGhpcy5faXNSZWFkeSA9XG4gIHRoaXMuX2lzQXR0YWNoZWQgPVxuICB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gZmFsc2VcbiAgdGhpcy5fdW5saW5rRm4gPSBudWxsXG5cbiAgLy8gY29udGV4dDpcbiAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgLy8gYW5kIGl0cyBob3N0LlxuICB0aGlzLl9jb250ZXh0ID0gb3B0aW9ucy5fY29udGV4dCB8fCB0aGlzLiRwYXJlbnRcblxuICAvLyBzY29wZTpcbiAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcbiAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcbiAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcbiAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICB0aGlzLl9zY29wZSA9IG9wdGlvbnMuX3Njb3BlXG5cbiAgLy8gZnJhZ21lbnQ6XG4gIC8vIGlmIHRoaXMgaW5zdGFuY2UgaXMgY29tcGlsZWQgaW5zaWRlIGEgRnJhZ21lbnQsIGl0XG4gIC8vIG5lZWRzIHRvIHJlaWdzdGVyIGl0c2VsZiBhcyBhIGNoaWxkIG9mIHRoYXQgZnJhZ21lbnRcbiAgLy8gZm9yIGF0dGFjaC9kZXRhY2ggdG8gd29yayBwcm9wZXJseS5cbiAgdGhpcy5fZnJhZyA9IG9wdGlvbnMuX2ZyYWdcbiAgaWYgKHRoaXMuX2ZyYWcpIHtcbiAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLnB1c2godGhpcylcbiAgfVxuXG4gIC8vIHB1c2ggc2VsZiBpbnRvIHBhcmVudCAvIHRyYW5zY2x1c2lvbiBob3N0XG4gIGlmICh0aGlzLiRwYXJlbnQpIHtcbiAgICB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuLnB1c2godGhpcylcbiAgfVxuXG4gIC8vIG1lcmdlIG9wdGlvbnMuXG4gIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKFxuICAgIHRoaXMuY29uc3RydWN0b3Iub3B0aW9ucyxcbiAgICBvcHRpb25zLFxuICAgIHRoaXNcbiAgKVxuXG4gIC8vIHNldCByZWZcbiAgdGhpcy5fdXBkYXRlUmVmKClcblxuICAvLyBpbml0aWFsaXplIGRhdGEgYXMgZW1wdHkgb2JqZWN0LlxuICAvLyBpdCB3aWxsIGJlIGZpbGxlZCB1cCBpbiBfaW5pdFNjb3BlKCkuXG4gIHRoaXMuX2RhdGEgPSB7fVxuXG4gIC8vIGNhbGwgaW5pdCBob29rXG4gIHRoaXMuX2NhbGxIb29rKCdpbml0JylcblxuICAvLyBpbml0aWFsaXplIGRhdGEgb2JzZXJ2YXRpb24gYW5kIHNjb3BlIGluaGVyaXRhbmNlLlxuICB0aGlzLl9pbml0U3RhdGUoKVxuXG4gIC8vIHNldHVwIGV2ZW50IHN5c3RlbSBhbmQgb3B0aW9uIGV2ZW50cy5cbiAgdGhpcy5faW5pdEV2ZW50cygpXG5cbiAgLy8gY2FsbCBjcmVhdGVkIGhvb2tcbiAgdGhpcy5fY2FsbEhvb2soJ2NyZWF0ZWQnKVxuXG4gIC8vIGlmIGBlbGAgb3B0aW9uIGlzIHBhc3NlZCwgc3RhcnQgY29tcGlsYXRpb24uXG4gIGlmIChvcHRpb25zLmVsKSB7XG4gICAgdGhpcy4kbW91bnQob3B0aW9ucy5lbClcbiAgfVxufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciBEaXJlY3RpdmUgPSByZXF1aXJlKCcuLi9kaXJlY3RpdmUnKVxudmFyIGNvbXBpbGVyID0gcmVxdWlyZSgnLi4vY29tcGlsZXInKVxuXG4vKipcbiAqIFVwZGF0ZSB2LXJlZiBmb3IgY29tcG9uZW50LlxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG4gKi9cblxuZXhwb3J0cy5fdXBkYXRlUmVmID0gZnVuY3Rpb24gKHJlbW92ZSkge1xuICB2YXIgcmVmID0gdGhpcy4kb3B0aW9ucy5fcmVmXG4gIGlmIChyZWYpIHtcbiAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLl9jb250ZXh0KS4kcmVmc1xuICAgIGlmIChyZW1vdmUpIHtcbiAgICAgIGlmIChyZWZzW3JlZl0gPT09IHRoaXMpIHtcbiAgICAgICAgcmVmc1tyZWZdID0gbnVsbFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZWZzW3JlZl0gPSB0aGlzXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVHJhbnNjbHVkZSwgY29tcGlsZSBhbmQgbGluayBlbGVtZW50LlxuICpcbiAqIElmIGEgcHJlLWNvbXBpbGVkIGxpbmtlciBpcyBhdmFpbGFibGUsIHRoYXQgbWVhbnMgdGhlXG4gKiBwYXNzZWQgaW4gZWxlbWVudCB3aWxsIGJlIHByZS10cmFuc2NsdWRlZCBhbmQgY29tcGlsZWRcbiAqIGFzIHdlbGwgLSBhbGwgd2UgbmVlZCB0byBkbyBpcyB0byBjYWxsIHRoZSBsaW5rZXIuXG4gKlxuICogT3RoZXJ3aXNlIHdlIG5lZWQgdG8gY2FsbCB0cmFuc2NsdWRlL2NvbXBpbGUvbGluayBoZXJlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cblxuZXhwb3J0cy5fY29tcGlsZSA9IGZ1bmN0aW9uIChlbCkge1xuICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnNcblxuICAvLyB0cmFuc2NsdWRlIGFuZCBpbml0IGVsZW1lbnRcbiAgLy8gdHJhbnNjbHVkZSBjYW4gcG90ZW50aWFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuICAvLyBzbyB3ZSBuZWVkIHRvIGtlZXAgcmVmZXJlbmNlOyB0aGlzIHN0ZXAgYWxzbyBpbmplY3RzXG4gIC8vIHRoZSB0ZW1wbGF0ZSBhbmQgY2FjaGVzIHRoZSBvcmlnaW5hbCBhdHRyaWJ1dGVzXG4gIC8vIG9uIHRoZSBjb250YWluZXIgbm9kZSBhbmQgcmVwbGFjZXIgbm9kZS5cbiAgdmFyIG9yaWdpbmFsID0gZWxcbiAgZWwgPSBjb21waWxlci50cmFuc2NsdWRlKGVsLCBvcHRpb25zKVxuICB0aGlzLl9pbml0RWxlbWVudChlbClcblxuICAvLyByb290IGlzIGFsd2F5cyBjb21waWxlZCBwZXItaW5zdGFuY2UsIGJlY2F1c2VcbiAgLy8gY29udGFpbmVyIGF0dHJzIGFuZCBwcm9wcyBjYW4gYmUgZGlmZmVyZW50IGV2ZXJ5IHRpbWUuXG4gIHZhciBjb250ZXh0T3B0aW9ucyA9IHRoaXMuX2NvbnRleHQgJiYgdGhpcy5fY29udGV4dC4kb3B0aW9uc1xuICB2YXIgcm9vdExpbmtlciA9IGNvbXBpbGVyLmNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucylcblxuICAvLyBjb21waWxlIGFuZCBsaW5rIHRoZSByZXN0XG4gIHZhciBjb250ZW50TGlua0ZuXG4gIHZhciBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvclxuICAvLyBjb21wb25lbnQgY29tcGlsYXRpb24gY2FuIGJlIGNhY2hlZFxuICAvLyBhcyBsb25nIGFzIGl0J3Mgbm90IHVzaW5nIGlubGluZS10ZW1wbGF0ZVxuICBpZiAob3B0aW9ucy5fbGlua2VyQ2FjaGFibGUpIHtcbiAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXJcbiAgICBpZiAoIWNvbnRlbnRMaW5rRm4pIHtcbiAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlciA9IGNvbXBpbGVyLmNvbXBpbGUoZWwsIG9wdGlvbnMpXG4gICAgfVxuICB9XG5cbiAgLy8gbGluayBwaGFzZVxuICAvLyBtYWtlIHN1cmUgdG8gbGluayByb290IHdpdGggcHJvcCBzY29wZSFcbiAgdmFyIHJvb3RVbmxpbmtGbiA9IHJvb3RMaW5rZXIodGhpcywgZWwsIHRoaXMuX3Njb3BlKVxuICB2YXIgY29udGVudFVubGlua0ZuID0gY29udGVudExpbmtGblxuICAgID8gY29udGVudExpbmtGbih0aGlzLCBlbClcbiAgICA6IGNvbXBpbGVyLmNvbXBpbGUoZWwsIG9wdGlvbnMpKHRoaXMsIGVsKVxuXG4gIC8vIHJlZ2lzdGVyIGNvbXBvc2l0ZSB1bmxpbmsgZnVuY3Rpb25cbiAgLy8gdG8gYmUgY2FsbGVkIGR1cmluZyBpbnN0YW5jZSBkZXN0cnVjdGlvblxuICB0aGlzLl91bmxpbmtGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByb290VW5saW5rRm4oKVxuICAgIC8vIHBhc3NpbmcgZGVzdHJveWluZzogdHJ1ZSB0byBhdm9pZCBzZWFyY2hpbmcgYW5kXG4gICAgLy8gc3BsaWNpbmcgdGhlIGRpcmVjdGl2ZXNcbiAgICBjb250ZW50VW5saW5rRm4odHJ1ZSlcbiAgfVxuXG4gIC8vIGZpbmFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgXy5yZXBsYWNlKG9yaWdpbmFsLCBlbClcbiAgfVxuXG4gIHRoaXMuX2lzQ29tcGlsZWQgPSB0cnVlXG4gIHRoaXMuX2NhbGxIb29rKCdjb21waWxlZCcpXG4gIHJldHVybiBlbFxufVxuXG4vKipcbiAqIEluaXRpYWxpemUgaW5zdGFuY2UgZWxlbWVudC4gQ2FsbGVkIGluIHRoZSBwdWJsaWNcbiAqICRtb3VudCgpIG1ldGhvZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZXhwb3J0cy5faW5pdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgaWYgKGVsIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCkge1xuICAgIHRoaXMuX2lzRnJhZ21lbnQgPSB0cnVlXG4gICAgdGhpcy4kZWwgPSB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gZWwuZmlyc3RDaGlsZFxuICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gZWwubGFzdENoaWxkXG4gICAgLy8gc2V0IHBlcnNpc3RlZCB0ZXh0IGFuY2hvcnMgdG8gZW1wdHlcbiAgICBpZiAodGhpcy5fZnJhZ21lbnRTdGFydC5ub2RlVHlwZSA9PT0gMykge1xuICAgICAgdGhpcy5fZnJhZ21lbnRTdGFydC5kYXRhID0gdGhpcy5fZnJhZ21lbnRFbmQuZGF0YSA9ICcnXG4gICAgfVxuICAgIHRoaXMuX2ZyYWdtZW50ID0gZWxcbiAgfSBlbHNlIHtcbiAgICB0aGlzLiRlbCA9IGVsXG4gIH1cbiAgdGhpcy4kZWwuX192dWVfXyA9IHRoaXNcbiAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZUNvbXBpbGUnKVxufVxuXG4vKipcbiAqIENyZWF0ZSBhbmQgYmluZCBhIGRpcmVjdGl2ZSB0byBhbiBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gZGlyZWN0aXZlIG5hbWVcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAgIC0gdGFyZ2V0IG5vZGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjIC0gcGFyc2VkIGRpcmVjdGl2ZSBkZXNjcmlwdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmICAtIGRpcmVjdGl2ZSBkZWZpbml0aW9uIG9iamVjdFxuICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcbiAqL1xuXG5leHBvcnRzLl9iaW5kRGlyID0gZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gIHRoaXMuX2RpcmVjdGl2ZXMucHVzaChcbiAgICBuZXcgRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHRoaXMsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKVxuICApXG59XG5cbi8qKlxuICogVGVhcmRvd24gYW4gaW5zdGFuY2UsIHVub2JzZXJ2ZXMgdGhlIGRhdGEsIHVuYmluZCBhbGwgdGhlXG4gKiBkaXJlY3RpdmVzLCB0dXJuIG9mZiBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycywgZXRjLlxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIC0gd2hldGhlciB0byByZW1vdmUgdGhlIERPTSBub2RlLlxuICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXAgLSBpZiB0cnVlLCBkZWZlciBjbGVhbnVwIHRvXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGNhbGxlZCBsYXRlclxuICovXG5cbmV4cG9ydHMuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcbiAgaWYgKHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQpIHtcbiAgICBpZiAoIWRlZmVyQ2xlYW51cCkge1xuICAgICAgdGhpcy5fY2xlYW51cCgpXG4gICAgfVxuICAgIHJldHVyblxuICB9XG4gIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVEZXN0cm95JylcbiAgdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRydWVcbiAgdmFyIGlcbiAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBwYXJlbnQuIG9ubHkgbmVjZXNzYXJ5XG4gIC8vIGlmIHBhcmVudCBpcyBub3QgYmVpbmcgZGVzdHJveWVkIGFzIHdlbGwuXG4gIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnRcbiAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkKSB7XG4gICAgcGFyZW50LiRjaGlsZHJlbi4kcmVtb3ZlKHRoaXMpXG4gICAgLy8gdW5yZWdpc3RlciByZWYgKHJlbW92ZTogdHJ1ZSlcbiAgICB0aGlzLl91cGRhdGVSZWYodHJ1ZSlcbiAgfVxuICAvLyBkZXN0cm95IGFsbCBjaGlsZHJlbi5cbiAgaSA9IHRoaXMuJGNoaWxkcmVuLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgdGhpcy4kY2hpbGRyZW5baV0uJGRlc3Ryb3koKVxuICB9XG4gIC8vIHRlYXJkb3duIHByb3BzXG4gIGlmICh0aGlzLl9wcm9wc1VubGlua0ZuKSB7XG4gICAgdGhpcy5fcHJvcHNVbmxpbmtGbigpXG4gIH1cbiAgLy8gdGVhcmRvd24gYWxsIGRpcmVjdGl2ZXMuIHRoaXMgYWxzbyB0ZWFyc2Rvd24gYWxsXG4gIC8vIGRpcmVjdGl2ZS1vd25lZCB3YXRjaGVycy5cbiAgaWYgKHRoaXMuX3VubGlua0ZuKSB7XG4gICAgdGhpcy5fdW5saW5rRm4oKVxuICB9XG4gIGkgPSB0aGlzLl93YXRjaGVycy5sZW5ndGhcbiAgd2hpbGUgKGktLSkge1xuICAgIHRoaXMuX3dhdGNoZXJzW2ldLnRlYXJkb3duKClcbiAgfVxuICAvLyByZW1vdmUgcmVmZXJlbmNlIHRvIHNlbGYgb24gJGVsXG4gIGlmICh0aGlzLiRlbCkge1xuICAgIHRoaXMuJGVsLl9fdnVlX18gPSBudWxsXG4gIH1cbiAgLy8gcmVtb3ZlIERPTSBlbGVtZW50XG4gIHZhciBzZWxmID0gdGhpc1xuICBpZiAocmVtb3ZlICYmIHRoaXMuJGVsKSB7XG4gICAgdGhpcy4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYuX2NsZWFudXAoKVxuICAgIH0pXG4gIH0gZWxzZSBpZiAoIWRlZmVyQ2xlYW51cCkge1xuICAgIHRoaXMuX2NsZWFudXAoKVxuICB9XG59XG5cbi8qKlxuICogQ2xlYW4gdXAgdG8gZW5zdXJlIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAqIFRoaXMgaXMgY2FsbGVkIGFmdGVyIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIGlmIHRoZXJlXG4gKiBpcyBhbnkuXG4gKi9cblxuZXhwb3J0cy5fY2xlYW51cCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuX2lzRGVzdHJveWVkKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBvd25lciBmcmFnbWVudFxuICAvLyBkbyBpdCBpbiBjbGVhbnVwIHNvIHRoYXQgd2UgY2FuIGNhbGwgJGRlc3Ryb3kgd2l0aFxuICAvLyBkZWZlciByaWdodCB3aGVuIGEgZnJhZ21lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZC5cbiAgaWYgKHRoaXMuX2ZyYWcpIHtcbiAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLiRyZW1vdmUodGhpcylcbiAgfVxuICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYlxuICAvLyBmcm96ZW4gb2JqZWN0IG1heSBub3QgaGF2ZSBvYnNlcnZlci5cbiAgaWYgKHRoaXMuX2RhdGEuX19vYl9fKSB7XG4gICAgdGhpcy5fZGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcylcbiAgfVxuICAvLyBDbGVhbiB1cCByZWZlcmVuY2VzIHRvIHByaXZhdGUgcHJvcGVydGllcyBhbmQgb3RoZXJcbiAgLy8gaW5zdGFuY2VzLiBwcmVzZXJ2ZSByZWZlcmVuY2UgdG8gX2RhdGEgc28gdGhhdCBwcm94eVxuICAvLyBhY2Nlc3NvcnMgc3RpbGwgd29yay4gVGhlIG9ubHkgcG90ZW50aWFsIHNpZGUgZWZmZWN0XG4gIC8vIGhlcmUgaXMgdGhhdCBtdXRhdGluZyB0aGUgaW5zdGFuY2UgYWZ0ZXIgaXQncyBkZXN0cm95ZWRcbiAgLy8gbWF5IGFmZmVjdCB0aGUgc3RhdGUgb2Ygb3RoZXIgY29tcG9uZW50cyB0aGF0IGFyZSBzdGlsbFxuICAvLyBvYnNlcnZpbmcgdGhlIHNhbWUgb2JqZWN0LCBidXQgdGhhdCBzZWVtcyB0byBiZSBhXG4gIC8vIHJlYXNvbmFibGUgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSB1c2VyIHJhdGhlciB0aGFuXG4gIC8vIGFsd2F5cyB0aHJvd2luZyBhbiBlcnJvciBvbiB0aGVtLlxuICB0aGlzLiRlbCA9XG4gIHRoaXMuJHBhcmVudCA9XG4gIHRoaXMuJHJvb3QgPVxuICB0aGlzLiRjaGlsZHJlbiA9XG4gIHRoaXMuX3dhdGNoZXJzID1cbiAgdGhpcy5fY29udGV4dCA9XG4gIHRoaXMuX3Njb3BlID1cbiAgdGhpcy5fZGlyZWN0aXZlcyA9IG51bGxcbiAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uXG4gIHRoaXMuX2lzRGVzdHJveWVkID0gdHJ1ZVxuICB0aGlzLl9jYWxsSG9vaygnZGVzdHJveWVkJylcbiAgLy8gdHVybiBvZmYgYWxsIGluc3RhbmNlIGxpc3RlbmVycy5cbiAgdGhpcy4kb2ZmKClcbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG5cbi8qKlxuICogQXBwbHkgYSBsaXN0IG9mIGZpbHRlciAoZGVzY3JpcHRvcnMpIHRvIGEgdmFsdWUuXG4gKiBVc2luZyBwbGFpbiBmb3IgbG9vcHMgaGVyZSBiZWNhdXNlIHRoaXMgd2lsbCBiZSBjYWxsZWQgaW5cbiAqIHRoZSBnZXR0ZXIgb2YgYW55IHdhdGNoZXIgd2l0aCBmaWx0ZXJzIHNvIGl0IGlzIHZlcnlcbiAqIHBlcmZvcm1hbmNlIHNlbnNpdGl2ZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0geyp9IFtvbGRWYWx1ZV1cbiAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd3JpdGVcbiAqIEByZXR1cm4geyp9XG4gKi9cblxuZXhwb3J0cy5fYXBwbHlGaWx0ZXJzID0gZnVuY3Rpb24gKHZhbHVlLCBvbGRWYWx1ZSwgZmlsdGVycywgd3JpdGUpIHtcbiAgdmFyIGZpbHRlciwgZm4sIGFyZ3MsIGFyZywgb2Zmc2V0LCBpLCBsLCBqLCBrXG4gIGZvciAoaSA9IDAsIGwgPSBmaWx0ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGZpbHRlciA9IGZpbHRlcnNbaV1cbiAgICBmbiA9IF8ucmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyLm5hbWUpXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIF8uYXNzZXJ0QXNzZXQoZm4sICdmaWx0ZXInLCBmaWx0ZXIubmFtZSlcbiAgICB9XG4gICAgaWYgKCFmbikgY29udGludWVcbiAgICBmbiA9IHdyaXRlID8gZm4ud3JpdGUgOiAoZm4ucmVhZCB8fCBmbilcbiAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSBjb250aW51ZVxuICAgIGFyZ3MgPSB3cml0ZSA/IFt2YWx1ZSwgb2xkVmFsdWVdIDogW3ZhbHVlXVxuICAgIG9mZnNldCA9IHdyaXRlID8gMiA6IDFcbiAgICBpZiAoZmlsdGVyLmFyZ3MpIHtcbiAgICAgIGZvciAoaiA9IDAsIGsgPSBmaWx0ZXIuYXJncy5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgYXJnID0gZmlsdGVyLmFyZ3Nbal1cbiAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljXG4gICAgICAgICAgPyB0aGlzLiRnZXQoYXJnLnZhbHVlKVxuICAgICAgICAgIDogYXJnLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIHZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJncylcbiAgfVxuICByZXR1cm4gdmFsdWVcbn1cblxuLyoqXG4gKiBSZXNvbHZlIGEgY29tcG9uZW50LCBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgY29tcG9uZW50XG4gKiBpcyBkZWZpbmVkIG5vcm1hbGx5IG9yIHVzaW5nIGFuIGFzeW5jIGZhY3RvcnkgZnVuY3Rpb24uXG4gKiBSZXNvbHZlcyBzeW5jaHJvbm91c2x5IGlmIGFscmVhZHkgcmVzb2x2ZWQsIG90aGVyd2lzZVxuICogcmVzb2x2ZXMgYXN5bmNocm9ub3VzbHkgYW5kIGNhY2hlcyB0aGUgcmVzb2x2ZWRcbiAqIGNvbnN0cnVjdG9yIG9uIHRoZSBmYWN0b3J5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5leHBvcnRzLl9yZXNvbHZlQ29tcG9uZW50ID0gZnVuY3Rpb24gKGlkLCBjYikge1xuICB2YXIgZmFjdG9yeSA9IF8ucmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdjb21wb25lbnRzJywgaWQpXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXy5hc3NlcnRBc3NldChmYWN0b3J5LCAnY29tcG9uZW50JywgaWQpXG4gIH1cbiAgaWYgKCFmYWN0b3J5KSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgLy8gYXN5bmMgY29tcG9uZW50IGZhY3RvcnlcbiAgaWYgKCFmYWN0b3J5Lm9wdGlvbnMpIHtcbiAgICBpZiAoZmFjdG9yeS5yZXNvbHZlZCkge1xuICAgICAgLy8gY2FjaGVkXG4gICAgICBjYihmYWN0b3J5LnJlc29sdmVkKVxuICAgIH0gZWxzZSBpZiAoZmFjdG9yeS5yZXF1ZXN0ZWQpIHtcbiAgICAgIC8vIHBvb2wgY2FsbGJhY2tzXG4gICAgICBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MucHVzaChjYilcbiAgICB9IGVsc2Uge1xuICAgICAgZmFjdG9yeS5yZXF1ZXN0ZWQgPSB0cnVlXG4gICAgICB2YXIgY2JzID0gZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzID0gW2NiXVxuICAgICAgZmFjdG9yeShmdW5jdGlvbiByZXNvbHZlIChyZXMpIHtcbiAgICAgICAgaWYgKF8uaXNQbGFpbk9iamVjdChyZXMpKSB7XG4gICAgICAgICAgcmVzID0gXy5WdWUuZXh0ZW5kKHJlcylcbiAgICAgICAgfVxuICAgICAgICAvLyBjYWNoZSByZXNvbHZlZFxuICAgICAgICBmYWN0b3J5LnJlc29sdmVkID0gcmVzXG4gICAgICAgIC8vIGludm9rZSBjYWxsYmFja3NcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgY2JzW2ldKHJlcylcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0IChyZWFzb24pIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICAgJ0ZhaWxlZCB0byByZXNvbHZlIGFzeW5jIGNvbXBvbmVudDogJyArIGlkICsgJy4gJyArXG4gICAgICAgICAgKHJlYXNvbiA/ICdcXG5SZWFzb246ICcgKyByZWFzb24gOiAnJylcbiAgICAgICAgKVxuICAgICAgfSlcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gbm9ybWFsIGNvbXBvbmVudFxuICAgIGNiKGZhY3RvcnkpXG4gIH1cbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgY29tcGlsZXIgPSByZXF1aXJlKCcuLi9jb21waWxlcicpXG52YXIgT2JzZXJ2ZXIgPSByZXF1aXJlKCcuLi9vYnNlcnZlcicpXG52YXIgRGVwID0gcmVxdWlyZSgnLi4vb2JzZXJ2ZXIvZGVwJylcbnZhciBXYXRjaGVyID0gcmVxdWlyZSgnLi4vd2F0Y2hlcicpXG5cbi8qKlxuICogU2V0dXAgdGhlIHNjb3BlIG9mIGFuIGluc3RhbmNlLCB3aGljaCBjb250YWluczpcbiAqIC0gb2JzZXJ2ZWQgZGF0YVxuICogLSBjb21wdXRlZCBwcm9wZXJ0aWVzXG4gKiAtIHVzZXIgbWV0aG9kc1xuICogLSBtZXRhIHByb3BlcnRpZXNcbiAqL1xuXG5leHBvcnRzLl9pbml0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2luaXRQcm9wcygpXG4gIHRoaXMuX2luaXRNZXRhKClcbiAgdGhpcy5faW5pdE1ldGhvZHMoKVxuICB0aGlzLl9pbml0RGF0YSgpXG4gIHRoaXMuX2luaXRDb21wdXRlZCgpXG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBwcm9wcy5cbiAqL1xuXG5leHBvcnRzLl9pbml0UHJvcHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9uc1xuICB2YXIgZWwgPSBvcHRpb25zLmVsXG4gIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHNcbiAgaWYgKHByb3BzICYmICFlbCkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgJ1Byb3BzIHdpbGwgbm90IGJlIGNvbXBpbGVkIGlmIG5vIGBlbGAgb3B0aW9uIGlzICcgK1xuICAgICAgJ3Byb3ZpZGVkIGF0IGluc3RhbnRpYXRpb24uJ1xuICAgIClcbiAgfVxuICAvLyBtYWtlIHN1cmUgdG8gY29udmVydCBzdHJpbmcgc2VsZWN0b3JzIGludG8gZWxlbWVudCBub3dcbiAgZWwgPSBvcHRpb25zLmVsID0gXy5xdWVyeShlbClcbiAgdGhpcy5fcHJvcHNVbmxpbmtGbiA9IGVsICYmIGVsLm5vZGVUeXBlID09PSAxICYmIHByb3BzXG4gICAgLy8gcHJvcHMgbXVzdCBiZSBsaW5rZWQgaW4gcHJvcGVyIHNjb3BlIGlmIGluc2lkZSB2LWZvclxuICAgID8gY29tcGlsZXIuY29tcGlsZUFuZExpbmtQcm9wcyh0aGlzLCBlbCwgcHJvcHMsIHRoaXMuX3Njb3BlKVxuICAgIDogbnVsbFxufVxuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGRhdGEuXG4gKi9cblxuZXhwb3J0cy5faW5pdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBwcm9wc0RhdGEgPSB0aGlzLl9kYXRhXG4gIHZhciBvcHRpb25zRGF0YUZuID0gdGhpcy4kb3B0aW9ucy5kYXRhXG4gIHZhciBvcHRpb25zRGF0YSA9IG9wdGlvbnNEYXRhRm4gJiYgb3B0aW9uc0RhdGFGbigpXG4gIGlmIChvcHRpb25zRGF0YSkge1xuICAgIHRoaXMuX2RhdGEgPSBvcHRpb25zRGF0YVxuICAgIGZvciAodmFyIHByb3AgaW4gcHJvcHNEYXRhKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICAgIG9wdGlvbnNEYXRhLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgIF8ud2FybihcbiAgICAgICAgICAnRGF0YSBmaWVsZCBcIicgKyBwcm9wICsgJ1wiIGlzIGFscmVhZHkgZGVmaW5lZCAnICtcbiAgICAgICAgICAnYXMgYSBwcm9wLiBVc2UgcHJvcCBkZWZhdWx0IHZhbHVlIGluc3RlYWQuJ1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fcHJvcHNbcHJvcF0ucmF3ICE9PSBudWxsIHx8XG4gICAgICAgICAgIW9wdGlvbnNEYXRhLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgIF8uc2V0KG9wdGlvbnNEYXRhLCBwcm9wLCBwcm9wc0RhdGFbcHJvcF0pXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHZhciBkYXRhID0gdGhpcy5fZGF0YVxuICAvLyBwcm94eSBkYXRhIG9uIGluc3RhbmNlXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSlcbiAgdmFyIGksIGtleVxuICBpID0ga2V5cy5sZW5ndGhcbiAgd2hpbGUgKGktLSkge1xuICAgIGtleSA9IGtleXNbaV1cbiAgICB0aGlzLl9wcm94eShrZXkpXG4gIH1cbiAgLy8gb2JzZXJ2ZSBkYXRhXG4gIE9ic2VydmVyLmNyZWF0ZShkYXRhLCB0aGlzKVxufVxuXG4vKipcbiAqIFN3YXAgdGhlIGluc3RhbmNlJ3MgJGRhdGEuIENhbGxlZCBpbiAkZGF0YSdzIHNldHRlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbmV3RGF0YVxuICovXG5cbmV4cG9ydHMuX3NldERhdGEgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuICBuZXdEYXRhID0gbmV3RGF0YSB8fCB7fVxuICB2YXIgb2xkRGF0YSA9IHRoaXMuX2RhdGFcbiAgdGhpcy5fZGF0YSA9IG5ld0RhdGFcbiAgdmFyIGtleXMsIGtleSwgaVxuICAvLyB1bnByb3h5IGtleXMgbm90IHByZXNlbnQgaW4gbmV3IGRhdGFcbiAga2V5cyA9IE9iamVjdC5rZXlzKG9sZERhdGEpXG4gIGkgPSBrZXlzLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAga2V5ID0ga2V5c1tpXVxuICAgIGlmICghKGtleSBpbiBuZXdEYXRhKSkge1xuICAgICAgdGhpcy5fdW5wcm94eShrZXkpXG4gICAgfVxuICB9XG4gIC8vIHByb3h5IGtleXMgbm90IGFscmVhZHkgcHJveGllZCxcbiAgLy8gYW5kIHRyaWdnZXIgY2hhbmdlIGZvciBjaGFuZ2VkIHZhbHVlc1xuICBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSlcbiAgaSA9IGtleXMubGVuZ3RoXG4gIHdoaWxlIChpLS0pIHtcbiAgICBrZXkgPSBrZXlzW2ldXG4gICAgaWYgKCF0aGlzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIC8vIG5ldyBwcm9wZXJ0eVxuICAgICAgdGhpcy5fcHJveHkoa2V5KVxuICAgIH1cbiAgfVxuICBvbGREYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKVxuICBPYnNlcnZlci5jcmVhdGUobmV3RGF0YSwgdGhpcylcbiAgdGhpcy5fZGlnZXN0KClcbn1cblxuLyoqXG4gKiBQcm94eSBhIHByb3BlcnR5LCBzbyB0aGF0XG4gKiB2bS5wcm9wID09PSB2bS5fZGF0YS5wcm9wXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICovXG5cbmV4cG9ydHMuX3Byb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuICBpZiAoIV8uaXNSZXNlcnZlZChrZXkpKSB7XG4gICAgLy8gbmVlZCB0byBzdG9yZSByZWYgdG8gc2VsZiBoZXJlXG4gICAgLy8gYmVjYXVzZSB0aGVzZSBnZXR0ZXIvc2V0dGVycyBtaWdodFxuICAgIC8vIGJlIGNhbGxlZCBieSBjaGlsZCBzY29wZXMgdmlhXG4gICAgLy8gcHJvdG90eXBlIGluaGVyaXRhbmNlLlxuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBrZXksIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIHByb3h5R2V0dGVyICgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFba2V5XVxuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gcHJveHlTZXR0ZXIgKHZhbCkge1xuICAgICAgICBzZWxmLl9kYXRhW2tleV0gPSB2YWxcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbi8qKlxuICogVW5wcm94eSBhIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqL1xuXG5leHBvcnRzLl91bnByb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuICBpZiAoIV8uaXNSZXNlcnZlZChrZXkpKSB7XG4gICAgZGVsZXRlIHRoaXNba2V5XVxuICB9XG59XG5cbi8qKlxuICogRm9yY2UgdXBkYXRlIG9uIGV2ZXJ5IHdhdGNoZXIgaW4gc2NvcGUuXG4gKi9cblxuZXhwb3J0cy5fZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRoaXMuX3dhdGNoZXJzW2ldLnVwZGF0ZSh0cnVlKSAvLyBzaGFsbG93IHVwZGF0ZXNcbiAgfVxufVxuXG4vKipcbiAqIFNldHVwIGNvbXB1dGVkIHByb3BlcnRpZXMuIFRoZXkgYXJlIGVzc2VudGlhbGx5XG4gKiBzcGVjaWFsIGdldHRlci9zZXR0ZXJzXG4gKi9cblxuZnVuY3Rpb24gbm9vcCAoKSB7fVxuZXhwb3J0cy5faW5pdENvbXB1dGVkID0gZnVuY3Rpb24gKCkge1xuICB2YXIgY29tcHV0ZWQgPSB0aGlzLiRvcHRpb25zLmNvbXB1dGVkXG4gIGlmIChjb21wdXRlZCkge1xuICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuICAgICAgdmFyIHVzZXJEZWYgPSBjb21wdXRlZFtrZXldXG4gICAgICB2YXIgZGVmID0ge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBkZWYuZ2V0ID0gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYsIHRoaXMpXG4gICAgICAgIGRlZi5zZXQgPSBub29wXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWYuZ2V0ID0gdXNlckRlZi5nZXRcbiAgICAgICAgICA/IHVzZXJEZWYuY2FjaGUgIT09IGZhbHNlXG4gICAgICAgICAgICA/IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLmdldCwgdGhpcylcbiAgICAgICAgICAgIDogXy5iaW5kKHVzZXJEZWYuZ2V0LCB0aGlzKVxuICAgICAgICAgIDogbm9vcFxuICAgICAgICBkZWYuc2V0ID0gdXNlckRlZi5zZXRcbiAgICAgICAgICA/IF8uYmluZCh1c2VyRGVmLnNldCwgdGhpcylcbiAgICAgICAgICA6IG5vb3BcbiAgICAgIH1cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIGRlZilcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFrZUNvbXB1dGVkR2V0dGVyIChnZXR0ZXIsIG93bmVyKSB7XG4gIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIob3duZXIsIGdldHRlciwgbnVsbCwge1xuICAgIGxhenk6IHRydWVcbiAgfSlcbiAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyICgpIHtcbiAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xuICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpXG4gICAgfVxuICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICB3YXRjaGVyLmRlcGVuZCgpXG4gICAgfVxuICAgIHJldHVybiB3YXRjaGVyLnZhbHVlXG4gIH1cbn1cblxuLyoqXG4gKiBTZXR1cCBpbnN0YW5jZSBtZXRob2RzLiBNZXRob2RzIG11c3QgYmUgYm91bmQgdG8gdGhlXG4gKiBpbnN0YW5jZSBzaW5jZSB0aGV5IG1pZ2h0IGJlIHBhc3NlZCBkb3duIGFzIGEgcHJvcCB0b1xuICogY2hpbGQgY29tcG9uZW50cy5cbiAqL1xuXG5leHBvcnRzLl9pbml0TWV0aG9kcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG1ldGhvZHMgPSB0aGlzLiRvcHRpb25zLm1ldGhvZHNcbiAgaWYgKG1ldGhvZHMpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kcykge1xuICAgICAgdGhpc1trZXldID0gXy5iaW5kKG1ldGhvZHNba2V5XSwgdGhpcylcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplIG1ldGEgaW5mb3JtYXRpb24gbGlrZSAkaW5kZXgsICRrZXkgJiAkdmFsdWUuXG4gKi9cblxuZXhwb3J0cy5faW5pdE1ldGEgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBtZXRhcyA9IHRoaXMuJG9wdGlvbnMuX21ldGFcbiAgaWYgKG1ldGFzKSB7XG4gICAgZm9yICh2YXIga2V5IGluIG1ldGFzKSB7XG4gICAgICBfLmRlZmluZVJlYWN0aXZlKHRoaXMsIGtleSwgbWV0YXNba2V5XSlcbiAgICB9XG4gIH1cbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi4vdXRpbCcpXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZVxudmFyIGFycmF5TWV0aG9kcyA9IE9iamVjdC5jcmVhdGUoYXJyYXlQcm90bylcblxuLyoqXG4gKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHNcbiAqL1xuXG47W1xuICAncHVzaCcsXG4gICdwb3AnLFxuICAnc2hpZnQnLFxuICAndW5zaGlmdCcsXG4gICdzcGxpY2UnLFxuICAnc29ydCcsXG4gICdyZXZlcnNlJ1xuXVxuLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuICAvLyBjYWNoZSBvcmlnaW5hbCBtZXRob2RcbiAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdXG4gIF8uZGVmaW5lKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yICgpIHtcbiAgICAvLyBhdm9pZCBsZWFraW5nIGFyZ3VtZW50czpcbiAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9zdXJlLXdpdGgtYXJndW1lbnRzXG4gICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoXG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSlcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldXG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKVxuICAgIHZhciBvYiA9IHRoaXMuX19vYl9fXG4gICAgdmFyIGluc2VydGVkXG4gICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgIGNhc2UgJ3B1c2gnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3NcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Vuc2hpZnQnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3NcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3NwbGljZSc6XG4gICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgICBpZiAoaW5zZXJ0ZWQpIG9iLm9ic2VydmVBcnJheShpbnNlcnRlZClcbiAgICAvLyBub3RpZnkgY2hhbmdlXG4gICAgb2IuZGVwLm5vdGlmeSgpXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9KVxufSlcblxuLyoqXG4gKiBTd2FwIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleCB3aXRoIGEgbmV3IHZhbHVlXG4gKiBhbmQgZW1pdHMgY29ycmVzcG9uZGluZyBldmVudC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcmV0dXJuIHsqfSAtIHJlcGxhY2VkIGVsZW1lbnRcbiAqL1xuXG5fLmRlZmluZShcbiAgYXJyYXlQcm90byxcbiAgJyRzZXQnLFxuICBmdW5jdGlvbiAkc2V0IChpbmRleCwgdmFsKSB7XG4gICAgaWYgKGluZGV4ID49IHRoaXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IGluZGV4ICsgMVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEsIHZhbClbMF1cbiAgfVxuKVxuXG4vKipcbiAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZW1vdmUgdGhlIGVsZW1lbnQgYXQgZ2l2ZW4gaW5kZXguXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbl8uZGVmaW5lKFxuICBhcnJheVByb3RvLFxuICAnJHJlbW92ZScsXG4gIGZ1bmN0aW9uICRyZW1vdmUgKGl0ZW0pIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm5cbiAgICB2YXIgaW5kZXggPSBfLmluZGV4T2YodGhpcywgaXRlbSlcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxKVxuICAgIH1cbiAgfVxuKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFycmF5TWV0aG9kc1xuIiwidmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciB1aWQgPSAwXG5cbi8qKlxuICogQSBkZXAgaXMgYW4gb2JzZXJ2YWJsZSB0aGF0IGNhbiBoYXZlIG11bHRpcGxlXG4gKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIERlcCAoKSB7XG4gIHRoaXMuaWQgPSB1aWQrK1xuICB0aGlzLnN1YnMgPSBbXVxufVxuXG4vLyB0aGUgY3VycmVudCB0YXJnZXQgd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQuXG4vLyB0aGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG9ubHkgb25lXG4vLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cbkRlcC50YXJnZXQgPSBudWxsXG5cbi8qKlxuICogQWRkIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG4gKlxuICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuICovXG5cbkRlcC5wcm90b3R5cGUuYWRkU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuICB0aGlzLnN1YnMucHVzaChzdWIpXG59XG5cbi8qKlxuICogUmVtb3ZlIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG4gKlxuICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuICovXG5cbkRlcC5wcm90b3R5cGUucmVtb3ZlU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuICB0aGlzLnN1YnMuJHJlbW92ZShzdWIpXG59XG5cbi8qKlxuICogQWRkIHNlbGYgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSB0YXJnZXQgd2F0Y2hlci5cbiAqL1xuXG5EZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldC5hZGREZXAodGhpcylcbn1cblxuLyoqXG4gKiBOb3RpZnkgYWxsIHN1YnNjcmliZXJzIG9mIGEgbmV3IHZhbHVlLlxuICovXG5cbkRlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAvLyBzdGFibGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0XG4gIHZhciBzdWJzID0gXy50b0FycmF5KHRoaXMuc3VicylcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHN1YnNbaV0udXBkYXRlKClcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IERlcFxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi9jb25maWcnKVxudmFyIERlcCA9IHJlcXVpcmUoJy4vZGVwJylcbnZhciBhcnJheU1ldGhvZHMgPSByZXF1aXJlKCcuL2FycmF5JylcbnZhciBhcnJheUtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpXG5cbi8qKlxuICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGFyZ2V0XG4gKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIE9ic2VydmVyICh2YWx1ZSkge1xuICB0aGlzLnZhbHVlID0gdmFsdWVcbiAgdGhpcy5kZXAgPSBuZXcgRGVwKClcbiAgXy5kZWZpbmUodmFsdWUsICdfX29iX18nLCB0aGlzKVxuICBpZiAoXy5pc0FycmF5KHZhbHVlKSkge1xuICAgIHZhciBhdWdtZW50ID0gXy5oYXNQcm90b1xuICAgICAgPyBwcm90b0F1Z21lbnRcbiAgICAgIDogY29weUF1Z21lbnRcbiAgICBhdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cylcbiAgICB0aGlzLm9ic2VydmVBcnJheSh2YWx1ZSlcbiAgfSBlbHNlIHtcbiAgICB0aGlzLndhbGsodmFsdWUpXG4gIH1cbn1cblxuLy8gU3RhdGljIG1ldGhvZHNcblxuLyoqXG4gKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcbiAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG4gKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHJldHVybiB7T2JzZXJ2ZXJ8dW5kZWZpbmVkfVxuICogQHN0YXRpY1xuICovXG5cbk9ic2VydmVyLmNyZWF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgdm0pIHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIG9iXG4gIGlmIChcbiAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdfX29iX18nKSAmJlxuICAgIHZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyXG4gICkge1xuICAgIG9iID0gdmFsdWUuX19vYl9fXG4gIH0gZWxzZSBpZiAoXG4gICAgKF8uaXNBcnJheSh2YWx1ZSkgfHwgXy5pc1BsYWluT2JqZWN0KHZhbHVlKSkgJiZcbiAgICAhT2JqZWN0LmlzRnJvemVuKHZhbHVlKSAmJlxuICAgICF2YWx1ZS5faXNWdWVcbiAgKSB7XG4gICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpXG4gIH1cbiAgaWYgKG9iICYmIHZtKSB7XG4gICAgb2IuYWRkVm0odm0pXG4gIH1cbiAgcmV0dXJuIG9iXG59XG5cbi8vIEluc3RhbmNlIG1ldGhvZHNcblxuLyoqXG4gKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cbiAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iailcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgdGhpcy5jb252ZXJ0KGtleXNbaV0sIG9ialtrZXlzW2ldXSlcbiAgfVxufVxuXG4vKipcbiAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmVBcnJheSA9IGZ1bmN0aW9uIChpdGVtcykge1xuICB2YXIgaSA9IGl0ZW1zLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgT2JzZXJ2ZXIuY3JlYXRlKGl0ZW1zW2ldKVxuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBhIHByb3BlcnR5IGludG8gZ2V0dGVyL3NldHRlciBzbyB3ZSBjYW4gZW1pdFxuICogdGhlIGV2ZW50cyB3aGVuIHRoZSBwcm9wZXJ0eSBpcyBhY2Nlc3NlZC9jaGFuZ2VkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcbiAgZGVmaW5lUmVhY3RpdmUodGhpcy52YWx1ZSwga2V5LCB2YWwpXG59XG5cbi8qKlxuICogQWRkIGFuIG93bmVyIHZtLCBzbyB0aGF0IHdoZW4gJHNldC8kZGVsZXRlIG11dGF0aW9uc1xuICogaGFwcGVuIHdlIGNhbiBub3RpZnkgb3duZXIgdm1zIHRvIHByb3h5IHRoZSBrZXlzIGFuZFxuICogZGlnZXN0IHRoZSB3YXRjaGVycy4gVGhpcyBpcyBvbmx5IGNhbGxlZCB3aGVuIHRoZSBvYmplY3RcbiAqIGlzIG9ic2VydmVkIGFzIGFuIGluc3RhbmNlJ3Mgcm9vdCAkZGF0YS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUuYWRkVm0gPSBmdW5jdGlvbiAodm0pIHtcbiAgKHRoaXMudm1zIHx8ICh0aGlzLnZtcyA9IFtdKSkucHVzaCh2bSlcbn1cblxuLyoqXG4gKiBSZW1vdmUgYW4gb3duZXIgdm0uIFRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIG9iamVjdCBpc1xuICogc3dhcHBlZCBvdXQgYXMgYW4gaW5zdGFuY2UncyAkZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLnJlbW92ZVZtID0gZnVuY3Rpb24gKHZtKSB7XG4gIHRoaXMudm1zLiRyZW1vdmUodm0pXG59XG5cbi8vIGhlbHBlcnNcblxuLyoqXG4gKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgaW50ZXJjZXB0aW5nXG4gKiB0aGUgcHJvdG90eXBlIGNoYWluIHVzaW5nIF9fcHJvdG9fX1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b1xuICovXG5cbmZ1bmN0aW9uIHByb3RvQXVnbWVudCAodGFyZ2V0LCBzcmMpIHtcbiAgdGFyZ2V0Ll9fcHJvdG9fXyA9IHNyY1xufVxuXG4vKipcbiAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZ1xuICogaGlkZGVuIHByb3BlcnRpZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuICogQHBhcmFtIHtPYmplY3R9IHByb3RvXG4gKi9cblxuZnVuY3Rpb24gY29weUF1Z21lbnQgKHRhcmdldCwgc3JjLCBrZXlzKSB7XG4gIHZhciBpID0ga2V5cy5sZW5ndGhcbiAgdmFyIGtleVxuICB3aGlsZSAoaS0tKSB7XG4gICAga2V5ID0ga2V5c1tpXVxuICAgIF8uZGVmaW5lKHRhcmdldCwga2V5LCBzcmNba2V5XSlcbiAgfVxufVxuXG4vKipcbiAqIERlZmluZSBhIHJlYWN0aXZlIHByb3BlcnR5IG9uIGFuIE9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbmZ1bmN0aW9uIGRlZmluZVJlYWN0aXZlIChvYmosIGtleSwgdmFsKSB7XG4gIHZhciBkZXAgPSBuZXcgRGVwKClcblxuICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcbiAgdmFyIGdldHRlciwgc2V0dGVyXG4gIGlmIChjb25maWcuY29udmVydEFsbFByb3BlcnRpZXMpIHtcbiAgICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KVxuICAgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0XG4gICAgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0XG4gIH1cblxuICB2YXIgY2hpbGRPYiA9IE9ic2VydmVyLmNyZWF0ZSh2YWwpXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIgKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbFxuICAgICAgaWYgKERlcC50YXJnZXQpIHtcbiAgICAgICAgZGVwLmRlcGVuZCgpXG4gICAgICAgIGlmIChjaGlsZE9iKSB7XG4gICAgICAgICAgY2hpbGRPYi5kZXAuZGVwZW5kKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoXy5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIGZvciAodmFyIGUsIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBlID0gdmFsdWVbaV1cbiAgICAgICAgICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIgKG5ld1ZhbCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbFxuICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoc2V0dGVyKSB7XG4gICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gbmV3VmFsXG4gICAgICB9XG4gICAgICBjaGlsZE9iID0gT2JzZXJ2ZXIuY3JlYXRlKG5ld1ZhbClcbiAgICAgIGRlcC5ub3RpZnkoKVxuICAgIH1cbiAgfSlcbn1cblxuLy8gQXR0YWNoIHRvIHRoZSB1dGlsIG9iamVjdCBzbyBpdCBjYW4gYmUgdXNlZCBlbHNld2hlcmUuXG5fLmRlZmluZVJlYWN0aXZlID0gZGVmaW5lUmVhY3RpdmVcblxubW9kdWxlLmV4cG9ydHMgPSBPYnNlcnZlclxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciBDYWNoZSA9IHJlcXVpcmUoJy4uL2NhY2hlJylcbnZhciBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKVxudmFyIGZpbHRlclRva2VuUkUgPSAvW15cXHMnXCJdK3wnW14nXSonfFwiW15cIl0qXCIvZ1xudmFyIHJlc2VydmVkQXJnUkUgPSAvXmluJHxeLT9cXGQrL1xuXG4vKipcbiAqIFBhcnNlciBzdGF0ZVxuICovXG5cbnZhciBzdHIsIGRpclxudmFyIGMsIGksIGwsIGxhc3RGaWx0ZXJJbmRleFxudmFyIGluU2luZ2xlLCBpbkRvdWJsZSwgY3VybHksIHNxdWFyZSwgcGFyZW5cblxuLyoqXG4gKiBQdXNoIGEgZmlsdGVyIHRvIHRoZSBjdXJyZW50IGRpcmVjdGl2ZSBvYmplY3RcbiAqL1xuXG5mdW5jdGlvbiBwdXNoRmlsdGVyICgpIHtcbiAgdmFyIGV4cCA9IHN0ci5zbGljZShsYXN0RmlsdGVySW5kZXgsIGkpLnRyaW0oKVxuICB2YXIgZmlsdGVyXG4gIGlmIChleHApIHtcbiAgICBmaWx0ZXIgPSB7fVxuICAgIHZhciB0b2tlbnMgPSBleHAubWF0Y2goZmlsdGVyVG9rZW5SRSlcbiAgICBmaWx0ZXIubmFtZSA9IHRva2Vuc1swXVxuICAgIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgICAgZmlsdGVyLmFyZ3MgPSB0b2tlbnMuc2xpY2UoMSkubWFwKHByb2Nlc3NGaWx0ZXJBcmcpXG4gICAgfVxuICB9XG4gIGlmIChmaWx0ZXIpIHtcbiAgICAoZGlyLmZpbHRlcnMgPSBkaXIuZmlsdGVycyB8fCBbXSkucHVzaChmaWx0ZXIpXG4gIH1cbiAgbGFzdEZpbHRlckluZGV4ID0gaSArIDFcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBhcmd1bWVudCBpcyBkeW5hbWljIGFuZCBzdHJpcCBxdW90ZXMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFyZ1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NGaWx0ZXJBcmcgKGFyZykge1xuICBpZiAocmVzZXJ2ZWRBcmdSRS50ZXN0KGFyZykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IF8udG9OdW1iZXIoYXJnKSxcbiAgICAgIGR5bmFtaWM6IGZhbHNlXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBzdHJpcHBlZCA9IF8uc3RyaXBRdW90ZXMoYXJnKVxuICAgIHZhciBkeW5hbWljID0gc3RyaXBwZWQgPT09IGFyZ1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogZHluYW1pYyA/IGFyZyA6IHN0cmlwcGVkLFxuICAgICAgZHluYW1pYzogZHluYW1pY1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIGEgZGlyZWN0aXZlIHZhbHVlIGFuZCBleHRyYWN0IHRoZSBleHByZXNzaW9uXG4gKiBhbmQgaXRzIGZpbHRlcnMgaW50byBhIGRlc2NyaXB0b3IuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBcImEgKyAxIHwgdXBwZXJjYXNlXCIgd2lsbCB5aWVsZDpcbiAqIHtcbiAqICAgZXhwcmVzc2lvbjogJ2EgKyAxJyxcbiAqICAgZmlsdGVyczogW1xuICogICAgIHsgbmFtZTogJ3VwcGVyY2FzZScsIGFyZ3M6IG51bGwgfVxuICogICBdXG4gKiB9XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAocykge1xuXG4gIHZhciBoaXQgPSBjYWNoZS5nZXQocylcbiAgaWYgKGhpdCkge1xuICAgIHJldHVybiBoaXRcbiAgfVxuXG4gIC8vIHJlc2V0IHBhcnNlciBzdGF0ZVxuICBzdHIgPSBzXG4gIGluU2luZ2xlID0gaW5Eb3VibGUgPSBmYWxzZVxuICBjdXJseSA9IHNxdWFyZSA9IHBhcmVuID0gMFxuICBsYXN0RmlsdGVySW5kZXggPSAwXG4gIGRpciA9IHt9XG5cbiAgZm9yIChpID0gMCwgbCA9IHN0ci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBpZiAoaW5TaW5nbGUpIHtcbiAgICAgIC8vIGNoZWNrIHNpbmdsZSBxdW90ZVxuICAgICAgaWYgKGMgPT09IDB4MjcpIGluU2luZ2xlID0gIWluU2luZ2xlXG4gICAgfSBlbHNlIGlmIChpbkRvdWJsZSkge1xuICAgICAgLy8gY2hlY2sgZG91YmxlIHF1b3RlXG4gICAgICBpZiAoYyA9PT0gMHgyMikgaW5Eb3VibGUgPSAhaW5Eb3VibGVcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgYyA9PT0gMHg3QyAmJiAvLyBwaXBlXG4gICAgICBzdHIuY2hhckNvZGVBdChpICsgMSkgIT09IDB4N0MgJiZcbiAgICAgIHN0ci5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3Q1xuICAgICkge1xuICAgICAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcbiAgICAgICAgLy8gZmlyc3QgZmlsdGVyLCBlbmQgb2YgZXhwcmVzc2lvblxuICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMVxuICAgICAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGFscmVhZHkgaGFzIGZpbHRlclxuICAgICAgICBwdXNoRmlsdGVyKClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgIGNhc2UgMHgyMjogaW5Eb3VibGUgPSB0cnVlOyBicmVhayAvLyBcIlxuICAgICAgICBjYXNlIDB4Mjc6IGluU2luZ2xlID0gdHJ1ZTsgYnJlYWsgLy8gJ1xuICAgICAgICBjYXNlIDB4Mjg6IHBhcmVuKys7IGJyZWFrICAgICAgICAgLy8gKFxuICAgICAgICBjYXNlIDB4Mjk6IHBhcmVuLS07IGJyZWFrICAgICAgICAgLy8gKVxuICAgICAgICBjYXNlIDB4NUI6IHNxdWFyZSsrOyBicmVhayAgICAgICAgLy8gW1xuICAgICAgICBjYXNlIDB4NUQ6IHNxdWFyZS0tOyBicmVhayAgICAgICAgLy8gXVxuICAgICAgICBjYXNlIDB4N0I6IGN1cmx5Kys7IGJyZWFrICAgICAgICAgLy8ge1xuICAgICAgICBjYXNlIDB4N0Q6IGN1cmx5LS07IGJyZWFrICAgICAgICAgLy8gfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG4gICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpXG4gIH0gZWxzZSBpZiAobGFzdEZpbHRlckluZGV4ICE9PSAwKSB7XG4gICAgcHVzaEZpbHRlcigpXG4gIH1cblxuICBjYWNoZS5wdXQocywgZGlyKVxuICByZXR1cm4gZGlyXG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIFBhdGggPSByZXF1aXJlKCcuL3BhdGgnKVxudmFyIENhY2hlID0gcmVxdWlyZSgnLi4vY2FjaGUnKVxudmFyIGV4cHJlc3Npb25DYWNoZSA9IG5ldyBDYWNoZSgxMDAwKVxuXG52YXIgYWxsb3dlZEtleXdvcmRzID1cbiAgJ01hdGgsRGF0ZSx0aGlzLHRydWUsZmFsc2UsbnVsbCx1bmRlZmluZWQsSW5maW5pdHksTmFOLCcgK1xuICAnaXNOYU4saXNGaW5pdGUsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksJyArXG4gICdlbmNvZGVVUklDb21wb25lbnQscGFyc2VJbnQscGFyc2VGbG9hdCdcbnZhciBhbGxvd2VkS2V5d29yZHNSRSA9XG4gIG5ldyBSZWdFeHAoJ14oJyArIGFsbG93ZWRLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKVxuXG4vLyBrZXl3b3JkcyB0aGF0IGRvbid0IG1ha2Ugc2Vuc2UgaW5zaWRlIGV4cHJlc3Npb25zXG52YXIgaW1wcm9wZXJLZXl3b3JkcyA9XG4gICdicmVhayxjYXNlLGNsYXNzLGNhdGNoLGNvbnN0LGNvbnRpbnVlLGRlYnVnZ2VyLGRlZmF1bHQsJyArXG4gICdkZWxldGUsZG8sZWxzZSxleHBvcnQsZXh0ZW5kcyxmaW5hbGx5LGZvcixmdW5jdGlvbixpZiwnICtcbiAgJ2ltcG9ydCxpbixpbnN0YW5jZW9mLGxldCxyZXR1cm4sc3VwZXIsc3dpdGNoLHRocm93LHRyeSwnICtcbiAgJ3Zhcix3aGlsZSx3aXRoLHlpZWxkLGVudW0sYXdhaXQsaW1wbGVtZW50cyxwYWNrYWdlLCcgK1xuICAncHJvY3RlY3RlZCxzdGF0aWMsaW50ZXJmYWNlLHByaXZhdGUscHVibGljJ1xudmFyIGltcHJvcGVyS2V5d29yZHNSRSA9XG4gIG5ldyBSZWdFeHAoJ14oJyArIGltcHJvcGVyS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJylcblxudmFyIHdzUkUgPSAvXFxzL2dcbnZhciBuZXdsaW5lUkUgPSAvXFxuL2dcbnZhciBzYXZlUkUgPSAvW1xceyxdXFxzKltcXHdcXCRfXStcXHMqOnwoJ1teJ10qJ3xcIlteXCJdKlwiKXxuZXcgfHR5cGVvZiB8dm9pZCAvZ1xudmFyIHJlc3RvcmVSRSA9IC9cIihcXGQrKVwiL2dcbnZhciBwYXRoVGVzdFJFID0gL15bQS1aYS16XyRdW1xcdyRdKihcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFsnLio/J1xcXXxcXFtcIi4qP1wiXFxdfFxcW1xcZCtcXF18XFxbW0EtWmEtel8kXVtcXHckXSpcXF0pKiQvXG52YXIgcGF0aFJlcGxhY2VSRSA9IC9bXlxcdyRcXC5dKFtBLVphLXpfJF1bXFx3JF0qKFxcLltBLVphLXpfJF1bXFx3JF0qfFxcWycuKj8nXFxdfFxcW1wiLio/XCJcXF0pKikvZ1xudmFyIGJvb2xlYW5MaXRlcmFsUkUgPSAvXih0cnVlfGZhbHNlKSQvXG5cbi8qKlxuICogU2F2ZSAvIFJld3JpdGUgLyBSZXN0b3JlXG4gKlxuICogV2hlbiByZXdyaXRpbmcgcGF0aHMgZm91bmQgaW4gYW4gZXhwcmVzc2lvbiwgaXQgaXNcbiAqIHBvc3NpYmxlIGZvciB0aGUgc2FtZSBsZXR0ZXIgc2VxdWVuY2VzIHRvIGJlIGZvdW5kIGluXG4gKiBzdHJpbmdzIGFuZCBPYmplY3QgbGl0ZXJhbCBwcm9wZXJ0eSBrZXlzLiBUaGVyZWZvcmUgd2VcbiAqIHJlbW92ZSBhbmQgc3RvcmUgdGhlc2UgcGFydHMgaW4gYSB0ZW1wb3JhcnkgYXJyYXksIGFuZFxuICogcmVzdG9yZSB0aGVtIGFmdGVyIHRoZSBwYXRoIHJld3JpdGUuXG4gKi9cblxudmFyIHNhdmVkID0gW11cblxuLyoqXG4gKiBTYXZlIHJlcGxhY2VyXG4gKlxuICogVGhlIHNhdmUgcmVnZXggY2FuIG1hdGNoIHR3byBwb3NzaWJsZSBjYXNlczpcbiAqIDEuIEFuIG9wZW5pbmcgb2JqZWN0IGxpdGVyYWxcbiAqIDIuIEEgc3RyaW5nXG4gKiBJZiBtYXRjaGVkIGFzIGEgcGxhaW4gc3RyaW5nLCB3ZSBuZWVkIHRvIGVzY2FwZSBpdHNcbiAqIG5ld2xpbmVzLCBzaW5jZSB0aGUgc3RyaW5nIG5lZWRzIHRvIGJlIHByZXNlcnZlZCB3aGVuXG4gKiBnZW5lcmF0aW5nIHRoZSBmdW5jdGlvbiBib2R5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBpc1N0cmluZyAtIHN0ciBpZiBtYXRjaGVkIGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9IC0gcGxhY2Vob2xkZXIgd2l0aCBpbmRleFxuICovXG5cbmZ1bmN0aW9uIHNhdmUgKHN0ciwgaXNTdHJpbmcpIHtcbiAgdmFyIGkgPSBzYXZlZC5sZW5ndGhcbiAgc2F2ZWRbaV0gPSBpc1N0cmluZ1xuICAgID8gc3RyLnJlcGxhY2UobmV3bGluZVJFLCAnXFxcXG4nKVxuICAgIDogc3RyXG4gIHJldHVybiAnXCInICsgaSArICdcIidcbn1cblxuLyoqXG4gKiBQYXRoIHJld3JpdGUgcmVwbGFjZXJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcmF3XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcmV3cml0ZSAocmF3KSB7XG4gIHZhciBjID0gcmF3LmNoYXJBdCgwKVxuICB2YXIgcGF0aCA9IHJhdy5zbGljZSgxKVxuICBpZiAoYWxsb3dlZEtleXdvcmRzUkUudGVzdChwYXRoKSkge1xuICAgIHJldHVybiByYXdcbiAgfSBlbHNlIHtcbiAgICBwYXRoID0gcGF0aC5pbmRleE9mKCdcIicpID4gLTFcbiAgICAgID8gcGF0aC5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSlcbiAgICAgIDogcGF0aFxuICAgIHJldHVybiBjICsgJ3Njb3BlLicgKyBwYXRoXG4gIH1cbn1cblxuLyoqXG4gKiBSZXN0b3JlIHJlcGxhY2VyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGkgLSBtYXRjaGVkIHNhdmUgaW5kZXhcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiByZXN0b3JlIChzdHIsIGkpIHtcbiAgcmV0dXJuIHNhdmVkW2ldXG59XG5cbi8qKlxuICogUmV3cml0ZSBhbiBleHByZXNzaW9uLCBwcmVmaXhpbmcgYWxsIHBhdGggYWNjZXNzb3JzIHdpdGhcbiAqIGBzY29wZS5gIGFuZCBnZW5lcmF0ZSBnZXR0ZXIvc2V0dGVyIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG5lZWRTZXRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVFeHBGbnMgKGV4cCwgbmVlZFNldCkge1xuICBpZiAoaW1wcm9wZXJLZXl3b3Jkc1JFLnRlc3QoZXhwKSkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgJ0F2b2lkIHVzaW5nIHJlc2VydmVkIGtleXdvcmRzIGluIGV4cHJlc3Npb246ICcgKyBleHBcbiAgICApXG4gIH1cbiAgLy8gcmVzZXQgc3RhdGVcbiAgc2F2ZWQubGVuZ3RoID0gMFxuICAvLyBzYXZlIHN0cmluZ3MgYW5kIG9iamVjdCBsaXRlcmFsIGtleXNcbiAgdmFyIGJvZHkgPSBleHBcbiAgICAucmVwbGFjZShzYXZlUkUsIHNhdmUpXG4gICAgLnJlcGxhY2Uod3NSRSwgJycpXG4gIC8vIHJld3JpdGUgYWxsIHBhdGhzXG4gIC8vIHBhZCAxIHNwYWNlIGhlcmUgYmVjYXVlIHRoZSByZWdleCBtYXRjaGVzIDEgZXh0cmEgY2hhclxuICBib2R5ID0gKCcgJyArIGJvZHkpXG4gICAgLnJlcGxhY2UocGF0aFJlcGxhY2VSRSwgcmV3cml0ZSlcbiAgICAucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpXG4gIHZhciBnZXR0ZXIgPSBtYWtlR2V0dGVyKGJvZHkpXG4gIGlmIChnZXR0ZXIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0OiBnZXR0ZXIsXG4gICAgICBib2R5OiBib2R5LFxuICAgICAgc2V0OiBuZWVkU2V0XG4gICAgICAgID8gbWFrZVNldHRlcihib2R5KVxuICAgICAgICA6IG51bGxcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGdldHRlciBzZXR0ZXJzIGZvciBhIHNpbXBsZSBwYXRoLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVQYXRoRm5zIChleHApIHtcbiAgdmFyIGdldHRlciwgcGF0aFxuICBpZiAoZXhwLmluZGV4T2YoJ1snKSA8IDApIHtcbiAgICAvLyByZWFsbHkgc2ltcGxlIHBhdGhcbiAgICBwYXRoID0gZXhwLnNwbGl0KCcuJylcbiAgICBwYXRoLnJhdyA9IGV4cFxuICAgIGdldHRlciA9IFBhdGguY29tcGlsZUdldHRlcihwYXRoKVxuICB9IGVsc2Uge1xuICAgIC8vIGRvIHRoZSByZWFsIHBhcnNpbmdcbiAgICBwYXRoID0gUGF0aC5wYXJzZShleHApXG4gICAgZ2V0dGVyID0gcGF0aC5nZXRcbiAgfVxuICByZXR1cm4ge1xuICAgIGdldDogZ2V0dGVyLFxuICAgIC8vIGFsd2F5cyBnZW5lcmF0ZSBzZXR0ZXIgZm9yIHNpbXBsZSBwYXRoc1xuICAgIHNldDogZnVuY3Rpb24gKG9iaiwgdmFsKSB7XG4gICAgICBQYXRoLnNldChvYmosIHBhdGgsIHZhbClcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBCdWlsZCBhIGdldHRlciBmdW5jdGlvbi4gUmVxdWlyZXMgZXZhbC5cbiAqXG4gKiBXZSBpc29sYXRlIHRoZSB0cnkvY2F0Y2ggc28gaXQgZG9lc24ndCBhZmZlY3QgdGhlXG4gKiBvcHRpbWl6YXRpb24gb2YgdGhlIHBhcnNlIGZ1bmN0aW9uIHdoZW4gaXQgaXMgbm90IGNhbGxlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYm9keVxuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIG1ha2VHZXR0ZXIgKGJvZHkpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzY29wZScsICdyZXR1cm4gJyArIGJvZHkgKyAnOycpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICdJbnZhbGlkIGV4cHJlc3Npb24uICcgK1xuICAgICAgJ0dlbmVyYXRlZCBmdW5jdGlvbiBib2R5OiAnICsgYm9keVxuICAgIClcbiAgfVxufVxuXG4vKipcbiAqIEJ1aWxkIGEgc2V0dGVyIGZ1bmN0aW9uLlxuICpcbiAqIFRoaXMgaXMgb25seSBuZWVkZWQgaW4gcmFyZSBzaXR1YXRpb25zIGxpa2UgXCJhW2JdXCIgd2hlcmVcbiAqIGEgc2V0dGFibGUgcGF0aCByZXF1aXJlcyBkeW5hbWljIGV2YWx1YXRpb24uXG4gKlxuICogVGhpcyBzZXR0ZXIgZnVuY3Rpb24gbWF5IHRocm93IGVycm9yIHdoZW4gY2FsbGVkIGlmIHRoZVxuICogZXhwcmVzc2lvbiBib2R5IGlzIG5vdCBhIHZhbGlkIGxlZnQtaGFuZCBleHByZXNzaW9uIGluXG4gKiBhc3NpZ25tZW50LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBib2R5XG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gbWFrZVNldHRlciAoYm9keSkge1xuICB0cnkge1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3Njb3BlJywgJ3ZhbHVlJywgYm9keSArICc9dmFsdWU7JylcbiAgfSBjYXRjaCAoZSkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgJ0ludmFsaWQgc2V0dGVyIGZ1bmN0aW9uIGJvZHk6ICcgKyBib2R5XG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgZm9yIHNldHRlciBleGlzdGVuY2Ugb24gYSBjYWNoZSBoaXQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGl0XG4gKi9cblxuZnVuY3Rpb24gY2hlY2tTZXR0ZXIgKGhpdCkge1xuICBpZiAoIWhpdC5zZXQpIHtcbiAgICBoaXQuc2V0ID0gbWFrZVNldHRlcihoaXQuYm9keSlcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIGFuIGV4cHJlc3Npb24gaW50byByZS13cml0dGVuIGdldHRlci9zZXR0ZXJzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbmVlZFNldFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uIChleHAsIG5lZWRTZXQpIHtcbiAgZXhwID0gZXhwLnRyaW0oKVxuICAvLyB0cnkgY2FjaGVcbiAgdmFyIGhpdCA9IGV4cHJlc3Npb25DYWNoZS5nZXQoZXhwKVxuICBpZiAoaGl0KSB7XG4gICAgaWYgKG5lZWRTZXQpIHtcbiAgICAgIGNoZWNrU2V0dGVyKGhpdClcbiAgICB9XG4gICAgcmV0dXJuIGhpdFxuICB9XG4gIC8vIHdlIGRvIGEgc2ltcGxlIHBhdGggY2hlY2sgdG8gb3B0aW1pemUgZm9yIHRoZW0uXG4gIC8vIHRoZSBjaGVjayBmYWlscyB2YWxpZCBwYXRocyB3aXRoIHVudXNhbCB3aGl0ZXNwYWNlcyxcbiAgLy8gYnV0IHRoYXQncyB0b28gcmFyZSBhbmQgd2UgZG9uJ3QgY2FyZS5cbiAgLy8gYWxzbyBza2lwIGJvb2xlYW4gbGl0ZXJhbHMgYW5kIHBhdGhzIHRoYXQgc3RhcnQgd2l0aFxuICAvLyBnbG9iYWwgXCJNYXRoXCJcbiAgdmFyIHJlcyA9IGV4cG9ydHMuaXNTaW1wbGVQYXRoKGV4cClcbiAgICA/IGNvbXBpbGVQYXRoRm5zKGV4cClcbiAgICA6IGNvbXBpbGVFeHBGbnMoZXhwLCBuZWVkU2V0KVxuICBleHByZXNzaW9uQ2FjaGUucHV0KGV4cCwgcmVzKVxuICByZXR1cm4gcmVzXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIHNpbXBsZSBwYXRoLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZXhwb3J0cy5pc1NpbXBsZVBhdGggPSBmdW5jdGlvbiAoZXhwKSB7XG4gIHJldHVybiBwYXRoVGVzdFJFLnRlc3QoZXhwKSAmJlxuICAgIC8vIGRvbid0IHRyZWF0IHRydWUvZmFsc2UgYXMgcGF0aHNcbiAgICAhYm9vbGVhbkxpdGVyYWxSRS50ZXN0KGV4cCkgJiZcbiAgICAvLyBNYXRoIGNvbnN0YW50cyBlLmcuIE1hdGguUEksIE1hdGguRSBldGMuXG4gICAgZXhwLnNsaWNlKDAsIDUpICE9PSAnTWF0aC4nXG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIENhY2hlID0gcmVxdWlyZSgnLi4vY2FjaGUnKVxudmFyIHBhdGhDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKVxudmFyIGlkZW50UkUgPSBleHBvcnRzLmlkZW50UkUgPSAvXlskX2EtekEtWl0rW1xcdyRdKiQvXG5cbi8vIGFjdGlvbnNcbnZhciBBUFBFTkQgPSAwXG52YXIgUFVTSCA9IDFcblxuLy8gc3RhdGVzXG52YXIgQkVGT1JFX1BBVEggPSAwXG52YXIgSU5fUEFUSCA9IDFcbnZhciBCRUZPUkVfSURFTlQgPSAyXG52YXIgSU5fSURFTlQgPSAzXG52YXIgQkVGT1JFX0VMRU1FTlQgPSA0XG52YXIgQUZURVJfWkVSTyA9IDVcbnZhciBJTl9JTkRFWCA9IDZcbnZhciBJTl9TSU5HTEVfUVVPVEUgPSA3XG52YXIgSU5fRE9VQkxFX1FVT1RFID0gOFxudmFyIElOX1NVQl9QQVRIID0gOVxudmFyIEFGVEVSX0VMRU1FTlQgPSAxMFxudmFyIEFGVEVSX1BBVEggPSAxMVxudmFyIEVSUk9SID0gMTJcblxudmFyIHBhdGhTdGF0ZU1hY2hpbmUgPSBbXVxuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9QQVRIXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9QQVRIXSxcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnWyc6IFtCRUZPUkVfRUxFTUVOVF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSF1cbn1cblxucGF0aFN0YXRlTWFjaGluZVtJTl9QQVRIXSA9IHtcbiAgJ3dzJzogW0lOX1BBVEhdLFxuICAnLic6IFtCRUZPUkVfSURFTlRdLFxuICAnWyc6IFtCRUZPUkVfRUxFTUVOVF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSF1cbn1cblxucGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfSURFTlRdID0ge1xuICAnd3MnOiBbQkVGT1JFX0lERU5UXSxcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdXG59XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnd3MnOiBbSU5fUEFUSCwgUFVTSF0sXG4gICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sXG4gICdbJzogW0JFRk9SRV9FTEVNRU5ULCBQVVNIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRILCBQVVNIXVxufVxuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9FTEVNRU5UXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9FTEVNRU5UXSxcbiAgJzAnOiBbQUZURVJfWkVSTywgQVBQRU5EXSxcbiAgJ251bWJlcic6IFtJTl9JTkRFWCwgQVBQRU5EXSxcbiAgXCInXCI6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORCwgJyddLFxuICAnXCInOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkQsICcnXSxcbiAgJ2lkZW50JzogW0lOX1NVQl9QQVRILCBBUFBFTkQsICcqJ11cbn1cblxucGF0aFN0YXRlTWFjaGluZVtBRlRFUl9aRVJPXSA9IHtcbiAgJ3dzJzogW0FGVEVSX0VMRU1FTlQsIFBVU0hdLFxuICAnXSc6IFtJTl9QQVRILCBQVVNIXVxufVxuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX0lOREVYXSA9IHtcbiAgJzAnOiBbSU5fSU5ERVgsIEFQUEVORF0sXG4gICdudW1iZXInOiBbSU5fSU5ERVgsIEFQUEVORF0sXG4gICd3cyc6IFtBRlRFUl9FTEVNRU5UXSxcbiAgJ10nOiBbSU5fUEFUSCwgUFVTSF1cbn1cblxucGF0aFN0YXRlTWFjaGluZVtJTl9TSU5HTEVfUVVPVEVdID0ge1xuICBcIidcIjogW0FGVEVSX0VMRU1FTlRdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXVxufVxuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX0RPVUJMRV9RVU9URV0gPSB7XG4gICdcIic6IFtBRlRFUl9FTEVNRU5UXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF1cbn1cblxucGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG4gICdpZGVudCc6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcbiAgJzAnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG4gICdudW1iZXInOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG4gICd3cyc6IFtBRlRFUl9FTEVNRU5UXSxcbiAgJ10nOiBbSU5fUEFUSCwgUFVTSF1cbn1cblxucGF0aFN0YXRlTWFjaGluZVtBRlRFUl9FTEVNRU5UXSA9IHtcbiAgJ3dzJzogW0FGVEVSX0VMRU1FTlRdLFxuICAnXSc6IFtJTl9QQVRILCBQVVNIXVxufVxuXG4vKipcbiAqIERldGVybWluZSB0aGUgdHlwZSBvZiBhIGNoYXJhY3RlciBpbiBhIGtleXBhdGguXG4gKlxuICogQHBhcmFtIHtDaGFyfSBjaFxuICogQHJldHVybiB7U3RyaW5nfSB0eXBlXG4gKi9cblxuZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlIChjaCkge1xuICBpZiAoY2ggPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAnZW9mJ1xuICB9XG5cbiAgdmFyIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApXG5cbiAgc3dpdGNoIChjb2RlKSB7XG4gICAgY2FzZSAweDVCOiAvLyBbXG4gICAgY2FzZSAweDVEOiAvLyBdXG4gICAgY2FzZSAweDJFOiAvLyAuXG4gICAgY2FzZSAweDIyOiAvLyBcIlxuICAgIGNhc2UgMHgyNzogLy8gJ1xuICAgIGNhc2UgMHgzMDogLy8gMFxuICAgICAgcmV0dXJuIGNoXG5cbiAgICBjYXNlIDB4NUY6IC8vIF9cbiAgICBjYXNlIDB4MjQ6IC8vICRcbiAgICAgIHJldHVybiAnaWRlbnQnXG5cbiAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXG4gICAgY2FzZSAweDA5OiAvLyBUYWJcbiAgICBjYXNlIDB4MEE6IC8vIE5ld2xpbmVcbiAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxuICAgIGNhc2UgMHhBMDogIC8vIE5vLWJyZWFrIHNwYWNlXG4gICAgY2FzZSAweEZFRkY6ICAvLyBCeXRlIE9yZGVyIE1hcmtcbiAgICBjYXNlIDB4MjAyODogIC8vIExpbmUgU2VwYXJhdG9yXG4gICAgY2FzZSAweDIwMjk6ICAvLyBQYXJhZ3JhcGggU2VwYXJhdG9yXG4gICAgICByZXR1cm4gJ3dzJ1xuICB9XG5cbiAgLy8gYS16LCBBLVpcbiAgaWYgKFxuICAgIChjb2RlID49IDB4NjEgJiYgY29kZSA8PSAweDdBKSB8fFxuICAgIChjb2RlID49IDB4NDEgJiYgY29kZSA8PSAweDVBKVxuICApIHtcbiAgICByZXR1cm4gJ2lkZW50J1xuICB9XG5cbiAgLy8gMS05XG4gIGlmIChjb2RlID49IDB4MzEgJiYgY29kZSA8PSAweDM5KSB7XG4gICAgcmV0dXJuICdudW1iZXInXG4gIH1cblxuICByZXR1cm4gJ2Vsc2UnXG59XG5cbi8qKlxuICogUGFyc2UgYSBzdHJpbmcgcGF0aCBpbnRvIGFuIGFycmF5IG9mIHNlZ21lbnRzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZVBhdGggKHBhdGgpIHtcbiAgdmFyIGtleXMgPSBbXVxuICB2YXIgaW5kZXggPSAtMVxuICB2YXIgbW9kZSA9IEJFRk9SRV9QQVRIXG4gIHZhciBjLCBuZXdDaGFyLCBrZXksIHR5cGUsIHRyYW5zaXRpb24sIGFjdGlvbiwgdHlwZU1hcFxuXG4gIHZhciBhY3Rpb25zID0gW11cbiAgYWN0aW9uc1tQVVNIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBrZXlzLnB1c2goa2V5KVxuICAgIGtleSA9IHVuZGVmaW5lZFxuICB9XG4gIGFjdGlvbnNbQVBQRU5EXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleSA9IG5ld0NoYXJcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ICs9IG5ld0NoYXJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtYXliZVVuZXNjYXBlUXVvdGUgKCkge1xuICAgIHZhciBuZXh0Q2hhciA9IHBhdGhbaW5kZXggKyAxXVxuICAgIGlmICgobW9kZSA9PT0gSU5fU0lOR0xFX1FVT1RFICYmIG5leHRDaGFyID09PSBcIidcIikgfHxcbiAgICAgICAgKG1vZGUgPT09IElOX0RPVUJMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gJ1wiJykpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIG5ld0NoYXIgPSBuZXh0Q2hhclxuICAgICAgYWN0aW9uc1tBUFBFTkRdKClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgd2hpbGUgKG1vZGUgIT0gbnVsbCkge1xuICAgIGluZGV4KytcbiAgICBjID0gcGF0aFtpbmRleF1cblxuICAgIGlmIChjID09PSAnXFxcXCcgJiYgbWF5YmVVbmVzY2FwZVF1b3RlKCkpIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgdHlwZSA9IGdldFBhdGhDaGFyVHlwZShjKVxuICAgIHR5cGVNYXAgPSBwYXRoU3RhdGVNYWNoaW5lW21vZGVdXG4gICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SXG5cbiAgICBpZiAodHJhbnNpdGlvbiA9PT0gRVJST1IpIHtcbiAgICAgIHJldHVybiAvLyBwYXJzZSBlcnJvclxuICAgIH1cblxuICAgIG1vZGUgPSB0cmFuc2l0aW9uWzBdXG4gICAgYWN0aW9uID0gYWN0aW9uc1t0cmFuc2l0aW9uWzFdXVxuICAgIGlmIChhY3Rpb24pIHtcbiAgICAgIG5ld0NoYXIgPSB0cmFuc2l0aW9uWzJdXG4gICAgICBuZXdDaGFyID0gbmV3Q2hhciA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8gY1xuICAgICAgICA6IG5ld0NoYXIgPT09ICcqJ1xuICAgICAgICAgID8gbmV3Q2hhciArIGNcbiAgICAgICAgICA6IG5ld0NoYXJcbiAgICAgIGFjdGlvbigpXG4gICAgfVxuXG4gICAgaWYgKG1vZGUgPT09IEFGVEVSX1BBVEgpIHtcbiAgICAgIGtleXMucmF3ID0gcGF0aFxuICAgICAgcmV0dXJuIGtleXNcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBhY2Nlc3NvciBzZWdtZW50IGJhc2VkIG9uIGl0cyB0eXBlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0QWNjZXNzb3IgKGtleSkge1xuICBpZiAoaWRlbnRSRS50ZXN0KGtleSkpIHsgLy8gaWRlbnRpZmllclxuICAgIHJldHVybiAnLicgKyBrZXlcbiAgfSBlbHNlIGlmICgra2V5ID09PSBrZXkgPj4+IDApIHsgLy8gYnJhY2tldCBpbmRleFxuICAgIHJldHVybiAnWycgKyBrZXkgKyAnXSdcbiAgfSBlbHNlIGlmIChrZXkuY2hhckF0KDApID09PSAnKicpIHtcbiAgICByZXR1cm4gJ1tvJyArIGZvcm1hdEFjY2Vzc29yKGtleS5zbGljZSgxKSkgKyAnXSdcbiAgfSBlbHNlIHsgLy8gYnJhY2tldCBzdHJpbmdcbiAgICByZXR1cm4gJ1tcIicgKyBrZXkucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpICsgJ1wiXSdcbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGVzIGEgZ2V0dGVyIGZ1bmN0aW9uIHdpdGggYSBmaXhlZCBwYXRoLlxuICogVGhlIGZpeGVkIHBhdGggZ2V0dGVyIHN1cHJlc3NlcyBlcnJvcnMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcGF0aFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZXhwb3J0cy5jb21waWxlR2V0dGVyID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgdmFyIGJvZHkgPSAncmV0dXJuIG8nICsgcGF0aC5tYXAoZm9ybWF0QWNjZXNzb3IpLmpvaW4oJycpXG4gIHJldHVybiBuZXcgRnVuY3Rpb24oJ28nLCBib2R5KVxufVxuXG4vKipcbiAqIEV4dGVybmFsIHBhcnNlIHRoYXQgY2hlY2sgZm9yIGEgY2FjaGUgaGl0IGZpcnN0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgdmFyIGhpdCA9IHBhdGhDYWNoZS5nZXQocGF0aClcbiAgaWYgKCFoaXQpIHtcbiAgICBoaXQgPSBwYXJzZVBhdGgocGF0aClcbiAgICBpZiAoaGl0KSB7XG4gICAgICBoaXQuZ2V0ID0gZXhwb3J0cy5jb21waWxlR2V0dGVyKGhpdClcbiAgICAgIHBhdGhDYWNoZS5wdXQocGF0aCwgaGl0KVxuICAgIH1cbiAgfVxuICByZXR1cm4gaGl0XG59XG5cbi8qKlxuICogR2V0IGZyb20gYW4gb2JqZWN0IGZyb20gYSBwYXRoIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKi9cblxuZXhwb3J0cy5nZXQgPSBmdW5jdGlvbiAob2JqLCBwYXRoKSB7XG4gIHBhdGggPSBleHBvcnRzLnBhcnNlKHBhdGgpXG4gIGlmIChwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGguZ2V0KG9iailcbiAgfVxufVxuXG4vKipcbiAqIFdhcm4gYWdhaW5zdCBzZXR0aW5nIG5vbi1leGlzdGVudCByb290IHBhdGggb24gYSB2bS5cbiAqL1xuXG52YXIgd2Fybk5vbkV4aXN0ZW50XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB3YXJuTm9uRXhpc3RlbnQgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgIF8ud2FybihcbiAgICAgICdZb3UgYXJlIHNldHRpbmcgYSBub24tZXhpc3RlbnQgcGF0aCBcIicgKyBwYXRoLnJhdyArICdcIiAnICtcbiAgICAgICdvbiBhIHZtIGluc3RhbmNlLiBDb25zaWRlciBwcmUtaW5pdGlhbGl6aW5nIHRoZSBwcm9wZXJ0eSAnICtcbiAgICAgICd3aXRoIHRoZSBcImRhdGFcIiBvcHRpb24gZm9yIG1vcmUgcmVsaWFibGUgcmVhY3Rpdml0eSAnICtcbiAgICAgICdhbmQgYmV0dGVyIHBlcmZvcm1hbmNlLidcbiAgICApXG4gIH1cbn1cblxuLyoqXG4gKiBTZXQgb24gYW4gb2JqZWN0IGZyb20gYSBwYXRoXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmcgfCBBcnJheX0gcGF0aFxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5leHBvcnRzLnNldCA9IGZ1bmN0aW9uIChvYmosIHBhdGgsIHZhbCkge1xuICB2YXIgb3JpZ2luYWwgPSBvYmpcbiAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgIHBhdGggPSBleHBvcnRzLnBhcnNlKHBhdGgpXG4gIH1cbiAgaWYgKCFwYXRoIHx8ICFfLmlzT2JqZWN0KG9iaikpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICB2YXIgbGFzdCwga2V5XG4gIGZvciAodmFyIGkgPSAwLCBsID0gcGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBsYXN0ID0gb2JqXG4gICAga2V5ID0gcGF0aFtpXVxuICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnKicpIHtcbiAgICAgIGtleSA9IG9yaWdpbmFsW2tleS5zbGljZSgxKV1cbiAgICB9XG4gICAgaWYgKGkgPCBsIC0gMSkge1xuICAgICAgb2JqID0gb2JqW2tleV1cbiAgICAgIGlmICghXy5pc09iamVjdChvYmopKSB7XG4gICAgICAgIG9iaiA9IHt9XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGxhc3QuX2lzVnVlKSB7XG4gICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgpXG4gICAgICAgIH1cbiAgICAgICAgXy5zZXQobGFzdCwga2V5LCBvYmopXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChfLmlzQXJyYXkob2JqKSkge1xuICAgICAgICBvYmouJHNldChrZXksIHZhbClcbiAgICAgIH0gZWxzZSBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICBvYmpba2V5XSA9IHZhbFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb2JqLl9pc1Z1ZSkge1xuICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoKVxuICAgICAgICB9XG4gICAgICAgIF8uc2V0KG9iaiwga2V5LCB2YWwpXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlXG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIENhY2hlID0gcmVxdWlyZSgnLi4vY2FjaGUnKVxudmFyIHRlbXBsYXRlQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMClcbnZhciBpZFNlbGVjdG9yQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMClcblxudmFyIG1hcCA9IHtcbiAgX2RlZmF1bHQ6IFswLCAnJywgJyddLFxuICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuICB0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gIGNvbDogW1xuICAgIDIsXG4gICAgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JyxcbiAgICAnPC9jb2xncm91cD48L3RhYmxlPidcbiAgXVxufVxuXG5tYXAudGQgPVxubWFwLnRoID0gW1xuICAzLFxuICAnPHRhYmxlPjx0Ym9keT48dHI+JyxcbiAgJzwvdHI+PC90Ym9keT48L3RhYmxlPidcbl1cblxubWFwLm9wdGlvbiA9XG5tYXAub3B0Z3JvdXAgPSBbXG4gIDEsXG4gICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLFxuICAnPC9zZWxlY3Q+J1xuXVxuXG5tYXAudGhlYWQgPVxubWFwLnRib2R5ID1cbm1hcC5jb2xncm91cCA9XG5tYXAuY2FwdGlvbiA9XG5tYXAudGZvb3QgPSBbMSwgJzx0YWJsZT4nLCAnPC90YWJsZT4nXVxuXG5tYXAuZyA9XG5tYXAuZGVmcyA9XG5tYXAuc3ltYm9sID1cbm1hcC51c2UgPVxubWFwLmltYWdlID1cbm1hcC50ZXh0ID1cbm1hcC5jaXJjbGUgPVxubWFwLmVsbGlwc2UgPVxubWFwLmxpbmUgPVxubWFwLnBhdGggPVxubWFwLnBvbHlnb24gPVxubWFwLnBvbHlsaW5lID1cbm1hcC5yZWN0ID0gW1xuICAxLFxuICAnPHN2ZyAnICtcbiAgICAneG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICcgK1xuICAgICd4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiAnICtcbiAgICAneG1sbnM6ZXY9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHNcIicgK1xuICAgICd2ZXJzaW9uPVwiMS4xXCI+JyxcbiAgJzwvc3ZnPidcbl1cblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBzdXBwb3J0ZWQgdGVtcGxhdGUgbm9kZSB3aXRoIGFcbiAqIERvY3VtZW50RnJhZ21lbnQgY29udGVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNSZWFsVGVtcGxhdGUgKG5vZGUpIHtcbiAgcmV0dXJuIF8uaXNUZW1wbGF0ZShub2RlKSAmJlxuICAgIG5vZGUuY29udGVudCBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnRcbn1cblxudmFyIHRhZ1JFID0gLzwoW1xcdzpdKykvXG52YXIgZW50aXR5UkUgPSAvJlxcdys7fCYjXFxkKzt8JiN4W1xcZEEtRl0rOy9cblxuLyoqXG4gKiBDb252ZXJ0IGEgc3RyaW5nIHRlbXBsYXRlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cbiAqIERldGVybWluZXMgY29ycmVjdCB3cmFwcGluZyBieSB0YWcgdHlwZXMuIFdyYXBwaW5nXG4gKiBzdHJhdGVneSBmb3VuZCBpbiBqUXVlcnkgJiBjb21wb25lbnQvZG9taWZ5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVN0cmluZ1xuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBzdHJpbmdUb0ZyYWdtZW50ICh0ZW1wbGF0ZVN0cmluZykge1xuICAvLyB0cnkgYSBjYWNoZSBoaXQgZmlyc3RcbiAgdmFyIGhpdCA9IHRlbXBsYXRlQ2FjaGUuZ2V0KHRlbXBsYXRlU3RyaW5nKVxuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdFxuICB9XG5cbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgdmFyIHRhZ01hdGNoID0gdGVtcGxhdGVTdHJpbmcubWF0Y2godGFnUkUpXG4gIHZhciBlbnRpdHlNYXRjaCA9IGVudGl0eVJFLnRlc3QodGVtcGxhdGVTdHJpbmcpXG5cbiAgaWYgKCF0YWdNYXRjaCAmJiAhZW50aXR5TWF0Y2gpIHtcbiAgICAvLyB0ZXh0IG9ubHksIHJldHVybiBhIHNpbmdsZSB0ZXh0IG5vZGUuXG4gICAgZnJhZy5hcHBlbmRDaGlsZChcbiAgICAgIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRlbXBsYXRlU3RyaW5nKVxuICAgIClcbiAgfSBlbHNlIHtcblxuICAgIHZhciB0YWcgPSB0YWdNYXRjaCAmJiB0YWdNYXRjaFsxXVxuICAgIHZhciB3cmFwID0gbWFwW3RhZ10gfHwgbWFwLl9kZWZhdWx0XG4gICAgdmFyIGRlcHRoID0gd3JhcFswXVxuICAgIHZhciBwcmVmaXggPSB3cmFwWzFdXG4gICAgdmFyIHN1ZmZpeCA9IHdyYXBbMl1cbiAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBub2RlLmlubmVySFRNTCA9IHByZWZpeCArIHRlbXBsYXRlU3RyaW5nLnRyaW0oKSArIHN1ZmZpeFxuICAgIHdoaWxlIChkZXB0aC0tKSB7XG4gICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGRcbiAgICB9XG5cbiAgICB2YXIgY2hpbGRcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIHdoaWxlIChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCkge1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpXG4gICAgfVxuICB9XG5cbiAgdGVtcGxhdGVDYWNoZS5wdXQodGVtcGxhdGVTdHJpbmcsIGZyYWcpXG4gIHJldHVybiBmcmFnXG59XG5cbi8qKlxuICogQ29udmVydCBhIHRlbXBsYXRlIG5vZGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBub2RlVG9GcmFnbWVudCAobm9kZSkge1xuICAvLyBpZiBpdHMgYSB0ZW1wbGF0ZSB0YWcgYW5kIHRoZSBicm93c2VyIHN1cHBvcnRzIGl0LFxuICAvLyBpdHMgY29udGVudCBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQuXG4gIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuICAgIF8udHJpbU5vZGUobm9kZS5jb250ZW50KVxuICAgIHJldHVybiBub2RlLmNvbnRlbnRcbiAgfVxuICAvLyBzY3JpcHQgdGVtcGxhdGVcbiAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1NDUklQVCcpIHtcbiAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLnRleHRDb250ZW50KVxuICB9XG4gIC8vIG5vcm1hbCBub2RlLCBjbG9uZSBpdCB0byBhdm9pZCBtdXRhdGluZyB0aGUgb3JpZ2luYWxcbiAgdmFyIGNsb25lID0gZXhwb3J0cy5jbG9uZShub2RlKVxuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKVxuICB2YXIgY2hpbGRcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgd2hpbGUgKGNoaWxkID0gY2xvbmUuZmlyc3RDaGlsZCkge1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZClcbiAgfVxuICBfLnRyaW1Ob2RlKGZyYWcpXG4gIHJldHVybiBmcmFnXG59XG5cbi8vIFRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgU2FmYXJpIHRlbXBsYXRlIGNsb25pbmcgYnVnXG4vLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM3NzU1XG52YXIgaGFzQnJva2VuVGVtcGxhdGUgPSAoZnVuY3Rpb24gKCkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoXy5pbkJyb3dzZXIpIHtcbiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgYS5pbm5lckhUTUwgPSAnPHRlbXBsYXRlPjE8L3RlbXBsYXRlPidcbiAgICByZXR1cm4gIWEuY2xvbmVOb2RlKHRydWUpLmZpcnN0Q2hpbGQuaW5uZXJIVE1MXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn0pKClcblxuLy8gVGVzdCBmb3IgSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBjbG9uZSBidWdcbnZhciBoYXNUZXh0YXJlYUNsb25lQnVnID0gKGZ1bmN0aW9uICgpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKF8uaW5Ccm93c2VyKSB7XG4gICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpXG4gICAgdC5wbGFjZWhvbGRlciA9ICd0J1xuICAgIHJldHVybiB0LmNsb25lTm9kZSh0cnVlKS52YWx1ZSA9PT0gJ3QnXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn0pKClcblxuLyoqXG4gKiAxLiBEZWFsIHdpdGggU2FmYXJpIGNsb25pbmcgbmVzdGVkIDx0ZW1wbGF0ZT4gYnVnIGJ5XG4gKiAgICBtYW51YWxseSBjbG9uaW5nIGFsbCB0ZW1wbGF0ZSBpbnN0YW5jZXMuXG4gKiAyLiBEZWFsIHdpdGggSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBidWcgYnkgc2V0dGluZ1xuICogICAgdGhlIGNvcnJlY3QgdmFsdWUgYWZ0ZXIgY2xvbmluZy5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gbm9kZVxuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmV4cG9ydHMuY2xvbmUgPSBmdW5jdGlvbiAobm9kZSkge1xuICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvckFsbCkge1xuICAgIHJldHVybiBub2RlLmNsb25lTm9kZSgpXG4gIH1cbiAgdmFyIHJlcyA9IG5vZGUuY2xvbmVOb2RlKHRydWUpXG4gIHZhciBpLCBvcmlnaW5hbCwgY2xvbmVkXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaGFzQnJva2VuVGVtcGxhdGUpIHtcbiAgICB2YXIgY2xvbmUgPSByZXNcbiAgICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcbiAgICAgIG5vZGUgPSBub2RlLmNvbnRlbnRcbiAgICAgIGNsb25lID0gcmVzLmNvbnRlbnRcbiAgICB9XG4gICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJylcbiAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG4gICAgICBjbG9uZWQgPSBjbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpXG4gICAgICBpID0gY2xvbmVkLmxlbmd0aFxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjbG9uZWRbaV0ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoXG4gICAgICAgICAgZXhwb3J0cy5jbG9uZShvcmlnaW5hbFtpXSksXG4gICAgICAgICAgY2xvbmVkW2ldXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChoYXNUZXh0YXJlYUNsb25lQnVnKSB7XG4gICAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgcmVzLnZhbHVlID0gbm9kZS52YWx1ZVxuICAgIH0gZWxzZSB7XG4gICAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKVxuICAgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuICAgICAgICBjbG9uZWQgPSByZXMucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKVxuICAgICAgICBpID0gY2xvbmVkLmxlbmd0aFxuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgY2xvbmVkW2ldLnZhbHVlID0gb3JpZ2luYWxbaV0udmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qKlxuICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uIGFuZCBub3JtYWxpemVzIGl0IGludG8gYVxuICogYSBEb2N1bWVudEZyYWdtZW50IHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBwYXJ0aWFsIG9yIGFcbiAqIGluc3RhbmNlIHRlbXBsYXRlLlxuICpcbiAqIEBwYXJhbSB7Kn0gdGVtcGxhdGVcbiAqICAgIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOlxuICogICAgLSBEb2N1bWVudEZyYWdtZW50IG9iamVjdFxuICogICAgLSBOb2RlIG9iamVjdCBvZiB0eXBlIFRlbXBsYXRlXG4gKiAgICAtIGlkIHNlbGVjdG9yOiAnI3NvbWUtdGVtcGxhdGUtaWQnXG4gKiAgICAtIHRlbXBsYXRlIHN0cmluZzogJzxkaXY+PHNwYW4+e3ttc2d9fTwvc3Bhbj48L2Rpdj4nXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGNsb25lXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG5vU2VsZWN0b3JcbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR8dW5kZWZpbmVkfVxuICovXG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAodGVtcGxhdGUsIGNsb25lLCBub1NlbGVjdG9yKSB7XG4gIHZhciBub2RlLCBmcmFnXG5cbiAgLy8gaWYgdGhlIHRlbXBsYXRlIGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudCxcbiAgLy8gZG8gbm90aGluZ1xuICBpZiAodGVtcGxhdGUgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSB7XG4gICAgXy50cmltTm9kZSh0ZW1wbGF0ZSlcbiAgICByZXR1cm4gY2xvbmVcbiAgICAgID8gZXhwb3J0cy5jbG9uZSh0ZW1wbGF0ZSlcbiAgICAgIDogdGVtcGxhdGVcbiAgfVxuXG4gIGlmICh0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgLy8gaWQgc2VsZWN0b3JcbiAgICBpZiAoIW5vU2VsZWN0b3IgJiYgdGVtcGxhdGUuY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgIC8vIGlkIHNlbGVjdG9yIGNhbiBiZSBjYWNoZWQgdG9vXG4gICAgICBmcmFnID0gaWRTZWxlY3RvckNhY2hlLmdldCh0ZW1wbGF0ZSlcbiAgICAgIGlmICghZnJhZykge1xuICAgICAgICBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGUuc2xpY2UoMSkpXG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KG5vZGUpXG4gICAgICAgICAgLy8gc2F2ZSBzZWxlY3RvciB0byBjYWNoZVxuICAgICAgICAgIGlkU2VsZWN0b3JDYWNoZS5wdXQodGVtcGxhdGUsIGZyYWcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9ybWFsIHN0cmluZyB0ZW1wbGF0ZVxuICAgICAgZnJhZyA9IHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGUpXG4gICAgfVxuICB9IGVsc2UgaWYgKHRlbXBsYXRlLm5vZGVUeXBlKSB7XG4gICAgLy8gYSBkaXJlY3Qgbm9kZVxuICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudCh0ZW1wbGF0ZSlcbiAgfVxuXG4gIHJldHVybiBmcmFnICYmIGNsb25lXG4gICAgPyBleHBvcnRzLmNsb25lKGZyYWcpXG4gICAgOiBmcmFnXG59XG4iLCJ2YXIgQ2FjaGUgPSByZXF1aXJlKCcuLi9jYWNoZScpXG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJylcbnZhciBkaXJQYXJzZXIgPSByZXF1aXJlKCcuL2RpcmVjdGl2ZScpXG52YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2dcbnZhciBjYWNoZSwgdGFnUkUsIGh0bWxSRVxuXG4vKipcbiAqIEVzY2FwZSBhIHN0cmluZyBzbyBpdCBjYW4gYmUgdXNlZCBpbiBhIFJlZ0V4cFxuICogY29uc3RydWN0b3IuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICovXG5cbmZ1bmN0aW9uIGVzY2FwZVJlZ2V4IChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKVxufVxuXG5leHBvcnRzLmNvbXBpbGVSZWdleCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG9wZW4gPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1swXSlcbiAgdmFyIGNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMV0pXG4gIHZhciB1bnNhZmVPcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMF0pXG4gIHZhciB1bnNhZmVDbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzFdKVxuICB0YWdSRSA9IG5ldyBSZWdFeHAoXG4gICAgdW5zYWZlT3BlbiArICcoLis/KScgKyB1bnNhZmVDbG9zZSArICd8JyArXG4gICAgb3BlbiArICcoLis/KScgKyBjbG9zZSxcbiAgICAnZydcbiAgKVxuICBodG1sUkUgPSBuZXcgUmVnRXhwKFxuICAgICdeJyArIHVuc2FmZU9wZW4gKyAnLionICsgdW5zYWZlQ2xvc2UgKyAnJCdcbiAgKVxuICAvLyByZXNldCBjYWNoZVxuICBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKVxufVxuXG4vKipcbiAqIFBhcnNlIGEgdGVtcGxhdGUgdGV4dCBzdHJpbmcgaW50byBhbiBhcnJheSBvZiB0b2tlbnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAqIEByZXR1cm4ge0FycmF5PE9iamVjdD4gfCBudWxsfVxuICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHR5cGVcbiAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB2YWx1ZVxuICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaHRtbF1cbiAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW29uZVRpbWVdXG4gKi9cblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gIGlmICghY2FjaGUpIHtcbiAgICBleHBvcnRzLmNvbXBpbGVSZWdleCgpXG4gIH1cbiAgdmFyIGhpdCA9IGNhY2hlLmdldCh0ZXh0KVxuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdFxuICB9XG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xcbi9nLCAnJylcbiAgaWYgKCF0YWdSRS50ZXN0KHRleHQpKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICB2YXIgdG9rZW5zID0gW11cbiAgdmFyIGxhc3RJbmRleCA9IHRhZ1JFLmxhc3RJbmRleCA9IDBcbiAgdmFyIG1hdGNoLCBpbmRleCwgaHRtbCwgdmFsdWUsIGZpcnN0LCBvbmVUaW1lXG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gIHdoaWxlIChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpIHtcbiAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGluZGV4ID0gbWF0Y2guaW5kZXhcbiAgICAvLyBwdXNoIHRleHQgdG9rZW5cbiAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleClcbiAgICAgIH0pXG4gICAgfVxuICAgIC8vIHRhZyB0b2tlblxuICAgIGh0bWwgPSBodG1sUkUudGVzdChtYXRjaFswXSlcbiAgICB2YWx1ZSA9IGh0bWwgPyBtYXRjaFsxXSA6IG1hdGNoWzJdXG4gICAgZmlyc3QgPSB2YWx1ZS5jaGFyQ29kZUF0KDApXG4gICAgb25lVGltZSA9IGZpcnN0ID09PSA0MiAvLyAqXG4gICAgdmFsdWUgPSBvbmVUaW1lXG4gICAgICA/IHZhbHVlLnNsaWNlKDEpXG4gICAgICA6IHZhbHVlXG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgdGFnOiB0cnVlLFxuICAgICAgdmFsdWU6IHZhbHVlLnRyaW0oKSxcbiAgICAgIGh0bWw6IGh0bWwsXG4gICAgICBvbmVUaW1lOiBvbmVUaW1lXG4gICAgfSlcbiAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aFxuICB9XG4gIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleClcbiAgICB9KVxuICB9XG4gIGNhY2hlLnB1dCh0ZXh0LCB0b2tlbnMpXG4gIHJldHVybiB0b2tlbnNcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBsaXN0IG9mIHRva2VucyBpbnRvIGFuIGV4cHJlc3Npb24uXG4gKiBlLmcuIHRva2VucyBwYXJzZWQgZnJvbSAnYSB7e2J9fSBjJyBjYW4gYmUgc2VyaWFsaXplZFxuICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmV4cG9ydHMudG9rZW5zVG9FeHAgPSBmdW5jdGlvbiAodG9rZW5zKSB7XG4gIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuKVxuICAgIH0pLmpvaW4oJysnKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHRydWUpXG4gIH1cbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBzaW5nbGUgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNpbmdsZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFRva2VuICh0b2tlbiwgc2luZ2xlKSB7XG4gIHJldHVybiB0b2tlbi50YWdcbiAgICA/IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSlcbiAgICA6ICdcIicgKyB0b2tlbi52YWx1ZSArICdcIidcbn1cblxuLyoqXG4gKiBGb3IgYW4gYXR0cmlidXRlIHdpdGggbXVsdGlwbGUgaW50ZXJwb2xhdGlvbiB0YWdzLFxuICogZS5nLiBhdHRyPVwic29tZS17e3RoaW5nIHwgZmlsdGVyfX1cIiwgaW4gb3JkZXIgdG8gY29tYmluZVxuICogdGhlIHdob2xlIHRoaW5nIGludG8gYSBzaW5nbGUgd2F0Y2hhYmxlIGV4cHJlc3Npb24sIHdlXG4gKiBoYXZlIHRvIGlubGluZSB0aG9zZSBmaWx0ZXJzLiBUaGlzIGZ1bmN0aW9uIGRvZXMgZXhhY3RseVxuICogdGhhdC4gVGhpcyBpcyBhIGJpdCBoYWNreSBidXQgaXQgYXZvaWRzIGhlYXZ5IGNoYW5nZXNcbiAqIHRvIGRpcmVjdGl2ZSBwYXJzZXIgYW5kIHdhdGNoZXIgbWVjaGFuaXNtLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc2luZ2xlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGZpbHRlclJFID0gL1tefF1cXHxbXnxdL1xuZnVuY3Rpb24gaW5saW5lRmlsdGVycyAoZXhwLCBzaW5nbGUpIHtcbiAgaWYgKCFmaWx0ZXJSRS50ZXN0KGV4cCkpIHtcbiAgICByZXR1cm4gc2luZ2xlXG4gICAgICA/IGV4cFxuICAgICAgOiAnKCcgKyBleHAgKyAnKSdcbiAgfSBlbHNlIHtcbiAgICB2YXIgZGlyID0gZGlyUGFyc2VyLnBhcnNlKGV4cClcbiAgICBpZiAoIWRpci5maWx0ZXJzKSB7XG4gICAgICByZXR1cm4gJygnICsgZXhwICsgJyknXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAndGhpcy5fYXBwbHlGaWx0ZXJzKCcgK1xuICAgICAgICBkaXIuZXhwcmVzc2lvbiArIC8vIHZhbHVlXG4gICAgICAgICcsbnVsbCwnICsgICAgICAgLy8gb2xkVmFsdWUgKG51bGwgZm9yIHJlYWQpXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KGRpci5maWx0ZXJzKSArIC8vIGZpbHRlciBkZXNjcmlwdG9yc1xuICAgICAgICAnLGZhbHNlKScgICAgICAgIC8vIHdyaXRlP1xuICAgIH1cbiAgfVxufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcblxuLyoqXG4gKiBBcHBlbmQgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5leHBvcnRzLmFwcGVuZCA9IGZ1bmN0aW9uIChlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgYXBwbHkoZWwsIDEsIGZ1bmN0aW9uICgpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpXG4gIH0sIHZtLCBjYilcbn1cblxuLyoqXG4gKiBJbnNlcnRCZWZvcmUgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5leHBvcnRzLmJlZm9yZSA9IGZ1bmN0aW9uIChlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgYXBwbHkoZWwsIDEsIGZ1bmN0aW9uICgpIHtcbiAgICBfLmJlZm9yZShlbCwgdGFyZ2V0KVxuICB9LCB2bSwgY2IpXG59XG5cbi8qKlxuICogUmVtb3ZlIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5leHBvcnRzLnJlbW92ZSA9IGZ1bmN0aW9uIChlbCwgdm0sIGNiKSB7XG4gIGFwcGx5KGVsLCAtMSwgZnVuY3Rpb24gKCkge1xuICAgIF8ucmVtb3ZlKGVsKVxuICB9LCB2bSwgY2IpXG59XG5cbi8qKlxuICogQXBwbHkgdHJhbnNpdGlvbnMgd2l0aCBhbiBvcGVyYXRpb24gY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtOdW1iZXJ9IGRpcmVjdGlvblxuICogICAgICAgICAgICAgICAgICAxOiBlbnRlclxuICogICAgICAgICAgICAgICAgIC0xOiBsZWF2ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSB0aGUgYWN0dWFsIERPTSBvcGVyYXRpb25cbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbnZhciBhcHBseSA9IGV4cG9ydHMuYXBwbHkgPSBmdW5jdGlvbiAoZWwsIGRpcmVjdGlvbiwgb3AsIHZtLCBjYikge1xuICB2YXIgdHJhbnNpdGlvbiA9IGVsLl9fdl90cmFuc1xuICBpZiAoXG4gICAgIXRyYW5zaXRpb24gfHxcbiAgICAvLyBza2lwIGlmIHRoZXJlIGFyZSBubyBqcyBob29rcyBhbmQgQ1NTIHRyYW5zaXRpb24gaXNcbiAgICAvLyBub3Qgc3VwcG9ydGVkXG4gICAgKCF0cmFuc2l0aW9uLmhvb2tzICYmICFfLnRyYW5zaXRpb25FbmRFdmVudCkgfHxcbiAgICAvLyBza2lwIHRyYW5zaXRpb25zIGZvciBpbml0aWFsIGNvbXBpbGVcbiAgICAhdm0uX2lzQ29tcGlsZWQgfHxcbiAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgbWFuaXB1bGF0ZWQgYnkgYSBwYXJlbnQgZGlyZWN0aXZlXG4gICAgLy8gZHVyaW5nIHRoZSBwYXJlbnQncyBjb21waWxhdGlvbiBwaGFzZSwgc2tpcCB0aGVcbiAgICAvLyBhbmltYXRpb24uXG4gICAgKHZtLiRwYXJlbnQgJiYgIXZtLiRwYXJlbnQuX2lzQ29tcGlsZWQpXG4gICkge1xuICAgIG9wKClcbiAgICBpZiAoY2IpIGNiKClcbiAgICByZXR1cm5cbiAgfVxuICB2YXIgYWN0aW9uID0gZGlyZWN0aW9uID4gMCA/ICdlbnRlcicgOiAnbGVhdmUnXG4gIHRyYW5zaXRpb25bYWN0aW9uXShvcCwgY2IpXG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4uL3V0aWwnKVxudmFyIHF1ZXVlID0gW11cbnZhciBxdWV1ZWQgPSBmYWxzZVxuXG4vKipcbiAqIFB1c2ggYSBqb2IgaW50byB0aGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gam9iXG4gKi9cblxuZXhwb3J0cy5wdXNoID0gZnVuY3Rpb24gKGpvYikge1xuICBxdWV1ZS5wdXNoKGpvYilcbiAgaWYgKCFxdWV1ZWQpIHtcbiAgICBxdWV1ZWQgPSB0cnVlXG4gICAgXy5uZXh0VGljayhmbHVzaClcbiAgfVxufVxuXG4vKipcbiAqIEZsdXNoIHRoZSBxdWV1ZSwgYW5kIGRvIG9uZSBmb3JjZWQgcmVmbG93IGJlZm9yZVxuICogdHJpZ2dlcmluZyB0cmFuc2l0aW9ucy5cbiAqL1xuXG5mdW5jdGlvbiBmbHVzaCAoKSB7XG4gIC8vIEZvcmNlIGxheW91dFxuICB2YXIgZiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHRcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIHF1ZXVlW2ldKClcbiAgfVxuICBxdWV1ZSA9IFtdXG4gIHF1ZXVlZCA9IGZhbHNlXG4gIC8vIGR1bW15IHJldHVybiwgc28ganMgbGludGVycyBkb24ndCBjb21wbGFpbiBhYm91dFxuICAvLyB1bnVzZWQgdmFyaWFibGUgZlxuICByZXR1cm4gZlxufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuLi91dGlsJylcbnZhciBxdWV1ZSA9IHJlcXVpcmUoJy4vcXVldWUnKVxudmFyIGFkZENsYXNzID0gXy5hZGRDbGFzc1xudmFyIHJlbW92ZUNsYXNzID0gXy5yZW1vdmVDbGFzc1xudmFyIHRyYW5zaXRpb25FbmRFdmVudCA9IF8udHJhbnNpdGlvbkVuZEV2ZW50XG52YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSBfLmFuaW1hdGlvbkVuZEV2ZW50XG52YXIgdHJhbnNEdXJhdGlvblByb3AgPSBfLnRyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJ1xudmFyIGFuaW1EdXJhdGlvblByb3AgPSBfLmFuaW1hdGlvblByb3AgKyAnRHVyYXRpb24nXG5cbnZhciBUWVBFX1RSQU5TSVRJT04gPSAxXG52YXIgVFlQRV9BTklNQVRJT04gPSAyXG5cbi8qKlxuICogQSBUcmFuc2l0aW9uIG9iamVjdCB0aGF0IGVuY2Fwc3VsYXRlcyB0aGUgc3RhdGUgYW5kIGxvZ2ljXG4gKiBvZiB0aGUgdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBob29rc1xuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gVHJhbnNpdGlvbiAoZWwsIGlkLCBob29rcywgdm0pIHtcbiAgdGhpcy5pZCA9IGlkXG4gIHRoaXMuZWwgPSBlbFxuICB0aGlzLmVudGVyQ2xhc3MgPSBpZCArICctZW50ZXInXG4gIHRoaXMubGVhdmVDbGFzcyA9IGlkICsgJy1sZWF2ZSdcbiAgdGhpcy5ob29rcyA9IGhvb2tzXG4gIHRoaXMudm0gPSB2bVxuICAvLyBhc3luYyBzdGF0ZVxuICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9XG4gIHRoaXMucGVuZGluZ0Nzc0NiID1cbiAgdGhpcy5jYW5jZWwgPVxuICB0aGlzLnBlbmRpbmdKc0NiID1cbiAgdGhpcy5vcCA9XG4gIHRoaXMuY2IgPSBudWxsXG4gIHRoaXMuanVzdEVudGVyZWQgPSBmYWxzZVxuICB0aGlzLmVudGVyZWQgPSB0aGlzLmxlZnQgPSBmYWxzZVxuICB0aGlzLnR5cGVDYWNoZSA9IHt9XG4gIC8vIGJpbmRcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIDtbJ2VudGVyTmV4dFRpY2snLCAnZW50ZXJEb25lJywgJ2xlYXZlTmV4dFRpY2snLCAnbGVhdmVEb25lJ11cbiAgICAuZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgICAgc2VsZlttXSA9IF8uYmluZChzZWxmW21dLCBzZWxmKVxuICAgIH0pXG59XG5cbnZhciBwID0gVHJhbnNpdGlvbi5wcm90b3R5cGVcblxuLyoqXG4gKiBTdGFydCBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuICpcbiAqIDEuIGVudGVyIHRyYW5zaXRpb24gdHJpZ2dlcmVkXG4gKiAyLiBjYWxsIGJlZm9yZUVudGVyIGhvb2tcbiAqIDMuIGFkZCBlbnRlciBjbGFzc1xuICogNC4gaW5zZXJ0L3Nob3cgZWxlbWVudFxuICogNS4gY2FsbCBlbnRlciBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuICogNi4gcmVmbG93XG4gKiA3LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG4gKiAgICAtIHRyYW5zaXRpb246XG4gKiAgICAgICAgcmVtb3ZlIGNsYXNzIG5vdywgd2FpdCBmb3IgdHJhbnNpdGlvbmVuZCxcbiAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gYW5pbWF0aW9uOlxuICogICAgICAgIHdhaXQgZm9yIGFuaW1hdGlvbmVuZCwgcmVtb3ZlIGNsYXNzLFxuICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcbiAqICAgICAgICBkb25lIG5vdyBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogOC4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuICogICAgYWZ0ZXJFbnRlciBob29rLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gaW5zZXJ0L3Nob3cgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5wLmVudGVyID0gZnVuY3Rpb24gKG9wLCBjYikge1xuICB0aGlzLmNhbmNlbFBlbmRpbmcoKVxuICB0aGlzLmNhbGxIb29rKCdiZWZvcmVFbnRlcicpXG4gIHRoaXMuY2IgPSBjYlxuICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpXG4gIG9wKClcbiAgdGhpcy5lbnRlcmVkID0gZmFsc2VcbiAgdGhpcy5jYWxsSG9va1dpdGhDYignZW50ZXInKVxuICBpZiAodGhpcy5lbnRlcmVkKSB7XG4gICAgcmV0dXJuIC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgfVxuICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5lbnRlckNhbmNlbGxlZFxuICBxdWV1ZS5wdXNoKHRoaXMuZW50ZXJOZXh0VGljaylcbn1cblxuLyoqXG4gKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24sIHdoaWNoIGlzXG4gKiB0byBiZSBwdXNoZWQgaW50byBhIHF1ZXVlIGFuZCBleGVjdXRlZCBhZnRlciBhIHJlZmxvdyBzb1xuICogdGhhdCByZW1vdmluZyB0aGUgY2xhc3MgY2FuIHRyaWdnZXIgYSBDU1MgdHJhbnNpdGlvbi5cbiAqL1xuXG5wLmVudGVyTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG5cbiAgLy8gSW1wb3J0YW50IGhhY2s6XG4gIC8vIGluIENocm9tZSwgaWYgYSBqdXN0LWVudGVyZWQgZWxlbWVudCBpcyBhcHBsaWVkIHRoZVxuICAvLyBsZWF2ZSBjbGFzcyB3aGlsZSBpdHMgaW50ZXJwb2xhdGVkIHByb3BlcnR5IHN0aWxsIGhhc1xuICAvLyBhIHZlcnkgc21hbGwgdmFsdWUgKHdpdGhpbiBvbmUgZnJhbWUpLCBDaHJvbWUgd2lsbFxuICAvLyBza2lwIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIGVudGlyZWx5IGFuZCBub3QgZmlyaW5nIHRoZVxuICAvLyB0cmFuc3Rpb25lbmQgZXZlbnQuIFRoZXJlZm9yZSB3ZSBuZWVkIHRvIHByb3RlY3RlZFxuICAvLyBhZ2FpbnN0IHN1Y2ggY2FzZXMgdXNpbmcgYSBvbmUtZnJhbWUgdGltZW91dC5cbiAgdGhpcy5qdXN0RW50ZXJlZCA9IHRydWVcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIHNlbGYuanVzdEVudGVyZWQgPSBmYWxzZVxuICB9LCAxNylcblxuICB2YXIgZW50ZXJEb25lID0gdGhpcy5lbnRlckRvbmVcbiAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMuZW50ZXJDbGFzcylcbiAgaWYgKCF0aGlzLnBlbmRpbmdKc0NiKSB7XG4gICAgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuICAgICAgLy8gdHJpZ2dlciB0cmFuc2l0aW9uIGJ5IHJlbW92aW5nIGVudGVyIGNsYXNzIG5vd1xuICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKVxuICAgICAgdGhpcy5zZXR1cENzc0NiKHRyYW5zaXRpb25FbmRFdmVudCwgZW50ZXJEb25lKVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9BTklNQVRJT04pIHtcbiAgICAgIHRoaXMuc2V0dXBDc3NDYihhbmltYXRpb25FbmRFdmVudCwgZW50ZXJEb25lKVxuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlckRvbmUoKVxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpXG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wLmVudGVyRG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5lbnRlcmVkID0gdHJ1ZVxuICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsXG4gIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcylcbiAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJFbnRlcicpXG4gIGlmICh0aGlzLmNiKSB0aGlzLmNiKClcbn1cblxuLyoqXG4gKiBTdGFydCBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqXG4gKiAxLiBsZWF2ZSB0cmFuc2l0aW9uIHRyaWdnZXJlZC5cbiAqIDIuIGNhbGwgYmVmb3JlTGVhdmUgaG9va1xuICogMy4gYWRkIGxlYXZlIGNsYXNzICh0cmlnZ2VyIGNzcyB0cmFuc2l0aW9uKVxuICogNC4gY2FsbCBsZWF2ZSBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuICogNS4gcmVmbG93IGlmIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrIGlzIHByb3ZpZGVkXG4gKiA2LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG4gKiAgICAtIHRyYW5zaXRpb24gb3IgYW5pbWF0aW9uOlxuICogICAgICAgIHdhaXQgZm9yIGVuZCBldmVudCwgcmVtb3ZlIGNsYXNzLCB0aGVuIGRvbmUgaWZcbiAqICAgICAgICB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcbiAqICAgICAgICBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiA3LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG4gKiAgICBhZnRlckxlYXZlIGhvb2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSByZW1vdmUvaGlkZSB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbnAubGVhdmUgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG4gIHRoaXMuY2FuY2VsUGVuZGluZygpXG4gIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUxlYXZlJylcbiAgdGhpcy5vcCA9IG9wXG4gIHRoaXMuY2IgPSBjYlxuICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpXG4gIHRoaXMubGVmdCA9IGZhbHNlXG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2xlYXZlJylcbiAgaWYgKHRoaXMubGVmdCkge1xuICAgIHJldHVybiAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG4gIH1cbiAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MubGVhdmVDYW5jZWxsZWRcbiAgLy8gb25seSBuZWVkIHRvIGhhbmRsZSBsZWF2ZURvbmUgaWZcbiAgLy8gMS4gdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBkb25lIChzeW5jaHJvbm91c2x5IGNhbGxlZFxuICAvLyAgICBieSB0aGUgdXNlciwgd2hpY2ggY2F1c2VzIHRoaXMub3Agc2V0IHRvIG51bGwpXG4gIC8vIDIuIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2tcbiAgaWYgKHRoaXMub3AgJiYgIXRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICAvLyBpZiBhIENTUyB0cmFuc2l0aW9uIGxlYXZlcyBpbW1lZGlhdGVseSBhZnRlciBlbnRlcixcbiAgICAvLyB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gdGhlcmVmb3JlIHdlXG4gICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGVuZCB0aGUgbGVhdmUgaW1tZWRpYXRlbHkuXG4gICAgaWYgKHRoaXMuanVzdEVudGVyZWQpIHtcbiAgICAgIHRoaXMubGVhdmVEb25lKClcbiAgICB9IGVsc2Uge1xuICAgICAgcXVldWUucHVzaCh0aGlzLmxlYXZlTmV4dFRpY2spXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wLmxlYXZlTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmxlYXZlQ2xhc3MpXG4gIGlmICh0eXBlKSB7XG4gICAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OXG4gICAgICA/IHRyYW5zaXRpb25FbmRFdmVudFxuICAgICAgOiBhbmltYXRpb25FbmRFdmVudFxuICAgIHRoaXMuc2V0dXBDc3NDYihldmVudCwgdGhpcy5sZWF2ZURvbmUpXG4gIH0gZWxzZSB7XG4gICAgdGhpcy5sZWF2ZURvbmUoKVxuICB9XG59XG5cbi8qKlxuICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuICovXG5cbnAubGVhdmVEb25lID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmxlZnQgPSB0cnVlXG4gIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGxcbiAgdGhpcy5vcCgpXG4gIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcylcbiAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJMZWF2ZScpXG4gIGlmICh0aGlzLmNiKSB0aGlzLmNiKClcbiAgdGhpcy5vcCA9IG51bGxcbn1cblxuLyoqXG4gKiBDYW5jZWwgYW55IHBlbmRpbmcgY2FsbGJhY2tzIGZyb20gYSBwcmV2aW91c2x5IHJ1bm5pbmdcbiAqIGJ1dCBub3QgZmluaXNoZWQgdHJhbnNpdGlvbi5cbiAqL1xuXG5wLmNhbmNlbFBlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbFxuICB2YXIgaGFzUGVuZGluZyA9IGZhbHNlXG4gIGlmICh0aGlzLnBlbmRpbmdDc3NDYikge1xuICAgIGhhc1BlbmRpbmcgPSB0cnVlXG4gICAgXy5vZmYodGhpcy5lbCwgdGhpcy5wZW5kaW5nQ3NzRXZlbnQsIHRoaXMucGVuZGluZ0Nzc0NiKVxuICAgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBudWxsXG4gIH1cbiAgaWYgKHRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICBoYXNQZW5kaW5nID0gdHJ1ZVxuICAgIHRoaXMucGVuZGluZ0pzQ2IuY2FuY2VsKClcbiAgICB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbFxuICB9XG4gIGlmIChoYXNQZW5kaW5nKSB7XG4gICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKVxuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcylcbiAgfVxuICBpZiAodGhpcy5jYW5jZWwpIHtcbiAgICB0aGlzLmNhbmNlbC5jYWxsKHRoaXMudm0sIHRoaXMuZWwpXG4gICAgdGhpcy5jYW5jZWwgPSBudWxsXG4gIH1cbn1cblxuLyoqXG4gKiBDYWxsIGEgdXNlci1wcm92aWRlZCBzeW5jaHJvbm91cyBob29rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cblxucC5jYWxsSG9vayA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIGlmICh0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV0pIHtcbiAgICB0aGlzLmhvb2tzW3R5cGVdLmNhbGwodGhpcy52bSwgdGhpcy5lbClcbiAgfVxufVxuXG4vKipcbiAqIENhbGwgYSB1c2VyLXByb3ZpZGVkLCBwb3RlbnRpYWxseS1hc3luYyBob29rIGZ1bmN0aW9uLlxuICogV2UgY2hlY2sgZm9yIHRoZSBsZW5ndGggb2YgYXJndW1lbnRzIHRvIHNlZSBpZiB0aGUgaG9va1xuICogZXhwZWN0cyBhIGBkb25lYCBjYWxsYmFjay4gSWYgdHJ1ZSwgdGhlIHRyYW5zaXRpb24ncyBlbmRcbiAqIHdpbGwgYmUgZGV0ZXJtaW5lZCBieSB3aGVuIHRoZSB1c2VyIGNhbGxzIHRoYXQgY2FsbGJhY2s7XG4gKiBvdGhlcndpc2UsIHRoZSBlbmQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQ1NTIHRyYW5zaXRpb24gb3JcbiAqIGFuaW1hdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5cbnAuY2FsbEhvb2tXaXRoQ2IgPSBmdW5jdGlvbiAodHlwZSkge1xuICB2YXIgaG9vayA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXVxuICBpZiAoaG9vaykge1xuICAgIGlmIChob29rLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBfLmNhbmNlbGxhYmxlKHRoaXNbdHlwZSArICdEb25lJ10pXG4gICAgfVxuICAgIGhvb2suY2FsbCh0aGlzLnZtLCB0aGlzLmVsLCB0aGlzLnBlbmRpbmdKc0NiKVxuICB9XG59XG5cbi8qKlxuICogR2V0IGFuIGVsZW1lbnQncyB0cmFuc2l0aW9uIHR5cGUgYmFzZWQgb24gdGhlXG4gKiBjYWxjdWxhdGVkIHN0eWxlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxucC5nZXRDc3NUcmFuc2l0aW9uVHlwZSA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChcbiAgICAhdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG4gICAgLy8gc2tpcCBDU1MgdHJhbnNpdGlvbnMgaWYgcGFnZSBpcyBub3QgdmlzaWJsZSAtXG4gICAgLy8gdGhpcyBzb2x2ZXMgdGhlIGlzc3VlIG9mIHRyYW5zaXRpb25lbmQgZXZlbnRzIG5vdFxuICAgIC8vIGZpcmluZyB1bnRpbCB0aGUgcGFnZSBpcyB2aXNpYmxlIGFnYWluLlxuICAgIC8vIHBhZ2VWaXNpYmlsaXR5IEFQSSBpcyBzdXBwb3J0ZWQgaW4gSUUxMCssIHNhbWUgYXNcbiAgICAvLyBDU1MgdHJhbnNpdGlvbnMuXG4gICAgZG9jdW1lbnQuaGlkZGVuIHx8XG4gICAgLy8gZXhwbGljaXQganMtb25seSB0cmFuc2l0aW9uXG4gICAgKHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5jc3MgPT09IGZhbHNlKSB8fFxuICAgIC8vIGVsZW1lbnQgaXMgaGlkZGVuXG4gICAgaXNIaWRkZW4odGhpcy5lbClcbiAgKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIHR5cGUgPSB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdXG4gIGlmICh0eXBlKSByZXR1cm4gdHlwZVxuICB2YXIgaW5saW5lU3R5bGVzID0gdGhpcy5lbC5zdHlsZVxuICB2YXIgY29tcHV0ZWRTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKVxuICB2YXIgdHJhbnNEdXJhdGlvbiA9XG4gICAgaW5saW5lU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXSB8fFxuICAgIGNvbXB1dGVkU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXVxuICBpZiAodHJhbnNEdXJhdGlvbiAmJiB0cmFuc0R1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgdHlwZSA9IFRZUEVfVFJBTlNJVElPTlxuICB9IGVsc2Uge1xuICAgIHZhciBhbmltRHVyYXRpb24gPVxuICAgICAgaW5saW5lU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdIHx8XG4gICAgICBjb21wdXRlZFN0eWxlc1thbmltRHVyYXRpb25Qcm9wXVxuICAgIGlmIChhbmltRHVyYXRpb24gJiYgYW5pbUR1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgICB0eXBlID0gVFlQRV9BTklNQVRJT05cbiAgICB9XG4gIH1cbiAgaWYgKHR5cGUpIHtcbiAgICB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdID0gdHlwZVxuICB9XG4gIHJldHVybiB0eXBlXG59XG5cbi8qKlxuICogU2V0dXAgYSBDU1MgdHJhbnNpdGlvbmVuZC9hbmltYXRpb25lbmQgY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbnAuc2V0dXBDc3NDYiA9IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcbiAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSBldmVudFxuICB2YXIgc2VsZiA9IHRoaXNcbiAgdmFyIGVsID0gdGhpcy5lbFxuICB2YXIgb25FbmQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlbCkge1xuICAgICAgXy5vZmYoZWwsIGV2ZW50LCBvbkVuZClcbiAgICAgIHNlbGYucGVuZGluZ0Nzc0V2ZW50ID0gc2VsZi5wZW5kaW5nQ3NzQ2IgPSBudWxsXG4gICAgICBpZiAoIXNlbGYucGVuZGluZ0pzQ2IgJiYgY2IpIHtcbiAgICAgICAgY2IoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBfLm9uKGVsLCBldmVudCwgb25FbmQpXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBoaWRkZW4gLSBpbiB0aGF0IGNhc2Ugd2UgY2FuIGp1c3RcbiAqIHNraXAgdGhlIHRyYW5zaXRpb24gYWxsdG9nZXRoZXIuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc0hpZGRlbiAoZWwpIHtcbiAgcmV0dXJuICEoXG4gICAgZWwub2Zmc2V0V2lkdGggfHxcbiAgICBlbC5vZmZzZXRIZWlnaHQgfHxcbiAgICBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aFxuICApXG59XG5cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNpdGlvblxuIiwidmFyIF8gPSByZXF1aXJlKCcuL2luZGV4JylcblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LCBpZiB5ZXMgcmV0dXJuIGl0c1xuICogY29tcG9uZW50IGlkLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICovXG5cbmV4cG9ydHMuY29tbW9uVGFnUkUgPSAvXihkaXZ8cHxzcGFufGltZ3xhfGJ8aXxicnx1bHxvbHxsaXxoMXxoMnxoM3xoNHxoNXxoNnxjb2RlfHByZXx0YWJsZXx0aHx0ZHx0cnxmb3JtfGxhYmVsfGlucHV0fHNlbGVjdHxvcHRpb258bmF2fGFydGljbGV8c2VjdGlvbnxoZWFkZXJ8Zm9vdGVyKSQvXG5leHBvcnRzLmNoZWNrQ29tcG9uZW50ID0gZnVuY3Rpb24gKGVsLCBvcHRpb25zKSB7XG4gIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKClcbiAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpXG4gIGlmICghZXhwb3J0cy5jb21tb25UYWdSRS50ZXN0KHRhZykgJiYgdGFnICE9PSAnY29tcG9uZW50Jykge1xuICAgIGlmIChfLnJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykpIHtcbiAgICAgIHJldHVybiB7IGlkOiB0YWcgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwpXG4gICAgICBpZiAoaXMpIHtcbiAgICAgICAgcmV0dXJuIGlzXG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRhZy5pbmRleE9mKCctJykgPiAtMSB8fFxuICAgICAgICAgIChcbiAgICAgICAgICAgIC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgICAgIC8vIENocm9tZSByZXR1cm5zIHVua25vd24gZm9yIHNldmVyYWwgSFRNTDUgZWxlbWVudHMuXG4gICAgICAgICAgICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTQwNTI2XG4gICAgICAgICAgICAhL14oZGF0YXx0aW1lfHJ0Y3xyYikkLy50ZXN0KHRhZylcbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIF8ud2FybihcbiAgICAgICAgICAgICdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gZGlkIHlvdSAnICtcbiAgICAgICAgICAgICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8nXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGhhc0F0dHJzKSB7XG4gICAgcmV0dXJuIGdldElzQmluZGluZyhlbClcbiAgfVxufVxuXG4vKipcbiAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBnZXRJc0JpbmRpbmcgKGVsKSB7XG4gIC8vIGR5bmFtaWMgc3ludGF4XG4gIHZhciBleHAgPSBfLmF0dHIoZWwsICdpcycpXG4gIGlmIChleHAgIT0gbnVsbCkge1xuICAgIHJldHVybiB7IGlkOiBleHAgfVxuICB9IGVsc2Uge1xuICAgIGV4cCA9IF8uZ2V0QmluZEF0dHIoZWwsICdpcycpXG4gICAgaWYgKGV4cCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4geyBpZDogZXhwLCBkeW5hbWljOiB0cnVlIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTZXQgYSBwcm9wJ3MgaW5pdGlhbCB2YWx1ZSBvbiBhIHZtIGFuZCBpdHMgZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmV4cG9ydHMuaW5pdFByb3AgPSBmdW5jdGlvbiAodm0sIHByb3AsIHZhbHVlKSB7XG4gIGlmIChleHBvcnRzLmFzc2VydFByb3AocHJvcCwgdmFsdWUpKSB7XG4gICAgdmFyIGtleSA9IHByb3AucGF0aFxuICAgIHZtW2tleV0gPSB2bS5fZGF0YVtrZXldID0gdmFsdWVcbiAgfVxufVxuXG4vKipcbiAqIEFzc2VydCB3aGV0aGVyIGEgcHJvcCBpcyB2YWxpZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmV4cG9ydHMuYXNzZXJ0UHJvcCA9IGZ1bmN0aW9uIChwcm9wLCB2YWx1ZSkge1xuICAvLyBpZiBhIHByb3AgaXMgbm90IHByb3ZpZGVkIGFuZCBpcyBub3QgcmVxdWlyZWQsXG4gIC8vIHNraXAgdGhlIGNoZWNrLlxuICBpZiAocHJvcC5yYXcgPT09IG51bGwgJiYgIXByb3AucmVxdWlyZWQpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zXG4gIHZhciB0eXBlID0gb3B0aW9ucy50eXBlXG4gIHZhciB2YWxpZCA9IHRydWVcbiAgdmFyIGV4cGVjdGVkVHlwZVxuICBpZiAodHlwZSkge1xuICAgIGlmICh0eXBlID09PSBTdHJpbmcpIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdzdHJpbmcnXG4gICAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBOdW1iZXIpIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdudW1iZXInXG4gICAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcidcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IEJvb2xlYW4pIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdib29sZWFuJ1xuICAgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJ1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gRnVuY3Rpb24pIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdmdW5jdGlvbidcbiAgICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBPYmplY3QpIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdvYmplY3QnXG4gICAgICB2YWxpZCA9IF8uaXNQbGFpbk9iamVjdCh2YWx1ZSlcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IEFycmF5KSB7XG4gICAgICBleHBlY3RlZFR5cGUgPSAnYXJyYXknXG4gICAgICB2YWxpZCA9IF8uaXNBcnJheSh2YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGVcbiAgICB9XG4gIH1cbiAgaWYgKCF2YWxpZCkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgJ0ludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yICcgK1xuICAgICAgcHJvcC5wYXRoICsgJz1cIicgKyBwcm9wLnJhdyArICdcIi4nICtcbiAgICAgICcgRXhwZWN0ZWQgJyArIGZvcm1hdFR5cGUoZXhwZWN0ZWRUeXBlKSArXG4gICAgICAnLCBnb3QgJyArIGZvcm1hdFZhbHVlKHZhbHVlKSArICcuJ1xuICAgIClcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICB2YXIgdmFsaWRhdG9yID0gb3B0aW9ucy52YWxpZGF0b3JcbiAgaWYgKHZhbGlkYXRvcikge1xuICAgIGlmICghdmFsaWRhdG9yLmNhbGwobnVsbCwgdmFsdWUpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICAgJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yICcgK1xuICAgICAgICBwcm9wLnBhdGggKyAnPVwiJyArIHByb3AucmF3ICsgJ1wiJ1xuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbmZ1bmN0aW9uIGZvcm1hdFR5cGUgKHZhbCkge1xuICByZXR1cm4gdmFsXG4gICAgPyB2YWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWwuc2xpY2UoMSlcbiAgICA6ICdjdXN0b20gdHlwZSdcbn1cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUgKHZhbCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpXG59XG4iLCIvKipcbiAqIEVuYWJsZSBkZWJ1ZyB1dGlsaXRpZXMuXG4gKi9cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblxuICB2YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJylcbiAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCdcblxuICAvKipcbiAgICogTG9nIGEgbWVzc2FnZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1zZ1xuICAgKi9cblxuICBleHBvcnRzLmxvZyA9IGZ1bmN0aW9uIChtc2cpIHtcbiAgICBpZiAoaGFzQ29uc29sZSAmJiBjb25maWcuZGVidWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbVnVlIGluZm9dOiAnICsgbXNnKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXZSd2ZSBnb3QgYSBwcm9ibGVtIGhlcmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtc2dcbiAgICovXG5cbiAgZXhwb3J0cy53YXJuID0gZnVuY3Rpb24gKG1zZywgZSkge1xuICAgIGlmIChoYXNDb25zb2xlICYmICghY29uZmlnLnNpbGVudCB8fCBjb25maWcuZGVidWcpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tWdWUgd2Fybl06ICcgKyBtc2cpXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChjb25maWcuZGVidWcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKChlIHx8IG5ldyBFcnJvcignV2FybmluZyBTdGFjayBUcmFjZScpKS5zdGFjaylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXNzZXJ0IGFzc2V0IGV4aXN0c1xuICAgKi9cblxuICBleHBvcnRzLmFzc2VydEFzc2V0ID0gZnVuY3Rpb24gKHZhbCwgdHlwZSwgaWQpIHtcbiAgICBpZiAoIXZhbCkge1xuICAgICAgZXhwb3J0cy53YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZSArICc6ICcgKyBpZClcbiAgICB9XG4gIH1cbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi9pbmRleCcpXG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJylcbnZhciB0cmFuc2l0aW9uID0gcmVxdWlyZSgnLi4vdHJhbnNpdGlvbicpXG5cbi8qKlxuICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cblxuZXhwb3J0cy5xdWVyeSA9IGZ1bmN0aW9uIChlbCkge1xuICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuICAgIHZhciBzZWxlY3RvciA9IGVsXG4gICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKVxuICAgIGlmICghZWwpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAnQ2Fubm90IGZpbmQgZWxlbWVudDogJyArIHNlbGVjdG9yXG4gICAgICApXG4gICAgfVxuICB9XG4gIHJldHVybiBlbFxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG4gKiBOb3RlOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMgc2hvdWxkIHdvcmsgaGVyZVxuICogYnV0IGFsd2F5cyByZXR1cm5zIGZhbHNlIGZvciBjb21tZW50IG5vZGVzIGluIHBoYW50b21qcyxcbiAqIG1ha2luZyB1bml0IHRlc3RzIGRpZmZpY3VsdC4gVGhpcyBpcyBmaXhlZCBieSBkb2luZyB0aGVcbiAqIGNvbnRhaW5zKCkgY2hlY2sgb24gdGhlIG5vZGUncyBwYXJlbnROb2RlIGluc3RlYWQgb2ZcbiAqIHRoZSBub2RlIGl0c2VsZi5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZXhwb3J0cy5pbkRvYyA9IGZ1bmN0aW9uIChub2RlKSB7XG4gIHZhciBkb2MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgdmFyIHBhcmVudCA9IG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlXG4gIHJldHVybiBkb2MgPT09IG5vZGUgfHxcbiAgICBkb2MgPT09IHBhcmVudCB8fFxuICAgICEhKHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgPT09IDEgJiYgKGRvYy5jb250YWlucyhwYXJlbnQpKSlcbn1cblxuLyoqXG4gKiBHZXQgYW5kIHJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhIG5vZGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gYXR0clxuICovXG5cbmV4cG9ydHMuYXR0ciA9IGZ1bmN0aW9uIChub2RlLCBhdHRyKSB7XG4gIHZhciB2YWwgPSBub2RlLmdldEF0dHJpYnV0ZShhdHRyKVxuICBpZiAodmFsICE9PSBudWxsKSB7XG4gICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cilcbiAgfVxuICByZXR1cm4gdmFsXG59XG5cbi8qKlxuICogR2V0IGFuIGF0dHJpYnV0ZSB3aXRoIGNvbG9uIG9yIHYtYmluZDogcHJlZml4LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuICovXG5cbmV4cG9ydHMuZ2V0QmluZEF0dHIgPSBmdW5jdGlvbiAobm9kZSwgbmFtZSkge1xuICB2YXIgdmFsID0gZXhwb3J0cy5hdHRyKG5vZGUsICc6JyArIG5hbWUpXG4gIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICB2YWwgPSBleHBvcnRzLmF0dHIobm9kZSwgJ3YtYmluZDonICsgbmFtZSlcbiAgfVxuICByZXR1cm4gdmFsXG59XG5cbi8qKlxuICogSW5zZXJ0IGVsIGJlZm9yZSB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmV4cG9ydHMuYmVmb3JlID0gZnVuY3Rpb24gKGVsLCB0YXJnZXQpIHtcbiAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCB0YXJnZXQpXG59XG5cbi8qKlxuICogSW5zZXJ0IGVsIGFmdGVyIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZXhwb3J0cy5hZnRlciA9IGZ1bmN0aW9uIChlbCwgdGFyZ2V0KSB7XG4gIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcbiAgICBleHBvcnRzLmJlZm9yZShlbCwgdGFyZ2V0Lm5leHRTaWJsaW5nKVxuICB9IGVsc2Uge1xuICAgIHRhcmdldC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGVsKVxuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGVsIGZyb20gRE9NXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmV4cG9ydHMucmVtb3ZlID0gZnVuY3Rpb24gKGVsKSB7XG4gIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpXG59XG5cbi8qKlxuICogUHJlcGVuZCBlbCB0byB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmV4cG9ydHMucHJlcGVuZCA9IGZ1bmN0aW9uIChlbCwgdGFyZ2V0KSB7XG4gIGlmICh0YXJnZXQuZmlyc3RDaGlsZCkge1xuICAgIGV4cG9ydHMuYmVmb3JlKGVsLCB0YXJnZXQuZmlyc3RDaGlsZClcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpXG4gIH1cbn1cblxuLyoqXG4gKiBSZXBsYWNlIHRhcmdldCB3aXRoIGVsXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5leHBvcnRzLnJlcGxhY2UgPSBmdW5jdGlvbiAodGFyZ2V0LCBlbCkge1xuICB2YXIgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGVcbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQoZWwsIHRhcmdldClcbiAgfVxufVxuXG4vKipcbiAqIEFkZCBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmV4cG9ydHMub24gPSBmdW5jdGlvbiAoZWwsIGV2ZW50LCBjYikge1xuICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYilcbn1cblxuLyoqXG4gKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5leHBvcnRzLm9mZiA9IGZ1bmN0aW9uIChlbCwgZXZlbnQsIGNiKSB7XG4gIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKVxufVxuXG4vKipcbiAqIEFkZCBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJvbmd9IGNsc1xuICovXG5cbmV4cG9ydHMuYWRkQ2xhc3MgPSBmdW5jdGlvbiAoZWwsIGNscykge1xuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpXG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1ciA9ICcgJyArIChlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgJyAnXG4gICAgaWYgKGN1ci5pbmRleE9mKCcgJyArIGNscyArICcgJykgPCAwKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgKGN1ciArIGNscykudHJpbSgpKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJvbmd9IGNsc1xuICovXG5cbmV4cG9ydHMucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiAoZWwsIGNscykge1xuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpXG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1ciA9ICcgJyArIChlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgJyAnXG4gICAgdmFyIHRhciA9ICcgJyArIGNscyArICcgJ1xuICAgIHdoaWxlIChjdXIuaW5kZXhPZih0YXIpID49IDApIHtcbiAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKVxuICAgIH1cbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY3VyLnRyaW0oKSlcbiAgfVxuICBpZiAoIWVsLmNsYXNzTmFtZSkge1xuICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKVxuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCByYXcgY29udGVudCBpbnNpZGUgYW4gZWxlbWVudCBpbnRvIGEgdGVtcG9yYXJ5XG4gKiBjb250YWluZXIgZGl2XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtCb29sZWFufSBhc0ZyYWdtZW50XG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICovXG5cbmV4cG9ydHMuZXh0cmFjdENvbnRlbnQgPSBmdW5jdGlvbiAoZWwsIGFzRnJhZ21lbnQpIHtcbiAgdmFyIGNoaWxkXG4gIHZhciByYXdDb250ZW50XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoXG4gICAgZXhwb3J0cy5pc1RlbXBsYXRlKGVsKSAmJlxuICAgIGVsLmNvbnRlbnQgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50XG4gICkge1xuICAgIGVsID0gZWwuY29udGVudFxuICB9XG4gIGlmIChlbC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICBleHBvcnRzLnRyaW1Ob2RlKGVsKVxuICAgIHJhd0NvbnRlbnQgPSBhc0ZyYWdtZW50XG4gICAgICA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKVxuICAgICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgd2hpbGUgKGNoaWxkID0gZWwuZmlyc3RDaGlsZCkge1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIHJhd0NvbnRlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpXG4gICAgfVxuICB9XG4gIHJldHVybiByYXdDb250ZW50XG59XG5cbi8qKlxuICogVHJpbSBwb3NzaWJsZSBlbXB0eSBoZWFkL3RhaWwgdGV4dE5vZGVzIGluc2lkZSBhIHBhcmVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqL1xuXG5leHBvcnRzLnRyaW1Ob2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgdHJpbShub2RlLCBub2RlLmZpcnN0Q2hpbGQpXG4gIHRyaW0obm9kZSwgbm9kZS5sYXN0Q2hpbGQpXG59XG5cbmZ1bmN0aW9uIHRyaW0gKHBhcmVudCwgbm9kZSkge1xuICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSAzICYmICFub2RlLmRhdGEudHJpbSgpKSB7XG4gICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpXG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgdGVtcGxhdGUgdGFnLlxuICogTm90ZSBpZiB0aGUgdGVtcGxhdGUgYXBwZWFycyBpbnNpZGUgYW4gU1ZHIGl0cyB0YWdOYW1lXG4gKiB3aWxsIGJlIGluIGxvd2VyY2FzZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZXhwb3J0cy5pc1RlbXBsYXRlID0gZnVuY3Rpb24gKGVsKSB7XG4gIHJldHVybiBlbC50YWdOYW1lICYmXG4gICAgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGVtcGxhdGUnXG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIFwiYW5jaG9yXCIgZm9yIHBlcmZvcm1pbmcgZG9tIGluc2VydGlvbi9yZW1vdmFscy5cbiAqIFRoaXMgaXMgdXNlZCBpbiBhIG51bWJlciBvZiBzY2VuYXJpb3M6XG4gKiAtIGZyYWdtZW50IGluc3RhbmNlXG4gKiAtIHYtaHRtbFxuICogLSB2LWlmXG4gKiAtIHYtZm9yXG4gKiAtIGNvbXBvbmVudFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHBlcnNpc3QgLSBJRSB0cmFzaGVzIGVtcHR5IHRleHROb2RlcyBvblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVOb2RlKHRydWUpLCBzbyBpbiBjZXJ0YWluXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlcyB0aGUgYW5jaG9yIG5lZWRzIHRvIGJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub24tZW1wdHkgdG8gYmUgcGVyc2lzdGVkIGluXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXMuXG4gKiBAcmV0dXJuIHtDb21tZW50fFRleHR9XG4gKi9cblxuZXhwb3J0cy5jcmVhdGVBbmNob3IgPSBmdW5jdGlvbiAoY29udGVudCwgcGVyc2lzdCkge1xuICB2YXIgYW5jaG9yID0gY29uZmlnLmRlYnVnXG4gICAgPyBkb2N1bWVudC5jcmVhdGVDb21tZW50KGNvbnRlbnQpXG4gICAgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwZXJzaXN0ID8gJyAnIDogJycpXG4gIGFuY2hvci5fX3Z1ZV9hbmNob3IgPSB0cnVlXG4gIHJldHVybiBhbmNob3Jcbn1cblxuLyoqXG4gKiBGaW5kIGEgY29tcG9uZW50IHJlZiBhdHRyaWJ1dGUgdGhhdCBzdGFydHMgd2l0aCAkLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7U3RyaW5nfHVuZGVmaW5lZH1cbiAqL1xuXG52YXIgcmVmUkUgPSAvXnYtcmVmOi9cbmV4cG9ydHMuZmluZFJlZiA9IGZ1bmN0aW9uIChub2RlKSB7XG4gIGlmIChub2RlLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlc1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgbmFtZSA9IGF0dHJzW2ldLm5hbWVcbiAgICAgIGlmIChyZWZSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBfLmNhbWVsaXplKG5hbWUucmVwbGFjZShyZWZSRSwgJycpKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIE1hcCBhIGZ1bmN0aW9uIHRvIGEgcmFuZ2Ugb2Ygbm9kZXMgLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtOb2RlfSBlbmRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wXG4gKi9cblxuZXhwb3J0cy5tYXBOb2RlUmFuZ2UgPSBmdW5jdGlvbiAobm9kZSwgZW5kLCBvcCkge1xuICB2YXIgbmV4dFxuICB3aGlsZSAobm9kZSAhPT0gZW5kKSB7XG4gICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmdcbiAgICBvcChub2RlKVxuICAgIG5vZGUgPSBuZXh0XG4gIH1cbiAgb3AoZW5kKVxufVxuXG4vKipcbiAqIFJlbW92ZSBhIHJhbmdlIG9mIG5vZGVzIHdpdGggdHJhbnNpdGlvbiwgc3RvcmVcbiAqIHRoZSBub2RlcyBpbiBhIGZyYWdtZW50IHdpdGggY29ycmVjdCBvcmRlcmluZyxcbiAqIGFuZCBjYWxsIGNhbGxiYWNrIHdoZW4gZG9uZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IHN0YXJ0XG4gKiBAcGFyYW0ge05vZGV9IGVuZFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZXhwb3J0cy5yZW1vdmVOb2RlUmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCwgdm0sIGZyYWcsIGNiKSB7XG4gIHZhciBkb25lID0gZmFsc2VcbiAgdmFyIHJlbW92ZWQgPSAwXG4gIHZhciBub2RlcyA9IFtdXG4gIGV4cG9ydHMubWFwTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgaWYgKG5vZGUgPT09IGVuZCkgZG9uZSA9IHRydWVcbiAgICBub2Rlcy5wdXNoKG5vZGUpXG4gICAgdHJhbnNpdGlvbi5yZW1vdmUobm9kZSwgdm0sIG9uUmVtb3ZlZClcbiAgfSlcbiAgZnVuY3Rpb24gb25SZW1vdmVkICgpIHtcbiAgICByZW1vdmVkKytcbiAgICBpZiAoZG9uZSAmJiByZW1vdmVkID49IG5vZGVzLmxlbmd0aCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGVzW2ldKVxuICAgICAgfVxuICAgICAgY2IgJiYgY2IoKVxuICAgIH1cbiAgfVxufVxuIiwiLy8gY2FuIHdlIHVzZSBfX3Byb3RvX18/XG5leHBvcnRzLmhhc1Byb3RvID0gJ19fcHJvdG9fXycgaW4ge31cblxuLy8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZ1xudmFyIGluQnJvd3NlciA9IGV4cG9ydHMuaW5Ccm93c2VyID1cbiAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nXG5cbmV4cG9ydHMuaXNJRTkgPVxuICBpbkJyb3dzZXIgJiZcbiAgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwXG5cbmV4cG9ydHMuaXNBbmRyb2lkID1cbiAgaW5Ccm93c2VyICYmXG4gIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdhbmRyb2lkJykgPiAwXG5cbi8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmdcbmlmIChpbkJyb3dzZXIgJiYgIWV4cG9ydHMuaXNJRTkpIHtcbiAgdmFyIGlzV2Via2l0VHJhbnMgPVxuICAgIHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJlxuICAgIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZFxuICB2YXIgaXNXZWJraXRBbmltID1cbiAgICB3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJlxuICAgIHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCAhPT0gdW5kZWZpbmVkXG4gIGV4cG9ydHMudHJhbnNpdGlvblByb3AgPSBpc1dlYmtpdFRyYW5zXG4gICAgPyAnV2Via2l0VHJhbnNpdGlvbidcbiAgICA6ICd0cmFuc2l0aW9uJ1xuICBleHBvcnRzLnRyYW5zaXRpb25FbmRFdmVudCA9IGlzV2Via2l0VHJhbnNcbiAgICA/ICd3ZWJraXRUcmFuc2l0aW9uRW5kJ1xuICAgIDogJ3RyYW5zaXRpb25lbmQnXG4gIGV4cG9ydHMuYW5pbWF0aW9uUHJvcCA9IGlzV2Via2l0QW5pbVxuICAgID8gJ1dlYmtpdEFuaW1hdGlvbidcbiAgICA6ICdhbmltYXRpb24nXG4gIGV4cG9ydHMuYW5pbWF0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdEFuaW1cbiAgICA/ICd3ZWJraXRBbmltYXRpb25FbmQnXG4gICAgOiAnYW5pbWF0aW9uZW5kJ1xufVxuXG4vKipcbiAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcbiAqIHNob3VsZCBiZSBleGVjdXRlZCBhcyBhIG1pY3JvdGFzaywgc28gd2UgbGV2ZXJhZ2VcbiAqIE11dGF0aW9uT2JzZXJ2ZXIgaWYgaXQncyBhdmFpbGFibGUsIGFuZCBmYWxsYmFjayB0b1xuICogc2V0VGltZW91dCgwKS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtPYmplY3R9IGN0eFxuICovXG5cbmV4cG9ydHMubmV4dFRpY2sgPSAoZnVuY3Rpb24gKCkge1xuICB2YXIgY2FsbGJhY2tzID0gW11cbiAgdmFyIHBlbmRpbmcgPSBmYWxzZVxuICB2YXIgdGltZXJGdW5jXG4gIGZ1bmN0aW9uIG5leHRUaWNrSGFuZGxlciAoKSB7XG4gICAgcGVuZGluZyA9IGZhbHNlXG4gICAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKVxuICAgIGNhbGxiYWNrcyA9IFtdXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvcGllc1tpXSgpXG4gICAgfVxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGNvdW50ZXIgPSAxXG4gICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobmV4dFRpY2tIYW5kbGVyKVxuICAgIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50ZXIpXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0ZXh0Tm9kZSwge1xuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuICAgIH0pXG4gICAgdGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgY291bnRlciA9IChjb3VudGVyICsgMSkgJSAyXG4gICAgICB0ZXh0Tm9kZS5kYXRhID0gY291bnRlclxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aW1lckZ1bmMgPSBzZXRUaW1lb3V0XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYiwgY3R4KSB7XG4gICAgdmFyIGZ1bmMgPSBjdHhcbiAgICAgID8gZnVuY3Rpb24gKCkgeyBjYi5jYWxsKGN0eCkgfVxuICAgICAgOiBjYlxuICAgIGNhbGxiYWNrcy5wdXNoKGZ1bmMpXG4gICAgaWYgKHBlbmRpbmcpIHJldHVyblxuICAgIHBlbmRpbmcgPSB0cnVlXG4gICAgdGltZXJGdW5jKG5leHRUaWNrSGFuZGxlciwgMClcbiAgfVxufSkoKVxuIiwidmFyIGxhbmcgPSByZXF1aXJlKCcuL2xhbmcnKVxudmFyIGV4dGVuZCA9IGxhbmcuZXh0ZW5kXG5cbmV4dGVuZChleHBvcnRzLCBsYW5nKVxuZXh0ZW5kKGV4cG9ydHMsIHJlcXVpcmUoJy4vZW52JykpXG5leHRlbmQoZXhwb3J0cywgcmVxdWlyZSgnLi9kb20nKSlcbmV4dGVuZChleHBvcnRzLCByZXF1aXJlKCcuL29wdGlvbnMnKSlcbmV4dGVuZChleHBvcnRzLCByZXF1aXJlKCcuL2NvbXBvbmVudCcpKVxuZXh0ZW5kKGV4cG9ydHMsIHJlcXVpcmUoJy4vZGVidWcnKSlcbiIsIi8qKlxuICogU2V0IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBBZGRzIHRoZSBuZXcgcHJvcGVydHkgYW5kXG4gKiB0cmlnZ2VycyBjaGFuZ2Ugbm90aWZpY2F0aW9uIGlmIHRoZSBwcm9wZXJ0eSBkb2Vzbid0XG4gKiBhbHJlYWR5IGV4aXN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcHVibGljXG4gKi9cblxuZXhwb3J0cy5zZXQgPSBmdW5jdGlvbiBzZXQgKG9iaiwga2V5LCB2YWwpIHtcbiAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgb2JqW2tleV0gPSB2YWxcbiAgICByZXR1cm5cbiAgfVxuICBpZiAob2JqLl9pc1Z1ZSkge1xuICAgIHNldChvYmouX2RhdGEsIGtleSwgdmFsKVxuICAgIHJldHVyblxuICB9XG4gIHZhciBvYiA9IG9iai5fX29iX19cbiAgaWYgKCFvYikge1xuICAgIG9ialtrZXldID0gdmFsXG4gICAgcmV0dXJuXG4gIH1cbiAgb2IuY29udmVydChrZXksIHZhbClcbiAgb2IuZGVwLm5vdGlmeSgpXG4gIGlmIChvYi52bXMpIHtcbiAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGhcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIgdm0gPSBvYi52bXNbaV1cbiAgICAgIHZtLl9wcm94eShrZXkpXG4gICAgICB2bS5fZGlnZXN0KClcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBEZWxldGUgYSBwcm9wZXJ0eSBhbmQgdHJpZ2dlciBjaGFuZ2UgaWYgbmVjZXNzYXJ5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqL1xuXG5leHBvcnRzLmRlbGV0ZSA9IGZ1bmN0aW9uIChvYmosIGtleSkge1xuICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgZGVsZXRlIG9ialtrZXldXG4gIHZhciBvYiA9IG9iai5fX29iX19cbiAgaWYgKCFvYikge1xuICAgIHJldHVyblxuICB9XG4gIG9iLmRlcC5ub3RpZnkoKVxuICBpZiAob2Iudm1zKSB7XG4gICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIHZtID0gb2Iudm1zW2ldXG4gICAgICB2bS5fdW5wcm94eShrZXkpXG4gICAgICB2bS5fZGlnZXN0KClcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgbGl0ZXJhbCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciBsaXRlcmFsVmFsdWVSRSA9IC9eXFxzPyh0cnVlfGZhbHNlfFtcXGRcXC5dK3wnW14nXSonfFwiW15cIl0qXCIpXFxzPyQvXG5leHBvcnRzLmlzTGl0ZXJhbCA9IGZ1bmN0aW9uIChleHApIHtcbiAgcmV0dXJuIGxpdGVyYWxWYWx1ZVJFLnRlc3QoZXhwKVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgX1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZXhwb3J0cy5pc1Jlc2VydmVkID0gZnVuY3Rpb24gKHN0cikge1xuICB2YXIgYyA9IChzdHIgKyAnJykuY2hhckNvZGVBdCgwKVxuICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGXG59XG5cbi8qKlxuICogR3VhcmQgdGV4dCBvdXRwdXQsIG1ha2Ugc3VyZSB1bmRlZmluZWQgb3V0cHV0c1xuICogZW1wdHkgc3RyaW5nXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmV4cG9ydHMudG9TdHJpbmcgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGxcbiAgICA/ICcnXG4gICAgOiB2YWx1ZS50b1N0cmluZygpXG59XG5cbi8qKlxuICogQ2hlY2sgYW5kIGNvbnZlcnQgcG9zc2libGUgbnVtZXJpYyBzdHJpbmdzIHRvIG51bWJlcnNcbiAqIGJlZm9yZSBzZXR0aW5nIGJhY2sgdG8gZGF0YVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4geyp8TnVtYmVyfVxuICovXG5cbmV4cG9ydHMudG9OdW1iZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWVcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGFyc2VkID0gTnVtYmVyKHZhbHVlKVxuICAgIHJldHVybiBpc05hTihwYXJzZWQpXG4gICAgICA/IHZhbHVlXG4gICAgICA6IHBhcnNlZFxuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBzdHJpbmcgYm9vbGVhbiBsaXRlcmFscyBpbnRvIHJlYWwgYm9vbGVhbnMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7KnxCb29sZWFufVxuICovXG5cbmV4cG9ydHMudG9Cb29sZWFuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnXG4gICAgPyB0cnVlXG4gICAgOiB2YWx1ZSA9PT0gJ2ZhbHNlJ1xuICAgICAgPyBmYWxzZVxuICAgICAgOiB2YWx1ZVxufVxuXG4vKipcbiAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG4gKi9cblxuZXhwb3J0cy5zdHJpcFF1b3RlcyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIGEgPSBzdHIuY2hhckNvZGVBdCgwKVxuICB2YXIgYiA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSAxKVxuICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KVxuICAgID8gc3RyLnNsaWNlKDEsIC0xKVxuICAgIDogc3RyXG59XG5cbi8qKlxuICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZ1xuZXhwb3J0cy5jYW1lbGl6ZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIHRvVXBwZXIpXG59XG5cbmZ1bmN0aW9uIHRvVXBwZXIgKF8sIGMpIHtcbiAgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJ1xufVxuXG4vKipcbiAqIEh5cGhlbmF0ZSBhIGNhbWVsQ2FzZSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbnZhciBoeXBoZW5hdGVSRSA9IC8oW2EtelxcZF0pKFtBLVpdKS9nXG5leHBvcnRzLmh5cGhlbmF0ZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgcmV0dXJuIHN0clxuICAgIC5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnJDEtJDInKVxuICAgIC50b0xvd2VyQ2FzZSgpXG59XG5cbi8qKlxuICogQ29udmVydHMgaHlwaGVuL3VuZGVyc2NvcmUvc2xhc2ggZGVsaW1pdGVyZWQgbmFtZXMgaW50b1xuICogY2FtZWxpemVkIGNsYXNzTmFtZXMuXG4gKlxuICogZS5nLiBteS1jb21wb25lbnQgPT4gTXlDb21wb25lbnRcbiAqICAgICAgc29tZV9lbHNlICAgID0+IFNvbWVFbHNlXG4gKiAgICAgIHNvbWUvY29tcCAgICA9PiBTb21lQ29tcFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX1xcL10pKFxcdykvZ1xuZXhwb3J0cy5jbGFzc2lmeSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGNsYXNzaWZ5UkUsIHRvVXBwZXIpXG59XG5cbi8qKlxuICogU2ltcGxlIGJpbmQsIGZhc3RlciB0aGFuIG5hdGl2ZVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5leHBvcnRzLmJpbmQgPSBmdW5jdGlvbiAoZm4sIGN0eCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICByZXR1cm4gbFxuICAgICAgPyBsID4gMVxuICAgICAgICA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKVxuICAgICAgICA6IGZuLmNhbGwoY3R4LCBhKVxuICAgICAgOiBmbi5jYWxsKGN0eClcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXktbGlrZX0gbGlzdFxuICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydF0gLSBzdGFydCBpbmRleFxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cblxuZXhwb3J0cy50b0FycmF5ID0gZnVuY3Rpb24gKGxpc3QsIHN0YXJ0KSB7XG4gIHN0YXJ0ID0gc3RhcnQgfHwgMFxuICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnRcbiAgdmFyIHJldCA9IG5ldyBBcnJheShpKVxuICB3aGlsZSAoaS0tKSB7XG4gICAgcmV0W2ldID0gbGlzdFtpICsgc3RhcnRdXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG4vKipcbiAqIE1peCBwcm9wZXJ0aWVzIGludG8gdGFyZ2V0IG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9cbiAqIEBwYXJhbSB7T2JqZWN0fSBmcm9tXG4gKi9cblxuZXhwb3J0cy5leHRlbmQgPSBmdW5jdGlvbiAodG8sIGZyb20pIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKVxuICB2YXIgaSA9IGtleXMubGVuZ3RoXG4gIHdoaWxlIChpLS0pIHtcbiAgICB0b1trZXlzW2ldXSA9IGZyb21ba2V5c1tpXV1cbiAgfVxuICByZXR1cm4gdG9cbn1cblxuLyoqXG4gKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcbiAqIE9iamVjdHMgZnJvbSBwcmltaXRpdmUgdmFsdWVzIHdoZW4gd2Uga25vdyB0aGUgdmFsdWVcbiAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5leHBvcnRzLmlzT2JqZWN0ID0gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnXG59XG5cbi8qKlxuICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nXG52YXIgT0JKRUNUX1NUUklORyA9ICdbb2JqZWN0IE9iamVjdF0nXG5leHBvcnRzLmlzUGxhaW5PYmplY3QgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9TVFJJTkdcbn1cblxuLyoqXG4gKiBBcnJheSB0eXBlIGNoZWNrLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmV4cG9ydHMuaXNBcnJheSA9IEFycmF5LmlzQXJyYXlcblxuLyoqXG4gKiBEZWZpbmUgYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtlbnVtZXJhYmxlXVxuICovXG5cbmV4cG9ydHMuZGVmaW5lID0gZnVuY3Rpb24gKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgdmFsdWU6IHZhbCxcbiAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pXG59XG5cbi8qKlxuICogRGVib3VuY2UgYSBmdW5jdGlvbiBzbyBpdCBvbmx5IGdldHMgY2FsbGVkIGFmdGVyIHRoZVxuICogaW5wdXQgc3RvcHMgYXJyaXZpbmcgYWZ0ZXIgdGhlIGdpdmVuIHdhaXQgcGVyaW9kLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0cy5kZWJvdW5jZSA9IGZ1bmN0aW9uIChmdW5jLCB3YWl0KSB7XG4gIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdFxuICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxhc3QgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wXG4gICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbFxuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKVxuICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGxcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBjb250ZXh0ID0gdGhpc1xuICAgIGFyZ3MgPSBhcmd1bWVudHNcbiAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpXG4gICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdClcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG59XG5cbi8qKlxuICogTWFudWFsIGluZGV4T2YgYmVjYXVzZSBpdCdzIHNsaWdodGx5IGZhc3RlciB0aGFuXG4gKiBuYXRpdmUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyXG4gKiBAcGFyYW0geyp9IG9ialxuICovXG5cbmV4cG9ydHMuaW5kZXhPZiA9IGZ1bmN0aW9uIChhcnIsIG9iaikge1xuICB2YXIgaSA9IGFyci5sZW5ndGhcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGlcbiAgfVxuICByZXR1cm4gLTFcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2FuY2VsbGFibGUgdmVyc2lvbiBvZiBhbiBhc3luYyBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZXhwb3J0cy5jYW5jZWxsYWJsZSA9IGZ1bmN0aW9uIChmbikge1xuICB2YXIgY2IgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgfVxuICB9XG4gIGNiLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjYi5jYW5jZWxsZWQgPSB0cnVlXG4gIH1cbiAgcmV0dXJuIGNiXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIHZhbHVlcyBhcmUgbG9vc2VseSBlcXVhbCAtIHRoYXQgaXMsXG4gKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/XG4gKlxuICogQHBhcmFtIHsqfSBhXG4gKiBAcGFyYW0geyp9IGJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZXhwb3J0cy5sb29zZUVxdWFsID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gIHJldHVybiBhID09IGIgfHwgKFxuICAgIGV4cG9ydHMuaXNPYmplY3QoYSkgJiYgZXhwb3J0cy5pc09iamVjdChiKVxuICAgICAgPyBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYilcbiAgICAgIDogZmFsc2VcbiAgKVxuICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuL2luZGV4JylcbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi9jb25maWcnKVxudmFyIGV4dGVuZCA9IF8uZXh0ZW5kXG5cbi8qKlxuICogT3B0aW9uIG92ZXJ3cml0aW5nIHN0cmF0ZWdpZXMgYXJlIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZVxuICogaG93IHRvIG1lcmdlIGEgcGFyZW50IG9wdGlvbiB2YWx1ZSBhbmQgYSBjaGlsZCBvcHRpb25cbiAqIHZhbHVlIGludG8gdGhlIGZpbmFsIHZhbHVlLlxuICpcbiAqIEFsbCBzdHJhdGVneSBmdW5jdGlvbnMgZm9sbG93IHRoZSBzYW1lIHNpZ25hdHVyZTpcbiAqXG4gKiBAcGFyYW0geyp9IHBhcmVudFZhbFxuICogQHBhcmFtIHsqfSBjaGlsZFZhbFxuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqL1xuXG52YXIgc3RyYXRzID0gY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcyA9IE9iamVjdC5jcmVhdGUobnVsbClcblxuLyoqXG4gKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZURhdGEgKHRvLCBmcm9tKSB7XG4gIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsXG4gIGZvciAoa2V5IGluIGZyb20pIHtcbiAgICB0b1ZhbCA9IHRvW2tleV1cbiAgICBmcm9tVmFsID0gZnJvbVtrZXldXG4gICAgaWYgKCF0by5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBfLnNldCh0bywga2V5LCBmcm9tVmFsKVxuICAgIH0gZWxzZSBpZiAoXy5pc09iamVjdCh0b1ZhbCkgJiYgXy5pc09iamVjdChmcm9tVmFsKSkge1xuICAgICAgbWVyZ2VEYXRhKHRvVmFsLCBmcm9tVmFsKVxuICAgIH1cbiAgfVxuICByZXR1cm4gdG9cbn1cblxuLyoqXG4gKiBEYXRhXG4gKi9cblxuc3RyYXRzLmRhdGEgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcbiAgaWYgKCF2bSkge1xuICAgIC8vIGluIGEgVnVlLmV4dGVuZCBtZXJnZSwgYm90aCBzaG91bGQgYmUgZnVuY3Rpb25zXG4gICAgaWYgKCFjaGlsZFZhbCkge1xuICAgICAgcmV0dXJuIHBhcmVudFZhbFxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICAgJ1RoZSBcImRhdGFcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArXG4gICAgICAgICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgK1xuICAgICAgICAnZGVmaW5pdGlvbnMuJ1xuICAgICAgKVxuICAgICAgcmV0dXJuIHBhcmVudFZhbFxuICAgIH1cbiAgICBpZiAoIXBhcmVudFZhbCkge1xuICAgICAgcmV0dXJuIGNoaWxkVmFsXG4gICAgfVxuICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCxcbiAgICAvLyB3ZSBuZWVkIHRvIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgICAvLyBtZXJnZWQgcmVzdWx0IG9mIGJvdGggZnVuY3Rpb25zLi4uIG5vIG5lZWQgdG9cbiAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2VcbiAgICAvLyBpdCBoYXMgdG8gYmUgYSBmdW5jdGlvbiB0byBwYXNzIHByZXZpb3VzIG1lcmdlcy5cbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuICgpIHtcbiAgICAgIHJldHVybiBtZXJnZURhdGEoXG4gICAgICAgIGNoaWxkVmFsLmNhbGwodGhpcyksXG4gICAgICAgIHBhcmVudFZhbC5jYWxsKHRoaXMpXG4gICAgICApXG4gICAgfVxuICB9IGVsc2UgaWYgKHBhcmVudFZhbCB8fCBjaGlsZFZhbCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbiAoKSB7XG4gICAgICAvLyBpbnN0YW5jZSBtZXJnZVxuICAgICAgdmFyIGluc3RhbmNlRGF0YSA9IHR5cGVvZiBjaGlsZFZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IGNoaWxkVmFsLmNhbGwodm0pXG4gICAgICAgIDogY2hpbGRWYWxcbiAgICAgIHZhciBkZWZhdWx0RGF0YSA9IHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBwYXJlbnRWYWwuY2FsbCh2bSlcbiAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgIGlmIChpbnN0YW5jZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShpbnN0YW5jZURhdGEsIGRlZmF1bHREYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRWxcbiAqL1xuXG5zdHJhdHMuZWwgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcbiAgaWYgKCF2bSAmJiBjaGlsZFZhbCAmJiB0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIF8ud2FybihcbiAgICAgICdUaGUgXCJlbFwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICtcbiAgICAgICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgK1xuICAgICAgJ2RlZmluaXRpb25zLidcbiAgICApXG4gICAgcmV0dXJuXG4gIH1cbiAgdmFyIHJldCA9IGNoaWxkVmFsIHx8IHBhcmVudFZhbFxuICAvLyBpbnZva2UgdGhlIGVsZW1lbnQgZmFjdG9yeSBpZiB0aGlzIGlzIGluc3RhbmNlIG1lcmdlXG4gIHJldHVybiB2bSAmJiB0eXBlb2YgcmV0ID09PSAnZnVuY3Rpb24nXG4gICAgPyByZXQuY2FsbCh2bSlcbiAgICA6IHJldFxufVxuXG4vKipcbiAqIEhvb2tzIGFuZCBwYXJhbSBhdHRyaWJ1dGVzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuICovXG5cbnN0cmF0cy5pbml0ID1cbnN0cmF0cy5jcmVhdGVkID1cbnN0cmF0cy5yZWFkeSA9XG5zdHJhdHMuYXR0YWNoZWQgPVxuc3RyYXRzLmRldGFjaGVkID1cbnN0cmF0cy5iZWZvcmVDb21waWxlID1cbnN0cmF0cy5jb21waWxlZCA9XG5zdHJhdHMuYmVmb3JlRGVzdHJveSA9XG5zdHJhdHMuZGVzdHJveWVkID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgcmV0dXJuIGNoaWxkVmFsXG4gICAgPyBwYXJlbnRWYWxcbiAgICAgID8gcGFyZW50VmFsLmNvbmNhdChjaGlsZFZhbClcbiAgICAgIDogXy5pc0FycmF5KGNoaWxkVmFsKVxuICAgICAgICA/IGNoaWxkVmFsXG4gICAgICAgIDogW2NoaWxkVmFsXVxuICAgIDogcGFyZW50VmFsXG59XG5cbi8qKlxuICogMC4xMSBkZXByZWNhdGlvbiB3YXJuaW5nXG4gKi9cblxuc3RyYXRzLnBhcmFtQXR0cmlidXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgJ1wicGFyYW1BdHRyaWJ1dGVzXCIgb3B0aW9uIGhhcyBiZWVuIGRlcHJlY2F0ZWQgaW4gMC4xMi4gJyArXG4gICAgJ1VzZSBcInByb3BzXCIgaW5zdGVhZC4nXG4gIClcbn1cblxuLyoqXG4gKiBBc3NldHNcbiAqXG4gKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvXG4gKiBhIHRocmVlLXdheSBtZXJnZSBiZXR3ZWVuIGNvbnN0cnVjdG9yIG9wdGlvbnMsIGluc3RhbmNlXG4gKiBvcHRpb25zIGFuZCBwYXJlbnQgb3B0aW9ucy5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZUFzc2V0cyAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwpXG4gIHJldHVybiBjaGlsZFZhbFxuICAgID8gZXh0ZW5kKHJlcywgZ3VhcmRBcnJheUFzc2V0cyhjaGlsZFZhbCkpXG4gICAgOiByZXNcbn1cblxuY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHNcbn0pXG5cbi8qKlxuICogRXZlbnRzICYgV2F0Y2hlcnMuXG4gKlxuICogRXZlbnRzICYgd2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZVxuICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXG4gKi9cblxuc3RyYXRzLndhdGNoID1cbnN0cmF0cy5ldmVudHMgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsXG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWxcbiAgdmFyIHJldCA9IHt9XG4gIGV4dGVuZChyZXQsIHBhcmVudFZhbClcbiAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XG4gICAgdmFyIHBhcmVudCA9IHJldFtrZXldXG4gICAgdmFyIGNoaWxkID0gY2hpbGRWYWxba2V5XVxuICAgIGlmIChwYXJlbnQgJiYgIV8uaXNBcnJheShwYXJlbnQpKSB7XG4gICAgICBwYXJlbnQgPSBbcGFyZW50XVxuICAgIH1cbiAgICByZXRba2V5XSA9IHBhcmVudFxuICAgICAgPyBwYXJlbnQuY29uY2F0KGNoaWxkKVxuICAgICAgOiBbY2hpbGRdXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG4vKipcbiAqIE90aGVyIG9iamVjdCBoYXNoZXMuXG4gKi9cblxuc3RyYXRzLnByb3BzID1cbnN0cmF0cy5tZXRob2RzID1cbnN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWxcbiAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbFxuICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpXG4gIGV4dGVuZChyZXQsIGNoaWxkVmFsKVxuICByZXR1cm4gcmV0XG59XG5cbi8qKlxuICogRGVmYXVsdCBzdHJhdGVneS5cbiAqL1xuXG52YXIgZGVmYXVsdFN0cmF0ID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWRcbiAgICA/IHBhcmVudFZhbFxuICAgIDogY2hpbGRWYWxcbn1cblxuLyoqXG4gKiBNYWtlIHN1cmUgY29tcG9uZW50IG9wdGlvbnMgZ2V0IGNvbnZlcnRlZCB0byBhY3R1YWxcbiAqIGNvbnN0cnVjdG9ycy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGd1YXJkQ29tcG9uZW50cyAob3B0aW9ucykge1xuICBpZiAob3B0aW9ucy5jb21wb25lbnRzKSB7XG4gICAgdmFyIGNvbXBvbmVudHMgPSBvcHRpb25zLmNvbXBvbmVudHMgPVxuICAgICAgZ3VhcmRBcnJheUFzc2V0cyhvcHRpb25zLmNvbXBvbmVudHMpXG4gICAgdmFyIGRlZlxuICAgIHZhciBpZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gaWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGlkc1tpXVxuICAgICAgaWYgKF8uY29tbW9uVGFnUkUudGVzdChrZXkpKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAgICdEbyBub3QgdXNlIGJ1aWx0LWluIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgK1xuICAgICAgICAgICdpZDogJyArIGtleVxuICAgICAgICApXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBkZWYgPSBjb21wb25lbnRzW2tleV1cbiAgICAgIGlmIChfLmlzUGxhaW5PYmplY3QoZGVmKSkge1xuICAgICAgICBjb21wb25lbnRzW2tleV0gPSBfLlZ1ZS5leHRlbmQoZGVmKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuICogT2JqZWN0LWJhc2VkIGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGd1YXJkUHJvcHMgKG9wdGlvbnMpIHtcbiAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wc1xuICB2YXIgaSwgdmFsXG4gIGlmIChfLmlzQXJyYXkocHJvcHMpKSB7XG4gICAgb3B0aW9ucy5wcm9wcyA9IHt9XG4gICAgaSA9IHByb3BzLmxlbmd0aFxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhbCA9IHByb3BzW2ldXG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWxdID0gbnVsbFxuICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSkge1xuICAgICAgICBvcHRpb25zLnByb3BzW3ZhbC5uYW1lXSA9IHZhbFxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChfLmlzUGxhaW5PYmplY3QocHJvcHMpKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcylcbiAgICBpID0ga2V5cy5sZW5ndGhcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1trZXlzW2ldXVxuICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvcHNba2V5c1tpXV0gPSB7IHR5cGU6IHZhbCB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR3VhcmQgYW4gQXJyYXktZm9ybWF0IGFzc2V0cyBvcHRpb24gYW5kIGNvbnZlcnRlZCBpdFxuICogaW50byB0aGUga2V5LXZhbHVlIE9iamVjdCBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGFzc2V0c1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGd1YXJkQXJyYXlBc3NldHMgKGFzc2V0cykge1xuICBpZiAoXy5pc0FycmF5KGFzc2V0cykpIHtcbiAgICB2YXIgcmVzID0ge31cbiAgICB2YXIgaSA9IGFzc2V0cy5sZW5ndGhcbiAgICB2YXIgYXNzZXRcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhc3NldCA9IGFzc2V0c1tpXVxuICAgICAgdmFyIGlkID0gdHlwZW9mIGFzc2V0ID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gKChhc3NldC5vcHRpb25zICYmIGFzc2V0Lm9wdGlvbnMubmFtZSkgfHwgYXNzZXQuaWQpXG4gICAgICAgIDogKGFzc2V0Lm5hbWUgfHwgYXNzZXQuaWQpXG4gICAgICBpZiAoIWlkKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgXy53YXJuKFxuICAgICAgICAgICdBcnJheS1zeW50YXggYXNzZXRzIG11c3QgcHJvdmlkZSBhIFwibmFtZVwiIG9yIFwiaWRcIiBmaWVsZC4nXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc1tpZF0gPSBhc3NldFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzXG4gIH1cbiAgcmV0dXJuIGFzc2V0c1xufVxuXG4vKipcbiAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cbiAqIENvcmUgdXRpbGl0eSB1c2VkIGluIGJvdGggaW5zdGFudGlhdGlvbiBhbmQgaW5oZXJpdGFuY2UuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuICogQHBhcmFtIHtPYmplY3R9IGNoaWxkXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXSAtIGlmIHZtIGlzIHByZXNlbnQsIGluZGljYXRlcyB0aGlzIGlzXG4gKiAgICAgICAgICAgICAgICAgICAgIGFuIGluc3RhbnRpYXRpb24gbWVyZ2UuXG4gKi9cblxuZXhwb3J0cy5tZXJnZU9wdGlvbnMgPSBmdW5jdGlvbiBtZXJnZSAocGFyZW50LCBjaGlsZCwgdm0pIHtcbiAgZ3VhcmRDb21wb25lbnRzKGNoaWxkKVxuICBndWFyZFByb3BzKGNoaWxkKVxuICB2YXIgb3B0aW9ucyA9IHt9XG4gIHZhciBrZXlcbiAgaWYgKGNoaWxkLm1peGlucykge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgcGFyZW50ID0gbWVyZ2UocGFyZW50LCBjaGlsZC5taXhpbnNbaV0sIHZtKVxuICAgIH1cbiAgfVxuICBmb3IgKGtleSBpbiBwYXJlbnQpIHtcbiAgICBtZXJnZUZpZWxkKGtleSlcbiAgfVxuICBmb3IgKGtleSBpbiBjaGlsZCkge1xuICAgIGlmICghKHBhcmVudC5oYXNPd25Qcm9wZXJ0eShrZXkpKSkge1xuICAgICAgbWVyZ2VGaWVsZChrZXkpXG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIG1lcmdlRmllbGQgKGtleSkge1xuICAgIHZhciBzdHJhdCA9IHN0cmF0c1trZXldIHx8IGRlZmF1bHRTdHJhdFxuICAgIG9wdGlvbnNba2V5XSA9IHN0cmF0KHBhcmVudFtrZXldLCBjaGlsZFtrZXldLCB2bSwga2V5KVxuICB9XG4gIHJldHVybiBvcHRpb25zXG59XG5cbi8qKlxuICogUmVzb2x2ZSBhbiBhc3NldC5cbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBiZWNhdXNlIGNoaWxkIGluc3RhbmNlcyBuZWVkIGFjY2Vzc1xuICogdG8gYXNzZXRzIGRlZmluZWQgaW4gaXRzIGFuY2VzdG9yIGNoYWluLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHtPYmplY3R8RnVuY3Rpb259XG4gKi9cblxuZXhwb3J0cy5yZXNvbHZlQXNzZXQgPSBmdW5jdGlvbiByZXNvbHZlIChvcHRpb25zLCB0eXBlLCBpZCkge1xuICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXVxuICB2YXIgY2FtZWxpemVkSWRcbiAgcmV0dXJuIGFzc2V0c1tpZF0gfHxcbiAgICAvLyBjYW1lbENhc2UgSURcbiAgICBhc3NldHNbY2FtZWxpemVkSWQgPSBfLmNhbWVsaXplKGlkKV0gfHxcbiAgICAvLyBQYXNjYWwgQ2FzZSBJRFxuICAgIGFzc2V0c1tjYW1lbGl6ZWRJZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsaXplZElkLnNsaWNlKDEpXVxufVxuIiwidmFyIF8gPSByZXF1aXJlKCcuL3V0aWwnKVxudmFyIGV4dGVuZCA9IF8uZXh0ZW5kXG5cbi8qKlxuICogVGhlIGV4cG9zZWQgVnVlIGNvbnN0cnVjdG9yLlxuICpcbiAqIEFQSSBjb252ZW50aW9uczpcbiAqIC0gcHVibGljIEFQSSBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpZXhlZCB3aXRoIGAkYFxuICogLSBpbnRlcm5hbCBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYF9gXG4gKiAtIG5vbi1wcmVmaXhlZCBwcm9wZXJ0aWVzIGFyZSBhc3N1bWVkIHRvIGJlIHByb3hpZWQgdXNlclxuICogICBkYXRhLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIFZ1ZSAob3B0aW9ucykge1xuICB0aGlzLl9pbml0KG9wdGlvbnMpXG59XG5cbi8qKlxuICogTWl4aW4gZ2xvYmFsIEFQSVxuICovXG5cbmV4dGVuZChWdWUsIHJlcXVpcmUoJy4vYXBpL2dsb2JhbCcpKVxuXG4vKipcbiAqIFZ1ZSBhbmQgZXZlcnkgY29uc3RydWN0b3IgdGhhdCBleHRlbmRzIFZ1ZSBoYXMgYW5cbiAqIGFzc29jaWF0ZWQgb3B0aW9ucyBvYmplY3QsIHdoaWNoIGNhbiBiZSBhY2Nlc3NlZCBkdXJpbmdcbiAqIGNvbXBpbGF0aW9uIHN0ZXBzIGFzIGB0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnNgLlxuICpcbiAqIFRoZXNlIGNhbiBiZSBzZWVuIGFzIHRoZSBkZWZhdWx0IG9wdGlvbnMgb2YgZXZlcnlcbiAqIFZ1ZSBpbnN0YW5jZS5cbiAqL1xuXG5WdWUub3B0aW9ucyA9IHtcbiAgcmVwbGFjZTogdHJ1ZSxcbiAgZGlyZWN0aXZlczogcmVxdWlyZSgnLi9kaXJlY3RpdmVzL3B1YmxpYycpLFxuICBlbGVtZW50RGlyZWN0aXZlczogcmVxdWlyZSgnLi9kaXJlY3RpdmVzL2VsZW1lbnQnKSxcbiAgZmlsdGVyczogcmVxdWlyZSgnLi9maWx0ZXJzJyksXG4gIHRyYW5zaXRpb25zOiB7fSxcbiAgY29tcG9uZW50czoge30sXG4gIHBhcnRpYWxzOiB7fVxufVxuXG4vKipcbiAqIEJ1aWxkIHVwIHRoZSBwcm90b3R5cGVcbiAqL1xuXG52YXIgcCA9IFZ1ZS5wcm90b3R5cGVcblxuLyoqXG4gKiAkZGF0YSBoYXMgYSBzZXR0ZXIgd2hpY2ggZG9lcyBhIGJ1bmNoIG9mXG4gKiB0ZWFyZG93bi9zZXR1cCB3b3JrXG4gKi9cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHAsICckZGF0YScsIHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiAobmV3RGF0YSkge1xuICAgIGlmIChuZXdEYXRhICE9PSB0aGlzLl9kYXRhKSB7XG4gICAgICB0aGlzLl9zZXREYXRhKG5ld0RhdGEpXG4gICAgfVxuICB9XG59KVxuXG4vKipcbiAqIE1peGluIGludGVybmFsIGluc3RhbmNlIG1ldGhvZHNcbiAqL1xuXG5leHRlbmQocCwgcmVxdWlyZSgnLi9pbnN0YW5jZS9pbml0JykpXG5leHRlbmQocCwgcmVxdWlyZSgnLi9pbnN0YW5jZS9ldmVudHMnKSlcbmV4dGVuZChwLCByZXF1aXJlKCcuL2luc3RhbmNlL3N0YXRlJykpXG5leHRlbmQocCwgcmVxdWlyZSgnLi9pbnN0YW5jZS9saWZlY3ljbGUnKSlcbmV4dGVuZChwLCByZXF1aXJlKCcuL2luc3RhbmNlL21pc2MnKSlcblxuLyoqXG4gKiBNaXhpbiBwdWJsaWMgQVBJIG1ldGhvZHNcbiAqL1xuXG5leHRlbmQocCwgcmVxdWlyZSgnLi9hcGkvZGF0YScpKVxuZXh0ZW5kKHAsIHJlcXVpcmUoJy4vYXBpL2RvbScpKVxuZXh0ZW5kKHAsIHJlcXVpcmUoJy4vYXBpL2V2ZW50cycpKVxuZXh0ZW5kKHAsIHJlcXVpcmUoJy4vYXBpL2xpZmVjeWNsZScpKVxuXG5WdWUudmVyc2lvbiA9ICcxLjAuOCdcbm1vZHVsZS5leHBvcnRzID0gXy5WdWUgPSBWdWVcblxuLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBpZiAoXy5pbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18pIHtcbiAgICB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5lbWl0KCdpbml0JywgVnVlKVxuICB9XG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4vdXRpbCcpXG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi9jb25maWcnKVxudmFyIERlcCA9IHJlcXVpcmUoJy4vb2JzZXJ2ZXIvZGVwJylcbnZhciBleHBQYXJzZXIgPSByZXF1aXJlKCcuL3BhcnNlcnMvZXhwcmVzc2lvbicpXG52YXIgYmF0Y2hlciA9IHJlcXVpcmUoJy4vYmF0Y2hlcicpXG52YXIgdWlkID0gMFxuXG4vKipcbiAqIEEgd2F0Y2hlciBwYXJzZXMgYW4gZXhwcmVzc2lvbiwgY29sbGVjdHMgZGVwZW5kZW5jaWVzLFxuICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy5cbiAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtTdHJpbmd9IGV4cHJlc3Npb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogICAgICAgICAgICAgICAgIC0ge0FycmF5fSBmaWx0ZXJzXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdHdvV2F5XG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHVzZXJcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBzeW5jXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGF6eVxuICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcHJlUHJvY2Vzc11cbiAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3Bvc3RQcm9jZXNzXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cblxuZnVuY3Rpb24gV2F0Y2hlciAodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG4gIC8vIG1peCBpbiBvcHRpb25zXG4gIGlmIChvcHRpb25zKSB7XG4gICAgXy5leHRlbmQodGhpcywgb3B0aW9ucylcbiAgfVxuICB2YXIgaXNGbiA9IHR5cGVvZiBleHBPckZuID09PSAnZnVuY3Rpb24nXG4gIHRoaXMudm0gPSB2bVxuICB2bS5fd2F0Y2hlcnMucHVzaCh0aGlzKVxuICB0aGlzLmV4cHJlc3Npb24gPSBpc0ZuID8gZXhwT3JGbi50b1N0cmluZygpIDogZXhwT3JGblxuICB0aGlzLmNiID0gY2JcbiAgdGhpcy5pZCA9ICsrdWlkIC8vIHVpZCBmb3IgYmF0Y2hpbmdcbiAgdGhpcy5hY3RpdmUgPSB0cnVlXG4gIHRoaXMuZGlydHkgPSB0aGlzLmxhenkgLy8gZm9yIGxhenkgd2F0Y2hlcnNcbiAgdGhpcy5kZXBzID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuICB0aGlzLm5ld0RlcHMgPSBudWxsXG4gIHRoaXMucHJldkVycm9yID0gbnVsbCAvLyBmb3IgYXN5bmMgZXJyb3Igc3RhY2tzXG4gIC8vIHBhcnNlIGV4cHJlc3Npb24gZm9yIGdldHRlci9zZXR0ZXJcbiAgaWYgKGlzRm4pIHtcbiAgICB0aGlzLmdldHRlciA9IGV4cE9yRm5cbiAgICB0aGlzLnNldHRlciA9IHVuZGVmaW5lZFxuICB9IGVsc2Uge1xuICAgIHZhciByZXMgPSBleHBQYXJzZXIucGFyc2UoZXhwT3JGbiwgdGhpcy50d29XYXkpXG4gICAgdGhpcy5nZXR0ZXIgPSByZXMuZ2V0XG4gICAgdGhpcy5zZXR0ZXIgPSByZXMuc2V0XG4gIH1cbiAgdGhpcy52YWx1ZSA9IHRoaXMubGF6eVxuICAgID8gdW5kZWZpbmVkXG4gICAgOiB0aGlzLmdldCgpXG4gIC8vIHN0YXRlIGZvciBhdm9pZGluZyBmYWxzZSB0cmlnZ2VycyBmb3IgZGVlcCBhbmQgQXJyYXlcbiAgLy8gd2F0Y2hlcnMgZHVyaW5nIHZtLl9kaWdlc3QoKVxuICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlXG59XG5cbi8qKlxuICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0RlcH0gZGVwXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gKGRlcCkge1xuICB2YXIgaWQgPSBkZXAuaWRcbiAgaWYgKCF0aGlzLm5ld0RlcHNbaWRdKSB7XG4gICAgdGhpcy5uZXdEZXBzW2lkXSA9IGRlcFxuICAgIGlmICghdGhpcy5kZXBzW2lkXSkge1xuICAgICAgdGhpcy5kZXBzW2lkXSA9IGRlcFxuICAgICAgZGVwLmFkZFN1Yih0aGlzKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEV2YWx1YXRlIHRoZSBnZXR0ZXIsIGFuZCByZS1jb2xsZWN0IGRlcGVuZGVuY2llcy5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuYmVmb3JlR2V0KClcbiAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtXG4gIHZhciB2YWx1ZVxuICB0cnkge1xuICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnNcbiAgICApIHtcbiAgICAgIF8ud2FybihcbiAgICAgICAgJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBleHByZXNzaW9uIFwiJyArXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiArICdcIi4gJyArXG4gICAgICAgIChjb25maWcuZGVidWdcbiAgICAgICAgICA/ICcnXG4gICAgICAgICAgOiAnVHVybiBvbiBkZWJ1ZyBtb2RlIHRvIHNlZSBzdGFjayB0cmFjZS4nXG4gICAgICAgICksIGVcbiAgICAgIClcbiAgICB9XG4gIH1cbiAgLy8gXCJ0b3VjaFwiIGV2ZXJ5IHByb3BlcnR5IHNvIHRoZXkgYXJlIGFsbCB0cmFja2VkIGFzXG4gIC8vIGRlcGVuZGVuY2llcyBmb3IgZGVlcCB3YXRjaGluZ1xuICBpZiAodGhpcy5kZWVwKSB7XG4gICAgdHJhdmVyc2UodmFsdWUpXG4gIH1cbiAgaWYgKHRoaXMucHJlUHJvY2Vzcykge1xuICAgIHZhbHVlID0gdGhpcy5wcmVQcm9jZXNzKHZhbHVlKVxuICB9XG4gIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIG51bGwsIHRoaXMuZmlsdGVycywgZmFsc2UpXG4gIH1cbiAgaWYgKHRoaXMucG9zdFByb2Nlc3MpIHtcbiAgICB2YWx1ZSA9IHRoaXMucG9zdFByb2Nlc3ModmFsdWUpXG4gIH1cbiAgdGhpcy5hZnRlckdldCgpXG4gIHJldHVybiB2YWx1ZVxufVxuXG4vKipcbiAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm1cbiAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyhcbiAgICAgIHZhbHVlLCB0aGlzLnZhbHVlLCB0aGlzLmZpbHRlcnMsIHRydWUpXG4gIH1cbiAgdHJ5IHtcbiAgICB0aGlzLnNldHRlci5jYWxsKHNjb3BlLCBzY29wZSwgdmFsdWUpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnNcbiAgICApIHtcbiAgICAgIF8ud2FybihcbiAgICAgICAgJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBzZXR0ZXIgXCInICtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uICsgJ1wiJywgZVxuICAgICAgKVxuICAgIH1cbiAgfVxuICAvLyB0d28td2F5IHN5bmMgZm9yIHYtZm9yIGFsaWFzXG4gIHZhciBmb3JDb250ZXh0ID0gc2NvcGUuJGZvckNvbnRleHRcbiAgaWYgKGZvckNvbnRleHQgJiYgZm9yQ29udGV4dC5hbGlhcyA9PT0gdGhpcy5leHByZXNzaW9uKSB7XG4gICAgaWYgKGZvckNvbnRleHQuZmlsdGVycykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBfLndhcm4oXG4gICAgICAgICdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHR3by13YXkgYmluZGluZyBvbiAnICtcbiAgICAgICAgJ2Egdi1mb3IgYWxpYXMgKCcgKyB0aGlzLmV4cHJlc3Npb24gKyAnKSwgYW5kIHRoZSAnICtcbiAgICAgICAgJ3YtZm9yIGhhcyBmaWx0ZXJzLiBUaGlzIHdpbGwgbm90IHdvcmsgcHJvcGVybHkuICcgK1xuICAgICAgICAnRWl0aGVyIHJlbW92ZSB0aGUgZmlsdGVycyBvciB1c2UgYW4gYXJyYXkgb2YgJyArXG4gICAgICAgICdvYmplY3RzIGFuZCBiaW5kIHRvIG9iamVjdCBwcm9wZXJ0aWVzIGluc3RlYWQuJ1xuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGZvckNvbnRleHQuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzY29wZS4ka2V5KSB7IC8vIG9yaWdpbmFsIGlzIGFuIG9iamVjdFxuICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlW3Njb3BlLiRrZXldID0gdmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvckNvbnRleHQucmF3VmFsdWUuJHNldChzY29wZS4kaW5kZXgsIHZhbHVlKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cblxuLyoqXG4gKiBQcmVwYXJlIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYmVmb3JlR2V0ID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0ID0gdGhpc1xuICB0aGlzLm5ld0RlcHMgPSBPYmplY3QuY3JlYXRlKG51bGwpXG59XG5cbi8qKlxuICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5hZnRlckdldCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldCA9IG51bGxcbiAgdmFyIGlkcyA9IE9iamVjdC5rZXlzKHRoaXMuZGVwcylcbiAgdmFyIGkgPSBpZHMubGVuZ3RoXG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgaWQgPSBpZHNbaV1cbiAgICBpZiAoIXRoaXMubmV3RGVwc1tpZF0pIHtcbiAgICAgIHRoaXMuZGVwc1tpZF0ucmVtb3ZlU3ViKHRoaXMpXG4gICAgfVxuICB9XG4gIHRoaXMuZGVwcyA9IHRoaXMubmV3RGVwc1xufVxuXG4vKipcbiAqIFN1YnNjcmliZXIgaW50ZXJmYWNlLlxuICogV2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRlcGVuZGVuY3kgY2hhbmdlcy5cbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNoYWxsb3dcbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoc2hhbGxvdykge1xuICBpZiAodGhpcy5sYXp5KSB7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWVcbiAgfSBlbHNlIGlmICh0aGlzLnN5bmMgfHwgIWNvbmZpZy5hc3luYykge1xuICAgIHRoaXMucnVuKClcbiAgfSBlbHNlIHtcbiAgICAvLyBpZiBxdWV1ZWQsIG9ubHkgb3ZlcndyaXRlIHNoYWxsb3cgd2l0aCBub24tc2hhbGxvdyxcbiAgICAvLyBidXQgbm90IHRoZSBvdGhlciB3YXkgYXJvdW5kLlxuICAgIHRoaXMuc2hhbGxvdyA9IHRoaXMucXVldWVkXG4gICAgICA/IHNoYWxsb3dcbiAgICAgICAgPyB0aGlzLnNoYWxsb3dcbiAgICAgICAgOiBmYWxzZVxuICAgICAgOiAhIXNoYWxsb3dcbiAgICB0aGlzLnF1ZXVlZCA9IHRydWVcbiAgICAvLyByZWNvcmQgYmVmb3JlLXB1c2ggZXJyb3Igc3RhY2sgaW4gZGVidWcgbW9kZVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1Zykge1xuICAgICAgdGhpcy5wcmV2RXJyb3IgPSBuZXcgRXJyb3IoJ1t2dWVdIGFzeW5jIHN0YWNrIHRyYWNlJylcbiAgICB9XG4gICAgYmF0Y2hlci5wdXNoKHRoaXMpXG4gIH1cbn1cblxuLyoqXG4gKiBCYXRjaGVyIGpvYiBpbnRlcmZhY2UuXG4gKiBXaWxsIGJlIGNhbGxlZCBieSB0aGUgYmF0Y2hlci5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KClcbiAgICBpZiAoXG4gICAgICB2YWx1ZSAhPT0gdGhpcy52YWx1ZSB8fFxuICAgICAgLy8gRGVlcCB3YXRjaGVycyBhbmQgQXJyYXkgd2F0Y2hlcnMgc2hvdWxkIGZpcmUgZXZlblxuICAgICAgLy8gd2hlbiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUsIGJlY2F1c2UgdGhlIHZhbHVlIG1heVxuICAgICAgLy8gaGF2ZSBtdXRhdGVkOyBidXQgb25seSBkbyBzbyBpZiB0aGlzIGlzIGFcbiAgICAgIC8vIG5vbi1zaGFsbG93IHVwZGF0ZSAoY2F1c2VkIGJ5IGEgdm0gZGlnZXN0KS5cbiAgICAgICgoXy5pc0FycmF5KHZhbHVlKSB8fCB0aGlzLmRlZXApICYmICF0aGlzLnNoYWxsb3cpXG4gICAgKSB7XG4gICAgICAvLyBzZXQgbmV3IHZhbHVlXG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlXG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWVcbiAgICAgIC8vIGluIGRlYnVnICsgYXN5bmMgbW9kZSwgd2hlbiBhIHdhdGNoZXIgY2FsbGJhY2tzXG4gICAgICAvLyB0aHJvd3MsIHdlIGFsc28gdGhyb3cgdGhlIHNhdmVkIGJlZm9yZS1wdXNoIGVycm9yXG4gICAgICAvLyBzbyB0aGUgZnVsbCBjcm9zcy10aWNrIHN0YWNrIHRyYWNlIGlzIGF2YWlsYWJsZS5cbiAgICAgIHZhciBwcmV2RXJyb3IgPSB0aGlzLnByZXZFcnJvclxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICAgIGNvbmZpZy5kZWJ1ZyAmJiBwcmV2RXJyb3IpIHtcbiAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBudWxsXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSlcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIF8ubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3cgcHJldkVycm9yXG4gICAgICAgICAgfSwgMClcbiAgICAgICAgICB0aHJvdyBlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2VcbiAgfVxufVxuXG4vKipcbiAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci5cbiAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gYXZvaWQgb3ZlcndyaXRpbmcgYW5vdGhlciB3YXRjaGVyIHRoYXQgaXMgYmVpbmdcbiAgLy8gY29sbGVjdGVkLlxuICB2YXIgY3VycmVudCA9IERlcC50YXJnZXRcbiAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0KClcbiAgdGhpcy5kaXJ0eSA9IGZhbHNlXG4gIERlcC50YXJnZXQgPSBjdXJyZW50XG59XG5cbi8qKlxuICogRGVwZW5kIG9uIGFsbCBkZXBzIGNvbGxlY3RlZCBieSB0aGlzIHdhdGNoZXIuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZGVwSWRzID0gT2JqZWN0LmtleXModGhpcy5kZXBzKVxuICB2YXIgaSA9IGRlcElkcy5sZW5ndGhcbiAgd2hpbGUgKGktLSkge1xuICAgIHRoaXMuZGVwc1tkZXBJZHNbaV1dLmRlcGVuZCgpXG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YmNyaWJlciBsaXN0LlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0XG4gICAgLy8gd2UgY2FuIHNraXAgdGhpcyBpZiB0aGUgdm0gaWYgYmVpbmcgZGVzdHJveWVkXG4gICAgLy8gd2hpY2ggY2FuIGltcHJvdmUgdGVhcmRvd24gcGVyZm9ybWFuY2UuXG4gICAgaWYgKCF0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkKSB7XG4gICAgICB0aGlzLnZtLl93YXRjaGVycy4kcmVtb3ZlKHRoaXMpXG4gICAgfVxuICAgIHZhciBkZXBJZHMgPSBPYmplY3Qua2V5cyh0aGlzLmRlcHMpXG4gICAgdmFyIGkgPSBkZXBJZHMubGVuZ3RoXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy5kZXBzW2RlcElkc1tpXV0ucmVtb3ZlU3ViKHRoaXMpXG4gICAgfVxuICAgIHRoaXMuYWN0aXZlID0gZmFsc2VcbiAgICB0aGlzLnZtID0gdGhpcy5jYiA9IHRoaXMudmFsdWUgPSBudWxsXG4gIH1cbn1cblxuLyoqXG4gKiBSZWNydXNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3QgdG8gZXZva2UgYWxsIGNvbnZlcnRlZFxuICogZ2V0dGVycywgc28gdGhhdCBldmVyeSBuZXN0ZWQgcHJvcGVydHkgaW5zaWRlIHRoZSBvYmplY3RcbiAqIGlzIGNvbGxlY3RlZCBhcyBhIFwiZGVlcFwiIGRlcGVuZGVuY3kuXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiB0cmF2ZXJzZSAodmFsKSB7XG4gIHZhciBpLCBrZXlzXG4gIGlmIChfLmlzQXJyYXkodmFsKSkge1xuICAgIGkgPSB2YWwubGVuZ3RoXG4gICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2ldKVxuICB9IGVsc2UgaWYgKF8uaXNPYmplY3QodmFsKSkge1xuICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpXG4gICAgaSA9IGtleXMubGVuZ3RoXG4gICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2tleXNbaV1dKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gV2F0Y2hlclxuIiwidmFyIFZ1ZSA9IHJlcXVpcmUoJ3Z1ZScpO1xuVnVlLmNvbmZpZy5kZWJ1ZyA9IHRydWU7XG5WdWUudXNlKHJlcXVpcmUoJ3Z1ZS1yZXNvdXJjZScpKTtcblxubmV3IFZ1ZSh7XG4gICAgZWw6ICcjY29udGFpbmVyJyxcbiAgICBkYXRhOiB7XG4gICAgICAgIGZ1bGxSZXBvTmFtZTogJycsXG4gICAgICAgIHVzZXJuYW1lOiAnJyxcbiAgICAgICAgcmVwbzogJydcbiAgICB9LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgICAgY2hhbmdlUmVwbzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc3BsaXREYXRhID0gdGhpcy5mdWxsUmVwb05hbWUuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgIHRoaXMudXNlcm5hbWUgPSBzcGxpdERhdGFbMF07XG4gICAgICAgICAgICB0aGlzLnJlcG8gPSBzcGxpdERhdGFbMV07XG5cbiAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXAoXCJWdWUgRGF0YVwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZnVsbFJlcG9OYW1lOlwiLCB0aGlzLmZ1bGxSZXBvTmFtZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXJuYW1lOlwiLCB0aGlzLnVzZXJuYW1lKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVwbzpcIiwgdGhpcy5yZXBvKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoXCJWdWUgRGF0YVwiKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY29tcG9uZW50czoge1xuICAgICAgICBnaXRodWJGaWxlRXhwbG9yZXI6IHJlcXVpcmUoJy4vY29tcG9uZW50cy9naXRodWItZmlsZS1leHBsb3JlcicpXG4gICAgfVxufSk7IiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cdHRlbXBsYXRlOiByZXF1aXJlKFwiLi90ZW1wbGF0ZS5odG1sXCIpLFxuXHRkYXRhOiBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHBhdGg6ICcvJyxcblx0XHRcdGZpbGVzOiBbXVxuXHRcdH07XG5cdH0sXG5cblx0cHJvcHM6IHtcblx0XHR1c2VybmFtZToge1xuXHRcdFx0dHlwZTogU3RyaW5nLFxuXHRcdFx0cmVxdWlyZWQ6IHRydWVcblx0XHR9LFxuXG5cdFx0cmVwbzoge1xuXHRcdFx0dHlwZTogU3RyaW5nLFxuXHRcdFx0cmVxdWlyZWQ6IHRydWVcblx0XHR9XG5cdH0sXG5cblx0Y3JlYXRlZDogZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0aGlzLnVzZXJuYW1lICYmIHRoaXMucmVwbykge1xuXHRcdFx0dGhpcy5nZXRGaWxlcygpXG5cdFx0fVxuXHR9LFxuXG5cdG1ldGhvZHM6IHtcblx0XHRnZXRGaWxlczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy4kaHR0cC5nZXQoJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJyArIFxuICAgICAgICAgICAgXHR0aGlzLmZ1bGxSZXBvVXJsICsgJy9jb250ZW50cycgKyB0aGlzLnBhdGgsIFxuICAgICAgICAgICAgXHRmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgXHRcdHRoaXMuZmlsZXMgPSBkYXRhXG4gICAgICAgICAgICBcdH0pXG5cdFx0fVxuXHR9LFxuXG5cdGNvbXB1dGVkOiB7XG5cdFx0ZnVsbFJlcG9Vcmw6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMudXNlcm5hbWUgKyAnLycgKyB0aGlzLnJlcG9cblx0XHR9XG5cdH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9ICc8ZGl2IGNsYXNzPVwicm93XCI+XFxuXHQ8ZGl2IGNsYXNzPVwiY29sLW1kLTEyXCI+XFxuXHRcdDx0YWJsZSBjbGFzcz1cInRhYmxlXCI+XFxuXHRcdFx0PGNhcHRpb24+IHt7cGF0aH19IDwvY2FwdGlvbj5cXG5cdFx0PC90YWJsZT5cXG5cdDwvZGl2PlxcbjwvZGl2Pic7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
